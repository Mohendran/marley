{"version":3,"file":"scripts.bundle.js","sources":["webpack:///webpack/bootstrap 9c79c23e79f488762fab?f11d","webpack:///./public/scripts.bundle.js"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9c79c23e79f488762fab","!(function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,\"a\",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=\"\",e(e.s=11)})({0:function(t,e){var i;i=(function(){return this})();try{i=i||Function(\"return this\")()||(0,eval)(\"this\")}catch(t){\"object\"===typeof window&&(i=window)}t.exports=i},11:function(t,e,i){t.exports=i(5)},5:function(t,e,i){(function(i){var n,r,n,r,o,o;!(function(){\"use strict\";function t(t,e){if(t){if(e.element_.classList.contains(e.CssClasses_.MDL_JS_RIPPLE_EFFECT)){var i=document.createElement(\"span\");i.classList.add(e.CssClasses_.MDL_RIPPLE_CONTAINER),i.classList.add(e.CssClasses_.MDL_JS_RIPPLE_EFFECT);var n=document.createElement(\"span\");n.classList.add(e.CssClasses_.MDL_RIPPLE),i.appendChild(n),t.appendChild(i)}t.addEventListener(\"click\",(function(i){if(\"#\"===t.getAttribute(\"href\").charAt(0)){i.preventDefault();var n=t.href.split(\"#\")[1],r=e.element_.querySelector(\"#\"+n);e.resetTabState_(),e.resetPanelState_(),t.classList.add(e.CssClasses_.ACTIVE_CLASS),r.classList.add(e.CssClasses_.ACTIVE_CLASS)}}))}}function e(t,e,i,n){function r(){var r=t.href.split(\"#\")[1],o=n.content_.querySelector(\"#\"+r);n.resetTabState_(e),n.resetPanelState_(i),t.classList.add(n.CssClasses_.IS_ACTIVE),o.classList.add(n.CssClasses_.IS_ACTIVE)}if(n.tabBar_.classList.contains(n.CssClasses_.JS_RIPPLE_EFFECT)){var o=document.createElement(\"span\");o.classList.add(n.CssClasses_.RIPPLE_CONTAINER),o.classList.add(n.CssClasses_.JS_RIPPLE_EFFECT);var a=document.createElement(\"span\");a.classList.add(n.CssClasses_.RIPPLE),o.appendChild(a),t.appendChild(o)}n.tabBar_.classList.contains(n.CssClasses_.TAB_MANUAL_SWITCH)||t.addEventListener(\"click\",(function(e){\"#\"===t.getAttribute(\"href\").charAt(0)&&(e.preventDefault(),r())})),t.show=r}var i={upgradeDom:function(t,e){},upgradeElement:function(t,e){},upgradeElements:function(t){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(t,e){},register:function(t){},downgradeElements:function(t){}};i=(function(){function t(t,e){for(var i=0;i<p.length;i++)if(p[i].className===t)return\"undefined\"!=typeof e&&(p[i]=e),p[i];return!1}function e(t){var e=t.getAttribute(\"data-upgraded\");return null===e?[\"\"]:e.split(\",\")}function i(t,i){return-1!==e(t).indexOf(i)}function n(t,e,i){if(\"CustomEvent\"in window&&\"function\"==typeof window.CustomEvent)return new CustomEvent(t,{bubbles:e,cancelable:i});var n=document.createEvent(\"Events\");return n.initEvent(t,e,i),n}function r(e,i){if(\"undefined\"==typeof e&&\"undefined\"==typeof i)for(var n=0;n<p.length;n++)r(p[n].className,p[n].cssClass);else{var a=e;if(\"undefined\"==typeof i){var s=t(a);s&&(i=s.cssClass)}for(var l=document.querySelectorAll(\".\"+i),u=0;u<l.length;u++)o(l[u],a)}}function o(r,o){if(!(\"object\"==typeof r&&r instanceof Element))throw new Error(\"Invalid argument provided to upgrade MDL element.\");var a=n(\"mdl-componentupgrading\",!0,!0);if(r.dispatchEvent(a),!a.defaultPrevented){var s=e(r),l=[];if(o)i(r,o)||l.push(t(o));else{var u=r.classList;p.forEach((function(t){u.contains(t.cssClass)&&-1===l.indexOf(t)&&!i(r,t.className)&&l.push(t)}))}for(var c,h=0,m=l.length;h<m;h++){if(!(c=l[h]))throw new Error(\"Unable to find a registered component for the given class.\");s.push(c.className),r.setAttribute(\"data-upgraded\",s.join(\",\"));var _=new c.classConstructor(r);_[f]=c,d.push(_);for(var y=0,g=c.callbacks.length;y<g;y++)c.callbacks[y](r);c.widget&&(r[c.className]=_);var v=n(\"mdl-componentupgraded\",!0,!1);r.dispatchEvent(v)}}}function a(t){Array.isArray(t)||(t=t instanceof Element?[t]:Array.prototype.slice.call(t));for(var e,i=0,n=t.length;i<n;i++)(e=t[i])instanceof HTMLElement&&(o(e),e.children.length>0&&a(e.children))}function s(e){var i=\"undefined\"==typeof e.widget&&\"undefined\"==typeof e.widget,n=!0;i||(n=e.widget||e.widget);var r={classConstructor:e.constructor||e.constructor,className:e.classAsString||e.classAsString,cssClass:e.cssClass||e.cssClass,widget:n,callbacks:[]};if(p.forEach((function(t){if(t.cssClass===r.cssClass)throw new Error(\"The provided cssClass has already been registered: \"+t.cssClass);if(t.className===r.className)throw new Error(\"The provided className has already been registered\")})),e.constructor.prototype.hasOwnProperty(f))throw new Error(\"MDL component classes must not have \"+f+\" defined as a property.\");t(e.classAsString,r)||p.push(r)}function l(e,i){var n=t(e);n&&n.callbacks.push(i)}function u(){for(var t=0;t<p.length;t++)r(p[t].className)}function c(t){if(t){var e=d.indexOf(t);d.splice(e,1);var i=t.element_.getAttribute(\"data-upgraded\").split(\",\"),r=i.indexOf(t[f].classAsString);i.splice(r,1),t.element_.setAttribute(\"data-upgraded\",i.join(\",\"));var o=n(\"mdl-componentdowngraded\",!0,!1);t.element_.dispatchEvent(o)}}function h(t){var e=function(t){d.filter((function(e){return e.element_===t})).forEach(c)};if(t instanceof Array||t instanceof NodeList)for(var i=0;i<t.length;i++)e(t[i]);else{if(!(t instanceof Node))throw new Error(\"Invalid argument provided to downgrade MDL nodes.\");e(t)}}var p=[],d=[],f=\"mdlComponentConfigInternal_\";return{upgradeDom:r,upgradeElement:o,upgradeElements:a,upgradeAllRegistered:u,registerUpgradedCallback:l,register:s,downgradeElements:h}})(),i.ComponentConfigPublic,i.ComponentConfig,i.Component,i.upgradeDom=i.upgradeDom,i.upgradeElement=i.upgradeElement,i.upgradeElements=i.upgradeElements,i.upgradeAllRegistered=i.upgradeAllRegistered,i.registerUpgradedCallback=i.registerUpgradedCallback,i.register=i.register,i.downgradeElements=i.downgradeElements,window.componentHandler=i,window.componentHandler=i,window.addEventListener(\"load\",(function(){\"classList\"in document.createElement(\"div\")&&\"querySelector\"in document&&\"addEventListener\"in window&&Array.prototype.forEach?(document.documentElement.classList.add(\"mdl-js\"),i.upgradeAllRegistered()):(i.upgradeElement=function(){},i.register=function(){})})),Date.now||(Date.now=function(){return(new Date).getTime()},Date.now=Date.now);for(var n=[\"webkit\",\"moz\"],r=0;r<n.length&&!window.requestAnimationFrame;++r){var o=n[r];window.requestAnimationFrame=window[o+\"RequestAnimationFrame\"],window.cancelAnimationFrame=window[o+\"CancelAnimationFrame\"]||window[o+\"CancelRequestAnimationFrame\"],window.requestAnimationFrame=window.requestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var a=0;window.requestAnimationFrame=function(t){var e=Date.now(),i=Math.max(a+16,e);return setTimeout((function(){t(a=i)}),i-e)},window.cancelAnimationFrame=clearTimeout,window.requestAnimationFrame=window.requestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame}var s=function(t){this.element_=t,this.init()};window.MaterialButton=s,s.prototype.Constant_={},s.prototype.CssClasses_={RIPPLE_EFFECT:\"mdl-js-ripple-effect\",RIPPLE_CONTAINER:\"mdl-button__ripple-container\",RIPPLE:\"mdl-ripple\"},s.prototype.blurHandler_=function(t){t&&this.element_.blur()},s.prototype.disable=function(){this.element_.disabled=!0},s.prototype.disable=s.prototype.disable,s.prototype.enable=function(){this.element_.disabled=!1},s.prototype.enable=s.prototype.enable,s.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var t=document.createElement(\"span\");t.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement(\"span\"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),t.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener(\"mouseup\",this.boundRippleBlurHandler),this.element_.appendChild(t)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener(\"mouseup\",this.boundButtonBlurHandler),this.element_.addEventListener(\"mouseleave\",this.boundButtonBlurHandler)}},i.register({constructor:s,classAsString:\"MaterialButton\",cssClass:\"mdl-js-button\",widget:!0});var l=function(t){this.element_=t,this.init()};window.MaterialCheckbox=l,l.prototype.Constant_={TINY_TIMEOUT:.001},l.prototype.CssClasses_={INPUT:\"mdl-checkbox__input\",BOX_OUTLINE:\"mdl-checkbox__box-outline\",FOCUS_HELPER:\"mdl-checkbox__focus-helper\",TICK_OUTLINE:\"mdl-checkbox__tick-outline\",RIPPLE_EFFECT:\"mdl-js-ripple-effect\",RIPPLE_IGNORE_EVENTS:\"mdl-js-ripple-effect--ignore-events\",RIPPLE_CONTAINER:\"mdl-checkbox__ripple-container\",RIPPLE_CENTER:\"mdl-ripple--center\",RIPPLE:\"mdl-ripple\",IS_FOCUSED:\"is-focused\",IS_DISABLED:\"is-disabled\",IS_CHECKED:\"is-checked\",IS_UPGRADED:\"is-upgraded\"},l.prototype.onChange_=function(t){this.updateClasses_()},l.prototype.onFocus_=function(t){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},l.prototype.onBlur_=function(t){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},l.prototype.onMouseUp_=function(t){this.blur_()},l.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},l.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},l.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},l.prototype.checkToggleState=l.prototype.checkToggleState,l.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},l.prototype.checkDisabled=l.prototype.checkDisabled,l.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},l.prototype.disable=l.prototype.disable,l.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},l.prototype.enable=l.prototype.enable,l.prototype.check=function(){this.inputElement_.checked=!0,this.updateClasses_()},l.prototype.check=l.prototype.check,l.prototype.uncheck=function(){this.inputElement_.checked=!1,this.updateClasses_()},l.prototype.uncheck=l.prototype.uncheck,l.prototype.init=function(){if(this.element_){this.inputElement_=this.element_.querySelector(\".\"+this.CssClasses_.INPUT);var t=document.createElement(\"span\");t.classList.add(this.CssClasses_.BOX_OUTLINE);var e=document.createElement(\"span\");e.classList.add(this.CssClasses_.FOCUS_HELPER);var i=document.createElement(\"span\");if(i.classList.add(this.CssClasses_.TICK_OUTLINE),t.appendChild(i),this.element_.appendChild(e),this.element_.appendChild(t),this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement(\"span\"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.boundRippleMouseUp=this.onMouseUp_.bind(this),this.rippleContainerElement_.addEventListener(\"mouseup\",this.boundRippleMouseUp);var n=document.createElement(\"span\");n.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(n),this.element_.appendChild(this.rippleContainerElement_)}this.boundInputOnChange=this.onChange_.bind(this),this.boundInputOnFocus=this.onFocus_.bind(this),this.boundInputOnBlur=this.onBlur_.bind(this),this.boundElementMouseUp=this.onMouseUp_.bind(this),this.inputElement_.addEventListener(\"change\",this.boundInputOnChange),this.inputElement_.addEventListener(\"focus\",this.boundInputOnFocus),this.inputElement_.addEventListener(\"blur\",this.boundInputOnBlur),this.element_.addEventListener(\"mouseup\",this.boundElementMouseUp),this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},i.register({constructor:l,classAsString:\"MaterialCheckbox\",cssClass:\"mdl-js-checkbox\",widget:!0});var u=function(t){this.element_=t,this.init()};window.MaterialIconToggle=u,u.prototype.Constant_={TINY_TIMEOUT:.001},u.prototype.CssClasses_={INPUT:\"mdl-icon-toggle__input\",JS_RIPPLE_EFFECT:\"mdl-js-ripple-effect\",RIPPLE_IGNORE_EVENTS:\"mdl-js-ripple-effect--ignore-events\",RIPPLE_CONTAINER:\"mdl-icon-toggle__ripple-container\",RIPPLE_CENTER:\"mdl-ripple--center\",RIPPLE:\"mdl-ripple\",IS_FOCUSED:\"is-focused\",IS_DISABLED:\"is-disabled\",IS_CHECKED:\"is-checked\"},u.prototype.onChange_=function(t){this.updateClasses_()},u.prototype.onFocus_=function(t){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},u.prototype.onBlur_=function(t){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},u.prototype.onMouseUp_=function(t){this.blur_()},u.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},u.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},u.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},u.prototype.checkToggleState=u.prototype.checkToggleState,u.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},u.prototype.checkDisabled=u.prototype.checkDisabled,u.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},u.prototype.disable=u.prototype.disable,u.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},u.prototype.enable=u.prototype.enable,u.prototype.check=function(){this.inputElement_.checked=!0,this.updateClasses_()},u.prototype.check=u.prototype.check,u.prototype.uncheck=function(){this.inputElement_.checked=!1,this.updateClasses_()},u.prototype.uncheck=u.prototype.uncheck,u.prototype.init=function(){if(this.element_){if(this.inputElement_=this.element_.querySelector(\".\"+this.CssClasses_.INPUT),this.element_.classList.contains(this.CssClasses_.JS_RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement(\"span\"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.JS_RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.boundRippleMouseUp=this.onMouseUp_.bind(this),this.rippleContainerElement_.addEventListener(\"mouseup\",this.boundRippleMouseUp);var t=document.createElement(\"span\");t.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(t),this.element_.appendChild(this.rippleContainerElement_)}this.boundInputOnChange=this.onChange_.bind(this),this.boundInputOnFocus=this.onFocus_.bind(this),this.boundInputOnBlur=this.onBlur_.bind(this),this.boundElementOnMouseUp=this.onMouseUp_.bind(this),this.inputElement_.addEventListener(\"change\",this.boundInputOnChange),this.inputElement_.addEventListener(\"focus\",this.boundInputOnFocus),this.inputElement_.addEventListener(\"blur\",this.boundInputOnBlur),this.element_.addEventListener(\"mouseup\",this.boundElementOnMouseUp),this.updateClasses_(),this.element_.classList.add(\"is-upgraded\")}},i.register({constructor:u,classAsString:\"MaterialIconToggle\",cssClass:\"mdl-js-icon-toggle\",widget:!0});var c=function(t){this.element_=t,this.init()};window.MaterialMenu=c,c.prototype.Constant_={TRANSITION_DURATION_SECONDS:.3,TRANSITION_DURATION_FRACTION:.8,CLOSE_TIMEOUT:150},c.prototype.Keycodes_={ENTER:13,ESCAPE:27,SPACE:32,UP_ARROW:38,DOWN_ARROW:40},c.prototype.CssClasses_={CONTAINER:\"mdl-menu__container\",OUTLINE:\"mdl-menu__outline\",ITEM:\"mdl-menu__item\",ITEM_RIPPLE_CONTAINER:\"mdl-menu__item-ripple-container\",RIPPLE_EFFECT:\"mdl-js-ripple-effect\",RIPPLE_IGNORE_EVENTS:\"mdl-js-ripple-effect--ignore-events\",RIPPLE:\"mdl-ripple\",IS_UPGRADED:\"is-upgraded\",IS_VISIBLE:\"is-visible\",IS_ANIMATING:\"is-animating\",BOTTOM_LEFT:\"mdl-menu--bottom-left\",BOTTOM_RIGHT:\"mdl-menu--bottom-right\",TOP_LEFT:\"mdl-menu--top-left\",TOP_RIGHT:\"mdl-menu--top-right\",UNALIGNED:\"mdl-menu--unaligned\"},c.prototype.init=function(){if(this.element_){var t=document.createElement(\"div\");t.classList.add(this.CssClasses_.CONTAINER),this.element_.parentElement.insertBefore(t,this.element_),this.element_.parentElement.removeChild(this.element_),t.appendChild(this.element_),this.container_=t;var e=document.createElement(\"div\");e.classList.add(this.CssClasses_.OUTLINE),this.outline_=e,t.insertBefore(e,this.element_);var i=this.element_.getAttribute(\"for\")||this.element_.getAttribute(\"data-mdl-for\"),n=null;i&&(n=document.getElementById(i))&&(this.forElement_=n,n.addEventListener(\"click\",this.handleForClick_.bind(this)),n.addEventListener(\"keydown\",this.handleForKeyboardEvent_.bind(this)));var r=this.element_.querySelectorAll(\".\"+this.CssClasses_.ITEM);this.boundItemKeydown_=this.handleItemKeyboardEvent_.bind(this),this.boundItemClick_=this.handleItemClick_.bind(this);for(var o=0;o<r.length;o++)r[o].addEventListener(\"click\",this.boundItemClick_),r[o].tabIndex=\"-1\",r[o].addEventListener(\"keydown\",this.boundItemKeydown_);if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT))for(this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),o=0;o<r.length;o++){var a=r[o],s=document.createElement(\"span\");s.classList.add(this.CssClasses_.ITEM_RIPPLE_CONTAINER);var l=document.createElement(\"span\");l.classList.add(this.CssClasses_.RIPPLE),s.appendChild(l),a.appendChild(s),a.classList.add(this.CssClasses_.RIPPLE_EFFECT)}this.element_.classList.contains(this.CssClasses_.BOTTOM_LEFT)&&this.outline_.classList.add(this.CssClasses_.BOTTOM_LEFT),this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)&&this.outline_.classList.add(this.CssClasses_.BOTTOM_RIGHT),this.element_.classList.contains(this.CssClasses_.TOP_LEFT)&&this.outline_.classList.add(this.CssClasses_.TOP_LEFT),this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)&&this.outline_.classList.add(this.CssClasses_.TOP_RIGHT),this.element_.classList.contains(this.CssClasses_.UNALIGNED)&&this.outline_.classList.add(this.CssClasses_.UNALIGNED),t.classList.add(this.CssClasses_.IS_UPGRADED)}},c.prototype.handleForClick_=function(t){if(this.element_&&this.forElement_){var e=this.forElement_.getBoundingClientRect(),i=this.forElement_.parentElement.getBoundingClientRect();this.element_.classList.contains(this.CssClasses_.UNALIGNED)||(this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)?(this.container_.style.right=i.right-e.right+\"px\",this.container_.style.top=this.forElement_.offsetTop+this.forElement_.offsetHeight+\"px\"):this.element_.classList.contains(this.CssClasses_.TOP_LEFT)?(this.container_.style.left=this.forElement_.offsetLeft+\"px\",this.container_.style.bottom=i.bottom-e.top+\"px\"):this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?(this.container_.style.right=i.right-e.right+\"px\",this.container_.style.bottom=i.bottom-e.top+\"px\"):(this.container_.style.left=this.forElement_.offsetLeft+\"px\",this.container_.style.top=this.forElement_.offsetTop+this.forElement_.offsetHeight+\"px\"))}this.toggle(t)},c.prototype.handleForKeyboardEvent_=function(t){if(this.element_&&this.container_&&this.forElement_){var e=this.element_.querySelectorAll(\".\"+this.CssClasses_.ITEM+\":not([disabled])\");e&&e.length>0&&this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)&&(t.keyCode===this.Keycodes_.UP_ARROW?(t.preventDefault(),e[e.length-1].focus()):t.keyCode===this.Keycodes_.DOWN_ARROW&&(t.preventDefault(),e[0].focus()))}},c.prototype.handleItemKeyboardEvent_=function(t){if(this.element_&&this.container_){var e=this.element_.querySelectorAll(\".\"+this.CssClasses_.ITEM+\":not([disabled])\");if(e&&e.length>0&&this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)){var i=Array.prototype.slice.call(e).indexOf(t.target);if(t.keyCode===this.Keycodes_.UP_ARROW)t.preventDefault(),i>0?e[i-1].focus():e[e.length-1].focus();else if(t.keyCode===this.Keycodes_.DOWN_ARROW)t.preventDefault(),e.length>i+1?e[i+1].focus():e[0].focus();else if(t.keyCode===this.Keycodes_.SPACE||t.keyCode===this.Keycodes_.ENTER){t.preventDefault();var n=new MouseEvent(\"mousedown\");t.target.dispatchEvent(n),n=new MouseEvent(\"mouseup\"),t.target.dispatchEvent(n),t.target.click()}else t.keyCode===this.Keycodes_.ESCAPE&&(t.preventDefault(),this.hide())}}},c.prototype.handleItemClick_=function(t){t.target.hasAttribute(\"disabled\")?t.stopPropagation():(this.closing_=!0,window.setTimeout(function(t){this.hide(),this.closing_=!1}.bind(this),this.Constant_.CLOSE_TIMEOUT))},c.prototype.applyClip_=function(t,e){this.element_.classList.contains(this.CssClasses_.UNALIGNED)?this.element_.style.clip=\"\":this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)?this.element_.style.clip=\"rect(0 \"+e+\"px 0 \"+e+\"px)\":this.element_.classList.contains(this.CssClasses_.TOP_LEFT)?this.element_.style.clip=\"rect(\"+t+\"px 0 \"+t+\"px 0)\":this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?this.element_.style.clip=\"rect(\"+t+\"px \"+e+\"px \"+t+\"px \"+e+\"px)\":this.element_.style.clip=\"\"},c.prototype.removeAnimationEndListener_=function(t){t.target.classList.remove(c.prototype.CssClasses_.IS_ANIMATING)},c.prototype.addAnimationEndListener_=function(){this.element_.addEventListener(\"transitionend\",this.removeAnimationEndListener_),this.element_.addEventListener(\"webkitTransitionEnd\",this.removeAnimationEndListener_)},c.prototype.show=function(t){if(this.element_&&this.container_&&this.outline_){var e=this.element_.getBoundingClientRect().height,i=this.element_.getBoundingClientRect().width;this.container_.style.width=i+\"px\",this.container_.style.height=e+\"px\",this.outline_.style.width=i+\"px\",this.outline_.style.height=e+\"px\";for(var n=this.Constant_.TRANSITION_DURATION_SECONDS*this.Constant_.TRANSITION_DURATION_FRACTION,r=this.element_.querySelectorAll(\".\"+this.CssClasses_.ITEM),o=0;o<r.length;o++){var a=null;a=this.element_.classList.contains(this.CssClasses_.TOP_LEFT)||this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?(e-r[o].offsetTop-r[o].offsetHeight)/e*n+\"s\":r[o].offsetTop/e*n+\"s\",r[o].style.transitionDelay=a}this.applyClip_(e,i),window.requestAnimationFrame(function(){this.element_.classList.add(this.CssClasses_.IS_ANIMATING),this.element_.style.clip=\"rect(0 \"+i+\"px \"+e+\"px 0)\",this.container_.classList.add(this.CssClasses_.IS_VISIBLE)}.bind(this)),this.addAnimationEndListener_();var s=function(e){e===t||this.closing_||e.target.parentNode===this.element_||(document.removeEventListener(\"click\",s),this.hide())}.bind(this);document.addEventListener(\"click\",s)}},c.prototype.show=c.prototype.show,c.prototype.hide=function(){if(this.element_&&this.container_&&this.outline_){for(var t=this.element_.querySelectorAll(\".\"+this.CssClasses_.ITEM),e=0;e<t.length;e++)t[e].style.removeProperty(\"transition-delay\");var i=this.element_.getBoundingClientRect(),n=i.height,r=i.width;this.element_.classList.add(this.CssClasses_.IS_ANIMATING),this.applyClip_(n,r),this.container_.classList.remove(this.CssClasses_.IS_VISIBLE),this.addAnimationEndListener_()}},c.prototype.hide=c.prototype.hide,c.prototype.toggle=function(t){this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)?this.hide():this.show(t)},c.prototype.toggle=c.prototype.toggle,i.register({constructor:c,classAsString:\"MaterialMenu\",cssClass:\"mdl-js-menu\",widget:!0});var h=function(t){this.element_=t,this.init()};window.MaterialProgress=h,h.prototype.Constant_={},h.prototype.CssClasses_={INDETERMINATE_CLASS:\"mdl-progress__indeterminate\"},h.prototype.setProgress=function(t){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=t+\"%\")},h.prototype.setProgress=h.prototype.setProgress,h.prototype.setBuffer=function(t){this.bufferbar_.style.width=t+\"%\",this.auxbar_.style.width=100-t+\"%\"},h.prototype.setBuffer=h.prototype.setBuffer,h.prototype.init=function(){if(this.element_){var t=document.createElement(\"div\");t.className=\"progressbar bar bar1\",this.element_.appendChild(t),this.progressbar_=t,t=document.createElement(\"div\"),t.className=\"bufferbar bar bar2\",this.element_.appendChild(t),this.bufferbar_=t,t=document.createElement(\"div\"),t.className=\"auxbar bar bar3\",this.element_.appendChild(t),this.auxbar_=t,this.progressbar_.style.width=\"0%\",this.bufferbar_.style.width=\"100%\",this.auxbar_.style.width=\"0%\",this.element_.classList.add(\"is-upgraded\")}},i.register({constructor:h,classAsString:\"MaterialProgress\",cssClass:\"mdl-js-progress\",widget:!0});var p=function(t){this.element_=t,this.init()};window.MaterialRadio=p,p.prototype.Constant_={TINY_TIMEOUT:.001},p.prototype.CssClasses_={IS_FOCUSED:\"is-focused\",IS_DISABLED:\"is-disabled\",IS_CHECKED:\"is-checked\",IS_UPGRADED:\"is-upgraded\",JS_RADIO:\"mdl-js-radio\",RADIO_BTN:\"mdl-radio__button\",RADIO_OUTER_CIRCLE:\"mdl-radio__outer-circle\",RADIO_INNER_CIRCLE:\"mdl-radio__inner-circle\",RIPPLE_EFFECT:\"mdl-js-ripple-effect\",RIPPLE_IGNORE_EVENTS:\"mdl-js-ripple-effect--ignore-events\",RIPPLE_CONTAINER:\"mdl-radio__ripple-container\",RIPPLE_CENTER:\"mdl-ripple--center\",RIPPLE:\"mdl-ripple\"},p.prototype.onChange_=function(t){for(var e=document.getElementsByClassName(this.CssClasses_.JS_RADIO),i=0;i<e.length;i++){e[i].querySelector(\".\"+this.CssClasses_.RADIO_BTN).getAttribute(\"name\")===this.btnElement_.getAttribute(\"name\")&&\"undefined\"!=typeof e[i].MaterialRadio&&e[i].MaterialRadio.updateClasses_()}},p.prototype.onFocus_=function(t){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},p.prototype.onBlur_=function(t){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},p.prototype.onMouseup_=function(t){this.blur_()},p.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},p.prototype.blur_=function(){window.setTimeout(function(){this.btnElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},p.prototype.checkDisabled=function(){this.btnElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},p.prototype.checkDisabled=p.prototype.checkDisabled,p.prototype.checkToggleState=function(){this.btnElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},p.prototype.checkToggleState=p.prototype.checkToggleState,p.prototype.disable=function(){this.btnElement_.disabled=!0,this.updateClasses_()},p.prototype.disable=p.prototype.disable,p.prototype.enable=function(){this.btnElement_.disabled=!1,this.updateClasses_()},p.prototype.enable=p.prototype.enable,p.prototype.check=function(){this.btnElement_.checked=!0,this.onChange_(null)},p.prototype.check=p.prototype.check,p.prototype.uncheck=function(){this.btnElement_.checked=!1,this.onChange_(null)},p.prototype.uncheck=p.prototype.uncheck,p.prototype.init=function(){if(this.element_){this.btnElement_=this.element_.querySelector(\".\"+this.CssClasses_.RADIO_BTN),this.boundChangeHandler_=this.onChange_.bind(this),this.boundFocusHandler_=this.onChange_.bind(this),this.boundBlurHandler_=this.onBlur_.bind(this),this.boundMouseUpHandler_=this.onMouseup_.bind(this);var t=document.createElement(\"span\");t.classList.add(this.CssClasses_.RADIO_OUTER_CIRCLE);var e=document.createElement(\"span\");e.classList.add(this.CssClasses_.RADIO_INNER_CIRCLE),this.element_.appendChild(t),this.element_.appendChild(e);var i;if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),i=document.createElement(\"span\"),i.classList.add(this.CssClasses_.RIPPLE_CONTAINER),i.classList.add(this.CssClasses_.RIPPLE_EFFECT),i.classList.add(this.CssClasses_.RIPPLE_CENTER),i.addEventListener(\"mouseup\",this.boundMouseUpHandler_);var n=document.createElement(\"span\");n.classList.add(this.CssClasses_.RIPPLE),i.appendChild(n),this.element_.appendChild(i)}this.btnElement_.addEventListener(\"change\",this.boundChangeHandler_),this.btnElement_.addEventListener(\"focus\",this.boundFocusHandler_),this.btnElement_.addEventListener(\"blur\",this.boundBlurHandler_),this.element_.addEventListener(\"mouseup\",this.boundMouseUpHandler_),this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},i.register({constructor:p,classAsString:\"MaterialRadio\",cssClass:\"mdl-js-radio\",widget:!0});var d=function(t){this.element_=t,this.isIE_=window.navigator.msPointerEnabled,this.init()};window.MaterialSlider=d,d.prototype.Constant_={},d.prototype.CssClasses_={IE_CONTAINER:\"mdl-slider__ie-container\",SLIDER_CONTAINER:\"mdl-slider__container\",BACKGROUND_FLEX:\"mdl-slider__background-flex\",BACKGROUND_LOWER:\"mdl-slider__background-lower\",BACKGROUND_UPPER:\"mdl-slider__background-upper\",IS_LOWEST_VALUE:\"is-lowest-value\",IS_UPGRADED:\"is-upgraded\"},d.prototype.onInput_=function(t){this.updateValueStyles_()},d.prototype.onChange_=function(t){this.updateValueStyles_()},d.prototype.onMouseUp_=function(t){t.target.blur()},d.prototype.onContainerMouseDown_=function(t){if(t.target===this.element_.parentElement){t.preventDefault();var e=new MouseEvent(\"mousedown\",{target:t.target,buttons:t.buttons,clientX:t.clientX,clientY:this.element_.getBoundingClientRect().y});this.element_.dispatchEvent(e)}},d.prototype.updateValueStyles_=function(){var t=(this.element_.value-this.element_.min)/(this.element_.max-this.element_.min);0===t?this.element_.classList.add(this.CssClasses_.IS_LOWEST_VALUE):this.element_.classList.remove(this.CssClasses_.IS_LOWEST_VALUE),this.isIE_||(this.backgroundLower_.style.flex=t,this.backgroundLower_.style.webkitFlex=t,this.backgroundUpper_.style.flex=1-t,this.backgroundUpper_.style.webkitFlex=1-t)},d.prototype.disable=function(){this.element_.disabled=!0},d.prototype.disable=d.prototype.disable,d.prototype.enable=function(){this.element_.disabled=!1},d.prototype.enable=d.prototype.enable,d.prototype.change=function(t){\"undefined\"!=typeof t&&(this.element_.value=t),this.updateValueStyles_()},d.prototype.change=d.prototype.change,d.prototype.init=function(){if(this.element_){if(this.isIE_){var t=document.createElement(\"div\");t.classList.add(this.CssClasses_.IE_CONTAINER),this.element_.parentElement.insertBefore(t,this.element_),this.element_.parentElement.removeChild(this.element_),t.appendChild(this.element_)}else{var e=document.createElement(\"div\");e.classList.add(this.CssClasses_.SLIDER_CONTAINER),this.element_.parentElement.insertBefore(e,this.element_),this.element_.parentElement.removeChild(this.element_),e.appendChild(this.element_);var i=document.createElement(\"div\");i.classList.add(this.CssClasses_.BACKGROUND_FLEX),e.appendChild(i),this.backgroundLower_=document.createElement(\"div\"),this.backgroundLower_.classList.add(this.CssClasses_.BACKGROUND_LOWER),i.appendChild(this.backgroundLower_),this.backgroundUpper_=document.createElement(\"div\"),this.backgroundUpper_.classList.add(this.CssClasses_.BACKGROUND_UPPER),i.appendChild(this.backgroundUpper_)}this.boundInputHandler=this.onInput_.bind(this),this.boundChangeHandler=this.onChange_.bind(this),this.boundMouseUpHandler=this.onMouseUp_.bind(this),this.boundContainerMouseDownHandler=this.onContainerMouseDown_.bind(this),this.element_.addEventListener(\"input\",this.boundInputHandler),this.element_.addEventListener(\"change\",this.boundChangeHandler),this.element_.addEventListener(\"mouseup\",this.boundMouseUpHandler),this.element_.parentElement.addEventListener(\"mousedown\",this.boundContainerMouseDownHandler),this.updateValueStyles_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},i.register({constructor:d,classAsString:\"MaterialSlider\",cssClass:\"mdl-js-slider\",widget:!0});var f=function(t){if(this.element_=t,this.textElement_=this.element_.querySelector(\".\"+this.cssClasses_.MESSAGE),this.actionElement_=this.element_.querySelector(\".\"+this.cssClasses_.ACTION),!this.textElement_)throw new Error(\"There must be a message element for a snackbar.\");if(!this.actionElement_)throw new Error(\"There must be an action element for a snackbar.\");this.active=!1,this.actionHandler_=void 0,this.message_=void 0,this.actionText_=void 0,this.queuedNotifications_=[],this.setActionHidden_(!0)};window.MaterialSnackbar=f,f.prototype.Constant_={ANIMATION_LENGTH:250},f.prototype.cssClasses_={SNACKBAR:\"mdl-snackbar\",MESSAGE:\"mdl-snackbar__text\",ACTION:\"mdl-snackbar__action\",ACTIVE:\"mdl-snackbar--active\"},f.prototype.displaySnackbar_=function(){this.element_.setAttribute(\"aria-hidden\",\"true\"),this.actionHandler_&&(this.actionElement_.textContent=this.actionText_,this.actionElement_.addEventListener(\"click\",this.actionHandler_),this.setActionHidden_(!1)),this.textElement_.textContent=this.message_,this.element_.classList.add(this.cssClasses_.ACTIVE),this.element_.setAttribute(\"aria-hidden\",\"false\"),setTimeout(this.cleanup_.bind(this),this.timeout_)},f.prototype.showSnackbar=function(t){if(void 0===t)throw new Error(\"Please provide a data object with at least a message to display.\");if(void 0===t.message)throw new Error(\"Please provide a message to be displayed.\");if(t.actionHandler&&!t.actionText)throw new Error(\"Please provide action text with the handler.\");this.active?this.queuedNotifications_.push(t):(this.active=!0,this.message_=t.message,t.timeout?this.timeout_=t.timeout:this.timeout_=2750,t.actionHandler&&(this.actionHandler_=t.actionHandler),t.actionText&&(this.actionText_=t.actionText),this.displaySnackbar_())},f.prototype.showSnackbar=f.prototype.showSnackbar,f.prototype.checkQueue_=function(){this.queuedNotifications_.length>0&&this.showSnackbar(this.queuedNotifications_.shift())},f.prototype.cleanup_=function(){this.element_.classList.remove(this.cssClasses_.ACTIVE),setTimeout(function(){this.element_.setAttribute(\"aria-hidden\",\"true\"),this.textElement_.textContent=\"\",Boolean(this.actionElement_.getAttribute(\"aria-hidden\"))||(this.setActionHidden_(!0),this.actionElement_.textContent=\"\",this.actionElement_.removeEventListener(\"click\",this.actionHandler_)),this.actionHandler_=void 0,this.message_=void 0,this.actionText_=void 0,this.active=!1,this.checkQueue_()}.bind(this),this.Constant_.ANIMATION_LENGTH)},f.prototype.setActionHidden_=function(t){t?this.actionElement_.setAttribute(\"aria-hidden\",\"true\"):this.actionElement_.removeAttribute(\"aria-hidden\")},i.register({constructor:f,classAsString:\"MaterialSnackbar\",cssClass:\"mdl-js-snackbar\",widget:!0});var m=function(t){this.element_=t,this.init()};window.MaterialSpinner=m,m.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},m.prototype.CssClasses_={MDL_SPINNER_LAYER:\"mdl-spinner__layer\",MDL_SPINNER_CIRCLE_CLIPPER:\"mdl-spinner__circle-clipper\",MDL_SPINNER_CIRCLE:\"mdl-spinner__circle\",MDL_SPINNER_GAP_PATCH:\"mdl-spinner__gap-patch\",MDL_SPINNER_LEFT:\"mdl-spinner__left\",MDL_SPINNER_RIGHT:\"mdl-spinner__right\"},m.prototype.createLayer=function(t){var e=document.createElement(\"div\");e.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),e.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+\"-\"+t);var i=document.createElement(\"div\");i.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),i.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var n=document.createElement(\"div\");n.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var r=document.createElement(\"div\");r.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),r.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var o=[i,n,r],a=0;a<o.length;a++){var s=document.createElement(\"div\");s.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),o[a].appendChild(s)}e.appendChild(i),e.appendChild(n),e.appendChild(r),this.element_.appendChild(e)},m.prototype.createLayer=m.prototype.createLayer,m.prototype.stop=function(){this.element_.classList.remove(\"is-active\")},m.prototype.stop=m.prototype.stop,m.prototype.start=function(){this.element_.classList.add(\"is-active\")},m.prototype.start=m.prototype.start,m.prototype.init=function(){if(this.element_){for(var t=1;t<=this.Constant_.MDL_SPINNER_LAYER_COUNT;t++)this.createLayer(t);this.element_.classList.add(\"is-upgraded\")}},i.register({constructor:m,classAsString:\"MaterialSpinner\",cssClass:\"mdl-js-spinner\",widget:!0});var _=function(t){this.element_=t,this.init()};window.MaterialSwitch=_,_.prototype.Constant_={TINY_TIMEOUT:.001},_.prototype.CssClasses_={INPUT:\"mdl-switch__input\",TRACK:\"mdl-switch__track\",THUMB:\"mdl-switch__thumb\",FOCUS_HELPER:\"mdl-switch__focus-helper\",RIPPLE_EFFECT:\"mdl-js-ripple-effect\",RIPPLE_IGNORE_EVENTS:\"mdl-js-ripple-effect--ignore-events\",RIPPLE_CONTAINER:\"mdl-switch__ripple-container\",RIPPLE_CENTER:\"mdl-ripple--center\",RIPPLE:\"mdl-ripple\",IS_FOCUSED:\"is-focused\",IS_DISABLED:\"is-disabled\",IS_CHECKED:\"is-checked\"},_.prototype.onChange_=function(t){this.updateClasses_()},_.prototype.onFocus_=function(t){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},_.prototype.onBlur_=function(t){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},_.prototype.onMouseUp_=function(t){this.blur_()},_.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},_.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},_.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},_.prototype.checkDisabled=_.prototype.checkDisabled,_.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},_.prototype.checkToggleState=_.prototype.checkToggleState,_.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},_.prototype.disable=_.prototype.disable,_.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},_.prototype.enable=_.prototype.enable,_.prototype.on=function(){this.inputElement_.checked=!0,this.updateClasses_()},_.prototype.on=_.prototype.on,_.prototype.off=function(){this.inputElement_.checked=!1,this.updateClasses_()},_.prototype.off=_.prototype.off,_.prototype.init=function(){if(this.element_){this.inputElement_=this.element_.querySelector(\".\"+this.CssClasses_.INPUT);var t=document.createElement(\"div\");t.classList.add(this.CssClasses_.TRACK);var e=document.createElement(\"div\");e.classList.add(this.CssClasses_.THUMB);var i=document.createElement(\"span\");if(i.classList.add(this.CssClasses_.FOCUS_HELPER),e.appendChild(i),this.element_.appendChild(t),this.element_.appendChild(e),this.boundMouseUpHandler=this.onMouseUp_.bind(this),this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement(\"span\"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.rippleContainerElement_.addEventListener(\"mouseup\",this.boundMouseUpHandler);var n=document.createElement(\"span\");n.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(n),this.element_.appendChild(this.rippleContainerElement_)}this.boundChangeHandler=this.onChange_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.inputElement_.addEventListener(\"change\",this.boundChangeHandler),this.inputElement_.addEventListener(\"focus\",this.boundFocusHandler),this.inputElement_.addEventListener(\"blur\",this.boundBlurHandler),this.element_.addEventListener(\"mouseup\",this.boundMouseUpHandler),this.updateClasses_(),this.element_.classList.add(\"is-upgraded\")}},i.register({constructor:_,classAsString:\"MaterialSwitch\",cssClass:\"mdl-js-switch\",widget:!0});var y=function(t){this.element_=t,this.init()};window.MaterialTabs=y,y.prototype.Constant_={},y.prototype.CssClasses_={TAB_CLASS:\"mdl-tabs__tab\",PANEL_CLASS:\"mdl-tabs__panel\",ACTIVE_CLASS:\"is-active\",UPGRADED_CLASS:\"is-upgraded\",MDL_JS_RIPPLE_EFFECT:\"mdl-js-ripple-effect\",MDL_RIPPLE_CONTAINER:\"mdl-tabs__ripple-container\",MDL_RIPPLE:\"mdl-ripple\",MDL_JS_RIPPLE_EFFECT_IGNORE_EVENTS:\"mdl-js-ripple-effect--ignore-events\"},y.prototype.initTabs_=function(){this.element_.classList.contains(this.CssClasses_.MDL_JS_RIPPLE_EFFECT)&&this.element_.classList.add(this.CssClasses_.MDL_JS_RIPPLE_EFFECT_IGNORE_EVENTS),this.tabs_=this.element_.querySelectorAll(\".\"+this.CssClasses_.TAB_CLASS),this.panels_=this.element_.querySelectorAll(\".\"+this.CssClasses_.PANEL_CLASS);for(var e=0;e<this.tabs_.length;e++)new t(this.tabs_[e],this);this.element_.classList.add(this.CssClasses_.UPGRADED_CLASS)},y.prototype.resetTabState_=function(){for(var t=0;t<this.tabs_.length;t++)this.tabs_[t].classList.remove(this.CssClasses_.ACTIVE_CLASS)},y.prototype.resetPanelState_=function(){for(var t=0;t<this.panels_.length;t++)this.panels_[t].classList.remove(this.CssClasses_.ACTIVE_CLASS)},y.prototype.init=function(){this.element_&&this.initTabs_()},i.register({constructor:y,classAsString:\"MaterialTabs\",cssClass:\"mdl-js-tabs\"});var g=function(t){this.element_=t,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()};window.MaterialTextfield=g,g.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:\"maxrows\"},g.prototype.CssClasses_={LABEL:\"mdl-textfield__label\",INPUT:\"mdl-textfield__input\",IS_DIRTY:\"is-dirty\",IS_FOCUSED:\"is-focused\",IS_DISABLED:\"is-disabled\",IS_INVALID:\"is-invalid\",IS_UPGRADED:\"is-upgraded\",HAS_PLACEHOLDER:\"has-placeholder\"},g.prototype.onKeyDown_=function(t){var e=t.target.value.split(\"\\n\").length;13===t.keyCode&&e>=this.maxRows&&t.preventDefault()},g.prototype.onFocus_=function(t){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},g.prototype.onBlur_=function(t){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},g.prototype.onReset_=function(t){this.updateClasses_()},g.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},g.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},g.prototype.checkDisabled=g.prototype.checkDisabled,g.prototype.checkFocus=function(){Boolean(this.element_.querySelector(\":focus\"))?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},g.prototype.checkFocus=g.prototype.checkFocus,g.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},g.prototype.checkValidity=g.prototype.checkValidity,g.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},g.prototype.checkDirty=g.prototype.checkDirty,g.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},g.prototype.disable=g.prototype.disable,g.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},g.prototype.enable=g.prototype.enable,g.prototype.change=function(t){this.input_.value=t||\"\",this.updateClasses_()},g.prototype.change=g.prototype.change,g.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector(\".\"+this.CssClasses_.LABEL),this.input_=this.element_.querySelector(\".\"+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute(\"placeholder\")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener(\"input\",this.boundUpdateClassesHandler),this.input_.addEventListener(\"focus\",this.boundFocusHandler),this.input_.addEventListener(\"blur\",this.boundBlurHandler),this.input_.addEventListener(\"reset\",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener(\"keydown\",this.boundKeyDownHandler));var t=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),t&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute(\"autofocus\")&&(this.element_.focus(),this.checkFocus())}},i.register({constructor:g,classAsString:\"MaterialTextfield\",cssClass:\"mdl-js-textfield\",widget:!0});var v=function(t){this.element_=t,this.init()};window.MaterialTooltip=v,v.prototype.Constant_={},v.prototype.CssClasses_={IS_ACTIVE:\"is-active\",BOTTOM:\"mdl-tooltip--bottom\",LEFT:\"mdl-tooltip--left\",RIGHT:\"mdl-tooltip--right\",TOP:\"mdl-tooltip--top\"},v.prototype.handleMouseEnter_=function(t){var e=t.target.getBoundingClientRect(),i=e.left+e.width/2,n=e.top+e.height/2,r=this.element_.offsetWidth/2*-1,o=this.element_.offsetHeight/2*-1;this.element_.classList.contains(this.CssClasses_.LEFT)||this.element_.classList.contains(this.CssClasses_.RIGHT)?(i=e.width/2,n+o<0?(this.element_.style.top=\"0\",this.element_.style.marginTop=\"0\"):(this.element_.style.top=n+\"px\",this.element_.style.marginTop=o+\"px\")):i+r<0?(this.element_.style.left=\"0\",this.element_.style.marginLeft=\"0\"):(this.element_.style.left=i+\"px\",this.element_.style.marginLeft=r+\"px\"),this.element_.classList.contains(this.CssClasses_.TOP)?this.element_.style.top=e.top-this.element_.offsetHeight-10+\"px\":this.element_.classList.contains(this.CssClasses_.RIGHT)?this.element_.style.left=e.left+e.width+10+\"px\":this.element_.classList.contains(this.CssClasses_.LEFT)?this.element_.style.left=e.left-this.element_.offsetWidth-10+\"px\":this.element_.style.top=e.top+e.height+10+\"px\",this.element_.classList.add(this.CssClasses_.IS_ACTIVE)},v.prototype.hideTooltip_=function(){this.element_.classList.remove(this.CssClasses_.IS_ACTIVE)},v.prototype.init=function(){if(this.element_){var t=this.element_.getAttribute(\"for\")||this.element_.getAttribute(\"data-mdl-for\");t&&(this.forElement_=document.getElementById(t)),this.forElement_&&(this.forElement_.hasAttribute(\"tabindex\")||this.forElement_.setAttribute(\"tabindex\",\"0\"),this.boundMouseEnterHandler=this.handleMouseEnter_.bind(this),this.boundMouseLeaveAndScrollHandler=this.hideTooltip_.bind(this),this.forElement_.addEventListener(\"mouseenter\",this.boundMouseEnterHandler,!1),this.forElement_.addEventListener(\"touchend\",this.boundMouseEnterHandler,!1),this.forElement_.addEventListener(\"mouseleave\",this.boundMouseLeaveAndScrollHandler,!1),window.addEventListener(\"scroll\",this.boundMouseLeaveAndScrollHandler,!0),window.addEventListener(\"touchstart\",this.boundMouseLeaveAndScrollHandler))}},i.register({constructor:v,classAsString:\"MaterialTooltip\",cssClass:\"mdl-tooltip\"});var x=function(t){this.element_=t,this.init()};window.MaterialLayout=x,x.prototype.Constant_={MAX_WIDTH:\"(max-width: 1024px)\",TAB_SCROLL_PIXELS:100,RESIZE_TIMEOUT:100,MENU_ICON:\"&#xE5D2;\",CHEVRON_LEFT:\"chevron_left\",CHEVRON_RIGHT:\"chevron_right\"},x.prototype.Keycodes_={ENTER:13,ESCAPE:27,SPACE:32},x.prototype.Mode_={STANDARD:0,SEAMED:1,WATERFALL:2,SCROLL:3},x.prototype.CssClasses_={CONTAINER:\"mdl-layout__container\",HEADER:\"mdl-layout__header\",DRAWER:\"mdl-layout__drawer\",CONTENT:\"mdl-layout__content\",DRAWER_BTN:\"mdl-layout__drawer-button\",ICON:\"material-icons\",JS_RIPPLE_EFFECT:\"mdl-js-ripple-effect\",RIPPLE_CONTAINER:\"mdl-layout__tab-ripple-container\",RIPPLE:\"mdl-ripple\",RIPPLE_IGNORE_EVENTS:\"mdl-js-ripple-effect--ignore-events\",HEADER_SEAMED:\"mdl-layout__header--seamed\",HEADER_WATERFALL:\"mdl-layout__header--waterfall\",HEADER_SCROLL:\"mdl-layout__header--scroll\",FIXED_HEADER:\"mdl-layout--fixed-header\",OBFUSCATOR:\"mdl-layout__obfuscator\",TAB_BAR:\"mdl-layout__tab-bar\",TAB_CONTAINER:\"mdl-layout__tab-bar-container\",TAB:\"mdl-layout__tab\",TAB_BAR_BUTTON:\"mdl-layout__tab-bar-button\",TAB_BAR_LEFT_BUTTON:\"mdl-layout__tab-bar-left-button\",TAB_BAR_RIGHT_BUTTON:\"mdl-layout__tab-bar-right-button\",TAB_MANUAL_SWITCH:\"mdl-layout__tab-manual-switch\",PANEL:\"mdl-layout__tab-panel\",HAS_DRAWER:\"has-drawer\",HAS_TABS:\"has-tabs\",HAS_SCROLLING_HEADER:\"has-scrolling-header\",CASTING_SHADOW:\"is-casting-shadow\",IS_COMPACT:\"is-compact\",IS_SMALL_SCREEN:\"is-small-screen\",IS_DRAWER_OPEN:\"is-visible\",IS_ACTIVE:\"is-active\",IS_UPGRADED:\"is-upgraded\",IS_ANIMATING:\"is-animating\",ON_LARGE_SCREEN:\"mdl-layout--large-screen-only\",ON_SMALL_SCREEN:\"mdl-layout--small-screen-only\"},x.prototype.contentScrollHandler_=function(){if(!this.header_.classList.contains(this.CssClasses_.IS_ANIMATING)){var t=!this.element_.classList.contains(this.CssClasses_.IS_SMALL_SCREEN)||this.element_.classList.contains(this.CssClasses_.FIXED_HEADER);this.content_.scrollTop>0&&!this.header_.classList.contains(this.CssClasses_.IS_COMPACT)?(this.header_.classList.add(this.CssClasses_.CASTING_SHADOW),this.header_.classList.add(this.CssClasses_.IS_COMPACT),t&&this.header_.classList.add(this.CssClasses_.IS_ANIMATING)):this.content_.scrollTop<=0&&this.header_.classList.contains(this.CssClasses_.IS_COMPACT)&&(this.header_.classList.remove(this.CssClasses_.CASTING_SHADOW),this.header_.classList.remove(this.CssClasses_.IS_COMPACT),t&&this.header_.classList.add(this.CssClasses_.IS_ANIMATING))}},x.prototype.keyboardEventHandler_=function(t){t.keyCode===this.Keycodes_.ESCAPE&&this.drawer_.classList.contains(this.CssClasses_.IS_DRAWER_OPEN)&&this.toggleDrawer()},x.prototype.screenSizeHandler_=function(){this.screenSizeMediaQuery_.matches?this.element_.classList.add(this.CssClasses_.IS_SMALL_SCREEN):(this.element_.classList.remove(this.CssClasses_.IS_SMALL_SCREEN),this.drawer_&&(this.drawer_.classList.remove(this.CssClasses_.IS_DRAWER_OPEN),this.obfuscator_.classList.remove(this.CssClasses_.IS_DRAWER_OPEN)))},x.prototype.drawerToggleHandler_=function(t){if(t&&\"keydown\"===t.type){if(t.keyCode!==this.Keycodes_.SPACE&&t.keyCode!==this.Keycodes_.ENTER)return;t.preventDefault()}this.toggleDrawer()},x.prototype.headerTransitionEndHandler_=function(){this.header_.classList.remove(this.CssClasses_.IS_ANIMATING)},x.prototype.headerClickHandler_=function(){this.header_.classList.contains(this.CssClasses_.IS_COMPACT)&&(this.header_.classList.remove(this.CssClasses_.IS_COMPACT),this.header_.classList.add(this.CssClasses_.IS_ANIMATING))},x.prototype.resetTabState_=function(t){for(var e=0;e<t.length;e++)t[e].classList.remove(this.CssClasses_.IS_ACTIVE)},x.prototype.resetPanelState_=function(t){for(var e=0;e<t.length;e++)t[e].classList.remove(this.CssClasses_.IS_ACTIVE)},x.prototype.toggleDrawer=function(){var t=this.element_.querySelector(\".\"+this.CssClasses_.DRAWER_BTN);this.drawer_.classList.toggle(this.CssClasses_.IS_DRAWER_OPEN),this.obfuscator_.classList.toggle(this.CssClasses_.IS_DRAWER_OPEN),this.drawer_.classList.contains(this.CssClasses_.IS_DRAWER_OPEN)?(this.drawer_.setAttribute(\"aria-hidden\",\"false\"),t.setAttribute(\"aria-expanded\",\"true\")):(this.drawer_.setAttribute(\"aria-hidden\",\"true\"),t.setAttribute(\"aria-expanded\",\"false\"))},x.prototype.toggleDrawer=x.prototype.toggleDrawer,x.prototype.init=function(){if(this.element_){var t=document.createElement(\"div\");t.classList.add(this.CssClasses_.CONTAINER);var i=this.element_.querySelector(\":focus\");this.element_.parentElement.insertBefore(t,this.element_),this.element_.parentElement.removeChild(this.element_),t.appendChild(this.element_),i&&i.focus();for(var n=this.element_.childNodes,r=n.length,o=0;o<r;o++){var a=n[o];a.classList&&a.classList.contains(this.CssClasses_.HEADER)&&(this.header_=a),a.classList&&a.classList.contains(this.CssClasses_.DRAWER)&&(this.drawer_=a),a.classList&&a.classList.contains(this.CssClasses_.CONTENT)&&(this.content_=a)}window.addEventListener(\"pageshow\",function(t){t.persisted&&(this.element_.style.overflowY=\"hidden\",requestAnimationFrame(function(){this.element_.style.overflowY=\"\"}.bind(this)))}.bind(this),!1),this.header_&&(this.tabBar_=this.header_.querySelector(\".\"+this.CssClasses_.TAB_BAR));var s=this.Mode_.STANDARD;if(this.header_&&(this.header_.classList.contains(this.CssClasses_.HEADER_SEAMED)?s=this.Mode_.SEAMED:this.header_.classList.contains(this.CssClasses_.HEADER_WATERFALL)?(s=this.Mode_.WATERFALL,this.header_.addEventListener(\"transitionend\",this.headerTransitionEndHandler_.bind(this)),this.header_.addEventListener(\"click\",this.headerClickHandler_.bind(this))):this.header_.classList.contains(this.CssClasses_.HEADER_SCROLL)&&(s=this.Mode_.SCROLL,t.classList.add(this.CssClasses_.HAS_SCROLLING_HEADER)),s===this.Mode_.STANDARD?(this.header_.classList.add(this.CssClasses_.CASTING_SHADOW),this.tabBar_&&this.tabBar_.classList.add(this.CssClasses_.CASTING_SHADOW)):s===this.Mode_.SEAMED||s===this.Mode_.SCROLL?(this.header_.classList.remove(this.CssClasses_.CASTING_SHADOW),this.tabBar_&&this.tabBar_.classList.remove(this.CssClasses_.CASTING_SHADOW)):s===this.Mode_.WATERFALL&&(this.content_.addEventListener(\"scroll\",this.contentScrollHandler_.bind(this)),this.contentScrollHandler_())),this.drawer_){var l=this.element_.querySelector(\".\"+this.CssClasses_.DRAWER_BTN);if(!l){l=document.createElement(\"div\"),l.setAttribute(\"aria-expanded\",\"false\"),l.setAttribute(\"role\",\"button\"),l.setAttribute(\"tabindex\",\"0\"),l.classList.add(this.CssClasses_.DRAWER_BTN);var u=document.createElement(\"i\");u.classList.add(this.CssClasses_.ICON),u.innerHTML=this.Constant_.MENU_ICON,l.appendChild(u)}this.drawer_.classList.contains(this.CssClasses_.ON_LARGE_SCREEN)?l.classList.add(this.CssClasses_.ON_LARGE_SCREEN):this.drawer_.classList.contains(this.CssClasses_.ON_SMALL_SCREEN)&&l.classList.add(this.CssClasses_.ON_SMALL_SCREEN),l.addEventListener(\"click\",this.drawerToggleHandler_.bind(this)),l.addEventListener(\"keydown\",this.drawerToggleHandler_.bind(this)),this.element_.classList.add(this.CssClasses_.HAS_DRAWER),this.element_.classList.contains(this.CssClasses_.FIXED_HEADER)?this.header_.insertBefore(l,this.header_.firstChild):this.element_.insertBefore(l,this.content_);var c=document.createElement(\"div\");c.classList.add(this.CssClasses_.OBFUSCATOR),this.element_.appendChild(c),c.addEventListener(\"click\",this.drawerToggleHandler_.bind(this)),this.obfuscator_=c,this.drawer_.addEventListener(\"keydown\",this.keyboardEventHandler_.bind(this)),this.drawer_.setAttribute(\"aria-hidden\",\"true\")}if(this.screenSizeMediaQuery_=window.matchMedia(this.Constant_.MAX_WIDTH),this.screenSizeMediaQuery_.addListener(this.screenSizeHandler_.bind(this)),this.screenSizeHandler_(),this.header_&&this.tabBar_){this.element_.classList.add(this.CssClasses_.HAS_TABS);var h=document.createElement(\"div\");h.classList.add(this.CssClasses_.TAB_CONTAINER),this.header_.insertBefore(h,this.tabBar_),this.header_.removeChild(this.tabBar_);var p=document.createElement(\"div\");p.classList.add(this.CssClasses_.TAB_BAR_BUTTON),p.classList.add(this.CssClasses_.TAB_BAR_LEFT_BUTTON);var d=document.createElement(\"i\");d.classList.add(this.CssClasses_.ICON),d.textContent=this.Constant_.CHEVRON_LEFT,p.appendChild(d),p.addEventListener(\"click\",function(){this.tabBar_.scrollLeft-=this.Constant_.TAB_SCROLL_PIXELS}.bind(this));var f=document.createElement(\"div\");f.classList.add(this.CssClasses_.TAB_BAR_BUTTON),f.classList.add(this.CssClasses_.TAB_BAR_RIGHT_BUTTON);var m=document.createElement(\"i\");m.classList.add(this.CssClasses_.ICON),m.textContent=this.Constant_.CHEVRON_RIGHT,f.appendChild(m),f.addEventListener(\"click\",function(){this.tabBar_.scrollLeft+=this.Constant_.TAB_SCROLL_PIXELS}.bind(this)),h.appendChild(p),h.appendChild(this.tabBar_),h.appendChild(f);var _=function(){this.tabBar_.scrollLeft>0?p.classList.add(this.CssClasses_.IS_ACTIVE):p.classList.remove(this.CssClasses_.IS_ACTIVE),this.tabBar_.scrollLeft<this.tabBar_.scrollWidth-this.tabBar_.offsetWidth?f.classList.add(this.CssClasses_.IS_ACTIVE):f.classList.remove(this.CssClasses_.IS_ACTIVE)}.bind(this);this.tabBar_.addEventListener(\"scroll\",_),_();var y=function(){this.resizeTimeoutId_&&clearTimeout(this.resizeTimeoutId_),this.resizeTimeoutId_=setTimeout(function(){_(),this.resizeTimeoutId_=null}.bind(this),this.Constant_.RESIZE_TIMEOUT)}.bind(this);window.addEventListener(\"resize\",y),this.tabBar_.classList.contains(this.CssClasses_.JS_RIPPLE_EFFECT)&&this.tabBar_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS);for(var g=this.tabBar_.querySelectorAll(\".\"+this.CssClasses_.TAB),v=this.content_.querySelectorAll(\".\"+this.CssClasses_.PANEL),x=0;x<g.length;x++)new e(g[x],g,v,this)}this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},window.MaterialLayoutTab=e,i.register({constructor:x,classAsString:\"MaterialLayout\",cssClass:\"mdl-js-layout\"});var b=function(t){this.element_=t,this.init()};window.MaterialDataTable=b,b.prototype.Constant_={},b.prototype.CssClasses_={DATA_TABLE:\"mdl-data-table\",SELECTABLE:\"mdl-data-table--selectable\",SELECT_ELEMENT:\"mdl-data-table__select\",IS_SELECTED:\"is-selected\",IS_UPGRADED:\"is-upgraded\"},b.prototype.selectRow_=function(t,e,i){return e?function(){t.checked?e.classList.add(this.CssClasses_.IS_SELECTED):e.classList.remove(this.CssClasses_.IS_SELECTED)}.bind(this):i?function(){var e,n;if(t.checked)for(e=0;e<i.length;e++)n=i[e].querySelector(\"td\").querySelector(\".mdl-checkbox\"),n.MaterialCheckbox.check(),i[e].classList.add(this.CssClasses_.IS_SELECTED);else for(e=0;e<i.length;e++)n=i[e].querySelector(\"td\").querySelector(\".mdl-checkbox\"),n.MaterialCheckbox.uncheck(),i[e].classList.remove(this.CssClasses_.IS_SELECTED)}.bind(this):void 0},b.prototype.createCheckbox_=function(t,e){var n=document.createElement(\"label\"),r=[\"mdl-checkbox\",\"mdl-js-checkbox\",\"mdl-js-ripple-effect\",this.CssClasses_.SELECT_ELEMENT];n.className=r.join(\" \");var o=document.createElement(\"input\");return o.type=\"checkbox\",o.classList.add(\"mdl-checkbox__input\"),t?(o.checked=t.classList.contains(this.CssClasses_.IS_SELECTED),o.addEventListener(\"change\",this.selectRow_(o,t))):e&&o.addEventListener(\"change\",this.selectRow_(o,null,e)),n.appendChild(o),i.upgradeElement(n,\"MaterialCheckbox\"),n},b.prototype.init=function(){if(this.element_){var t=this.element_.querySelector(\"th\"),e=Array.prototype.slice.call(this.element_.querySelectorAll(\"tbody tr\")),i=Array.prototype.slice.call(this.element_.querySelectorAll(\"tfoot tr\")),n=e.concat(i);if(this.element_.classList.contains(this.CssClasses_.SELECTABLE)){var r=document.createElement(\"th\"),o=this.createCheckbox_(null,n);r.appendChild(o),t.parentElement.insertBefore(r,t);for(var a=0;a<n.length;a++){var s=n[a].querySelector(\"td\");if(s){var l=document.createElement(\"td\");if(\"TBODY\"===n[a].parentNode.nodeName.toUpperCase()){var u=this.createCheckbox_(n[a]);l.appendChild(u)}n[a].insertBefore(l,s)}}this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}}},i.register({constructor:b,classAsString:\"MaterialDataTable\",cssClass:\"mdl-js-data-table\"});var w=function(t){this.element_=t,this.init()};window.MaterialRipple=w,w.prototype.Constant_={INITIAL_SCALE:\"scale(0.0001, 0.0001)\",INITIAL_SIZE:\"1px\",INITIAL_OPACITY:\"0.4\",FINAL_OPACITY:\"0\",FINAL_SCALE:\"\"},w.prototype.CssClasses_={RIPPLE_CENTER:\"mdl-ripple--center\",RIPPLE_EFFECT_IGNORE_EVENTS:\"mdl-js-ripple-effect--ignore-events\",RIPPLE:\"mdl-ripple\",IS_ANIMATING:\"is-animating\",IS_VISIBLE:\"is-visible\"},w.prototype.downHandler_=function(t){if(!this.rippleElement_.style.width&&!this.rippleElement_.style.height){var e=this.element_.getBoundingClientRect();this.boundHeight=e.height,this.boundWidth=e.width,this.rippleSize_=2*Math.sqrt(e.width*e.width+e.height*e.height)+2,this.rippleElement_.style.width=this.rippleSize_+\"px\",this.rippleElement_.style.height=this.rippleSize_+\"px\"}if(this.rippleElement_.classList.add(this.CssClasses_.IS_VISIBLE),\"mousedown\"===t.type&&this.ignoringMouseDown_)this.ignoringMouseDown_=!1;else{\"touchstart\"===t.type&&(this.ignoringMouseDown_=!0);if(this.getFrameCount()>0)return;this.setFrameCount(1);var i,n,r=t.currentTarget.getBoundingClientRect();if(0===t.clientX&&0===t.clientY)i=Math.round(r.width/2),n=Math.round(r.height/2);else{var o=void 0!==t.clientX?t.clientX:t.touches[0].clientX,a=void 0!==t.clientY?t.clientY:t.touches[0].clientY;i=Math.round(o-r.left),n=Math.round(a-r.top)}this.setRippleXY(i,n),this.setRippleStyles(!0),window.requestAnimationFrame(this.animFrameHandler.bind(this))}},w.prototype.upHandler_=function(t){t&&2!==t.detail&&window.setTimeout(function(){this.rippleElement_.classList.remove(this.CssClasses_.IS_VISIBLE)}.bind(this),0)},w.prototype.init=function(){if(this.element_){var t=this.element_.classList.contains(this.CssClasses_.RIPPLE_CENTER);this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT_IGNORE_EVENTS)||(this.rippleElement_=this.element_.querySelector(\".\"+this.CssClasses_.RIPPLE),this.frameCount_=0,this.rippleSize_=0,this.x_=0,this.y_=0,this.ignoringMouseDown_=!1,this.boundDownHandler=this.downHandler_.bind(this),this.element_.addEventListener(\"mousedown\",this.boundDownHandler),this.element_.addEventListener(\"touchstart\",this.boundDownHandler),this.boundUpHandler=this.upHandler_.bind(this),this.element_.addEventListener(\"mouseup\",this.boundUpHandler),this.element_.addEventListener(\"mouseleave\",this.boundUpHandler),this.element_.addEventListener(\"touchend\",this.boundUpHandler),this.element_.addEventListener(\"blur\",this.boundUpHandler),this.getFrameCount=function(){return this.frameCount_},this.setFrameCount=function(t){this.frameCount_=t},this.getRippleElement=function(){return this.rippleElement_},this.setRippleXY=function(t,e){this.x_=t,this.y_=e},this.setRippleStyles=function(e){if(null!==this.rippleElement_){var i,n,r=\"translate(\"+this.x_+\"px, \"+this.y_+\"px)\";e?(n=this.Constant_.INITIAL_SCALE,this.Constant_.INITIAL_SIZE):(n=this.Constant_.FINAL_SCALE,this.rippleSize_+\"px\",t&&(r=\"translate(\"+this.boundWidth/2+\"px, \"+this.boundHeight/2+\"px)\")),i=\"translate(-50%, -50%) \"+r+n,this.rippleElement_.style.webkitTransform=i,this.rippleElement_.style.msTransform=i,this.rippleElement_.style.transform=i,e?this.rippleElement_.classList.remove(this.CssClasses_.IS_ANIMATING):this.rippleElement_.classList.add(this.CssClasses_.IS_ANIMATING)}},this.animFrameHandler=function(){this.frameCount_-- >0?window.requestAnimationFrame(this.animFrameHandler.bind(this)):this.setRippleStyles(!1)})}},i.register({constructor:w,classAsString:\"MaterialRipple\",cssClass:\"mdl-js-ripple-effect\",widget:!1})})(),function(){function i(t){function e(e,i,n,r,o,a){for(;o>=0&&o<a;o+=t){var s=r?r[o]:o;n=i(n,e[s],s,e)}return n}return function(i,n,r,o){n=E(n,o,4);var a=!M(i)&&w.keys(i),s=(a||i).length,l=t>0?0:s-1;return arguments.length<3&&(r=i[a?a[l]:l],l+=t),e(i,n,r,a,l,s)}}function o(t){return function(e,i,n){i=C(i,n);for(var r=I(e),o=t>0?0:r-1;o>=0&&o<r;o+=t)if(i(e[o],o,e))return o;return-1}}function a(t,e,i){return function(n,r,o){var a=0,s=I(n);if(\"number\"==typeof o)t>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(i&&o&&s)return o=i(n,r),n[o]===r?o:-1;if(r!==r)return o=e(f.call(n,a,s),w.isNaN),o>=0?o+a:-1;for(o=t>0?a:s-1;o>=0&&o<s;o+=t)if(n[o]===r)return o;return-1}}function s(t,e){var i=k.length,n=t.constructor,r=w.isFunction(n)&&n.prototype||h,o=\"constructor\";for(w.has(t,o)&&!w.contains(e,o)&&e.push(o);i--;)(o=k[i])in t&&t[o]!==r[o]&&!w.contains(e,o)&&e.push(o)}var l=this,u=l._,c=Array.prototype,h=Object.prototype,p=Function.prototype,d=c.push,f=c.slice,m=h.toString,_=h.hasOwnProperty,y=Array.isArray,g=Object.keys,v=p.bind,x=Object.create,b=function(){},w=function(t){return t instanceof w?t:this instanceof w?void(this._wrapped=t):new w(t)};\"undefined\"!==typeof t&&t.exports&&(e=t.exports=w),e._=w,w.VERSION=\"1.8.3\";var E=function(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)};case 4:return function(i,n,r,o){return t.call(e,i,n,r,o)}}return function(){return t.apply(e,arguments)}},C=function(t,e,i){return null==t?w.identity:w.isFunction(t)?E(t,e,i):w.isObject(t)?w.matcher(t):w.property(t)};w.iteratee=function(t,e){return C(t,e,1/0)};var T=function(t,e){return function(i){var n=arguments.length;if(n<2||null==i)return i;for(var r=1;r<n;r++)for(var o=arguments[r],a=t(o),s=a.length,l=0;l<s;l++){var u=a[l];e&&void 0!==i[u]||(i[u]=o[u])}return i}},S=function(t){if(!w.isObject(t))return{};if(x)return x(t);b.prototype=t;var e=new b;return b.prototype=null,e},A=function(t){return function(e){return null==e?void 0:e[t]}},L=Math.pow(2,53)-1,I=A(\"length\"),M=function(t){var e=I(t);return\"number\"==typeof e&&e>=0&&e<=L};w.each=w.forEach=function(t,e,i){e=E(e,i);var n,r;if(M(t))for(n=0,r=t.length;n<r;n++)e(t[n],n,t);else{var o=w.keys(t);for(n=0,r=o.length;n<r;n++)e(t[o[n]],o[n],t)}return t},w.map=w.collect=function(t,e,i){e=C(e,i);for(var n=!M(t)&&w.keys(t),r=(n||t).length,o=Array(r),a=0;a<r;a++){var s=n?n[a]:a;o[a]=e(t[s],s,t)}return o},w.reduce=w.foldl=w.inject=i(1),w.reduceRight=w.foldr=i(-1),w.find=w.detect=function(t,e,i){var n;if(void 0!==(n=M(t)?w.findIndex(t,e,i):w.findKey(t,e,i))&&-1!==n)return t[n]},w.filter=w.select=function(t,e,i){var n=[];return e=C(e,i),w.each(t,(function(t,i,r){e(t,i,r)&&n.push(t)})),n},w.reject=function(t,e,i){return w.filter(t,w.negate(C(e)),i)},w.every=w.all=function(t,e,i){e=C(e,i);for(var n=!M(t)&&w.keys(t),r=(n||t).length,o=0;o<r;o++){var a=n?n[o]:o;if(!e(t[a],a,t))return!1}return!0},w.some=w.any=function(t,e,i){e=C(e,i);for(var n=!M(t)&&w.keys(t),r=(n||t).length,o=0;o<r;o++){var a=n?n[o]:o;if(e(t[a],a,t))return!0}return!1},w.contains=w.includes=w.include=function(t,e,i,n){return M(t)||(t=w.values(t)),(\"number\"!=typeof i||n)&&(i=0),w.indexOf(t,e,i)>=0},w.invoke=function(t,e){var i=f.call(arguments,2),n=w.isFunction(e);return w.map(t,(function(t){var r=n?e:t[e];return null==r?r:r.apply(t,i)}))},w.pluck=function(t,e){return w.map(t,w.property(e))},w.where=function(t,e){return w.filter(t,w.matcher(e))},w.findWhere=function(t,e){return w.find(t,w.matcher(e))},w.max=function(t,e,i){var n,r,o=-1/0,a=-1/0;if(null==e&&null!=t){t=M(t)?t:w.values(t);for(var s=0,l=t.length;s<l;s++)(n=t[s])>o&&(o=n)}else e=C(e,i),w.each(t,(function(t,i,n){((r=e(t,i,n))>a||r===-1/0&&o===-1/0)&&(o=t,a=r)}));return o},w.min=function(t,e,i){var n,r,o=1/0,a=1/0;if(null==e&&null!=t){t=M(t)?t:w.values(t);for(var s=0,l=t.length;s<l;s++)(n=t[s])<o&&(o=n)}else e=C(e,i),w.each(t,(function(t,i,n){((r=e(t,i,n))<a||r===1/0&&o===1/0)&&(o=t,a=r)}));return o},w.shuffle=function(t){for(var e,i=M(t)?t:w.values(t),n=i.length,r=Array(n),o=0;o<n;o++)e=w.random(0,o),e!==o&&(r[o]=r[e]),r[e]=i[o];return r},w.sample=function(t,e,i){return null==e||i?(M(t)||(t=w.values(t)),t[w.random(t.length-1)]):w.shuffle(t).slice(0,Math.max(0,e))},w.sortBy=function(t,e,i){return e=C(e,i),w.pluck(w.map(t,(function(t,i,n){return{value:t,index:i,criteria:e(t,i,n)}})).sort((function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(i<n||void 0===n)return-1}return t.index-e.index})),\"value\")};var z=function(t){return function(e,i,n){var r={};return i=C(i,n),w.each(e,(function(n,o){var a=i(n,o,e);t(r,n,a)})),r}};w.groupBy=z((function(t,e,i){w.has(t,i)?t[i].push(e):t[i]=[e]})),w.indexBy=z((function(t,e,i){t[i]=e})),w.countBy=z((function(t,e,i){w.has(t,i)?t[i]++:t[i]=1})),w.toArray=function(t){return t?w.isArray(t)?f.call(t):M(t)?w.map(t,w.identity):w.values(t):[]},w.size=function(t){return null==t?0:M(t)?t.length:w.keys(t).length},w.partition=function(t,e,i){e=C(e,i);var n=[],r=[];return w.each(t,(function(t,i,o){(e(t,i,o)?n:r).push(t)})),[n,r]},w.first=w.head=w.take=function(t,e,i){if(null!=t)return null==e||i?t[0]:w.initial(t,t.length-e)},w.initial=function(t,e,i){return f.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))},w.last=function(t,e,i){if(null!=t)return null==e||i?t[t.length-1]:w.rest(t,Math.max(0,t.length-e))},w.rest=w.tail=w.drop=function(t,e,i){return f.call(t,null==e||i?1:e)},w.compact=function(t){return w.filter(t,w.identity)};var P=function(t,e,i,n){for(var r=[],o=0,a=n||0,s=I(t);a<s;a++){var l=t[a];if(M(l)&&(w.isArray(l)||w.isArguments(l))){e||(l=P(l,e,i));var u=0,c=l.length;for(r.length+=c;u<c;)r[o++]=l[u++]}else i||(r[o++]=l)}return r};w.flatten=function(t,e){return P(t,e,!1)},w.without=function(t){return w.difference(t,f.call(arguments,1))},w.uniq=w.unique=function(t,e,i,n){w.isBoolean(e)||(n=i,i=e,e=!1),null!=i&&(i=C(i,n));for(var r=[],o=[],a=0,s=I(t);a<s;a++){var l=t[a],u=i?i(l,a,t):l;e?(a&&o===u||r.push(l),o=u):i?w.contains(o,u)||(o.push(u),r.push(l)):w.contains(r,l)||r.push(l)}return r},w.union=function(){return w.uniq(P(arguments,!0,!0))},w.intersection=function(t){for(var e=[],i=arguments.length,n=0,r=I(t);n<r;n++){var o=t[n];if(!w.contains(e,o)){for(var a=1;a<i&&w.contains(arguments[a],o);a++);a===i&&e.push(o)}}return e},w.difference=function(t){var e=P(arguments,!0,!0,1);return w.filter(t,(function(t){return!w.contains(e,t)}))},w.zip=function(){return w.unzip(arguments)},w.unzip=function(t){for(var e=t&&w.max(t,I).length||0,i=Array(e),n=0;n<e;n++)i[n]=w.pluck(t,n);return i},w.object=function(t,e){for(var i={},n=0,r=I(t);n<r;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},w.findIndex=o(1),w.findLastIndex=o(-1),w.sortedIndex=function(t,e,i,n){i=C(i,n,1);for(var r=i(e),o=0,a=I(t);o<a;){var s=Math.floor((o+a)/2);i(t[s])<r?o=s+1:a=s}return o},w.indexOf=a(1,w.findIndex,w.sortedIndex),w.lastIndexOf=a(-1,w.findLastIndex),w.range=function(t,e,i){null==e&&(e=t||0,t=0),i=i||1;for(var n=Math.max(Math.ceil((e-t)/i),0),r=Array(n),o=0;o<n;o++,t+=i)r[o]=t;return r};var R=function(t,e,i,n,r){if(!(n instanceof e))return t.apply(i,r);var o=S(t.prototype),a=t.apply(o,r);return w.isObject(a)?a:o};w.bind=function(t,e){if(v&&t.bind===v)return v.apply(t,f.call(arguments,1));if(!w.isFunction(t))throw new TypeError(\"Bind must be called on a function\");var i=f.call(arguments,2),n=function(){return R(t,n,e,this,i.concat(f.call(arguments)))};return n},w.partial=function(t){var e=f.call(arguments,1),i=function(){for(var n=0,r=e.length,o=Array(r),a=0;a<r;a++)o[a]=e[a]===w?arguments[n++]:e[a];for(;n<arguments.length;)o.push(arguments[n++]);return R(t,i,this,this,o)};return i},w.bindAll=function(t){var e,i,n=arguments.length;if(n<=1)throw new Error(\"bindAll must be passed function names\");for(e=1;e<n;e++)i=arguments[e],t[i]=w.bind(t[i],t);return t},w.memoize=function(t,e){var i=function(n){var r=i.cache,o=\"\"+(e?e.apply(this,arguments):n);return w.has(r,o)||(r[o]=t.apply(this,arguments)),r[o]};return i.cache={},i},w.delay=function(t,e){var i=f.call(arguments,2);return setTimeout((function(){return t.apply(null,i)}),e)},w.defer=w.partial(w.delay,w,1),w.throttle=function(t,e,i){var n,r,o,a=null,s=0;i||(i={});var l=function(){s=!1===i.leading?0:w.now(),a=null,o=t.apply(n,r),a||(n=r=null)};return function(){var u=w.now();s||!1!==i.leading||(s=u);var c=e-(u-s);return n=this,r=arguments,c<=0||c>e?(a&&(clearTimeout(a),a=null),s=u,o=t.apply(n,r),a||(n=r=null)):a||!1===i.trailing||(a=setTimeout(l,c)),o}},w.debounce=function(t,e,i){var n,r,o,a,s,l=function(){var u=w.now()-a;u<e&&u>=0?n=setTimeout(l,e-u):(n=null,i||(s=t.apply(o,r),n||(o=r=null)))};return function(){o=this,r=arguments,a=w.now();var u=i&&!n;return n||(n=setTimeout(l,e)),u&&(s=t.apply(o,r),o=r=null),s}},w.wrap=function(t,e){return w.partial(e,t)},w.negate=function(t){return function(){return!t.apply(this,arguments)}},w.compose=function(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}},w.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},w.before=function(t,e){var i;return function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=null),i}},w.once=w.partial(w.before,2);var D=!{toString:null}.propertyIsEnumerable(\"toString\"),k=[\"valueOf\",\"isPrototypeOf\",\"toString\",\"propertyIsEnumerable\",\"hasOwnProperty\",\"toLocaleString\"];w.keys=function(t){if(!w.isObject(t))return[];if(g)return g(t);var e=[];for(var i in t)w.has(t,i)&&e.push(i);return D&&s(t,e),e},w.allKeys=function(t){if(!w.isObject(t))return[];var e=[];for(var i in t)e.push(i);return D&&s(t,e),e},w.values=function(t){for(var e=w.keys(t),i=e.length,n=Array(i),r=0;r<i;r++)n[r]=t[e[r]];return n},w.mapObject=function(t,e,i){e=C(e,i);for(var n,r=w.keys(t),o=r.length,a={},s=0;s<o;s++)n=r[s],a[n]=e(t[n],n,t);return a},w.pairs=function(t){for(var e=w.keys(t),i=e.length,n=Array(i),r=0;r<i;r++)n[r]=[e[r],t[e[r]]];return n},w.invert=function(t){for(var e={},i=w.keys(t),n=0,r=i.length;n<r;n++)e[t[i[n]]]=i[n];return e},w.functions=w.methods=function(t){var e=[];for(var i in t)w.isFunction(t[i])&&e.push(i);return e.sort()},w.extend=T(w.allKeys),w.extendOwn=w.assign=T(w.keys),w.findKey=function(t,e,i){e=C(e,i);for(var n,r=w.keys(t),o=0,a=r.length;o<a;o++)if(n=r[o],e(t[n],n,t))return n},w.pick=function(t,e,i){var n,r,o={},a=t;if(null==a)return o;w.isFunction(e)?(r=w.allKeys(a),n=E(e,i)):(r=P(arguments,!1,!1,1),n=function(t,e,i){return e in i},a=Object(a));for(var s=0,l=r.length;s<l;s++){var u=r[s],c=a[u];n(c,u,a)&&(o[u]=c)}return o},w.omit=function(t,e,i){if(w.isFunction(e))e=w.negate(e);else{var n=w.map(P(arguments,!1,!1,1),String);e=function(t,e){return!w.contains(n,e)}}return w.pick(t,e,i)},w.defaults=T(w.allKeys,!0),w.create=function(t,e){var i=S(t);return e&&w.extendOwn(i,e),i},w.clone=function(t){return w.isObject(t)?w.isArray(t)?t.slice():w.extend({},t):t},w.tap=function(t,e){return e(t),t},w.isMatch=function(t,e){var i=w.keys(e),n=i.length;if(null==t)return!n;for(var r=Object(t),o=0;o<n;o++){var a=i[o];if(e[a]!==r[a]||!(a in r))return!1}return!0};var O=function(t,e,i,n){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof w&&(t=t._wrapped),e instanceof w&&(e=e._wrapped);var r=m.call(t);if(r!==m.call(e))return!1;switch(r){case\"[object RegExp]\":case\"[object String]\":return\"\"+t===\"\"+e;case\"[object Number]\":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case\"[object Date]\":case\"[object Boolean]\":return+t===+e}var o=\"[object Array]\"===r;if(!o){if(\"object\"!=typeof t||\"object\"!=typeof e)return!1;var a=t.constructor,s=e.constructor;if(a!==s&&!(w.isFunction(a)&&a instanceof a&&w.isFunction(s)&&s instanceof s)&&\"constructor\"in t&&\"constructor\"in e)return!1}i=i||[],n=n||[];for(var l=i.length;l--;)if(i[l]===t)return n[l]===e;if(i.push(t),n.push(e),o){if((l=t.length)!==e.length)return!1;for(;l--;)if(!O(t[l],e[l],i,n))return!1}else{var u,c=w.keys(t);if(l=c.length,w.keys(e).length!==l)return!1;for(;l--;)if(u=c[l],!w.has(e,u)||!O(t[u],e[u],i,n))return!1}return i.pop(),n.pop(),!0};w.isEqual=function(t,e){return O(t,e)},w.isEmpty=function(t){return null==t||(M(t)&&(w.isArray(t)||w.isString(t)||w.isArguments(t))?0===t.length:0===w.keys(t).length)},w.isElement=function(t){return!(!t||1!==t.nodeType)},w.isArray=y||function(t){return\"[object Array]\"===m.call(t)},w.isObject=function(t){var e=typeof t;return\"function\"===e||\"object\"===e&&!!t},w.each([\"Arguments\",\"Function\",\"String\",\"Number\",\"Date\",\"RegExp\",\"Error\"],(function(t){w[\"is\"+t]=function(e){return m.call(e)===\"[object \"+t+\"]\"}})),w.isArguments(arguments)||(w.isArguments=function(t){return w.has(t,\"callee\")}),\"function\"!=typeof/./&&\"object\"!=typeof Int8Array&&(w.isFunction=function(t){return\"function\"==typeof t||!1}),w.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},w.isNaN=function(t){return w.isNumber(t)&&t!==+t},w.isBoolean=function(t){return!0===t||!1===t||\"[object Boolean]\"===m.call(t)},w.isNull=function(t){return null===t},w.isUndefined=function(t){return void 0===t},w.has=function(t,e){return null!=t&&_.call(t,e)},w.noConflict=function(){return l._=u,this},w.identity=function(t){return t},w.constant=function(t){return function(){return t}},w.noop=function(){},w.property=A,w.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},w.matcher=w.matches=function(t){return t=w.extendOwn({},t),function(e){return w.isMatch(e,t)}},w.times=function(t,e,i){var n=Array(Math.max(0,t));e=E(e,i,1);for(var r=0;r<t;r++)n[r]=e(r);return n},w.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},w.now=Date.now||function(){return(new Date).getTime()};var N={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#x27;\",\"`\":\"&#x60;\"},B=w.invert(N),F=function(t){var e=function(e){return t[e]},i=\"(?:\"+w.keys(t).join(\"|\")+\")\",n=RegExp(i),r=RegExp(i,\"g\");return function(t){return t=null==t?\"\":\"\"+t,n.test(t)?t.replace(r,e):t}};w.escape=F(N),w.unescape=F(B),w.result=function(t,e,i){var n=null==t?void 0:t[e];return void 0===n&&(n=i),w.isFunction(n)?n.call(t):n};var V=0;w.uniqueId=function(t){var e=++V+\"\";return t?t+e:e},w.templateSettings={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g};var U=/(.)^/,j={\"'\":\"'\",\"\\\\\":\"\\\\\",\"\\r\":\"r\",\"\\n\":\"n\",\"\\u2028\":\"u2028\",\"\\u2029\":\"u2029\"},G=/\\\\|'|\\r|\\n|\\u2028|\\u2029/g,q=function(t){return\"\\\\\"+j[t]};w.template=function(t,e,i){!e&&i&&(e=i),e=w.defaults({},e,w.templateSettings);var n=RegExp([(e.escape||U).source,(e.interpolate||U).source,(e.evaluate||U).source].join(\"|\")+\"|$\",\"g\"),r=0,o=\"__p+='\";t.replace(n,(function(e,i,n,a,s){return o+=t.slice(r,s).replace(G,q),r=s+e.length,i?o+=\"'+\\n((__t=(\"+i+\"))==null?'':_.escape(__t))+\\n'\":n?o+=\"'+\\n((__t=(\"+n+\"))==null?'':__t)+\\n'\":a&&(o+=\"';\\n\"+a+\"\\n__p+='\"),e})),o+=\"';\\n\",e.variable||(o=\"with(obj||{}){\\n\"+o+\"}\\n\"),o=\"var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\\n\"+o+\"return __p;\\n\";try{var a=new Function(e.variable||\"obj\",\"_\",o)}catch(t){throw t.source=o,t}var s=function(t){return a.call(this,t,w)};return s.source=\"function(\"+(e.variable||\"obj\")+\"){\\n\"+o+\"}\",s},w.chain=function(t){var e=w(t);return e._chain=!0,e};var H=function(t,e){return t._chain?w(e).chain():e};w.mixin=function(t){w.each(w.functions(t),(function(e){var i=w[e]=t[e];w.prototype[e]=function(){var t=[this._wrapped];return d.apply(t,arguments),H(this,i.apply(w,t))}}))},w.mixin(w),w.each([\"pop\",\"push\",\"reverse\",\"shift\",\"sort\",\"splice\",\"unshift\"],(function(t){var e=c[t];w.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),\"shift\"!==t&&\"splice\"!==t||0!==i.length||delete i[0],H(this,i)}})),w.each([\"concat\",\"join\",\"slice\"],(function(t){var e=c[t];w.prototype[t]=function(){return H(this,e.apply(this._wrapped,arguments))}})),w.prototype.value=function(){return this._wrapped},w.prototype.valueOf=w.prototype.toJSON=w.prototype.value,w.prototype.toString=function(){return\"\"+this._wrapped},n=[],void 0!==(r=function(){return w}.apply(e,n))&&(t.exports=r)}.call(this),(function(i){\"use strict\";var o={};o.Constants={},o.Math={},o.Accumulator={},(function(t){t.WGS84={a:6378137,f:1/298.257223563},t.version={major:1,minor:49,patch:0},t.version_string=\"1.49\"})(o.Constants),(function(t){t.digits=53,t.epsilon=Math.pow(.5,t.digits-1),t.degree=Math.PI/180,t.sq=function(t){return t*t},t.hypot=function(t,e){var i,n;return t=Math.abs(t),e=Math.abs(e),i=Math.max(t,e),n=Math.min(t,e)/(i||1),i*Math.sqrt(1+n*n)},t.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},t.log1p=function(t){var e=1+t,i=e-1;return 0===i?t:t*Math.log(e)/i},t.atanh=function(e){var i=Math.abs(e);return i=t.log1p(2*i/(1-i))/2,e<0?-i:i},t.copysign=function(t,e){return Math.abs(t)*(e<0||0===e&&1/e<0?-1:1)},t.sum=function(t,e){var i,n=t+e,r=n-e,o=n-r;return r-=t,o-=e,i=-(r+o),{s:n,t:i}},t.polyval=function(t,e,i,n){for(var r=t<0?0:e[i++];--t>=0;)r=r*n+e[i++];return r},t.AngRound=function(t){if(0===t)return t;var e=1/16,i=Math.abs(t);return i=i<e?e-(e-i):i,t<0?-i:i},t.AngNormalize=function(t){return t%=360,t<=-180?t+360:t<=180?t:t-360},t.LatFix=function(t){return Math.abs(t)>90?Number.NaN:t},t.AngDiff=function(e,i){var n=t.sum(t.AngNormalize(-e),t.AngNormalize(i)),r=t.AngNormalize(n.s),o=n.t;return t.sum(180===r&&o>0?-180:r,o)},t.sincosd=function(t){var e,i,n,r,o,a;switch(e=t%360,i=Math.floor(e/90+.5),e-=90*i,e*=this.degree,n=Math.sin(e),r=Math.cos(e),3&i){case 0:o=n,a=r;break;case 1:o=r,a=-n;break;case 2:o=-n,a=-r;break;default:o=-r,a=n}return 0!==t&&(o+=0,a+=0),{s:o,c:a}},t.atan2d=function(t,e){var i,n,r=0;switch(Math.abs(t)>Math.abs(e)&&(i=e,e=t,t=i,r=2),e<0&&(e=-e,++r),n=Math.atan2(t,e)/this.degree,r){case 1:n=(t>=0?180:-180)-n;break;case 2:n=90-n;break;case 3:n=-90+n}return n}})(o.Math),(function(t,e){t.Accumulator=function(t){this.Set(t)},t.Accumulator.prototype.Set=function(e){e||(e=0),e.constructor===t.Accumulator?(this._s=e._s,this._t=e._t):(this._s=e,this._t=0)},t.Accumulator.prototype.Add=function(t){var i=e.sum(t,this._t),n=e.sum(i.s,this._s);i=i.t,this._s=n.s,this._t=n.t,0===this._s?this._s=i:this._t+=i},t.Accumulator.prototype.Sum=function(e){var i;return e?(i=new t.Accumulator(this),i.Add(e),i._s):this._s},t.Accumulator.prototype.Negate=function(){this._s*=-1,this._t*=-1}})(o.Accumulator,o.Math),o.Geodesic={},o.GeodesicLine={},o.PolygonArea={},(function(t,e,i,n,r){var o,a,s,l,u,c,h,p,d,f,m,_=20+n.digits+10,y=n.epsilon,g=200*y,v=Math.sqrt(y),x=y*g,b=1e3*v;t.tiny_=Math.sqrt(Number.MIN_VALUE),t.nC1_=6,t.nC1p_=6,t.nC2_=6,t.nC3_=6,t.nC4_=6,o=t.nC3_*(t.nC3_-1)/2,a=t.nC4_*(t.nC4_+1)/2,t.CAP_C1=1,t.CAP_C1p=2,t.CAP_C2=4,t.CAP_C3=8,t.CAP_C4=16,t.NONE=0,t.ARC=64,t.LATITUDE=128,t.LONGITUDE=256|t.CAP_C3,t.AZIMUTH=512,t.DISTANCE=1024|t.CAP_C1,t.STANDARD=t.LATITUDE|t.LONGITUDE|t.AZIMUTH|t.DISTANCE,t.DISTANCE_IN=2048|t.CAP_C1|t.CAP_C1p,t.REDUCEDLENGTH=4096|t.CAP_C1|t.CAP_C2,t.GEODESICSCALE=8192|t.CAP_C1|t.CAP_C2,t.AREA=16384|t.CAP_C4,t.ALL=32671,t.LONG_UNROLL=32768,t.OUT_MASK=32640|t.LONG_UNROLL,t.SinCosSeries=function(t,e,i,n){var r=n.length,o=r-(t?1:0),a=2*(i-e)*(i+e),s=1&o?n[--r]:0,l=0;for(o=Math.floor(o/2);o--;)l=a*s-l+n[--r],s=a*l-s+n[--r];return t?2*e*i*s:i*(s-l)},s=function(t,e){var i,r,o,a,s,l,u,c,h,p,d,f,m=n.sq(t),_=n.sq(e),y=(m+_-1)/6;return 0===_&&y<=0?i=0:(r=m*_/4,o=n.sq(y),a=y*o,s=r*(r+2*a),l=y,s>=0?(u=r+a,u+=u<0?-Math.sqrt(s):Math.sqrt(s),c=n.cbrt(u),l+=c+(0!==c?o/c:0)):(h=Math.atan2(Math.sqrt(-s),-(r+a)),l+=2*y*Math.cos(h/3)),p=Math.sqrt(n.sq(l)+_),d=l<0?_/(p-l):l+p,f=(d-_)/(2*p),i=d/(Math.sqrt(d+n.sq(f))+f)),i},l=[1,4,64,0,256],t.A1m1f=function(t){var e=Math.floor(3);return(n.polyval(e,l,0,n.sq(t))/l[e+1]+t)/(1-t)},u=[-1,6,-16,32,-9,64,-128,2048,9,-16,768,3,-5,512,-7,1280,-7,2048],t.C1f=function(e,i){var r,o,a=n.sq(e),s=e,l=0;for(r=1;r<=t.nC1_;++r)o=Math.floor((t.nC1_-r)/2),i[r]=s*n.polyval(o,u,l,a)/u[l+o+1],l+=o+2,s*=e},c=[205,-432,768,1536,4005,-4736,3840,12288,-225,116,384,-7173,2695,7680,3467,7680,38081,61440],t.C1pf=function(e,i){var r,o,a=n.sq(e),s=e,l=0;for(r=1;r<=t.nC1p_;++r)o=Math.floor((t.nC1p_-r)/2),i[r]=s*n.polyval(o,c,l,a)/c[l+o+1],l+=o+2,s*=e},h=[-11,-28,-192,0,256],t.A2m1f=function(t){var e=Math.floor(3);return(n.polyval(e,h,0,n.sq(t))/h[e+1]-t)/(1+t)},p=[1,2,16,32,35,64,384,2048,15,80,768,7,35,512,63,1280,77,2048],t.C2f=function(e,i){var r,o,a=n.sq(e),s=e,l=0;for(r=1;r<=t.nC2_;++r)o=Math.floor((t.nC2_-r)/2),i[r]=s*n.polyval(o,p,l,a)/p[l+o+1],l+=o+2,s*=e},t.Geodesic=function(t,e){if(this.a=t,this.f=e,this._f1=1-this.f,this._e2=this.f*(2-this.f),this._ep2=this._e2/n.sq(this._f1),this._n=this.f/(2-this.f),this._b=this.a*this._f1,this._c2=(n.sq(this.a)+n.sq(this._b)*(0===this._e2?1:(this._e2>0?n.atanh(Math.sqrt(this._e2)):Math.atan(Math.sqrt(-this._e2)))/Math.sqrt(Math.abs(this._e2))))/2,this._etol2=.1*v/Math.sqrt(Math.max(.001,Math.abs(this.f))*Math.min(1,1-this.f/2)/2),!(isFinite(this.a)&&this.a>0))throw new Error(\"Equatorial radius is not positive\");if(!(isFinite(this._b)&&this._b>0))throw new Error(\"Polar semi-axis is not positive\");this._A3x=new Array(6),this._C3x=new Array(o),this._C4x=new Array(a),this.A3coeff(),this.C3coeff(),this.C4coeff()},d=[-3,128,-2,-3,64,-1,-3,-1,16,3,-1,-2,8,1,-1,2,1,1],t.Geodesic.prototype.A3coeff=function(){var t,e,i=0,r=0;for(t=5;t>=0;--t)e=Math.min(6-t-1,t),this._A3x[r++]=n.polyval(e,d,i,this._n)/d[i+e+1],i+=e+2},f=[3,128,2,5,128,-1,3,3,64,-1,0,1,8,-1,1,4,5,256,1,3,128,-3,-2,3,64,1,-3,2,32,7,512,-10,9,384,5,-9,5,192,7,512,-14,7,512,21,2560],t.Geodesic.prototype.C3coeff=function(){var e,i,r,o=0,a=0;for(e=1;e<t.nC3_;++e)for(i=t.nC3_-1;i>=e;--i)r=Math.min(t.nC3_-i-1,i),this._C3x[a++]=n.polyval(r,f,o,this._n)/f[o+r+1],o+=r+2},m=[97,15015,1088,156,45045,-224,-4784,1573,45045,-10656,14144,-4576,-858,45045,64,624,-4576,6864,-3003,15015,100,208,572,3432,-12012,30030,45045,1,9009,-2944,468,135135,5792,1040,-1287,135135,5952,-11648,9152,-2574,135135,-64,-624,4576,-6864,3003,135135,8,10725,1856,-936,225225,-8448,4992,-1144,225225,-1440,4160,-4576,1716,225225,-136,63063,1024,-208,105105,3584,-3328,1144,315315,-128,135135,-2560,832,405405,128,99099],t.Geodesic.prototype.C4coeff=function(){var e,i,r,o=0,a=0;for(e=0;e<t.nC4_;++e)for(i=t.nC4_-1;i>=e;--i)r=t.nC4_-i-1,this._C4x[a++]=n.polyval(r,m,o,this._n)/m[o+r+1],o+=r+2},t.Geodesic.prototype.A3f=function(t){return n.polyval(5,this._A3x,0,t)},t.Geodesic.prototype.C3f=function(e,i){var r,o,a=1,s=0;for(r=1;r<t.nC3_;++r)o=t.nC3_-r-1,a*=e,i[r]=a*n.polyval(o,this._C3x,s,e),s+=o+1},t.Geodesic.prototype.C4f=function(e,i){var r,o,a=1,s=0;for(r=0;r<t.nC4_;++r)o=t.nC4_-r-1,i[r]=a*n.polyval(o,this._C4x,s,e),s+=o+1,a*=e},t.Geodesic.prototype.Lengths=function(e,i,n,r,o,a,s,l,u,c,h,p,d){h&=t.OUT_MASK;var f,m,_,y,g,v={},x=0,b=0,w=0,E=0;if(h&(t.DISTANCE|t.REDUCEDLENGTH|t.GEODESICSCALE)&&(w=t.A1m1f(e),t.C1f(e,p),h&(t.REDUCEDLENGTH|t.GEODESICSCALE)&&(E=t.A2m1f(e),t.C2f(e,d),x=w-E,E=1+E),w=1+w),h&t.DISTANCE)f=t.SinCosSeries(!0,a,s,p)-t.SinCosSeries(!0,n,r,p),v.s12b=w*(i+f),h&(t.REDUCEDLENGTH|t.GEODESICSCALE)&&(m=t.SinCosSeries(!0,a,s,d)-t.SinCosSeries(!0,n,r,d),b=x*i+(w*f-E*m));else if(h&(t.REDUCEDLENGTH|t.GEODESICSCALE)){for(_=1;_<=t.nC2_;++_)d[_]=w*p[_]-E*d[_];b=x*i+(t.SinCosSeries(!0,a,s,d)-t.SinCosSeries(!0,n,r,d))}return h&t.REDUCEDLENGTH&&(v.m0=x,v.m12b=l*(r*a)-o*(n*s)-r*s*b),h&t.GEODESICSCALE&&(y=r*s+n*a,g=this._ep2*(u-c)*(u+c)/(o+l),v.M12=y+(g*a-s*b)*n/o,v.M21=y-(g*n-r*b)*a/l),v},t.Geodesic.prototype.InverseStart=function(e,i,r,o,a,l,u,c,h,p,d){var f,m,_,y,v,x,w,E,C,T,S,A,L,I,M,z,P,R,D,k,O,N,B,F={},V=o*i-a*e,U=a*i+o*e;return F.sig12=-1,f=o*i,f+=a*e,m=U>=0&&V<.5&&a*u<.5,m?(y=n.sq(e+o),y/=y+n.sq(i+a),F.dnm=Math.sqrt(1+this._ep2*y),_=u/(this._f1*F.dnm),v=Math.sin(_),x=Math.cos(_)):(v=c,x=h),F.salp1=a*v,F.calp1=x>=0?V+a*e*n.sq(v)/(1+x):f-a*e*n.sq(v)/(1-x),E=n.hypot(F.salp1,F.calp1),C=e*o+i*a*x,m&&E<this._etol2?(F.salp2=i*v,F.calp2=V-i*o*(x>=0?n.sq(v)/(1+x):1-x),w=n.hypot(F.salp2,F.calp2),F.salp2/=w,F.calp2/=w,F.sig12=Math.atan2(E,C)):Math.abs(this._n)>.1||C>=0||E>=6*Math.abs(this._n)*Math.PI*n.sq(i)||(B=Math.atan2(-c,-h),this.f>=0?(I=n.sq(e)*this._ep2,M=I/(2*(1+Math.sqrt(1+I))+I),A=this.f*i*this.A3f(M)*Math.PI,L=A*i,T=B/A,S=f/L):(z=a*i-o*e,P=Math.atan2(f,z),k=this.Lengths(this._n,Math.PI+P,e,-i,r,o,a,l,i,a,t.REDUCEDLENGTH,p,d),R=k.m12b,D=k.m0,T=R/(i*a*D*Math.PI)-1,L=T<-.01?f/T:-this.f*n.sq(i)*Math.PI,A=L/i,S=u/A),S>-g&&T>-1-b?this.f>=0?(F.salp1=Math.min(1,-T),F.calp1=-Math.sqrt(1-n.sq(F.salp1))):(F.calp1=Math.max(T>-g?0:-1,T),F.salp1=Math.sqrt(1-n.sq(F.calp1))):(O=s(T,S),N=A*(this.f>=0?-T*O/(1+O):-S*(1+O)/O),v=Math.sin(N),x=-Math.cos(N),F.salp1=a*v,F.calp1=f-a*e*n.sq(v)/(1-x))),F.salp1<=0?(F.salp1=1,F.calp1=0):(w=n.hypot(F.salp1,F.calp1),F.salp1/=w,F.calp1/=w),F},t.Geodesic.prototype.Lambda12=function(e,i,r,o,a,s,l,u,c,h,p,d,f,m){var _,y,g,v,x,b,w,E,C,T,S,A,L,I={};return 0===e&&0===u&&(u=-t.tiny_),y=l*i,g=n.hypot(u,l*e),I.ssig1=e,v=y*e,I.csig1=x=u*i,_=n.hypot(I.ssig1,I.csig1),I.ssig1/=_,I.csig1/=_,I.salp2=a!==i?y/a:l,I.calp2=a!==i||Math.abs(o)!==-e?Math.sqrt(n.sq(u*i)+(i<-e?(a-i)*(i+a):(e-o)*(e+o)))/a:Math.abs(u),I.ssig2=o,b=y*o,I.csig2=w=I.calp2*a,_=n.hypot(I.ssig2,I.csig2),I.ssig2/=_,I.csig2/=_,I.sig12=Math.atan2(Math.max(0,I.csig1*I.ssig2-I.ssig1*I.csig2),I.csig1*I.csig2+I.ssig1*I.ssig2),E=Math.max(0,x*b-v*w),C=x*w+v*b,S=Math.atan2(E*h-C*c,C*h+E*c),A=n.sq(g)*this._ep2,I.eps=A/(2*(1+Math.sqrt(1+A))+A),this.C3f(I.eps,m),T=t.SinCosSeries(!0,I.ssig2,I.csig2,m)-t.SinCosSeries(!0,I.ssig1,I.csig1,m),I.domg12=-this.f*this.A3f(I.eps)*y*(I.sig12+T),I.lam12=S+I.domg12,p&&(0===I.calp2?I.dlam12=-2*this._f1*r/e:(L=this.Lengths(I.eps,I.sig12,I.ssig1,I.csig1,r,I.ssig2,I.csig2,s,i,a,t.REDUCEDLENGTH,d,f),I.dlam12=L.m12b,I.dlam12*=this._f1/(I.calp2*a))),I},t.Geodesic.prototype.Inverse=function(e,i,r,o,a){var s,l;return a||(a=t.STANDARD),a===t.LONG_UNROLL&&(a|=t.STANDARD),a&=t.OUT_MASK,s=this.InverseInt(e,i,r,o,a),l=s.vals,a&t.AZIMUTH&&(l.azi1=n.atan2d(s.salp1,s.calp1),l.azi2=n.atan2d(s.salp2,s.calp2)),l},t.Geodesic.prototype.InverseInt=function(e,i,r,o,a){var s,l,u,c,h,p,d,f,m,g,v,b,w,E,C,T,S,A,L,I,M,z,P,R,D,k,O,N,B,F,V,U,j,G,q,H,Z,W,X,K,J,Y,$,Q,tt,et,it,nt,rt,ot,at,st,lt,ut,ct,ht,pt,dt,ft,mt,_t,yt,gt,vt,xt,bt={};if(bt.lat1=e=n.LatFix(e),bt.lat2=r=n.LatFix(r),e=n.AngRound(e),r=n.AngRound(r),s=n.AngDiff(i,o),l=s.t,s=s.s,a&t.LONG_UNROLL?(bt.lon1=i,bt.lon2=i+s+l):(bt.lon1=n.AngNormalize(i),bt.lon2=n.AngNormalize(o)),u=s>=0?1:-1,s=u*n.AngRound(s),l=n.AngRound(180-s-u*l),C=s*n.degree,c=n.sincosd(s>90?l:s),T=c.s,S=(s>90?-1:1)*c.c,h=Math.abs(e)<Math.abs(r)?-1:1,h<0&&(u*=-1,c=e,e=r,r=c),p=e<0?1:-1,e*=p,r*=p,c=n.sincosd(e),d=this._f1*c.s,f=c.c,c=n.hypot(d,f),d/=c,f/=c,f=Math.max(t.tiny_,f),c=n.sincosd(r),m=this._f1*c.s,g=c.c,c=n.hypot(m,g),m/=c,g/=c,g=Math.max(t.tiny_,g),f<-d?g===f&&(m=m<0?d:-d):Math.abs(m)===-d&&(g=f),w=Math.sqrt(1+this._ep2*n.sq(d)),E=Math.sqrt(1+this._ep2*n.sq(m)),P=new Array(t.nC1_+1),R=new Array(t.nC2_+1),D=new Array(t.nC3_),k=-90===e||0===T,k&&(L=S,I=T,M=1,z=0,N=d,B=L*f,F=m,V=M*g,A=Math.atan2(Math.max(0,B*F-N*V),B*V+N*F),O=this.Lengths(this._n,A,N,B,w,F,V,E,f,g,a|t.DISTANCE|t.REDUCEDLENGTH,P,R),v=O.s12b,b=O.m12b,a&t.GEODESICSCALE&&(bt.M12=O.M12,bt.M21=O.M21),A<1||b>=0?(A<3*t.tiny_&&(A=b=v=0),b*=this._b,v*=this._b,bt.a12=A/n.degree):k=!1),pt=2,!k&&0===d&&(this.f<=0||l>=180*this.f))L=M=0,I=z=1,v=this.a*C,A=j=C/this._f1,b=this._b*Math.sin(A),a&t.GEODESICSCALE&&(bt.M12=bt.M21=Math.cos(A)),bt.a12=s/this._f1;else if(!k)if(O=this.InverseStart(d,f,w,m,g,E,C,T,S,P,R),A=O.sig12,I=O.salp1,L=O.calp1,A>=0)z=O.salp2,M=O.calp2,G=O.dnm,v=A*this._b*G,b=n.sq(G)*this._b*Math.sin(A/G),a&t.GEODESICSCALE&&(bt.M12=bt.M21=Math.cos(A/G)),bt.a12=A/n.degree,j=C/(this._f1*G);else{for(q=0,H=t.tiny_,Z=1,W=t.tiny_,X=-1,K=!1,J=!1;q<_&&(O=this.Lambda12(d,f,w,m,g,E,I,L,T,S,q<20,P,R,D),Y=O.lam12,z=O.salp2,M=O.calp2,A=O.sig12,N=O.ssig1,B=O.csig1,F=O.ssig2,V=O.csig2,U=O.eps,ft=O.domg12,$=O.dlam12,!J&&Math.abs(Y)>=(K?8:1)*y);++q)Y>0&&(q<20||L/I>X/W)?(W=I,X=L):Y<0&&(q<20||L/I<Z/H)&&(H=I,Z=L),q<20&&$>0&&(Q=-Y/$,tt=Math.sin(Q),et=Math.cos(Q),(it=I*et+L*tt)>0&&Math.abs(Q)<Math.PI)?(L=L*et-I*tt,I=it,c=n.hypot(I,L),I/=c,L/=c,K=Math.abs(Y)<=16*y):(I=(H+W)/2,L=(Z+X)/2,c=n.hypot(I,L),I/=c,L/=c,K=!1,J=Math.abs(H-I)+(Z-L)<x||Math.abs(I-W)+(L-X)<x);nt=a|(a&(t.REDUCEDLENGTH|t.GEODESICSCALE)?t.DISTANCE:t.NONE),O=this.Lengths(U,A,N,B,w,F,V,E,f,g,nt,P,R),v=O.s12b,b=O.m12b,a&t.GEODESICSCALE&&(bt.M12=O.M12,bt.M21=O.M21),b*=this._b,v*=this._b,bt.a12=A/n.degree,a&t.AREA&&(vt=Math.sin(ft),xt=Math.cos(ft),pt=T*xt-S*vt,dt=S*xt+T*vt)}return a&t.DISTANCE&&(bt.s12=0+v),a&t.REDUCEDLENGTH&&(bt.m12=0+b),a&t.AREA&&(rt=I*f,ot=n.hypot(L,I*d),0!==ot&&0!==rt?(N=d,B=L*f,F=m,V=M*g,st=n.sq(ot)*this._ep2,U=st/(2*(1+Math.sqrt(1+st))+st),lt=n.sq(this.a)*ot*rt*this._e2,c=n.hypot(N,B),N/=c,B/=c,c=n.hypot(F,V),F/=c,V/=c,ut=new Array(t.nC4_),this.C4f(U,ut),ct=t.SinCosSeries(!1,N,B,ut),ht=t.SinCosSeries(!1,F,V,ut),bt.S12=lt*(ht-ct)):bt.S12=0,!k&&pt>1&&(pt=Math.sin(j),dt=Math.cos(j)),!k&&dt>-.7071&&m-d<1.75?(ft=1+dt,mt=1+f,_t=1+g,at=2*Math.atan2(pt*(d*_t+m*mt),ft*(d*m+mt*_t))):(yt=z*L-M*I,gt=M*L+z*I,0===yt&&gt<0&&(yt=t.tiny_*L,gt=-1),at=Math.atan2(yt,gt)),bt.S12+=this._c2*at,bt.S12*=h*u*p,bt.S12+=0),h<0&&(c=I,I=z,z=c,c=L,L=M,M=c,a&t.GEODESICSCALE&&(c=bt.M12,bt.M12=bt.M21,bt.M21=c)),I*=h*u,L*=h*p,z*=h*u,M*=h*p,{vals:bt,salp1:I,calp1:L,salp2:z,calp2:M}},t.Geodesic.prototype.GenDirect=function(i,n,r,o,a,s){var l;return s?s===t.LONG_UNROLL&&(s|=t.STANDARD):s=t.STANDARD,o||(s|=t.DISTANCE_IN),l=new e.GeodesicLine(this,i,n,r,s),l.GenPosition(o,a,s)},t.Geodesic.prototype.Direct=function(t,e,i,n,r){return this.GenDirect(t,e,i,!1,n,r)},t.Geodesic.prototype.ArcDirect=function(t,e,i,n,r){return this.GenDirect(t,e,i,!0,n,r)},t.Geodesic.prototype.Line=function(t,i,n,r){return new e.GeodesicLine(this,t,i,n,r)},t.Geodesic.prototype.DirectLine=function(t,e,i,n,r){return this.GenDirectLine(t,e,i,!1,n,r)},t.Geodesic.prototype.ArcDirectLine=function(t,e,i,n,r){return this.GenDirectLine(t,e,i,!0,n,r)},t.Geodesic.prototype.GenDirectLine=function(i,n,r,o,a,s){var l;return s||(s=t.STANDARD|t.DISTANCE_IN),o||(s|=t.DISTANCE_IN),l=new e.GeodesicLine(this,i,n,r,s),l.GenSetDistance(o,a),l},t.Geodesic.prototype.InverseLine=function(i,r,o,a,s){var l,u,c;return s||(s=t.STANDARD|t.DISTANCE_IN),l=this.InverseInt(i,r,o,a,t.ARC),c=n.atan2d(l.salp1,l.calp1),s&t.OUT_MASK&t.DISTANCE_IN&&(s|=t.DISTANCE),u=new e.GeodesicLine(this,i,r,c,s,l.salp1,l.calp1),u.SetArc(l.vals.a12),u},t.Geodesic.prototype.Polygon=function(t){return new i.PolygonArea(this,t)},t.WGS84=new t.Geodesic(r.WGS84.a,r.WGS84.f)})(o.Geodesic,o.GeodesicLine,o.PolygonArea,o.Math,o.Constants),(function(t,e,i){e.GeodesicLine=function(e,n,r,o,a,s,l){var u,c,h,p,d,f;a||(a=t.STANDARD|t.DISTANCE_IN),this.a=e.a,this.f=e.f,this._b=e._b,this._c2=e._c2,this._f1=e._f1,this.caps=a|t.LATITUDE|t.AZIMUTH|t.LONG_UNROLL,this.lat1=i.LatFix(n),this.lon1=r,\"undefined\"===typeof s||\"undefined\"===typeof l?(this.azi1=i.AngNormalize(o),u=i.sincosd(i.AngRound(this.azi1)),this.salp1=u.s,this.calp1=u.c):(this.azi1=o,this.salp1=s,this.calp1=l),u=i.sincosd(i.AngRound(this.lat1)),h=this._f1*u.s,c=u.c,u=i.hypot(h,c),h/=u,c/=u,c=Math.max(t.tiny_,c),this._dn1=Math.sqrt(1+e._ep2*i.sq(h)),this._salp0=this.salp1*c,this._calp0=i.hypot(this.calp1,this.salp1*h),this._ssig1=h,this._somg1=this._salp0*h,this._csig1=this._comg1=0!==h||0!==this.calp1?c*this.calp1:1,u=i.hypot(this._ssig1,this._csig1),this._ssig1/=u,this._csig1/=u,this._k2=i.sq(this._calp0)*e._ep2,p=this._k2/(2*(1+Math.sqrt(1+this._k2))+this._k2),this.caps&t.CAP_C1&&(this._A1m1=t.A1m1f(p),this._C1a=new Array(t.nC1_+1),t.C1f(p,this._C1a),this._B11=t.SinCosSeries(!0,this._ssig1,this._csig1,this._C1a),d=Math.sin(this._B11),f=Math.cos(this._B11),this._stau1=this._ssig1*f+this._csig1*d,this._ctau1=this._csig1*f-this._ssig1*d),this.caps&t.CAP_C1p&&(this._C1pa=new Array(t.nC1p_+1),t.C1pf(p,this._C1pa)),this.caps&t.CAP_C2&&(this._A2m1=t.A2m1f(p),this._C2a=new Array(t.nC2_+1),t.C2f(p,this._C2a),this._B21=t.SinCosSeries(!0,this._ssig1,this._csig1,this._C2a)),this.caps&t.CAP_C3&&(this._C3a=new Array(t.nC3_),e.C3f(p,this._C3a),this._A3c=-this.f*this._salp0*e.A3f(p),this._B31=t.SinCosSeries(!0,this._ssig1,this._csig1,this._C3a)),this.caps&t.CAP_C4&&(this._C4a=new Array(t.nC4_),e.C4f(p,this._C4a),this._A4=i.sq(this.a)*this._calp0*this._salp0*e._e2,this._B41=t.SinCosSeries(!1,this._ssig1,this._csig1,this._C4a)),this.a13=this.s13=Number.NaN},e.GeodesicLine.prototype.GenPosition=function(e,n,r){var o,a,s,l,u,c,h,p,d,f,m,_,y,g,v,x,b,w,E,C,T,S,A,L,I,M,z,P,R,D={};return r?r===t.LONG_UNROLL&&(r|=t.STANDARD):r=t.STANDARD,r&=this.caps&t.OUT_MASK,D.lat1=this.lat1,D.azi1=this.azi1,D.lon1=r&t.LONG_UNROLL?this.lon1:i.AngNormalize(this.lon1),e?D.a12=n:D.s12=n,e||this.caps&t.DISTANCE_IN&t.OUT_MASK?(l=0,u=0,e?(o=n*i.degree,M=i.sincosd(n),a=M.s,s=M.c):(p=n/(this._b*(1+this._A1m1)),d=Math.sin(p),f=Math.cos(p),l=-t.SinCosSeries(!0,this._stau1*f+this._ctau1*d,this._ctau1*f-this._stau1*d,this._C1pa),o=p-(l-this._B11),a=Math.sin(o),s=Math.cos(o),Math.abs(this.f)>.01&&(c=this._ssig1*s+this._csig1*a,h=this._csig1*s-this._ssig1*a,l=t.SinCosSeries(!0,c,h,this._C1a),m=(1+this._A1m1)*(o+(l-this._B11))-n/this._b,o-=m/Math.sqrt(1+this._k2*i.sq(c)),a=Math.sin(o),s=Math.cos(o))),c=this._ssig1*s+this._csig1*a,h=this._csig1*s-this._ssig1*a,S=Math.sqrt(1+this._k2*i.sq(c)),r&(t.DISTANCE|t.REDUCEDLENGTH|t.GEODESICSCALE)&&((e||Math.abs(this.f)>.01)&&(l=t.SinCosSeries(!0,c,h,this._C1a)),u=(1+this._A1m1)*(l-this._B11)),x=this._calp0*c,b=i.hypot(this._salp0,this._calp0*h),0===b&&(b=h=t.tiny_),C=this._salp0,T=this._calp0*h,e&&r&t.DISTANCE&&(D.s12=this._b*((1+this._A1m1)*o+u)),r&t.LONGITUDE&&(w=this._salp0*c,E=h,v=i.copysign(1,this._salp0),_=r&t.LONG_UNROLL?v*(o-(Math.atan2(c,h)-Math.atan2(this._ssig1,this._csig1))+(Math.atan2(v*w,E)-Math.atan2(v*this._somg1,this._comg1))):Math.atan2(w*this._comg1-E*this._somg1,E*this._comg1+w*this._somg1),y=_+this._A3c*(o+(t.SinCosSeries(!0,c,h,this._C3a)-this._B31)),g=y/i.degree,D.lon2=r&t.LONG_UNROLL?this.lon1+g:i.AngNormalize(i.AngNormalize(this.lon1)+i.AngNormalize(g))),r&t.LATITUDE&&(D.lat2=i.atan2d(x,this._f1*b)),r&t.AZIMUTH&&(D.azi2=i.atan2d(C,T)),r&(t.REDUCEDLENGTH|t.GEODESICSCALE)&&(A=t.SinCosSeries(!0,c,h,this._C2a),L=(1+this._A2m1)*(A-this._B21),I=(this._A1m1-this._A2m1)*o+(u-L),r&t.REDUCEDLENGTH&&(D.m12=this._b*(S*(this._csig1*c)-this._dn1*(this._ssig1*h)-this._csig1*h*I)),r&t.GEODESICSCALE&&(M=this._k2*(c-this._ssig1)*(c+this._ssig1)/(this._dn1+S),D.M12=s+(M*c-h*I)*this._ssig1/this._dn1,D.M21=s-(M*this._ssig1-this._csig1*I)*c/S)),r&t.AREA&&(z=t.SinCosSeries(!1,c,h,this._C4a),0===this._calp0||0===this._salp0?(P=C*this.calp1-T*this.salp1,R=T*this.calp1+C*this.salp1):(P=this._calp0*this._salp0*(s<=0?this._csig1*(1-s)+a*this._ssig1:a*(this._csig1*a/(1+s)+this._ssig1)),R=i.sq(this._salp0)+i.sq(this._calp0)*this._csig1*h),D.S12=this._c2*Math.atan2(P,R)+this._A4*(z-this._B41)),e||(D.a12=o/i.degree),D):(D.a12=Number.NaN,D)},e.GeodesicLine.prototype.Position=function(t,e){return this.GenPosition(!1,t,e)},e.GeodesicLine.prototype.ArcPosition=function(t,e){return this.GenPosition(!0,t,e)},e.GeodesicLine.prototype.GenSetDistance=function(t,e){t?this.SetArc(e):this.SetDistance(e)},e.GeodesicLine.prototype.SetDistance=function(e){var i;this.s13=e,i=this.GenPosition(!1,this.s13,t.ARC),this.a13=0+i.a12},e.GeodesicLine.prototype.SetArc=function(e){var i;this.a13=e,i=this.GenPosition(!0,this.a13,t.DISTANCE),this.s13=0+i.s12}})(o.Geodesic,o.GeodesicLine,o.Math),(function(t,e,i,n){var r,o;r=function(t,e){var n;return t=i.AngNormalize(t),e=i.AngNormalize(e),n=i.AngDiff(t,e).s,t<=0&&e>0&&n>0?1:e<=0&&t>0&&n<0?-1:0},o=function(t,e){return t%=720,e%=720,(e>=0&&e<360||e<-360?0:1)-(t>=0&&t<360||t<-360?0:1)},t.PolygonArea=function(t,i){this._geod=t,this.a=this._geod.a,this.f=this._geod.f,this._area0=4*Math.PI*t._c2,this.polyline=i||!1,this._mask=e.LATITUDE|e.LONGITUDE|e.DISTANCE|(this.polyline?e.NONE:e.AREA|e.LONG_UNROLL),this.polyline||(this._areasum=new n.Accumulator(0)),this._perimetersum=new n.Accumulator(0),this.Clear()},t.PolygonArea.prototype.Clear=function(){this.num=0,this._crossings=0,this.polyline||this._areasum.Set(0),this._perimetersum.Set(0),this._lat0=this._lon0=this.lat=this.lon=Number.NaN},t.PolygonArea.prototype.AddPoint=function(t,e){var i;0===this.num?(this._lat0=this.lat=t,this._lon0=this.lon=e):(i=this._geod.Inverse(this.lat,this.lon,t,e,this._mask),this._perimetersum.Add(i.s12),this.polyline||(this._areasum.Add(i.S12),this._crossings+=r(this.lon,e)),this.lat=t,this.lon=e),++this.num},t.PolygonArea.prototype.AddEdge=function(t,e){var i;this.num&&(i=this._geod.Direct(this.lat,this.lon,t,e,this._mask),this._perimetersum.Add(e),this.polyline||(this._areasum.Add(i.S12),this._crossings+=o(this.lon,i.lon2)),this.lat=i.lat2,this.lon=i.lon2),++this.num},t.PolygonArea.prototype.Compute=function(t,e){var i,o,a,s={number:this.num};return this.num<2?(s.perimeter=0,this.polyline||(s.area=0),s):this.polyline?(s.perimeter=this._perimetersum.Sum(),s):(i=this._geod.Inverse(this.lat,this.lon,this._lat0,this._lon0,this._mask),s.perimeter=this._perimetersum.Sum(i.s12),o=new n.Accumulator(this._areasum),o.Add(i.S12),a=this._crossings+r(this.lon,this._lon0),1&a&&o.Add((o.Sum()<0?1:-1)*this._area0/2),t||o.Negate(),e?o.Sum()>this._area0/2?o.Add(-this._area0):o.Sum()<=-this._area0/2&&o.Add(+this._area0):o.Sum()>=this._area0?o.Add(-this._area0):o<0&&o.Add(-this._area0),s.area=o.Sum(),s)},t.PolygonArea.prototype.TestPoint=function(t,e,i,n){var o,a,s,l,u={number:this.num+1};if(0===this.num)return u.perimeter=0,this.polyline||(u.area=0),u;for(u.perimeter=this._perimetersum.Sum(),a=this.polyline?0:this._areasum.Sum(),s=this._crossings,l=0;l<(this.polyline?1:2);++l)o=this._geod.Inverse(0===l?this.lat:t,0===l?this.lon:e,0!==l?this._lat0:t,0!==l?this._lon0:e,this._mask),u.perimeter+=o.s12,this.polyline||(a+=o.S12,s+=r(0===l?this.lon:e,0!==l?this._lon0:e));return this.polyline?u:(1&s&&(a+=(a<0?1:-1)*this._area0/2),i||(a*=-1),n?a>this._area0/2?a-=this._area0:a<=-this._area0/2&&(a+=this._area0):a>=this._area0?a-=this._area0:a<0&&(a+=this._area0),u.area=a,u)},t.PolygonArea.prototype.TestEdge=function(t,e,i,n){var a,s,l,u={number:this.num?this.num+1:0};return 0===this.num?u:(u.perimeter=this._perimetersum.Sum()+e,this.polyline?u:(s=this._areasum.Sum(),l=this._crossings,a=this._geod.Direct(this.lat,this.lon,t,e,this._mask),s+=a.S12,l+=o(this.lon,a.lon2),a=this._geod.Inverse(a.lat2,a.lon2,this._lat0,this._lon0,this._mask),u.perimeter+=a.s12,s+=a.S12,l+=r(a.lon2,this._lon0),1&l&&(s+=(s<0?1:-1)*this._area0/2),i||(s*=-1),n?s>this._area0/2?s-=this._area0:s<=-this._area0/2&&(s+=this._area0):s>=this._area0?s-=this._area0:s<0&&(s+=this._area0),u.area=s,u))}})(o.PolygonArea,o.Geodesic,o.Math,o.Accumulator),o.DMS={},(function(t){var e,i,n,r,o=\"SNWE\",a=\"°'\\\"\",s=[\"degrees\",\"minutes\",\"seconds\"];e=function(t,e){return t.indexOf(e.toUpperCase())},i=function(t,e){return String(\"0000\").substr(0,Math.max(0,Math.min(4,e-t.length)))+t},t.NONE=0,t.LATITUDE=1,t.LONGITUDE=2,t.AZIMUTH=3,t.DEGREE=0,t.MINUTE=1,t.SECOND=2,t.Decode=function(i){var r,a,s,l,u,c,h,p,d=i,f=0,m=0,_=t.NONE;for(d=d.replace(/\\u00b0/g,\"d\").replace(/\\u00ba/g,\"d\").replace(/\\u2070/g,\"d\").replace(/\\u02da/g,\"d\").replace(/\\u2032/g,\"'\").replace(/\\u00b4/g,\"'\").replace(/\\u2019/g,\"'\").replace(/\\u2033/g,'\"').replace(/\\u201d/g,'\"').replace(/\\u2212/g,\"-\").replace(/''/g,'\"').trim(),r=d.length,c=0;c<r;c=p,++m)if(h=c,0===m&&e(o,d.charAt(h))>=0&&++h,(m>0||h<r&&e(\"-+\",d.charAt(h))>=0)&&++h,a=d.substr(h,r-h).indexOf(\"-\"),s=d.substr(h,r-h).indexOf(\"+\"),a<0?a=r:a+=h,s<0?s=r:s+=h,p=Math.min(a,s),l=n(d.substr(c,p-c)),f+=l.val,u=l.ind,_===t.NONE)_=u;else if(u!==t.NONE&&_!==u)throw new Error(\"Incompatible hemisphere specifies in \"+d.substr(0,p));if(0===m)throw new Error(\"Empty or incomplete DMS string \"+d);return{val:f,ind:_}},n=function(i){var n,a,l,u,c,h,p,d,f,m,_,y,g,v,x,b,w={},E=\"\";do{if(n=1,a=0,l=i.length,u=t.NONE,c=-1,l>a&&(c=e(o,i.charAt(a)))>=0&&(u=2&c?t.LONGITUDE:t.LATITUDE,n=1&c?1:-1,++a),l>a&&(c=e(o,i.charAt(l-1)))>=0&&c>=0){if(u!==t.NONE){E=i.charAt(a-1).toUpperCase()===i.charAt(l-1).toUpperCase()?\"Repeated hemisphere indicators \"+i.charAt(a-1)+\" in \"+i.substr(a-1,l-a+1):\"Contradictory hemisphere indicators \"+i.charAt(a-1)+\" and \"+i.charAt(l-1)+\" in \"+i.substr(a-1,l-a+1);break}u=2&c?t.LONGITUDE:t.LATITUDE,n=1&c?1:-1,--l}if(l>a&&(c=e(\"-+\",i.charAt(a)))>=0&&c>=0&&(n*=c?1:-1,++a),l===a){E=\"Empty or incomplete DMS string \"+i;break}for(h=[0,0,0],p=[0,0,0],d=0,f=0,m=0,_=0,y=a,g=!1,v=0,x=0;y<l;)if(b=i.charAt(y++),(c=e(\"0123456789\",b))>=0)++_,v>0?++v:(f=10*f+c,++x);else if(\".\"===b){if(g){E=\"Multiple decimal points in \"+i.substr(a,l-a);break}g=!0,v=1}else{if(!((c=e(\"D'\\\":\",b))>=0)){if(e(\"-+\",b)>=0){E=\"Internal sign in DMS string \"+i.substr(a,l-a);break}E=\"Illegal character \"+b+\" in DMS string \"+i.substr(a,l-a);break}if(c>=3){if(y===l){E=\"Illegal for colon to appear at the end of \"+i.substr(a,l-a);break}c=d}if(c===d-1){E=\"Repeated \"+s[c]+\" component in \"+i.substr(a,l-a);break}if(c<d){E=s[c]+\" component follows \"+s[d-1]+\" component in \"+i.substr(a,l-a);break}if(0===_){E=\"Missing numbers in \"+s[c]+\" component of \"+i.substr(a,l-a);break}v>0&&(m=parseFloat(i.substr(y-x-v-1,x+v)),f=0),h[c]=f,p[c]=f+m,y<l&&(d=c+1,f=m=0,_=v=x=0)}if(E.length)break;if(e(\"D'\\\":\",i.charAt(y-1))<0){if(d>=3){E=\"Extra text following seconds in DMS string \"+i.substr(a,l-a);break}if(0===_){E=\"Missing numbers in trailing component of \"+i.substr(a,l-a);break}v>0&&(m=parseFloat(i.substr(y-x-v,x+v)),f=0),h[d]=f,p[d]=f+m}if(g&&0===v){E=\"Decimal point in non-terminal component of \"+i.substr(a,l-a);break}if(h[1]>=60||p[1]>60){E=\"Minutes \"+p[1]+\" not in range [0,60)\";break}if(h[2]>=60||p[2]>60){E=\"Seconds \"+p[2]+\" not in range [0,60)\";break}return w.ind=u,w.val=n*(p[2]?(60*(60*p[0]+p[1])+p[2])/3600:p[1]?(60*p[0]+p[1])/60:p[0]),w}while(!1);if(w.val=r(i),0===w.val)throw new Error(E);return w.ind=t.NONE,w},r=function(t){var e,i,n,r;return t.length<3?0:(e=t.toUpperCase().replace(/0+$/,\"\"),i=\"-\"===e.charAt(0)?-1:1,n=\"-\"===e.charAt(0)||\"+\"===e.charAt(0)?1:0,(r=e.length-1)+1<n+3?0:(e=e.substr(n,r+1-n),\"NAN\"===e||\"1.#QNAN\"===e||\"1.#SNAN\"===e||\"1.#IND\"===e||\"1.#R\"===e?Number.NaN:\"INF\"===e||\"1.#INF\"===e?i*Number.POSITIVE_INFINITY:0))},t.DecodeLatLon=function(e,i,n){var r,o,a={},s=t.Decode(e),l=t.Decode(i),u=s.val,c=s.ind,h=l.val,p=l.ind;if(n||(n=!1),c===t.NONE&&p===t.NONE?(c=n?t.LONGITUDE:t.LATITUDE,p=n?t.LATITUDE:t.LONGITUDE):c===t.NONE?c=t.LATITUDE+t.LONGITUDE-p:p===t.NONE&&(p=t.LATITUDE+t.LONGITUDE-c),c===p)throw new Error(\"Both \"+e+\" and \"+i+\" interpreted as \"+(c===t.LATITUDE?\"latitudes\":\"longitudes\"));if(r=c===t.LATITUDE?u:h,o=c===t.LATITUDE?h:u,Math.abs(r)>90)throw new Error(\"Latitude \"+r+\" not in [-90,90]\");return a.lat=r,a.lon=o,a},t.DecodeAngle=function(e){var i=t.Decode(e),n=i.val;if(i.ind!==t.NONE)throw new Error(\"Arc angle \"+e+\" includes a hemisphere N/E/W/S\");return n},t.DecodeAzimuth=function(e){var i=t.Decode(e),n=i.val;if(i.ind===t.LATITUDE)throw new Error(\"Azimuth \"+e+\" has a latitude hemisphere N/S\");return n},t.Encode=function(e,n,r,s){var l,u,c,h,p,d,f,m,_,y=1;if(s||(s=t.NONE),!isFinite(e))return e<0?String(\"-inf\"):e>0?String(\"inf\"):String(\"nan\");for(r=Math.min(15-2*n,r),l=0;l<n;++l)y*=60;for(l=0;l<r;++l)y*=10;for(s===t.AZIMUTH&&(e-=360*Math.floor(e/360)),u=e<0?-1:1,e*=u,c=Math.floor(e),h=(e-c)*y+.5,p=Math.floor(h),h=p===h&&1===(1&p)?p-1:p,h/=y,h=Math.floor((e-c)*y+.5)/y,h>=1&&(c+=1,h-=1),d=[h,0,0],l=1;l<=n;++l)f=Math.floor(d[l-1]),m=d[l-1]-f,d[l]=60*m,d[l-1]=f;switch(d[0]+=c,_=\"\",s===t.NONE&&u<0&&(_+=\"-\"),n){case t.DEGREE:_+=i(d[0].toFixed(r),s===t.NONE?0:1+Math.min(s,2)+r+(r?1:0))+a.charAt(0);break;default:switch(_+=i(d[0].toFixed(0),s===t.NONE?0:1+Math.min(s,2))+a.charAt(0),n){case t.MINUTE:_+=i(d[1].toFixed(r),2+r+(r?1:0))+a.charAt(1);break;case t.SECOND:_+=i(d[1].toFixed(0),2)+a.charAt(1),_+=i(d[2].toFixed(r),2+r+(r?1:0))+a.charAt(2)}}return s!==t.NONE&&s!==t.AZIMUTH&&(_+=o.charAt((s===t.LATITUDE?0:2)+(u<0?0:1))),_}})(o.DMS),(function(i){\"object\"===typeof t&&t.exports?t.exports=i:(n=[],void 0!==(r=function(){return i}.apply(e,n))&&(t.exports=r))})(o)})(),(function(e){t.exports=e()})((function(){var t;return (function t(e,i,n){function r(s,l){if(!i[s]){if(!e[s]){var u=\"function\"==typeof o&&o;if(!l&&u)return o(s,!0);if(a)return a(s,!0);var c=new Error(\"Cannot find module '\"+s+\"'\");throw c.code=\"MODULE_NOT_FOUND\",c}var h=i[s]={exports:{}};e[s][0].call(h.exports,(function(t){var i=e[s][1][t];return r(i||t)}),h,h.exports,t,e,i,n)}return i[s].exports}for(var a=\"function\"==typeof o&&o,s=0;s<n.length;s++)r(n[s]);return r})({1:[(function(e,i,n){!(function(e,r){\"object\"==typeof n&&\"undefined\"!=typeof i?i.exports=r():\"function\"==typeof t&&t.amd?t(r):e.glMatrix=r()})(this,(function(){\"use strict\";function t(t,e,i){var n=e[0],r=e[1],o=e[2];return t[0]=n*i[0]+r*i[3]+o*i[6],t[1]=n*i[1]+r*i[4]+o*i[7],t[2]=n*i[2]+r*i[5]+o*i[8],t}function e(t,e,i){var n=e[0],r=e[1],o=e[2],a=e[3];return t[0]=i[0]*n+i[4]*r+i[8]*o+i[12]*a,t[1]=i[1]*n+i[5]*r+i[9]*o+i[13]*a,t[2]=i[2]*n+i[6]*r+i[10]*o+i[14]*a,t[3]=i[3]*n+i[7]*r+i[11]*o+i[15]*a,t}function i(){var t=new Float32Array(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function n(t,e,i){var n=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(i),l=Math.cos(i);return t[0]=n*l+o*s,t[1]=r*l+a*s,t[2]=n*-s+o*l,t[3]=r*-s+a*l,t}function r(t,e,i){var n=e[0],r=e[1],o=e[2],a=e[3],s=i[0],l=i[1];return t[0]=n*s,t[1]=r*s,t[2]=o*l,t[3]=a*l,t}function o(){var t=new Float32Array(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function a(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=-i,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function s(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function l(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function u(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],p=e[10],d=e[11],f=e[12],m=e[13],_=e[14],y=e[15],g=i*s-n*a,v=i*l-r*a,x=i*u-o*a,b=n*l-r*s,w=n*u-o*s,E=r*u-o*l,C=c*m-h*f,T=c*_-p*f,S=c*y-d*f,A=h*_-p*m,L=h*y-d*m,I=p*y-d*_,M=g*I-v*L+x*A+b*S-w*T+E*C;return M?(M=1/M,t[0]=(s*I-l*L+u*A)*M,t[1]=(r*L-n*I-o*A)*M,t[2]=(m*E-_*w+y*b)*M,t[3]=(p*w-h*E-d*b)*M,t[4]=(l*S-a*I-u*T)*M,t[5]=(i*I-r*S+o*T)*M,t[6]=(_*x-f*E-y*v)*M,t[7]=(c*E-p*x+d*v)*M,t[8]=(a*L-s*S+u*C)*M,t[9]=(n*S-i*L-o*C)*M,t[10]=(f*w-m*x+y*g)*M,t[11]=(h*x-c*w-d*g)*M,t[12]=(s*T-a*A-l*C)*M,t[13]=(i*A-n*T+r*C)*M,t[14]=(m*v-f*b-_*g)*M,t[15]=(c*b-h*v+p*g)*M,t):null}function c(t,e,i){var n=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],d=e[10],f=e[11],m=e[12],_=e[13],y=e[14],g=e[15],v=i[0],x=i[1],b=i[2],w=i[3];return t[0]=v*n+x*s+b*h+w*m,t[1]=v*r+x*l+b*p+w*_,t[2]=v*o+x*u+b*d+w*y,t[3]=v*a+x*c+b*f+w*g,v=i[4],x=i[5],b=i[6],w=i[7],t[4]=v*n+x*s+b*h+w*m,t[5]=v*r+x*l+b*p+w*_,t[6]=v*o+x*u+b*d+w*y,t[7]=v*a+x*c+b*f+w*g,v=i[8],x=i[9],b=i[10],w=i[11],t[8]=v*n+x*s+b*h+w*m,t[9]=v*r+x*l+b*p+w*_,t[10]=v*o+x*u+b*d+w*y,t[11]=v*a+x*c+b*f+w*g,v=i[12],x=i[13],b=i[14],w=i[15],t[12]=v*n+x*s+b*h+w*m,t[13]=v*r+x*l+b*p+w*_,t[14]=v*o+x*u+b*d+w*y,t[15]=v*a+x*c+b*f+w*g,t}function h(t,e,i){var n,r,o,a,s,l,u,c,h,p,d,f,m=i[0],_=i[1],y=i[2];return e===t?(t[12]=e[0]*m+e[4]*_+e[8]*y+e[12],t[13]=e[1]*m+e[5]*_+e[9]*y+e[13],t[14]=e[2]*m+e[6]*_+e[10]*y+e[14],t[15]=e[3]*m+e[7]*_+e[11]*y+e[15]):(n=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],d=e[10],f=e[11],t[0]=n,t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=p,t[10]=d,t[11]=f,t[12]=n*m+s*_+h*y+e[12],t[13]=r*m+l*_+p*y+e[13],t[14]=o*m+u*_+d*y+e[14],t[15]=a*m+c*_+f*y+e[15]),t}function p(t,e,i){var n=i[0],r=i[1],o=i[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function d(t,e,i){var n=Math.sin(i),r=Math.cos(i),o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+u*n,t[5]=a*r+c*n,t[6]=s*r+h*n,t[7]=l*r+p*n,t[8]=u*r-o*n,t[9]=c*r-a*n,t[10]=h*r-s*n,t[11]=p*r-l*n,t}function f(t,e,i){var n=Math.sin(i),r=Math.cos(i),o=e[0],a=e[1],s=e[2],l=e[3],u=e[4],c=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+u*n,t[1]=a*r+c*n,t[2]=s*r+h*n,t[3]=l*r+p*n,t[4]=u*r-o*n,t[5]=c*r-a*n,t[6]=h*r-s*n,t[7]=p*r-l*n,t}function m(t,e,i,n,r){var o=1/Math.tan(e/2),a=1/(n-r);return t[0]=o/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+n)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*n*a,t[15]=0,t}function _(t,e,i,n,r,o,a){var s=1/(e-i),l=1/(n-r),u=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+i)*s,t[13]=(r+n)*l,t[14]=(a+o)*u,t[15]=1,t}return (function(){var t=new Float32Array(3);t[0]=0,t[1]=0,t[2]=0})(),(function(){var t=new Float32Array(4);t[0]=0,t[1]=0,t[2]=0,t[3]=0})(),{vec3:{transformMat3:t},vec4:{transformMat4:e},mat2:{create:i,rotate:n,scale:r},mat3:{create:o,fromRotation:a},mat4:{create:s,identity:l,translate:h,scale:p,multiply:c,perspective:m,rotateX:d,rotateZ:f,invert:u,ortho:_}}}))}),{}],2:[(function(t,e,i){\"use strict\";function n(t,e){this.x=t,this.y=e}e.exports=n,n.prototype={clone:function(){return new n(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,i=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=i,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),n=e*this.x-i*this.y,r=i*this.x+e*this.y;return this.x=n,this.y=r,this},_rotateAround:function(t,e){var i=Math.cos(t),n=Math.sin(t),r=e.x+i*(this.x-e.x)-n*(this.y-e.y),o=e.y+n*(this.x-e.x)+i*(this.y-e.y);return this.x=r,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},n.convert=function(t){return t instanceof n?t:Array.isArray(t)?new n(t[0],t[1]):t}}),{}],3:[(function(e,i,n){!(function(e,r){\"object\"==typeof n&&\"undefined\"!=typeof i?i.exports=r():\"function\"==typeof t&&t.amd?t(r):e.ShelfPack=r()})(this,(function(){function t(t,e,i){i=i||{},this.w=t||64,this.h=e||64,this.autoResize=!!i.autoResize,this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0}function e(t,e,i){this.x=0,this.y=t,this.w=this.free=e,this.h=i}function i(t,e,i,n,r,o,a){this.id=t,this.x=e,this.y=i,this.w=n,this.h=r,this.maxw=o||n,this.maxh=a||r,this.refcount=0}return t.prototype.pack=function(t,e){t=[].concat(t),e=e||{};for(var i,n,r,o,a=[],s=0;s<t.length;s++)if(i=t[s].w||t[s].width,n=t[s].h||t[s].height,r=t[s].id,i&&n){if(!(o=this.packOne(i,n,r)))continue;e.inPlace&&(t[s].x=o.x,t[s].y=o.y,t[s].id=o.id),a.push(o)}return this.shrink(),a},t.prototype.packOne=function(t,i,n){var r,o,a,s,l={freebin:-1,shelf:-1,waste:1/0},u=0;if(\"string\"==typeof n||\"number\"==typeof n){if(r=this.getBin(n))return this.ref(r),r;\"number\"==typeof n&&(this.maxId=Math.max(n,this.maxId))}else n=++this.maxId;for(s=0;s<this.freebins.length;s++){if(r=this.freebins[s],i===r.maxh&&t===r.maxw)return this.allocFreebin(s,t,i,n);i>r.maxh||t>r.maxw||i<=r.maxh&&t<=r.maxw&&(a=r.maxw*r.maxh-t*i)<l.waste&&(l.waste=a,l.freebin=s)}for(s=0;s<this.shelves.length;s++)if(o=this.shelves[s],u+=o.h,!(t>o.free)){if(i===o.h)return this.allocShelf(s,t,i,n);i>o.h||i<o.h&&(a=(o.h-i)*t)<l.waste&&(l.freebin=-1,l.waste=a,l.shelf=s)}if(-1!==l.freebin)return this.allocFreebin(l.freebin,t,i,n);if(-1!==l.shelf)return this.allocShelf(l.shelf,t,i,n);if(i<=this.h-u&&t<=this.w)return o=new e(u,this.w,i),this.allocShelf(this.shelves.push(o)-1,t,i,n);if(this.autoResize){var c,h,p,d;return c=h=this.h,p=d=this.w,(p<=c||t>p)&&(d=2*Math.max(t,p)),(c<p||i>c)&&(h=2*Math.max(i,c)),this.resize(d,h),this.packOne(t,i,n)}return null},t.prototype.allocFreebin=function(t,e,i,n){var r=this.freebins.splice(t,1)[0];return r.id=n,r.w=e,r.h=i,r.refcount=0,this.bins[n]=r,this.ref(r),r},t.prototype.allocShelf=function(t,e,i,n){var r=this.shelves[t],o=r.alloc(e,i,n);return this.bins[n]=o,this.ref(o),o},t.prototype.shrink=function(){if(this.shelves.length>0){for(var t=0,e=0,i=0;i<this.shelves.length;i++){var n=this.shelves[i];e+=n.h,t=Math.max(n.w-n.free,t)}this.resize(t,e)}},t.prototype.getBin=function(t){return this.bins[t]},t.prototype.ref=function(t){if(1==++t.refcount){var e=t.h;this.stats[e]=1+(0|this.stats[e])}return t.refcount},t.prototype.unref=function(t){return 0===t.refcount?0:(0==--t.refcount&&(this.stats[t.h]--,delete this.bins[t.id],this.freebins.push(t)),t.refcount)},t.prototype.clear=function(){this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0},t.prototype.resize=function(t,e){this.w=t,this.h=e;for(var i=0;i<this.shelves.length;i++)this.shelves[i].resize(t);return!0},e.prototype.alloc=function(t,e,n){if(t>this.free||e>this.h)return null;var r=this.x;return this.x+=t,this.free-=t,new i(n,r,this.y,t,e,t,this.h)},e.prototype.resize=function(t){return this.free+=t-this.w,this.w=t,!0},t}))}),{}],4:[(function(t,e,i){\"use strict\";function n(t,e,i,n,r,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=n||.25,this.fontFamily=r||\"sans-serif\",this.fontWeight=o||\"normal\",this.radius=i||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement(\"canvas\"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext(\"2d\"),this.ctx.font=this.fontWeight+\" \"+this.fontSize+\"px \"+this.fontFamily,this.ctx.textBaseline=\"middle\",this.ctx.fillStyle=\"black\",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf(\"Gecko/\")>=0?1.2:1))}function r(t,e,i,n,r,a,s){for(var l=0;l<e;l++){for(var u=0;u<i;u++)n[u]=t[u*e+l];for(o(n,r,a,s,i),u=0;u<i;u++)t[u*e+l]=r[u]}for(u=0;u<i;u++){for(l=0;l<e;l++)n[l]=t[u*e+l];for(o(n,r,a,s,e),l=0;l<e;l++)t[u*e+l]=Math.sqrt(r[l])}}function o(t,e,i,n,r){i[0]=0,n[0]=-a,n[1]=+a;for(var o=1,s=0;o<r;o++){for(var l=(t[o]+o*o-(t[i[s]]+i[s]*i[s]))/(2*o-2*i[s]);l<=n[s];)s--,l=(t[o]+o*o-(t[i[s]]+i[s]*i[s]))/(2*o-2*i[s]);s++,i[s]=o,n[s]=l,n[s+1]=+a}for(o=0,s=0;o<r;o++){for(;n[s+1]<o;)s++;e[o]=(o-i[s])*(o-i[s])+t[i[s]]}}e.exports=n;var a=1e20;n.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),i=new Uint8ClampedArray(this.size*this.size),n=0;n<this.size*this.size;n++){var o=e.data[4*n+3]/255;this.gridOuter[n]=1===o?0:0===o?a:Math.pow(Math.max(0,.5-o),2),this.gridInner[n]=1===o?a:0===o?0:Math.pow(Math.max(0,o-.5),2)}for(r(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),r(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),n=0;n<this.size*this.size;n++){var s=this.gridOuter[n]-this.gridInner[n];i[n]=Math.max(0,Math.min(255,Math.round(255-255*(s/this.radius+this.cutoff))))}return i}}),{}],5:[(function(t,e,i){function n(t,e,i,n){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=i,this.p2y=n}e.exports=n,n.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},n.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},n.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},n.prototype.solveCurveX=function(t,e){void 0===e&&(e=1e-6);var i,n,r,o,a;for(r=t,a=0;a<8;a++){if(o=this.sampleCurveX(r)-t,Math.abs(o)<e)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r-=o/s}if(i=0,n=1,(r=t)<i)return i;if(r>n)return n;for(;i<n;){if(o=this.sampleCurveX(r),Math.abs(o-t)<e)return r;t>o?i=r:n=r,r=.5*(n-i)+i}return r},n.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}}),{}],6:[(function(t,e,i){e.exports.VectorTile=t(\"./lib/vectortile.js\"),e.exports.VectorTileFeature=t(\"./lib/vectortilefeature.js\"),e.exports.VectorTileLayer=t(\"./lib/vectortilelayer.js\")}),{\"./lib/vectortile.js\":7,\"./lib/vectortilefeature.js\":8,\"./lib/vectortilelayer.js\":9}],7:[(function(t,e,i){\"use strict\";function n(t,e){this.layers=t.readFields(r,{},e)}function r(t,e,i){if(3===t){var n=new o(i,i.readVarint()+i.pos);n.length&&(e[n.name]=n)}}var o=t(\"./vectortilelayer\");e.exports=n}),{\"./vectortilelayer\":9}],8:[(function(t,e,i){\"use strict\";function n(t,e,i,n,o){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=o,t.readFields(r,this,e)}function r(t,e,i){1==t?e.id=i.readVarint():2==t?o(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function o(t,e){for(var i=t.readVarint()+t.pos;t.pos<i;){var n=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[n]=r}}function a(t){var e=t.length;if(e<=1)return[t];for(var i,n,r=[],o=0;o<e;o++){var a=s(t[o]);0!==a&&(void 0===n&&(n=a<0),n===a<0?(i&&r.push(i),i=[t[o]]):i.push(t[o]))}return i&&r.push(i),r}function s(t){for(var e,i,n=0,r=0,o=t.length,a=o-1;r<o;a=r++)e=t[r],i=t[a],n+=(i.x-e.x)*(e.y+i.y);return n}var l=t(\"@mapbox/point-geometry\");e.exports=n,n.types=[\"Unknown\",\"Point\",\"LineString\",\"Polygon\"],n.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,n=1,r=0,o=0,a=0,s=[];t.pos<i;){if(!r){var u=t.readVarint();n=7&u,r=u>>3}if(r--,1===n||2===n)o+=t.readSVarint(),a+=t.readSVarint(),1===n&&(e&&s.push(e),e=[]),e.push(new l(o,a));else{if(7!==n)throw new Error(\"unknown command \"+n);e&&e.push(e[0].clone())}}return e&&s.push(e),s},n.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,n=0,r=0,o=0,a=1/0,s=-1/0,l=1/0,u=-1/0;t.pos<e;){if(!n){var c=t.readVarint();i=7&c,n=c>>3}if(n--,1===i||2===i)r+=t.readSVarint(),o+=t.readSVarint(),r<a&&(a=r),r>s&&(s=r),o<l&&(l=o),o>u&&(u=o);else if(7!==i)throw new Error(\"unknown command \"+i)}return[a,l,s,u]},n.prototype.toGeoJSON=function(t,e,i){function r(t){for(var e=0;e<t.length;e++){var i=t[e],n=180-360*(i.y+c)/l;t[e]=[360*(i.x+u)/l-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}var o,s,l=this.extent*Math.pow(2,i),u=this.extent*t,c=this.extent*e,h=this.loadGeometry(),p=n.types[this.type];switch(this.type){case 1:var d=[];for(o=0;o<h.length;o++)d[o]=h[o][0];h=d,r(h);break;case 2:for(o=0;o<h.length;o++)r(h[o]);break;case 3:for(h=a(h),o=0;o<h.length;o++)for(s=0;s<h[o].length;s++)r(h[o][s])}1===h.length?h=h[0]:p=\"Multi\"+p;var f={type:\"Feature\",geometry:{type:p,coordinates:h},properties:this.properties};return\"id\"in this&&(f.id=this.id),f}}),{\"@mapbox/point-geometry\":2}],9:[(function(t,e,i){\"use strict\";function n(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(r,this,e),this.length=this._features.length}function r(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(o(i))}function o(t){for(var e=null,i=t.readVarint()+t.pos;t.pos<i;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}var a=t(\"./vectortilefeature.js\");e.exports=n,n.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error(\"feature index out of bounds\");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new a(this._pbf,e,this.extent,this._keys,this._values)}}),{\"./vectortilefeature.js\":8}],10:[(function(e,i,n){!(function(e,r){\"object\"==typeof n&&\"undefined\"!=typeof i?r(n):\"function\"==typeof t&&t.amd?t([\"exports\"],r):r(e.WhooTS=e.WhooTS||{})})(this,(function(t){function e(t,e,n,r,o,a){return a=a||{},t+\"?\"+[\"bbox=\"+i(n,r,o),\"format=\"+(a.format||\"image/png\"),\"service=\"+(a.service||\"WMS\"),\"version=\"+(a.version||\"1.1.1\"),\"request=\"+(a.request||\"GetMap\"),\"srs=\"+(a.srs||\"EPSG:3857\"),\"width=\"+(a.width||256),\"height=\"+(a.height||256),\"layers=\"+e].join(\"&\")}function i(t,e,i){e=Math.pow(2,i)-e-1;var r=n(256*t,256*e,i),o=n(256*(t+1),256*(e+1),i);return r[0]+\",\"+r[1]+\",\"+o[0]+\",\"+o[1]}function n(t,e,i){var n=2*Math.PI*6378137/256/Math.pow(2,i);return[t*n-2*Math.PI*6378137/2,e*n-2*Math.PI*6378137/2]}t.getURL=e,t.getTileBBox=i,t.getMercCoords=n,Object.defineProperty(t,\"__esModule\",{value:!0})}))}),{}],11:[(function(t,e,i){\"use strict\";function n(t,e,i){i=i||2;var n=e&&e.length,o=n?e[0]*i:t.length,s=r(t,0,o,i,!0),l=[];if(!s)return l;var u,c,p,d,f,m,_;if(n&&(s=h(t,e,s,i)),t.length>80*i){u=p=t[0],c=d=t[1];for(var y=i;y<o;y+=i)f=t[y],m=t[y+1],f<u&&(u=f),m<c&&(c=m),f>p&&(p=f),m>d&&(d=m);_=Math.max(p-u,d-c)}return a(s,l,i,u,c,_),l}function r(t,e,i,n,r){var o,a;if(r===z(t,e,i,n)>0)for(o=e;o<i;o+=n)a=L(o,t[o],t[o+1],a);else for(o=i-n;o>=e;o-=n)a=L(o,t[o],t[o+1],a);return a&&w(a,a.next)&&(I(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!w(n,n.next)&&0!==b(n.prev,n,n.next))n=n.next;else{if(I(n),(n=e=n.prev)===n.next)return null;i=!0}}while(i||n!==e);return e}function a(t,e,i,n,r,h,p){if(t){!p&&h&&m(t,n,r,h);for(var d,f,_=t;t.prev!==t.next;)if(d=t.prev,f=t.next,h?l(t,n,r,h):s(t))e.push(d.i/i),e.push(t.i/i),e.push(f.i/i),I(t),t=f.next,_=f.next;else if((t=f)===_){p?1===p?(t=u(t,e,i),a(t,e,i,n,r,h,2)):2===p&&c(t,e,i,n,r,h):a(o(t),e,i,n,r,h,1);break}}}function s(t){var e=t.prev,i=t,n=t.next;if(b(e,i,n)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(v(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&b(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function l(t,e,i,n){var r=t.prev,o=t,a=t.next;if(b(r,o,a)>=0)return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,l=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,u=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,c=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,h=y(s,l,e,i,n),p=y(u,c,e,i,n),d=t.nextZ;d&&d.z<=p;){if(d!==t.prev&&d!==t.next&&v(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&b(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=t.prevZ;d&&d.z>=h;){if(d!==t.prev&&d!==t.next&&v(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&b(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}function u(t,e,i){var n=t;do{var r=n.prev,o=n.next.next;!w(r,o)&&E(r,n,n.next,o)&&T(r,o)&&T(o,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(o.i/i),I(n),I(n.next),n=t=o),n=n.next}while(n!==t);return n}function c(t,e,i,n,r,s){var l=t;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&x(l,u)){var c=A(l,u);return l=o(l,l.next),c=o(c,c.next),a(l,e,i,n,r,s),void a(c,e,i,n,r,s)}u=u.next}l=l.next}while(l!==t)}function h(t,e,i,n){var a,s,l,u,c,h=[];for(a=0,s=e.length;a<s;a++)l=e[a]*n,u=a<s-1?e[a+1]*n:t.length,c=r(t,l,u,n,!1),c===c.next&&(c.steiner=!0),h.push(g(c));for(h.sort(p),a=0;a<h.length;a++)d(h[a],i),i=o(i,i.next);return i}function p(t,e){return t.x-e.x}function d(t,e){if(e=f(t,e)){var i=A(e,t);o(i,i.next)}}function f(t,e){var i,n=e,r=t.x,o=t.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=r&&s>a){if(a=s,s===r){if(o===n.y)return n;if(o===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(r===a)return i.prev;var l,u=i,c=i.x,h=i.y,p=1/0;for(n=i.next;n!==u;)r>=n.x&&n.x>=c&&v(o<h?r:a,o,c,h,o<h?a:r,o,n.x,n.y)&&((l=Math.abs(o-n.y)/(r-n.x))<p||l===p&&n.x>i.x)&&T(n,t)&&(i=n,p=l),n=n.next;return i}function m(t,e,i,n){var r=t;do{null===r.z&&(r.z=y(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,_(r)}function _(t){var e,i,n,r,o,a,s,l,u=1;do{for(i=t,t=null,o=null,a=0;i;){for(a++,n=i,s=0,e=0;e<u&&(s++,n=n.nextZ);e++);for(l=u;s>0||l>0&&n;)0===s?(r=n,n=n.nextZ,l--):0!==l&&n?i.z<=n.z?(r=i,i=i.nextZ,s--):(r=n,n=n.nextZ,l--):(r=i,i=i.nextZ,s--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;i=n}o.nextZ=null,u*=2}while(a>1);return t}function y(t,e,i,n,r){return t=32767*(t-i)/r,e=32767*(e-n)/r,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function g(t){var e=t,i=t;do{e.x<i.x&&(i=e),e=e.next}while(e!==t);return i}function v(t,e,i,n,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(n-s)-(i-a)*(e-s)>=0&&(i-a)*(o-s)-(r-a)*(n-s)>=0}function x(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!C(t,e)&&T(t,e)&&T(e,t)&&S(t,e)}function b(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function w(t,e){return t.x===e.x&&t.y===e.y}function E(t,e,i,n){return!!(w(t,e)&&w(i,n)||w(t,n)&&w(i,e))||b(t,e,i)>0!=b(t,e,n)>0&&b(i,n,t)>0!=b(i,n,e)>0}function C(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&E(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}function T(t,e){return b(t.prev,t,t.next)<0?b(t,e,t.next)>=0&&b(t,t.prev,e)>=0:b(t,e,t.prev)<0||b(t,t.next,e)<0}function S(t,e){var i=t,n=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}function A(t,e){var i=new M(t.i,t.x,t.y),n=new M(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function L(t,e,i,n){var r=new M(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function I(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function M(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function z(t,e,i,n){for(var r=0,o=e,a=i-n;o<i;o+=n)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}e.exports=n,n.deviation=function(t,e,i,n){var r=e&&e.length,o=r?e[0]*i:t.length,a=Math.abs(z(t,0,o,i));if(r)for(var s=0,l=e.length;s<l;s++){var u=e[s]*i,c=s<l-1?e[s+1]*i:t.length;a-=Math.abs(z(t,u,c,i))}var h=0;for(s=0;s<n.length;s+=3){var p=n[s]*i,d=n[s+1]*i,f=n[s+2]*i;h+=Math.abs((t[p]-t[f])*(t[d+1]-t[p+1])-(t[p]-t[d])*(t[f+1]-t[p+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},n.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var a=0;a<e;a++)i.vertices.push(t[r][o][a]);r>0&&(n+=t[r-1].length,i.holes.push(n))}return i}}),{}],12:[(function(t,e,i){function n(t){if(\"Polygon\"===t.type)return r(t.coordinates);if(\"MultiPolygon\"===t.type){for(var e=0,i=0;i<t.coordinates.length;i++)e+=r(t.coordinates[i]);return e}return null}function r(t){var e=0;if(t&&t.length>0){e+=Math.abs(o(t[0]));for(var i=1;i<t.length;i++)e-=Math.abs(o(t[i]))}return e}function o(t){var e=0;if(t.length>2){for(var i,n,r=0;r<t.length-1;r++)i=t[r],n=t[r+1],e+=a(n[0]-i[0])*(2+Math.sin(a(i[1]))+Math.sin(a(n[1])));e=e*s.RADIUS*s.RADIUS/2}return e}function a(t){return t*Math.PI/180}var s=t(\"wgs84\");e.exports.geometry=n,e.exports.ring=o}),{wgs84:40}],13:[(function(t,e,i){function n(t,e){switch(t&&t.type||null){case\"FeatureCollection\":return t.features=t.features.map(r(n,e)),t;case\"Feature\":return t.geometry=n(t.geometry,e),t;case\"Polygon\":case\"MultiPolygon\":return o(t,e);default:return t}}function r(t,e){return function(i){return t(i,e)}}function o(t,e){return\"Polygon\"===t.type?t.coordinates=a(t.coordinates,e):\"MultiPolygon\"===t.type&&(t.coordinates=t.coordinates.map(r(a,e))),t}function a(t,e){e=!!e,t[0]=s(t[0],e);for(var i=1;i<t.length;i++)t[i]=s(t[i],!e);return t}function s(t,e){return l(t)===e?t:t.reverse()}function l(t){return u.ring(t)>=0}var u=t(\"geojson-area\");e.exports=n}),{\"geojson-area\":12}],14:[(function(t,e,i){\"use strict\";function n(t,e,i,n,a,l,u,c){if(i/=e,n/=e,u>=i&&c<=n)return t;if(u>n||c<i)return null;for(var h=[],p=0;p<t.length;p++){var d,f,m=t[p],_=m.geometry,y=m.type;if(d=m.min[a],f=m.max[a],d>=i&&f<=n)h.push(m);else if(!(d>n||f<i)){var g=1===y?r(_,i,n,a):o(_,i,n,a,l,3===y);g.length&&h.push(s(m.tags,y,g,m.id))}}return h.length?h:null}function r(t,e,i,n){for(var r=[],o=0;o<t.length;o++){var a=t[o],s=a[n];s>=e&&s<=i&&r.push(a)}return r}function o(t,e,i,n,r,o){for(var s=[],l=0;l<t.length;l++){var u,c,h,p=0,d=0,f=null,m=t[l],_=m.area,y=m.dist,g=m.outer,v=m.length,x=[];for(c=0;c<v-1;c++)u=f||m[c],f=m[c+1],p=d||u[n],d=f[n],p<e?d>i?(x.push(r(u,f,e),r(u,f,i)),o||(x=a(s,x,_,y,g))):d>=e&&x.push(r(u,f,e)):p>i?d<e?(x.push(r(u,f,i),r(u,f,e)),o||(x=a(s,x,_,y,g))):d<=i&&x.push(r(u,f,i)):(x.push(u),d<e?(x.push(r(u,f,e)),o||(x=a(s,x,_,y,g))):d>i&&(x.push(r(u,f,i)),o||(x=a(s,x,_,y,g))));u=m[v-1],p=u[n],p>=e&&p<=i&&x.push(u),h=x[x.length-1],o&&h&&(x[0][0]!==h[0]||x[0][1]!==h[1])&&x.push(x[0]),a(s,x,_,y,g)}return s}function a(t,e,i,n,r){return e.length&&(e.area=i,e.dist=n,void 0!==r&&(e.outer=r),t.push(e)),[]}e.exports=n;var s=t(\"./feature\")}),{\"./feature\":16}],15:[(function(t,e,i){\"use strict\";function n(t,e){var i=[];if(\"FeatureCollection\"===t.type)for(var n=0;n<t.features.length;n++)r(i,t.features[n],e);else\"Feature\"===t.type?r(i,t,e):r(i,{geometry:t},e);return i}function r(t,e,i){if(null!==e.geometry){var n,s,l,c,h=e.geometry,p=h.type,d=h.coordinates,f=e.properties,m=e.id;if(\"Point\"===p)t.push(u(f,1,[a(d)],m));else if(\"MultiPoint\"===p)t.push(u(f,1,o(d),m));else if(\"LineString\"===p)t.push(u(f,2,[o(d,i)],m));else if(\"MultiLineString\"===p||\"Polygon\"===p){for(l=[],n=0;n<d.length;n++)c=o(d[n],i),\"Polygon\"===p&&(c.outer=0===n),l.push(c);t.push(u(f,\"Polygon\"===p?3:2,l,m))}else if(\"MultiPolygon\"===p){for(l=[],n=0;n<d.length;n++)for(s=0;s<d[n].length;s++)c=o(d[n][s],i),c.outer=0===s,l.push(c);t.push(u(f,3,l,m))}else{if(\"GeometryCollection\"!==p)throw new Error(\"Input data is not a valid GeoJSON object.\");for(n=0;n<h.geometries.length;n++)r(t,{geometry:h.geometries[n],properties:f},i)}}}function o(t,e){for(var i=[],n=0;n<t.length;n++)i.push(a(t[n]));return e&&(l(i,e),s(i)),i}function a(t){var e=Math.sin(t[1]*Math.PI/180),i=t[0]/360+.5,n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n=n<0?0:n>1?1:n,[i,n,0]}function s(t){for(var e,i,n=0,r=0,o=0;o<t.length-1;o++)e=i||t[o],i=t[o+1],n+=e[0]*i[1]-i[0]*e[1],r+=Math.abs(i[0]-e[0])+Math.abs(i[1]-e[1]);t.area=Math.abs(n/2),t.dist=r}e.exports=n;var l=t(\"./simplify\"),u=t(\"./feature\")}),{\"./feature\":16,\"./simplify\":18}],16:[(function(t,e,i){\"use strict\";function n(t,e,i,n){var o={id:n||null,type:e,geometry:i,tags:t||null,min:[1/0,1/0],max:[-1/0,-1/0]};return r(o),o}function r(t){var e=t.geometry,i=t.min,n=t.max;if(1===t.type)o(i,n,e);else for(var r=0;r<e.length;r++)o(i,n,e[r]);return t}function o(t,e,i){for(var n,r=0;r<i.length;r++)n=i[r],t[0]=Math.min(n[0],t[0]),e[0]=Math.max(n[0],e[0]),t[1]=Math.min(n[1],t[1]),e[1]=Math.max(n[1],e[1])}e.exports=n}),{}],17:[(function(t,e,i){\"use strict\";function n(t,e){return new r(t,e)}function r(t,e){e=this.options=l(Object.create(this.options),e);var i=e.debug;i&&console.time(\"preprocess data\");var n=1<<e.maxZoom,r=c(t,e.tolerance/(n*e.extent));this.tiles={},this.tileCoords=[],i&&(console.timeEnd(\"preprocess data\"),console.log(\"index: maxZoom: %d, maxPoints: %d\",e.indexMaxZoom,e.indexMaxPoints),console.time(\"generate tiles\"),this.stats={},this.total=0),r=d(r,e.buffer/e.extent,a),r.length&&this.splitTile(r,0,0,0),i&&(r.length&&console.log(\"features: %d, points: %d\",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd(\"generate tiles\"),console.log(\"tiles generated:\",this.total,JSON.stringify(this.stats)))}function o(t,e,i){return 32*((1<<t)*i+e)+t}function a(t,e,i){return[i,(i-t[0])*(e[1]-t[1])/(e[0]-t[0])+t[1],1]}function s(t,e,i){return[(i-t[1])*(e[0]-t[0])/(e[1]-t[1])+t[0],i,1]}function l(t,e){for(var i in e)t[i]=e[i];return t}function u(t,e,i){var n=t.source;if(1!==n.length)return!1;var r=n[0];if(3!==r.type||r.geometry.length>1)return!1;var o=r.geometry[0].length;if(5!==o)return!1;for(var a=0;a<o;a++){var s=h.point(r.geometry[0][a],e,t.z2,t.x,t.y);if(s[0]!==-i&&s[0]!==e+i||s[1]!==-i&&s[1]!==e+i)return!1}return!0}e.exports=n;var c=t(\"./convert\"),h=t(\"./transform\"),p=t(\"./clip\"),d=t(\"./wrap\"),f=t(\"./tile\");r.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,solidChildren:!1,tolerance:3,extent:4096,buffer:64,debug:0},r.prototype.splitTile=function(t,e,i,n,r,l,c){for(var h=[t,e,i,n],d=this.options,m=d.debug,_=null;h.length;){n=h.pop(),i=h.pop(),e=h.pop(),t=h.pop();var y=1<<e,g=o(e,i,n),v=this.tiles[g],x=e===d.maxZoom?0:d.tolerance/(y*d.extent);if(!v&&(m>1&&console.time(\"creation\"),v=this.tiles[g]=f(t,y,i,n,x,e===d.maxZoom),this.tileCoords.push({z:e,x:i,y:n}),m)){m>1&&(console.log(\"tile z%d-%d-%d (features: %d, points: %d, simplified: %d)\",e,i,n,v.numFeatures,v.numPoints,v.numSimplified),console.timeEnd(\"creation\"));var b=\"z\"+e;this.stats[b]=(this.stats[b]||0)+1,this.total++}if(v.source=t,r){if(e===d.maxZoom||e===r)continue;var w=1<<r-e;if(i!==Math.floor(l/w)||n!==Math.floor(c/w))continue}else if(e===d.indexMaxZoom||v.numPoints<=d.indexMaxPoints)continue;if(d.solidChildren||!u(v,d.extent,d.buffer)){v.source=null,m>1&&console.time(\"clipping\");var E,C,T,S,A,L,I=.5*d.buffer/d.extent,M=.5-I,z=.5+I,P=1+I;E=C=T=S=null,A=p(t,y,i-I,i+z,0,a,v.min[0],v.max[0]),L=p(t,y,i+M,i+P,0,a,v.min[0],v.max[0]),A&&(E=p(A,y,n-I,n+z,1,s,v.min[1],v.max[1]),C=p(A,y,n+M,n+P,1,s,v.min[1],v.max[1])),L&&(T=p(L,y,n-I,n+z,1,s,v.min[1],v.max[1]),S=p(L,y,n+M,n+P,1,s,v.min[1],v.max[1])),m>1&&console.timeEnd(\"clipping\"),t.length&&(h.push(E||[],e+1,2*i,2*n),h.push(C||[],e+1,2*i,2*n+1),h.push(T||[],e+1,2*i+1,2*n),h.push(S||[],e+1,2*i+1,2*n+1))}else r&&(_=e)}return _},r.prototype.getTile=function(t,e,i){var n=this.options,r=n.extent,a=n.debug,s=1<<t;e=(e%s+s)%s;var l=o(t,e,i);if(this.tiles[l])return h.tile(this.tiles[l],r);a>1&&console.log(\"drilling down to z%d-%d-%d\",t,e,i);for(var c,p=t,d=e,f=i;!c&&p>0;)p--,d=Math.floor(d/2),f=Math.floor(f/2),c=this.tiles[o(p,d,f)];if(!c||!c.source)return null;if(a>1&&console.log(\"found parent tile z%d-%d-%d\",p,d,f),u(c,r,n.buffer))return h.tile(c,r);a>1&&console.time(\"drilling down\");var m=this.splitTile(c.source,p,d,f,t,e,i);if(a>1&&console.timeEnd(\"drilling down\"),null!==m){var _=1<<t-m;l=o(m,Math.floor(e/_),Math.floor(i/_))}return this.tiles[l]?h.tile(this.tiles[l],r):null}}),{\"./clip\":14,\"./convert\":15,\"./tile\":19,\"./transform\":20,\"./wrap\":21}],18:[(function(t,e,i){\"use strict\";function n(t,e){var i,n,o,a,s=e*e,l=t.length,u=0,c=l-1,h=[];for(t[u][2]=1,t[c][2]=1;c;){for(n=0,i=u+1;i<c;i++)(o=r(t[i],t[u],t[c]))>n&&(a=i,n=o);n>s?(t[a][2]=n,h.push(u),h.push(a),u=a):(c=h.pop(),u=h.pop())}}function r(t,e,i){var n=e[0],r=e[1],o=i[0],a=i[1],s=t[0],l=t[1],u=o-n,c=a-r;if(0!==u||0!==c){var h=((s-n)*u+(l-r)*c)/(u*u+c*c);h>1?(n=o,r=a):h>0&&(n+=u*h,r+=c*h)}return u=s-n,c=l-r,u*u+c*c}e.exports=n}),{}],19:[(function(t,e,i){\"use strict\";function n(t,e,i,n,o,a){for(var s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:n,z2:e,transformed:!1,min:[2,1],max:[-1,0]},l=0;l<t.length;l++){s.numFeatures++,r(s,t[l],o,a);var u=t[l].min,c=t[l].max;u[0]<s.min[0]&&(s.min[0]=u[0]),u[1]<s.min[1]&&(s.min[1]=u[1]),c[0]>s.max[0]&&(s.max[0]=c[0]),c[1]>s.max[1]&&(s.max[1]=c[1])}return s}function r(t,e,i,n){var r,a,s,l,u=e.geometry,c=e.type,h=[],p=i*i;if(1===c)for(r=0;r<u.length;r++)h.push(u[r]),t.numPoints++,t.numSimplified++;else for(r=0;r<u.length;r++)if(s=u[r],n||!(2===c&&s.dist<i||3===c&&s.area<p)){var d=[];for(a=0;a<s.length;a++)l=s[a],(n||l[2]>p)&&(d.push(l),t.numSimplified++),t.numPoints++;3===c&&o(d,s.outer),h.push(d)}else t.numPoints+=s.length;if(h.length){var f={geometry:h,type:c,tags:e.tags||null};null!==e.id&&(f.id=e.id),t.features.push(f)}}function o(t,e){a(t)<0===e&&t.reverse()}function a(t){for(var e,i,n=0,r=0,o=t.length,a=o-1;r<o;a=r++)e=t[r],i=t[a],n+=(i[0]-e[0])*(e[1]+i[1]);return n}e.exports=n}),{}],20:[(function(t,e,i){\"use strict\";function n(t,e){if(t.transformed)return t;var i,n,o,a=t.z2,s=t.x,l=t.y;for(i=0;i<t.features.length;i++){var u=t.features[i],c=u.geometry;if(1===u.type)for(n=0;n<c.length;n++)c[n]=r(c[n],e,a,s,l);else for(n=0;n<c.length;n++){var h=c[n];for(o=0;o<h.length;o++)h[o]=r(h[o],e,a,s,l)}}return t.transformed=!0,t}function r(t,e,i,n,r){return[Math.round(e*(t[0]*i-n)),Math.round(e*(t[1]*i-r))]}i.tile=n,i.point=r}),{}],21:[(function(t,e,i){\"use strict\";function n(t,e,i){var n=t,o=a(t,1,-1-e,e,0,i,-1,2),s=a(t,1,1-e,2+e,0,i,-1,2);return(o||s)&&(n=a(t,1,-e,1+e,0,i,-1,2)||[],o&&(n=r(o,1).concat(n)),s&&(n=n.concat(r(s,-1)))),n}function r(t,e){for(var i=[],n=0;n<t.length;n++){var r,a=t[n],l=a.type;if(1===l)r=o(a.geometry,e);else{r=[];for(var u=0;u<a.geometry.length;u++)r.push(o(a.geometry[u],e))}i.push(s(a.tags,l,r,a.id))}return i}function o(t,e){var i=[];i.area=t.area,i.dist=t.dist;for(var n=0;n<t.length;n++)i.push([t[n][0]+e,t[n][1],t[n][2]]);return i}var a=t(\"./clip\"),s=t(\"./feature\");e.exports=n}),{\"./clip\":14,\"./feature\":16}],22:[(function(t,e,i){\"use strict\";function n(t,e,i){var n=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var o=new Int32Array(this.arrayBuffer);t=o[0],e=o[1],i=o[2],this.d=e+2*i;for(var a=0;a<this.d*this.d;a++){var s=o[r+a],l=o[r+a+1];n.push(s===l?null:o.subarray(s,l))}var u=o[r+n.length],c=o[r+n.length+1];this.keys=o.subarray(u,c),this.bboxes=o.subarray(c),this.insert=this._insertReadonly}else{this.d=e+2*i;for(var h=0;h<this.d*this.d;h++)n.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=i,this.scale=e/t,this.uid=0;var p=i/e*t;this.min=-p,this.max=t+p}e.exports=n;var r=3;n.prototype.insert=function(t,e,i,n,r){this._forEachCell(e,i,n,r,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(n),this.bboxes.push(r)},n.prototype._insertReadonly=function(){throw\"Cannot insert into a GridIndex created from an ArrayBuffer.\"},n.prototype._insertCell=function(t,e,i,n,r,o){this.cells[r].push(o)},n.prototype.query=function(t,e,i,n){var r=this.min,o=this.max;if(t<=r&&e<=r&&o<=i&&o<=n)return Array.prototype.slice.call(this.keys);var a=[],s={};return this._forEachCell(t,e,i,n,this._queryCell,a,s),a},n.prototype._queryCell=function(t,e,i,n,r,o,a){var s=this.cells[r];if(null!==s)for(var l=this.keys,u=this.bboxes,c=0;c<s.length;c++){var h=s[c];if(void 0===a[h]){var p=4*h;t<=u[p+2]&&e<=u[p+3]&&i>=u[p+0]&&n>=u[p+1]?(a[h]=!0,o.push(l[h])):a[h]=!1}}},n.prototype._forEachCell=function(t,e,i,n,r,o,a){for(var s=this._convertToCellCoord(t),l=this._convertToCellCoord(e),u=this._convertToCellCoord(i),c=this._convertToCellCoord(n),h=s;h<=u;h++)for(var p=l;p<=c;p++){var d=this.d*p+h;if(r.call(this,t,e,i,n,d,o,a))return}},n.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},n.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=r+this.cells.length+1+1,i=0,n=0;n<this.cells.length;n++)i+=this.cells[n].length;var o=new Int32Array(e+i+this.keys.length+this.bboxes.length);o[0]=this.extent,o[1]=this.n,o[2]=this.padding;for(var a=e,s=0;s<t.length;s++){var l=t[s];o[r+s]=a,o.set(l,a),a+=l.length}return o[r+t.length]=a,o.set(this.keys,a),a+=this.keys.length,o[r+t.length+1]=a,o.set(this.bboxes,a),a+=this.bboxes.length,o.buffer}}),{}],23:[(function(t,e,i){i.read=function(t,e,i,n,r){var o,a,s=8*r-n-1,l=(1<<s)-1,u=l>>1,c=-7,h=i?r-1:0,p=i?-1:1,d=t[e+h];for(h+=p,o=d&(1<<-c)-1,d>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+t[e+h],h+=p,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),o-=u}return(d?-1:1)*a*Math.pow(2,o-n)},i.write=function(t,e,i,n,r,o){var a,s,l,u=8*o-r-1,c=(1<<u)-1,h=c>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,f=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),e+=a+h>=1?p/l:p*Math.pow(2,1-h),e*l>=2&&(a++,l/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*l-1)*Math.pow(2,r),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;t[i+d]=255&s,d+=f,s/=256,r-=8);for(a=a<<r|s,u+=r;u>0;t[i+d]=255&a,d+=f,a/=256,u-=8);t[i+d-f]|=128*m}}),{}],24:[(function(t,e,i){\"use strict\";function n(t,e,i,n,o){return new r(t,e,i,n,o)}function r(t,e,i,n,r){e=e||o,i=i||a,r=r||Array,this.nodeSize=n||64,this.points=t,this.ids=new r(t.length),this.coords=new r(2*t.length);for(var l=0;l<t.length;l++)this.ids[l]=l,this.coords[2*l]=e(t[l]),this.coords[2*l+1]=i(t[l]);s(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function o(t){return t[0]}function a(t){return t[1]}var s=t(\"./sort\"),l=t(\"./range\"),u=t(\"./within\");e.exports=n,r.prototype={range:function(t,e,i,n){return l(this.ids,this.coords,t,e,i,n,this.nodeSize)},within:function(t,e,i){return u(this.ids,this.coords,t,e,i,this.nodeSize)}}}),{\"./range\":25,\"./sort\":26,\"./within\":27}],25:[(function(t,e,i){\"use strict\";function n(t,e,i,n,r,o,a){for(var s,l,u=[0,t.length-1,0],c=[];u.length;){var h=u.pop(),p=u.pop(),d=u.pop();if(p-d<=a)for(var f=d;f<=p;f++)s=e[2*f],l=e[2*f+1],s>=i&&s<=r&&l>=n&&l<=o&&c.push(t[f]);else{var m=Math.floor((d+p)/2);s=e[2*m],l=e[2*m+1],s>=i&&s<=r&&l>=n&&l<=o&&c.push(t[m]);var _=(h+1)%2;(0===h?i<=s:n<=l)&&(u.push(d),u.push(m-1),u.push(_)),(0===h?r>=s:o>=l)&&(u.push(m+1),u.push(p),u.push(_))}}return c}e.exports=n}),{}],26:[(function(t,e,i){\"use strict\";function n(t,e,i,o,a,s){if(!(a-o<=i)){var l=Math.floor((o+a)/2);r(t,e,l,o,a,s%2),n(t,e,i,o,l-1,s+1),n(t,e,i,l+1,a,s+1)}}function r(t,e,i,n,a,s){for(;a>n;){if(a-n>600){var l=a-n+1,u=i-n+1,c=Math.log(l),h=.5*Math.exp(2*c/3),p=.5*Math.sqrt(c*h*(l-h)/l)*(u-l/2<0?-1:1);r(t,e,i,Math.max(n,Math.floor(i-u*h/l+p)),Math.min(a,Math.floor(i+(l-u)*h/l+p)),s)}var d=e[2*i+s],f=n,m=a;for(o(t,e,n,i),e[2*a+s]>d&&o(t,e,n,a);f<m;){for(o(t,e,f,m),f++,m--;e[2*f+s]<d;)f++;for(;e[2*m+s]>d;)m--}e[2*n+s]===d?o(t,e,n,m):(m++,o(t,e,m,a)),m<=i&&(n=m+1),i<=m&&(a=m-1)}}function o(t,e,i,n){a(t,i,n),a(e,2*i,2*n),a(e,2*i+1,2*n+1)}function a(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}e.exports=n}),{}],27:[(function(t,e,i){\"use strict\";function n(t,e,i,n,o,a){for(var s=[0,t.length-1,0],l=[],u=o*o;s.length;){var c=s.pop(),h=s.pop(),p=s.pop();if(h-p<=a)for(var d=p;d<=h;d++)r(e[2*d],e[2*d+1],i,n)<=u&&l.push(t[d]);else{var f=Math.floor((p+h)/2),m=e[2*f],_=e[2*f+1];r(m,_,i,n)<=u&&l.push(t[f]);var y=(c+1)%2;(0===c?i-o<=m:n-o<=_)&&(s.push(p),s.push(f-1),s.push(y)),(0===c?i+o>=m:n+o>=_)&&(s.push(f+1),s.push(h),s.push(y))}}return l}function r(t,e,i,n){var r=t-i,o=e-n;return r*r+o*o}e.exports=n}),{}],28:[(function(t,e,i){\"use strict\";function n(t){return!!(r()&&o()&&a()&&s()&&l()&&u()&&c()&&h(t&&t.failIfMajorPerformanceCaveat))}function r(){return\"undefined\"!=typeof window&&\"undefined\"!=typeof document}function o(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function a(){return Function.prototype&&Function.prototype.bind}function s(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function l(){return\"JSON\"in window&&\"parse\"in JSON&&\"stringify\"in JSON}function u(){return\"Worker\"in window}function c(){return\"Uint8ClampedArray\"in window}function h(t){return void 0===d[t]&&(d[t]=p(t)),d[t]}function p(t){var e=document.createElement(\"canvas\"),i=Object.create(n.webGLContextAttributes);return i.failIfMajorPerformanceCaveat=t,e.probablySupportsContext?e.probablySupportsContext(\"webgl\",i)||e.probablySupportsContext(\"experimental-webgl\",i):e.supportsContext?e.supportsContext(\"webgl\",i)||e.supportsContext(\"experimental-webgl\",i):e.getContext(\"webgl\",i)||e.getContext(\"experimental-webgl\",i)}\"undefined\"!=typeof e&&e.exports?e.exports=n:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=n);var d={};n.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),{}],29:[(function(t,e,i){\"use strict\";function n(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function r(t,e,i){var n,r,o=i.buf;if(r=o[i.pos++],n=(112&r)>>4,r<128)return a(t,n,e);if(r=o[i.pos++],n|=(127&r)<<3,r<128)return a(t,n,e);if(r=o[i.pos++],n|=(127&r)<<10,r<128)return a(t,n,e);if(r=o[i.pos++],n|=(127&r)<<17,r<128)return a(t,n,e);if(r=o[i.pos++],n|=(127&r)<<24,r<128)return a(t,n,e);if(r=o[i.pos++],n|=(1&r)<<31,r<128)return a(t,n,e);throw new Error(\"Expected varint not more than 10 bytes\")}function o(t){return t.type===n.Bytes?t.readVarint()+t.pos:t.pos+1}function a(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function s(t,e){var i,n;if(t>=0?(i=t%4294967296|0,n=t/4294967296|0):(i=~(-t%4294967296),n=~(-t/4294967296),4294967295^i?i=i+1|0:(i=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error(\"Given varint doesn't fit into 10 bytes\");e.realloc(10),l(i,n,e),u(n,e)}function l(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos]=127&t}function u(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}function c(t,e,i){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));i.realloc(n);for(var r=i.pos-1;r>=t;r--)i.buf[r+n]=i.buf[r]}function h(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function p(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function d(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function f(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function m(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function _(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function y(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function g(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function v(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function x(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function b(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function w(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function E(t,e,i){for(var n=\"\",r=e;r<i;){var o=t[r],a=null,s=o>239?4:o>223?3:o>191?2:1;if(r+s>i)break;var l,u,c;1===s?o<128&&(a=o):2===s?128==(192&(l=t[r+1]))&&(a=(31&o)<<6|63&l)<=127&&(a=null):3===s?(l=t[r+1],u=t[r+2],128==(192&l)&&128==(192&u)&&((a=(15&o)<<12|(63&l)<<6|63&u)<=2047||a>=55296&&a<=57343)&&(a=null)):4===s&&(l=t[r+1],u=t[r+2],c=t[r+3],128==(192&l)&&128==(192&u)&&128==(192&c)&&((a=(15&o)<<18|(63&l)<<12|(63&u)<<6|63&c)<=65535||a>=1114112)&&(a=null)),null===a?(a=65533,s=1):a>65535&&(a-=65536,n+=String.fromCharCode(a>>>10&1023|55296),a=56320|1023&a),n+=String.fromCharCode(a),r+=s}return n}function C(t,e,i){for(var n,r,o=0;o<e.length;o++){if((n=e.charCodeAt(o))>55295&&n<57344){if(!r){n>56319||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):r=n;continue}if(n<56320){t[i++]=239,t[i++]=191,t[i++]=189,r=n;continue}n=r-55296<<10|n-56320|65536,r=null}else r&&(t[i++]=239,t[i++]=191,t[i++]=189,r=null);n<128?t[i++]=n:(n<2048?t[i++]=n>>6|192:(n<65536?t[i++]=n>>12|224:(t[i++]=n>>18|240,t[i++]=n>>12&63|128),t[i++]=n>>6&63|128),t[i++]=63&n|128)}return i}e.exports=n;var T=t(\"ieee754\");n.Varint=0,n.Fixed64=1,n.Bytes=2,n.Fixed32=5;n.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var n=this.readVarint(),r=n>>3,o=this.pos;this.type=7&n,t(r,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=x(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=w(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=x(this.buf,this.pos)+4294967296*x(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=x(this.buf,this.pos)+4294967296*w(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=T.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=T.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,n=this.buf;return i=n[this.pos++],e=127&i,i<128?e:(i=n[this.pos++],e|=(127&i)<<7,i<128?e:(i=n[this.pos++],e|=(127&i)<<14,i<128?e:(i=n[this.pos++],e|=(127&i)<<21,i<128?e:(i=n[this.pos],e|=(15&i)<<28,r(e,t,this)))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=E(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var i=o(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===n.Varint)for(;this.buf[this.pos++]>127;);else if(e===n.Bytes)this.pos=this.readVarint()+this.pos;else if(e===n.Fixed32)this.pos+=4;else{if(e!==n.Fixed64)throw new Error(\"Unimplemented type: \"+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),b(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),b(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),b(this.buf,-1&t,this.pos),b(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),b(this.buf,-1&t,this.pos),b(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){if((t=+t||0)>268435455||t<0)return void s(t,this);this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127)))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=C(this.buf,t,this.pos);var i=this.pos-e;i>=128&&c(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),T.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),T.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var n=this.pos-i;n>=128&&c(i,n,this),this.pos=i-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,i){this.writeTag(t,n.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){this.writeMessage(t,h,e)},writePackedSVarint:function(t,e){this.writeMessage(t,p,e)},writePackedBoolean:function(t,e){this.writeMessage(t,m,e)},writePackedFloat:function(t,e){this.writeMessage(t,d,e)},writePackedDouble:function(t,e){this.writeMessage(t,f,e)},writePackedFixed32:function(t,e){this.writeMessage(t,_,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,y,e)},writePackedFixed64:function(t,e){this.writeMessage(t,g,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,v,e)},writeBytesField:function(t,e){this.writeTag(t,n.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,n.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,n.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,n.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,n.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,n.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,n.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,n.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,n.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,n.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}}),{ieee754:23}],30:[(function(t,e,i){function n(){throw new Error(\"setTimeout has not been defined\")}function r(){throw new Error(\"clearTimeout has not been defined\")}function o(t){if(h===setTimeout)return setTimeout(t,0);if((h===n||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function a(t){if(p===clearTimeout)return clearTimeout(t);if((p===r||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function s(){_&&f&&(_=!1,f.length?m=f.concat(m):y=-1,m.length&&l())}function l(){if(!_){var t=o(s);_=!0;for(var e=m.length;e;){for(f=m,m=[];++y<e;)f&&f[y].run();y=-1,e=m.length}f=null,_=!1,a(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var h,p,d=e.exports={};!(function(){try{h=\"function\"==typeof setTimeout?setTimeout:n}catch(t){h=n}try{p=\"function\"==typeof clearTimeout?clearTimeout:r}catch(t){p=r}})();var f,m=[],_=!1,y=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];m.push(new u(t,e)),1!==m.length||_||o(l)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title=\"browser\",d.browser=!0,d.env={},d.argv=[],d.version=\"\",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(t){return[]},d.binding=function(t){throw new Error(\"process.binding is not supported\")},d.cwd=function(){return\"/\"},d.chdir=function(t){throw new Error(\"process.chdir is not supported\")},d.umask=function(){return 0}}),{}],31:[(function(t,e,i){\"use strict\";function n(t,e,i,a,s){for(i=i||0,a=a||t.length-1,s=s||o;a>i;){if(a-i>600){var l=a-i+1,u=e-i+1,c=Math.log(l),h=.5*Math.exp(2*c/3),p=.5*Math.sqrt(c*h*(l-h)/l)*(u-l/2<0?-1:1);n(t,e,Math.max(i,Math.floor(e-u*h/l+p)),Math.min(a,Math.floor(e+(l-u)*h/l+p)),s)}var d=t[e],f=i,m=a;for(r(t,i,e),s(t[a],d)>0&&r(t,i,a);f<m;){for(r(t,f,m),f++,m--;s(t[f],d)<0;)f++;for(;s(t[m],d)>0;)m--}0===s(t[i],d)?r(t,i,m):(m++,r(t,m,a)),m<=e&&(i=m+1),e<=m&&(a=m-1)}}function r(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function o(t,e){return t<e?-1:t>e?1:0}e.exports=n}),{}],32:[(function(t,e,i){\"use strict\";function n(t){return new r(t)}function r(t){this.options=d(Object.create(this.options),t),this.trees=new Array(this.options.maxZoom+1)}function o(t,e,i,n,r){return{x:t,y:e,zoom:1/0,id:n,properties:r,parentId:-1,numPoints:i}}function a(t,e){var i=t.geometry.coordinates;return{x:u(i[0]),y:c(i[1]),zoom:1/0,id:e,parentId:-1}}function s(t){return{type:\"Feature\",properties:l(t),geometry:{type:\"Point\",coordinates:[h(t.x),p(t.y)]}}}function l(t){var e=t.numPoints,i=e>=1e4?Math.round(e/1e3)+\"k\":e>=1e3?Math.round(e/100)/10+\"k\":e;return d(d({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:i})}function u(t){return t/360+.5}function c(t){var e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:i>1?1:i}function h(t){return 360*(t-.5)}function p(t){var e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function d(t,e){for(var i in e)t[i]=e[i];return t}function f(t){return t.x}function m(t){return t.y}var _=t(\"kdbush\");e.exports=n,r.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(t){return t}},load:function(t){var e=this.options.log;e&&console.time(\"total time\");var i=\"prepare \"+t.length+\" points\";e&&console.time(i),this.points=t;var n=t.map(a);e&&console.timeEnd(i);for(var r=this.options.maxZoom;r>=this.options.minZoom;r--){var o=+Date.now();this.trees[r+1]=_(n,f,m,this.options.nodeSize,Float32Array),n=this._cluster(n,r),e&&console.log(\"z%d: %d clusters in %dms\",r,n.length,+Date.now()-o)}return this.trees[this.options.minZoom]=_(n,f,m,this.options.nodeSize,Float32Array),e&&console.timeEnd(\"total time\"),this},getClusters:function(t,e){for(var i=this.trees[this._limitZoom(e)],n=i.range(u(t[0]),c(t[3]),u(t[2]),c(t[1])),r=[],o=0;o<n.length;o++){var a=i.points[n[o]];r.push(a.numPoints?s(a):this.points[a.id])}return r},getChildren:function(t,e){for(var i=this.trees[e+1].points[t],n=this.options.radius/(this.options.extent*Math.pow(2,e)),r=this.trees[e+1].within(i.x,i.y,n),o=[],a=0;a<r.length;a++){var l=this.trees[e+1].points[r[a]];l.parentId===t&&o.push(l.numPoints?s(l):this.points[l.id])}return o},getLeaves:function(t,e,i,n){i=i||10,n=n||0;var r=[];return this._appendLeaves(r,t,e,i,n,0),r},getTile:function(t,e,i){var n=this.trees[this._limitZoom(t)],r=Math.pow(2,t),o=this.options.extent,a=this.options.radius,s=a/o,l=(i-s)/r,u=(i+1+s)/r,c={features:[]};return this._addTileFeatures(n.range((e-s)/r,l,(e+1+s)/r,u),n.points,e,i,r,c),0===e&&this._addTileFeatures(n.range(1-s/r,l,1,u),n.points,r,i,r,c),e===r-1&&this._addTileFeatures(n.range(0,l,s/r,u),n.points,-1,i,r,c),c.features.length?c:null},getClusterExpansionZoom:function(t,e){for(;e<this.options.maxZoom;){var i=this.getChildren(t,e);if(e++,1!==i.length)break;t=i[0].properties.cluster_id}return e},_appendLeaves:function(t,e,i,n,r,o){for(var a=this.getChildren(e,i),s=0;s<a.length;s++){var l=a[s].properties;if(l.cluster?o+l.point_count<=r?o+=l.point_count:o=this._appendLeaves(t,l.cluster_id,i+1,n,r,o):o<r?o++:t.push(a[s]),t.length===n)break}return o},_addTileFeatures:function(t,e,i,n,r,o){for(var a=0;a<t.length;a++){var s=e[t[a]];o.features.push({type:1,geometry:[[Math.round(this.options.extent*(s.x*r-i)),Math.round(this.options.extent*(s.y*r-n))]],tags:s.numPoints?l(s):this.points[s.id].properties})}},_limitZoom:function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},_cluster:function(t,e){for(var i=[],n=this.options.radius/(this.options.extent*Math.pow(2,e)),r=0;r<t.length;r++){var a=t[r];if(!(a.zoom<=e)){a.zoom=e;var s=this.trees[e+1],l=s.within(a.x,a.y,n),u=a.numPoints||1,c=a.x*u,h=a.y*u,p=null;this.options.reduce&&(p=this.options.initial(),this._accumulate(p,a));for(var d=0;d<l.length;d++){var f=s.points[l[d]];if(e<f.zoom){var m=f.numPoints||1;f.zoom=e,c+=f.x*m,h+=f.y*m,u+=m,f.parentId=r,this.options.reduce&&this._accumulate(p,f)}}1===u?i.push(a):(a.parentId=r,i.push(o(c/u,h/u,u,r,p)))}}return i},_accumulate:function(t,e){var i=e.numPoints?e.properties:this.options.map(this.points[e.id].properties);this.options.reduce(t,i)}}}),{kdbush:24}],33:[(function(t,e,i){\"use strict\";function n(t,e){if(!(this instanceof n))return new n(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||r,this.length>0)for(var i=this.length>>1;i>=0;i--)this._down(i)}function r(t,e){return t<e?-1:t>e?1:0}e.exports=n,n.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,i=this.compare,n=e[t];t>0;){var r=t-1>>1,o=e[r];if(i(n,o)>=0)break;e[t]=o,t=r}e[t]=n},_down:function(t){for(var e=this.data,i=this.compare,n=this.length,r=n>>1,o=e[t];t<r;){var a=1+(t<<1),s=a+1,l=e[a];if(s<n&&i(e[s],l)<0&&(a=s,l=e[s]),i(l,o)>=0)break;e[t]=l,t=a}e[t]=o}}}),{}],34:[(function(t,e,i){\"function\"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}}),{}],35:[(function(t,e,i){e.exports=function(t){return t&&\"object\"==typeof t&&\"function\"==typeof t.copy&&\"function\"==typeof t.fill&&\"function\"==typeof t.readUInt8}}),{}],36:[(function(t,e,n){(function(e,i){function r(t,e){var i={seen:[],stylize:a};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),m(e)?i.showHidden=e:e&&n._extend(i,e),b(i.showHidden)&&(i.showHidden=!1),b(i.depth)&&(i.depth=2),b(i.colors)&&(i.colors=!1),b(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),l(i,t,i.depth)}function o(t,e){var i=r.styles[e];return i?\"\u001b[\"+r.colors[i][0]+\"m\"+t+\"\u001b[\"+r.colors[i][1]+\"m\":t}function a(t,e){return t}function s(t){var e={};return t.forEach((function(t,i){e[t]=!0})),e}function l(t,e,i){if(t.customInspect&&e&&S(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var r=e.inspect(i,t);return v(r)||(r=l(t,r,i)),r}var o=u(t,e);if(o)return o;var a=Object.keys(e),m=s(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(e)),T(e)&&(a.indexOf(\"message\")>=0||a.indexOf(\"description\")>=0))return c(e);if(0===a.length){if(S(e)){var _=e.name?\": \"+e.name:\"\";return t.stylize(\"[Function\"+_+\"]\",\"special\")}if(w(e))return t.stylize(RegExp.prototype.toString.call(e),\"regexp\");if(C(e))return t.stylize(Date.prototype.toString.call(e),\"date\");if(T(e))return c(e)}var y=\"\",g=!1,x=[\"{\",\"}\"];if(f(e)&&(g=!0,x=[\"[\",\"]\"]),S(e)&&(y=\" [Function\"+(e.name?\": \"+e.name:\"\")+\"]\"),w(e)&&(y=\" \"+RegExp.prototype.toString.call(e)),C(e)&&(y=\" \"+Date.prototype.toUTCString.call(e)),T(e)&&(y=\" \"+c(e)),0===a.length&&(!g||0==e.length))return x[0]+y+x[1];if(i<0)return w(e)?t.stylize(RegExp.prototype.toString.call(e),\"regexp\"):t.stylize(\"[Object]\",\"special\");t.seen.push(e);var b;return b=g?h(t,e,i,m,a):a.map((function(n){return p(t,e,i,m,n,g)})),t.seen.pop(),d(b,y,x)}function u(t,e){if(b(e))return t.stylize(\"undefined\",\"undefined\");if(v(e)){var i=\"'\"+JSON.stringify(e).replace(/^\"|\"$/g,\"\").replace(/'/g,\"\\\\'\").replace(/\\\\\"/g,'\"')+\"'\";return t.stylize(i,\"string\")}return g(e)?t.stylize(\"\"+e,\"number\"):m(e)?t.stylize(\"\"+e,\"boolean\"):_(e)?t.stylize(\"null\",\"null\"):void 0}function c(t){return\"[\"+Error.prototype.toString.call(t)+\"]\"}function h(t,e,i,n,r){for(var o=[],a=0,s=e.length;a<s;++a)z(e,String(a))?o.push(p(t,e,i,n,String(a),!0)):o.push(\"\");return r.forEach((function(r){r.match(/^\\d+$/)||o.push(p(t,e,i,n,r,!0))})),o}function p(t,e,i,n,r,o){var a,s,u;if(u=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]},u.get?s=u.set?t.stylize(\"[Getter/Setter]\",\"special\"):t.stylize(\"[Getter]\",\"special\"):u.set&&(s=t.stylize(\"[Setter]\",\"special\")),z(n,r)||(a=\"[\"+r+\"]\"),s||(t.seen.indexOf(u.value)<0?(s=_(i)?l(t,u.value,null):l(t,u.value,i-1),s.indexOf(\"\\n\")>-1&&(s=o?s.split(\"\\n\").map((function(t){return\"  \"+t})).join(\"\\n\").substr(2):\"\\n\"+s.split(\"\\n\").map((function(t){return\"   \"+t})).join(\"\\n\"))):s=t.stylize(\"[Circular]\",\"special\")),b(a)){if(o&&r.match(/^\\d+$/))return s;a=JSON.stringify(\"\"+r),a.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,\"name\")):(a=a.replace(/'/g,\"\\\\'\").replace(/\\\\\"/g,'\"').replace(/(^\"|\"$)/g,\"'\"),a=t.stylize(a,\"string\"))}return a+\": \"+s}function d(t,e,i){var n=0;return t.reduce((function(t,e){return n++,e.indexOf(\"\\n\")>=0&&n++,t+e.replace(/\\u001b\\[\\d\\d?m/g,\"\").length+1}),0)>60?i[0]+(\"\"===e?\"\":e+\"\\n \")+\" \"+t.join(\",\\n  \")+\" \"+i[1]:i[0]+e+\" \"+t.join(\", \")+\" \"+i[1]}function f(t){return Array.isArray(t)}function m(t){return\"boolean\"==typeof t}function _(t){return null===t}function y(t){return null==t}function g(t){return\"number\"==typeof t}function v(t){return\"string\"==typeof t}function x(t){return\"symbol\"==typeof t}function b(t){return void 0===t}function w(t){return E(t)&&\"[object RegExp]\"===L(t)}function E(t){return\"object\"==typeof t&&null!==t}function C(t){return E(t)&&\"[object Date]\"===L(t)}function T(t){return E(t)&&(\"[object Error]\"===L(t)||t instanceof Error)}function S(t){return\"function\"==typeof t}function A(t){return null===t||\"boolean\"==typeof t||\"number\"==typeof t||\"string\"==typeof t||\"symbol\"==typeof t||void 0===t}function L(t){return Object.prototype.toString.call(t)}function I(t){return t<10?\"0\"+t.toString(10):t.toString(10)}function M(){var t=new Date,e=[I(t.getHours()),I(t.getMinutes()),I(t.getSeconds())].join(\":\");return[t.getDate(),k[t.getMonth()],e].join(\" \")}function z(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var P=/%[sdj%]/g;n.format=function(t){if(!v(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(r(arguments[i]));return e.join(\" \")}for(var i=1,n=arguments,o=n.length,a=String(t).replace(P,(function(t){if(\"%%\"===t)return\"%\";if(i>=o)return t;switch(t){case\"%s\":return String(n[i++]);case\"%d\":return Number(n[i++]);case\"%j\":try{return JSON.stringify(n[i++])}catch(t){return\"[Circular]\"}default:return t}})),s=n[i];i<o;s=n[++i])_(s)||!E(s)?a+=\" \"+s:a+=\" \"+r(s);return a},n.deprecate=function(t,r){function o(){if(!a){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),a=!0}return t.apply(this,arguments)}if(b(i.process))return function(){return n.deprecate(t,r).apply(this,arguments)};if(!0===e.noDeprecation)return t;var a=!1;return o};var R,D={};n.debuglog=function(t){if(b(R)&&(R=e.env.NODE_DEBUG||\"\"),t=t.toUpperCase(),!D[t])if(new RegExp(\"\\\\b\"+t+\"\\\\b\",\"i\").test(R)){var i=e.pid;D[t]=function(){var e=n.format.apply(n,arguments);console.error(\"%s %d: %s\",t,i,e)}}else D[t]=function(){};return D[t]},n.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:\"cyan\",number:\"yellow\",boolean:\"yellow\",undefined:\"grey\",null:\"bold\",string:\"green\",date:\"magenta\",regexp:\"red\"},n.isArray=f,n.isBoolean=m,n.isNull=_,n.isNullOrUndefined=y,n.isNumber=g,n.isString=v,n.isSymbol=x,n.isUndefined=b,n.isRegExp=w,n.isObject=E,n.isDate=C,n.isError=T,n.isFunction=S,n.isPrimitive=A,n.isBuffer=t(\"./support/isBuffer\");var k=[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"];n.log=function(){console.log(\"%s - %s\",M(),n.format.apply(n,arguments))},n.inherits=t(\"inherits\"),n._extend=function(t,e){if(!e||!E(e))return t;for(var i=Object.keys(e),n=i.length;n--;)t[i[n]]=e[i[n]];return t}}).call(this,t(\"_process\"),\"undefined\"!==typeof i?i:\"undefined\"!==typeof self?self:\"undefined\"!==typeof window?window:{})}),{\"./support/isBuffer\":35,_process:30,inherits:34}],37:[(function(t,e,i){function n(t){var e=new d;return o(t,e),e.finish()}function r(t){var e={};for(var i in t)e[i]=new f(t[i].features),e[i].name=i;return n({layers:e})}function o(t,e){for(var i in t.layers)e.writeMessage(3,a,t.layers[i])}function a(t,e){e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||\"\"),e.writeVarintField(5,t.extent||4096);var i,n={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<t.length;i++)n.feature=t.feature(i),e.writeMessage(2,s,n);var r=n.keys;for(i=0;i<r.length;i++)e.writeStringField(3,r[i]);var o=n.values;for(i=0;i<o.length;i++)e.writeMessage(4,p,o[i])}function s(t,e){var i=t.feature;void 0!==i.id&&e.writeVarintField(1,i.id),e.writeMessage(2,l,t),e.writeVarintField(3,i.type),e.writeMessage(4,h,i)}function l(t,e){var i=t.feature,n=t.keys,r=t.values,o=t.keycache,a=t.valuecache;for(var s in i.properties){var l=o[s];void 0===l&&(n.push(s),l=n.length-1,o[s]=l),e.writeVarint(l);var u=i.properties[s],c=typeof u;\"string\"!==c&&\"boolean\"!==c&&\"number\"!==c&&(u=JSON.stringify(u));var h=c+\":\"+u,p=a[h];void 0===p&&(r.push(u),p=r.length-1,a[h]=p),e.writeVarint(p)}}function u(t,e){return(e<<3)+(7&t)}function c(t){return t<<1^t>>31}function h(t,e){for(var i=t.loadGeometry(),n=t.type,r=0,o=0,a=i.length,s=0;s<a;s++){var l=i[s],h=1;1===n&&(h=l.length),e.writeVarint(u(1,h));for(var p=0;p<l.length;p++){1===p&&1!==n&&e.writeVarint(u(2,l.length-1));var d=l[p].x-r,f=l[p].y-o;e.writeVarint(c(d)),e.writeVarint(c(f)),r+=d,o+=f}}}function p(t,e){var i=typeof t;\"string\"===i?e.writeStringField(1,t):\"boolean\"===i?e.writeBooleanField(7,t):\"number\"===i&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}var d=t(\"pbf\"),f=t(\"./lib/geojson_wrapper\");e.exports=n,e.exports.fromVectorTileJs=n,e.exports.fromGeojsonVt=r,e.exports.GeoJSONWrapper=f}),{\"./lib/geojson_wrapper\":38,pbf:29}],38:[(function(t,e,i){\"use strict\";function n(t){this.features=t,this.length=t.length}function r(t){this.id=\"number\"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=4096}var o=t(\"@mapbox/point-geometry\"),a=t(\"@mapbox/vector-tile\").VectorTileFeature;e.exports=n,n.prototype.feature=function(t){return new r(this.features[t])},r.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var i=t[e],n=[],r=0;r<i.length;r++)n.push(new o(i[r][0],i[r][1]));this.geometry.push(n)}return this.geometry},r.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,i=-1/0,n=1/0,r=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var l=a[s];e=Math.min(e,l.x),i=Math.max(i,l.x),n=Math.min(n,l.y),r=Math.max(r,l.y)}return[e,n,i,r]},r.prototype.toGeoJSON=a.prototype.toGeoJSON}),{\"@mapbox/point-geometry\":2,\"@mapbox/vector-tile\":6}],39:[(function(t,e,i){var n=arguments[3],r=arguments[4],o=arguments[5],a=JSON.stringify;e.exports=function(t,e){function i(t){_[t]=!0;for(var e in r[t][1]){var n=r[t][1][e];_[n]||i(n)}}for(var s,l=Object.keys(o),u=0,c=l.length;u<c;u++){var h=l[u],p=o[h].exports;if(p===t||p&&p.default===t){s=h;break}}if(!s){s=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var d={},u=0,c=l.length;u<c;u++){var h=l[u];d[h]=h}r[s]=[Function([\"require\",\"module\",\"exports\"],\"(\"+t+\")(self)\"),d]}var f=Math.floor(Math.pow(16,8)*Math.random()).toString(16),m={};m[s]=s,r[f]=[Function([\"require\"],\"var f = require(\"+a(s)+\");(f.default ? f.default : f)(self);\"),m];var _={};i(f);var y=\"(\"+n+\")({\"+Object.keys(_).map((function(t){return a(t)+\":[\"+r[t][0]+\",\"+a(r[t][1])+\"]\"})).join(\",\")+\"},{},[\"+a(f)+\"])\",g=window.URL||window.webkitURL||window.mozURL||window.msURL,v=new Blob([y],{type:\"text/javascript\"});if(e&&e.bare)return v;var x=g.createObjectURL(v),b=new Worker(x);return b.objectURL=x,b}}),{}],40:[(function(t,e,i){e.exports.RADIUS=6378137,e.exports.FLATTENING=1/298.257223563,e.exports.POLAR_RADIUS=6356752.3142}),{}],41:[(function(t,e,i){e.exports={version:\"0.40.1\"}}),{}],42:[(function(t,e,i){\"use strict\";var n=t(\"../util/util\");e.exports={deserialize:function(t,e){var i={};if(!e)return i;for(var r=0,o=t;r<o.length;r+=1){var a=o[r],s=a.layerIds.map((function(t){return e.getLayer(t)})).filter(Boolean);if(0!==s.length)for(var l=s[0].createBucket(n.extend({layers:s},a)),u=0,c=s;u<c.length;u+=1){var h=c[u];i[h.id]=l}}return i}}}),{\"../util/util\":223}],43:[(function(t,e,i){\"use strict\";function n(t,e,i,n,r){t.emplaceBack(2*e+(n+1)/2,2*i+(r+1)/2)}var r=t(\"../segment\"),o=r.SegmentVector,a=t(\"../../gl/vertex_buffer\"),s=t(\"../../gl/index_buffer\"),l=t(\"../program_configuration\"),u=l.ProgramConfigurationSet,c=t(\"../vertex_array_type\"),h=t(\"../index_array_type\"),p=h.TriangleIndexArray,d=t(\"../load_geometry\"),f=t(\"../extent\"),m={layoutAttributes:[{name:\"a_pos\",components:2,type:\"Int16\"}],indexArrayType:p,paintAttributes:[{property:\"circle-color\"},{property:\"circle-radius\"},{property:\"circle-blur\"},{property:\"circle-opacity\"},{property:\"circle-stroke-color\"},{property:\"circle-stroke-width\"},{property:\"circle-stroke-opacity\"}]},_=c(m.layoutAttributes),y=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.index=t.index,this.layoutVertexArray=new _(t.layoutVertexArray),this.indexArray=new p(t.indexArray),this.programConfigurations=new u(m,t.layers,t.zoom,t.programConfigurations),this.segments=new o(t.segments)};y.prototype.populate=function(t,e){for(var i=this,n=0,r=t;n<r.length;n+=1){var o=r[n],a=o.feature,s=o.index,l=o.sourceLayerIndex;if(i.layers[0].filter(a)){var u=d(a);i.addFeature(a,u),e.featureIndex.insert(a,u,s,l,i.index)}}},y.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},y.prototype.serialize=function(t){return{zoom:this.zoom,layerIds:this.layers.map((function(t){return t.id})),layoutVertexArray:this.layoutVertexArray.serialize(t),indexArray:this.indexArray.serialize(t),programConfigurations:this.programConfigurations.serialize(t),segments:this.segments.get()}},y.prototype.upload=function(t){this.layoutVertexBuffer=new a(t,this.layoutVertexArray),this.indexBuffer=new s(t,this.indexArray),this.programConfigurations.upload(t)},y.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},y.prototype.addFeature=function(t,e){for(var i=this,r=0,o=e;r<o.length;r+=1)for(var a=o[r],s=0,l=a;s<l.length;s+=1){var u=l[s],c=u.x,h=u.y;if(!(c<0||c>=f||h<0||h>=f)){var p=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),d=p.vertexLength;n(i.layoutVertexArray,c,h,-1,-1),n(i.layoutVertexArray,c,h,1,-1),n(i.layoutVertexArray,c,h,1,1),n(i.layoutVertexArray,c,h,-1,1),i.indexArray.emplaceBack(d,d+1,d+2),i.indexArray.emplaceBack(d,d+3,d+2),p.vertexLength+=4,p.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t.properties)},y.programInterface=m,e.exports=y}),{\"../../gl/index_buffer\":61,\"../../gl/vertex_buffer\":62,\"../extent\":48,\"../index_array_type\":50,\"../load_geometry\":51,\"../program_configuration\":53,\"../segment\":55,\"../vertex_array_type\":56}],44:[(function(t,e,i){\"use strict\";var n=t(\"../segment\"),r=n.SegmentVector,o=t(\"../../gl/vertex_buffer\"),a=t(\"../../gl/index_buffer\"),s=t(\"../program_configuration\"),l=s.ProgramConfigurationSet,u=t(\"../vertex_array_type\"),c=t(\"../index_array_type\"),h=c.LineIndexArray,p=c.TriangleIndexArray,d=t(\"../load_geometry\"),f=t(\"earcut\"),m=t(\"../../util/classify_rings\"),_={layoutAttributes:[{name:\"a_pos\",components:2,type:\"Int16\"}],indexArrayType:p,indexArrayType2:h,paintAttributes:[{property:\"fill-color\"},{property:\"fill-outline-color\"},{property:\"fill-opacity\"}]},y=u(_.layoutAttributes),g=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.index=t.index,this.layoutVertexArray=new y(t.layoutVertexArray),this.indexArray=new p(t.indexArray),this.indexArray2=new h(t.indexArray2),this.programConfigurations=new l(_,t.layers,t.zoom,t.programConfigurations),this.segments=new r(t.segments),this.segments2=new r(t.segments2)};g.prototype.populate=function(t,e){for(var i=this,n=0,r=t;n<r.length;n+=1){var o=r[n],a=o.feature,s=o.index,l=o.sourceLayerIndex;if(i.layers[0].filter(a)){var u=d(a);i.addFeature(a,u),e.featureIndex.insert(a,u,s,l,i.index)}}},g.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},g.prototype.serialize=function(t){return{zoom:this.zoom,layerIds:this.layers.map((function(t){return t.id})),layoutVertexArray:this.layoutVertexArray.serialize(t),indexArray:this.indexArray.serialize(t),indexArray2:this.indexArray2.serialize(t),programConfigurations:this.programConfigurations.serialize(t),segments:this.segments.get(),segments2:this.segments2.get()}},g.prototype.upload=function(t){this.layoutVertexBuffer=new o(t,this.layoutVertexArray),this.indexBuffer=new a(t,this.indexArray),this.indexBuffer2=new a(t,this.indexArray2),this.programConfigurations.upload(t)},g.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},g.prototype.addFeature=function(t,e){for(var i=this,n=0,r=m(e,500);n<r.length;n+=1){for(var o=r[n],a=0,s=0,l=o;s<l.length;s+=1)a+=l[s].length;for(var u=i.segments.prepareSegment(a,i.layoutVertexArray,i.indexArray),c=u.vertexLength,h=[],p=[],d=0,_=o;d<_.length;d+=1){var y=_[d];if(0!==y.length){y!==o[0]&&p.push(h.length/2);var g=i.segments2.prepareSegment(y.length,i.layoutVertexArray,i.indexArray2),v=g.vertexLength;i.layoutVertexArray.emplaceBack(y[0].x,y[0].y),i.indexArray2.emplaceBack(v+y.length-1,v),h.push(y[0].x),h.push(y[0].y);for(var x=1;x<y.length;x++)i.layoutVertexArray.emplaceBack(y[x].x,y[x].y),i.indexArray2.emplaceBack(v+x-1,v+x),h.push(y[x].x),h.push(y[x].y);g.vertexLength+=y.length,g.primitiveLength+=y.length}}for(var b=f(h,p),w=0;w<b.length;w+=3)i.indexArray.emplaceBack(c+b[w],c+b[w+1],c+b[w+2]);u.vertexLength+=a,u.primitiveLength+=b.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t.properties)},g.programInterface=_,e.exports=g}),{\"../../gl/index_buffer\":61,\"../../gl/vertex_buffer\":62,\"../../util/classify_rings\":205,\"../index_array_type\":50,\"../load_geometry\":51,\"../program_configuration\":53,\"../segment\":55,\"../vertex_array_type\":56,earcut:11}],45:[(function(t,e,i){\"use strict\";function n(t,e,i,n,r,o,a,s){t.emplaceBack(e,i,2*Math.floor(n*x)+a,r*x*2,o*x*2,Math.round(s))}function r(t,e){return t.x===e.x&&(t.x<0||t.x>_)||t.y===e.y&&(t.y<0||t.y>_)}var o=t(\"../segment\"),a=o.SegmentVector,s=o.MAX_VERTEX_ARRAY_LENGTH,l=t(\"../../gl/vertex_buffer\"),u=t(\"../../gl/index_buffer\"),c=t(\"../program_configuration\"),h=c.ProgramConfigurationSet,p=t(\"../vertex_array_type\"),d=t(\"../index_array_type\"),f=d.TriangleIndexArray,m=t(\"../load_geometry\"),_=t(\"../extent\"),y=t(\"earcut\"),g=t(\"../../util/classify_rings\"),v={layoutAttributes:[{name:\"a_pos\",components:2,type:\"Int16\"},{name:\"a_normal\",components:3,type:\"Int16\"},{name:\"a_edgedistance\",components:1,type:\"Int16\"}],indexArrayType:f,paintAttributes:[{property:\"fill-extrusion-base\"},{property:\"fill-extrusion-height\"},{property:\"fill-extrusion-color\"}]},x=Math.pow(2,13),b=p(v.layoutAttributes),w=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.index=t.index,this.layoutVertexArray=new b(t.layoutVertexArray),this.indexArray=new f(t.indexArray),this.programConfigurations=new h(v,t.layers,t.zoom,t.programConfigurations),this.segments=new a(t.segments)};w.prototype.populate=function(t,e){for(var i=this,n=0,r=t;n<r.length;n+=1){var o=r[n],a=o.feature,s=o.index,l=o.sourceLayerIndex;if(i.layers[0].filter(a)){var u=m(a);i.addFeature(a,u),e.featureIndex.insert(a,u,s,l,i.index)}}},w.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},w.prototype.serialize=function(t){return{zoom:this.zoom,layerIds:this.layers.map((function(t){return t.id})),layoutVertexArray:this.layoutVertexArray.serialize(t),indexArray:this.indexArray.serialize(t),programConfigurations:this.programConfigurations.serialize(t),segments:this.segments.get()}},w.prototype.upload=function(t){this.layoutVertexBuffer=new l(t,this.layoutVertexArray),this.indexBuffer=new u(t,this.indexArray),this.programConfigurations.upload(t)},w.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},w.prototype.addFeature=function(t,e){for(var i=this,o=0,a=g(e,500);o<a.length;o+=1){for(var l=a[o],u=0,c=0,h=l;c<h.length;c+=1)u+=h[c].length;for(var p=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),d=0,f=l;d<f.length;d+=1){var m=f[d];if(0!==m.length)for(var _=0,v=0;v<m.length;v++){var x=m[v];if(v>=1){var b=m[v-1];if(!r(x,b)){p.vertexLength+4>s&&(p=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray));var w=x.sub(b)._perp()._unit();n(i.layoutVertexArray,x.x,x.y,w.x,w.y,0,0,_),n(i.layoutVertexArray,x.x,x.y,w.x,w.y,0,1,_),_+=b.dist(x),n(i.layoutVertexArray,b.x,b.y,w.x,w.y,0,0,_),n(i.layoutVertexArray,b.x,b.y,w.x,w.y,0,1,_);var E=p.vertexLength;i.indexArray.emplaceBack(E,E+1,E+2),i.indexArray.emplaceBack(E+1,E+2,E+3),p.vertexLength+=4,p.primitiveLength+=2}}}}p.vertexLength+u>s&&(p=i.segments.prepareSegment(u,i.layoutVertexArray,i.indexArray));for(var C=[],T=[],S=p.vertexLength,A=0,L=l;A<L.length;A+=1){var I=L[A];if(0!==I.length){I!==l[0]&&T.push(C.length/2);for(var M=0;M<I.length;M++){var z=I[M];n(i.layoutVertexArray,z.x,z.y,0,0,1,1,0),C.push(z.x),C.push(z.y)}}}for(var P=y(C,T),R=0;R<P.length;R+=3)i.indexArray.emplaceBack(S+P[R],S+P[R+1],S+P[R+2]);p.primitiveLength+=P.length/3,p.vertexLength+=u}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t.properties)},w.programInterface=v,e.exports=w}),{\"../../gl/index_buffer\":61,\"../../gl/vertex_buffer\":62,\"../../util/classify_rings\":205,\"../extent\":48,\"../index_array_type\":50,\"../load_geometry\":51,\"../program_configuration\":53,\"../segment\":55,\"../vertex_array_type\":56,earcut:11}],46:[(function(t,e,i){\"use strict\";function n(t,e,i,n,r,o,a){t.emplaceBack(e.x,e.y,n?1:0,r?1:-1,Math.round(_*i.x)+128,Math.round(_*i.y)+128,1+(0===o?0:o<0?-1:1)|(a*g&63)<<2,a*g>>6)}var r=t(\"../segment\"),o=r.SegmentVector,a=t(\"../../gl/vertex_buffer\"),s=t(\"../../gl/index_buffer\"),l=t(\"../program_configuration\"),u=l.ProgramConfigurationSet,c=t(\"../vertex_array_type\"),h=t(\"../index_array_type\"),p=h.TriangleIndexArray,d=t(\"../load_geometry\"),f=t(\"../extent\"),m=t(\"@mapbox/vector-tile\").VectorTileFeature.types,_=63,y=Math.cos(Math.PI/180*37.5),g=.5,v=Math.pow(2,14)/g,x={layoutAttributes:[{name:\"a_pos_normal\",components:4,type:\"Int16\"},{name:\"a_data\",components:4,type:\"Uint8\"}],paintAttributes:[{property:\"line-color\"},{property:\"line-blur\"},{property:\"line-opacity\"},{property:\"line-gap-width\",name:\"gapwidth\"},{property:\"line-offset\"},{property:\"line-width\"},{property:\"line-width\",name:\"floorwidth\",useIntegerZoom:!0}],indexArrayType:p},b=c(x.layoutAttributes),w=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.index=t.index,this.layoutVertexArray=new b(t.layoutVertexArray),this.indexArray=new p(t.indexArray),this.programConfigurations=new u(x,t.layers,t.zoom,t.programConfigurations),this.segments=new o(t.segments)};w.prototype.populate=function(t,e){for(var i=this,n=0,r=t;n<r.length;n+=1){var o=r[n],a=o.feature,s=o.index,l=o.sourceLayerIndex;if(i.layers[0].filter(a)){var u=d(a);i.addFeature(a,u),e.featureIndex.insert(a,u,s,l,i.index)}}},w.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},w.prototype.serialize=function(t){return{zoom:this.zoom,layerIds:this.layers.map((function(t){return t.id})),layoutVertexArray:this.layoutVertexArray.serialize(t),indexArray:this.indexArray.serialize(t),programConfigurations:this.programConfigurations.serialize(t),segments:this.segments.get()}},w.prototype.upload=function(t){this.layoutVertexBuffer=new a(t,this.layoutVertexArray),this.indexBuffer=new s(t,this.indexArray),this.programConfigurations.upload(t)},w.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},w.prototype.addFeature=function(t,e){for(var i=this,n=this.layers[0].layout,r=this.layers[0].getLayoutValue(\"line-join\",{zoom:this.zoom},t.properties),o=n[\"line-cap\"],a=n[\"line-miter-limit\"],s=n[\"line-round-limit\"],l=0,u=e;l<u.length;l+=1){var c=u[l];i.addLine(c,t,r,o,a,s)}},w.prototype.addLine=function(t,e,i,n,r,o){for(var a=this,s=e.properties,l=\"Polygon\"===m[e.type],u=t.length;u>=2&&t[u-1].equals(t[u-2]);)u--;for(var c=0;c<u-1&&t[c].equals(t[c+1]);)c++;if(!(u<(l?3:2))){\"bevel\"===i&&(r=1.05);var h=f/(512*this.overscaling)*15,p=t[c],d=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray);this.distance=0;var _,g,v,x=n,b=l?\"butt\":n,w=!0,E=void 0,C=void 0,T=void 0,S=void 0;this.e1=this.e2=this.e3=-1,l&&(_=t[u-2],S=p.sub(_)._unit()._perp());for(var A=c;A<u;A++)if(!(C=l&&A===u-1?t[c+1]:t[A+1])||!t[A].equals(C)){S&&(T=S),_&&(E=_),_=t[A],S=C?C.sub(_)._unit()._perp():T,T=T||S;var L=T.add(S);0===L.x&&0===L.y||L._unit();var I=L.x*S.x+L.y*S.y,M=0!==I?1/I:1/0,z=I<y&&E&&C;if(z&&A>c){var P=_.dist(E);if(P>2*h){var R=_.sub(_.sub(E)._mult(h/P)._round());a.distance+=R.dist(E),a.addCurrentVertex(R,a.distance,T.mult(1),0,0,!1,d),E=R}}var D=E&&C,k=D?i:C?x:b;if(D&&\"round\"===k&&(M<o?k=\"miter\":M<=2&&(k=\"fakeround\")),\"miter\"===k&&M>r&&(k=\"bevel\"),\"bevel\"===k&&(M>2&&(k=\"flipbevel\"),M<r&&(k=\"miter\")),E&&(a.distance+=_.dist(E)),\"miter\"===k)L._mult(M),a.addCurrentVertex(_,a.distance,L,0,0,!1,d);else if(\"flipbevel\"===k){if(M>100)L=S.clone().mult(-1);else{var O=T.x*S.y-T.y*S.x>0?-1:1,N=M*T.add(S).mag()/T.sub(S).mag();L._perp()._mult(N*O)}a.addCurrentVertex(_,a.distance,L,0,0,!1,d),a.addCurrentVertex(_,a.distance,L.mult(-1),0,0,!1,d)}else if(\"bevel\"===k||\"fakeround\"===k){var B=T.x*S.y-T.y*S.x>0,F=-Math.sqrt(M*M-1);if(B?(v=0,g=F):(g=0,v=F),w||a.addCurrentVertex(_,a.distance,T,g,v,!1,d),\"fakeround\"===k){for(var V=Math.floor(8*(.5-(I-.5))),U=void 0,j=0;j<V;j++)U=S.mult((j+1)/(V+1))._add(T)._unit(),a.addPieSliceVertex(_,a.distance,U,B,d);a.addPieSliceVertex(_,a.distance,L,B,d);for(var G=V-1;G>=0;G--)U=T.mult((G+1)/(V+1))._add(S)._unit(),a.addPieSliceVertex(_,a.distance,U,B,d)}C&&a.addCurrentVertex(_,a.distance,S,-g,-v,!1,d)}else\"butt\"===k?(w||a.addCurrentVertex(_,a.distance,T,0,0,!1,d),C&&a.addCurrentVertex(_,a.distance,S,0,0,!1,d)):\"square\"===k?(w||(a.addCurrentVertex(_,a.distance,T,1,1,!1,d),a.e1=a.e2=-1),C&&a.addCurrentVertex(_,a.distance,S,-1,-1,!1,d)):\"round\"===k&&(w||(a.addCurrentVertex(_,a.distance,T,0,0,!1,d),a.addCurrentVertex(_,a.distance,T,1,1,!0,d),a.e1=a.e2=-1),C&&(a.addCurrentVertex(_,a.distance,S,-1,-1,!0,d),a.addCurrentVertex(_,a.distance,S,0,0,!1,d)));if(z&&A<u-1){var q=_.dist(C);if(q>2*h){var H=_.add(C.sub(_)._mult(h/q)._round());a.distance+=H.dist(_),a.addCurrentVertex(H,a.distance,S.mult(1),0,0,!1,d),_=H}}w=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s)}},w.prototype.addCurrentVertex=function(t,e,i,r,o,a,s){var l,u=this.layoutVertexArray,c=this.indexArray;l=i.clone(),r&&l._sub(i.perp()._mult(r)),n(u,t,l,a,!1,r,e),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,l=i.mult(-1),o&&l._sub(i.perp()._mult(o)),n(u,t,l,a,!0,-o,e),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,e>v/2&&(this.distance=0,this.addCurrentVertex(t,this.distance,i,r,o,a,s))},w.prototype.addPieSliceVertex=function(t,e,i,r,o){i=i.mult(r?-1:1);var a=this.layoutVertexArray,s=this.indexArray;n(a,t,i,!1,r,0,e),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(s.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),r?this.e2=this.e3:this.e1=this.e3},w.programInterface=x,e.exports=w}),{\"../../gl/index_buffer\":61,\"../../gl/vertex_buffer\":62,\"../extent\":48,\"../index_array_type\":50,\"../load_geometry\":51,\"../program_configuration\":53,\"../segment\":55,\"../vertex_array_type\":56,\"@mapbox/vector-tile\":6}],47:[(function(t,e,i){\"use strict\";function n(t,e,i,n,r,o,a,s){t.emplaceBack(e,i,Math.round(64*n),Math.round(64*r),o,a,s?s[0]:void 0,s?s[1]:void 0)}function r(t,e,i,n){var r=2*Math.PI,o=b((i+r)%r/r*255,10*n);t.emplaceBack(e.x,e.y,o),t.emplaceBack(e.x,e.y,o),t.emplaceBack(e.x,e.y,o),t.emplaceBack(e.x,e.y,o)}function o(t,e,i,n,r,o){return t.emplaceBack(e.x,e.y,i.x,i.y,Math.round(n.x),Math.round(n.y),10*r,10*o)}function a(t,e,i){var n={};if(n.isFeatureConstant=e.isLayoutValueFeatureConstant(i),n.isZoomConstant=e.isLayoutValueZoomConstant(i),n.isFeatureConstant&&(n.layoutSize=e.getLayoutValue(i,{zoom:t+1})),!n.isZoomConstant){for(var r=e.getLayoutValueStopZoomLevels(i),o=0;o<r.length&&r[o]<=t;)o++;o=Math.max(0,o-1);for(var a=o;a<r.length&&r[a]<t+1;)a++;a=Math.min(r.length-1,a),n.coveringZoomRange=[r[o],r[a]],e.isLayoutValueFeatureConstant(i)&&(n.coveringStopValues=[e.getLayoutValue(i,{zoom:r[o]}),e.getLayoutValue(i,{zoom:r[a]})]),n.functionBase=e.getLayoutProperty(i).base,void 0===n.functionBase&&(n.functionBase=1),n.functionType=e.getLayoutProperty(i).type||\"exponential\"}return n}function s(t,e,i,n,r){return t.isLayoutValueZoomConstant(n)&&!t.isLayoutValueFeatureConstant(n)?[10*t.getLayoutValue(n,{},r)]:t.isLayoutValueZoomConstant(n)||t.isLayoutValueFeatureConstant(n)?null:[10*t.getLayoutValue(n,{zoom:i[0]},r),10*t.getLayoutValue(n,{zoom:i[1]},r)]}var l=t(\"@mapbox/point-geometry\"),u=t(\"../segment\"),c=u.SegmentVector,h=t(\"../../gl/vertex_buffer\"),p=t(\"../../gl/index_buffer\"),d=t(\"../program_configuration\"),f=d.ProgramConfigurationSet,m=t(\"../vertex_array_type\"),_=t(\"../index_array_type\"),y=_.TriangleIndexArray,g=_.LineIndexArray,v=t(\"../extent\"),x=t(\"../../shaders/encode_attribute\"),b=x.packUint8ToFloat,w=t(\"../../symbol/anchor\"),E=t(\"../../symbol/get_anchors\"),C=t(\"../../util/token\"),T=t(\"../../symbol/quads\"),S=T.getGlyphQuads,A=T.getIconQuads,L=t(\"../../symbol/shaping\"),I=L.shapeText,M=L.shapeIcon,z=L.WritingMode,P=t(\"../../symbol/transform_text\"),R=t(\"../../symbol/mergelines\"),D=t(\"../../symbol/clip_line\"),k=t(\"../../util/util\"),O=t(\"../../util/script_detection\"),N=t(\"../load_geometry\"),B=t(\"../../symbol/collision_feature\"),F=t(\"../../util/find_pole_of_inaccessibility\"),V=t(\"../../util/classify_rings\"),U=t(\"@mapbox/vector-tile\").VectorTileFeature.types,j=t(\"../../util/struct_array\"),G=t(\"../../util/verticalize_punctuation\"),q=j({members:[{type:\"Int16\",name:\"anchorX\"},{type:\"Int16\",name:\"anchorY\"},{type:\"Uint16\",name:\"glyphStartIndex\"},{type:\"Uint16\",name:\"numGlyphs\"},{type:\"Uint32\",name:\"lineStartIndex\"},{type:\"Uint32\",name:\"lineLength\"},{type:\"Uint16\",name:\"segment\"},{type:\"Uint16\",name:\"lowerSize\"},{type:\"Uint16\",name:\"upperSize\"},{type:\"Float32\",name:\"lineOffsetX\"},{type:\"Float32\",name:\"lineOffsetY\"},{type:\"Float32\",name:\"placementZoom\"},{type:\"Uint8\",name:\"vertical\"}]}),H=j({members:[{type:\"Float32\",name:\"offsetX\"}]}),Z=j({members:[{type:\"Int16\",name:\"x\"},{type:\"Int16\",name:\"y\"}]}),W=[{name:\"a_pos_offset\",components:4,type:\"Int16\"},{name:\"a_data\",components:4,type:\"Uint16\"}],X=[{name:\"a_projected_pos\",components:3,type:\"Float32\"}],K={text:{layoutAttributes:W,dynamicLayoutAttributes:X,indexArrayType:y,paintAttributes:[{property:\"text-color\",name:\"fill_color\"},{property:\"text-halo-color\",name:\"halo_color\"},{property:\"text-halo-width\",name:\"halo_width\"},{property:\"text-halo-blur\",name:\"halo_blur\"},{property:\"text-opacity\",name:\"opacity\"}]},icon:{layoutAttributes:W,dynamicLayoutAttributes:X,indexArrayType:y,paintAttributes:[{property:\"icon-color\",name:\"fill_color\"},{property:\"icon-halo-color\",name:\"halo_color\"},{property:\"icon-halo-width\",name:\"halo_width\"},{property:\"icon-halo-blur\",name:\"halo_blur\"},{property:\"icon-opacity\",name:\"opacity\"}]},collisionBox:{layoutAttributes:[{name:\"a_pos\",components:2,type:\"Int16\"},{name:\"a_anchor_pos\",components:2,type:\"Int16\"},{name:\"a_extrude\",components:2,type:\"Int16\"},{name:\"a_data\",components:2,type:\"Uint8\"}],indexArrayType:g}},J=function(t,e,i,n){this.programInterface=t;var r=m(t.layoutAttributes),o=t.indexArrayType;if(this.layoutVertexArray=new r(n&&n.layoutVertexArray),this.indexArray=new o(n&&n.indexArray),this.programConfigurations=new f(t,e,i,n&&n.programConfigurations),this.segments=new c(n&&n.segments),t.dynamicLayoutAttributes){var a=m(t.dynamicLayoutAttributes);this.dynamicLayoutVertexArray=new a(n&&n.dynamicLayoutVertexArray)}};J.prototype.serialize=function(t){return{layoutVertexArray:this.layoutVertexArray.serialize(t),indexArray:this.indexArray.serialize(t),programConfigurations:this.programConfigurations.serialize(t),segments:this.segments.get(),dynamicLayoutVertexArray:this.dynamicLayoutVertexArray&&this.dynamicLayoutVertexArray.serialize(t)}},J.prototype.upload=function(t){this.layoutVertexBuffer=new h(t,this.layoutVertexArray),this.indexBuffer=new p(t,this.indexArray),this.programConfigurations.upload(t),this.programInterface.dynamicLayoutAttributes&&(this.dynamicLayoutVertexBuffer=new h(t,this.dynamicLayoutVertexArray,!0))},J.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer&&this.dynamicLayoutVertexBuffer.destroy())};var Y=function(t){if(this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.index=t.index,this.sdfIcons=t.sdfIcons,this.iconsNeedLinear=t.iconsNeedLinear,this.pixelRatio=t.pixelRatio,t.text)this.text=new J(K.text,t.layers,t.zoom,t.text),this.icon=new J(K.icon,t.layers,t.zoom,t.icon),this.collisionBox=new J(K.collisionBox,t.layers,t.zoom,t.collisionBox),this.textSizeData=t.textSizeData,this.iconSizeData=t.iconSizeData,this.placedGlyphArray=new q(t.placedGlyphArray),this.placedIconArray=new q(t.placedIconArray),this.glyphOffsetArray=new H(t.glyphOffsetArray),this.lineVertexArray=new Z(t.lineVertexArray);else{var e=this.layers[0];this.textSizeData=a(this.zoom,e,\"text-size\"),this.iconSizeData=a(this.zoom,e,\"icon-size\")}};Y.prototype.populate=function(t,e){var i=this,n=this.layers[0],r=n.layout,o=r[\"text-font\"],a=(!n.isLayoutValueFeatureConstant(\"text-field\")||r[\"text-field\"])&&o,s=!n.isLayoutValueFeatureConstant(\"icon-image\")||r[\"icon-image\"];if(this.features=[],a||s){for(var l=e.iconDependencies,u=e.glyphDependencies,c=u[o]=u[o]||{},h={zoom:this.zoom},p=0,d=t;p<d.length;p+=1){var f=d[p],m=f.feature,_=f.index,y=f.sourceLayerIndex;if(n.filter(m)){var g=void 0;a&&(g=n.getLayoutValue(\"text-field\",h,m.properties),n.isLayoutValueFeatureConstant(\"text-field\")&&(g=C(m.properties,g)),g=P(g,n,h,m.properties));var v=void 0;if(s&&(v=n.getLayoutValue(\"icon-image\",h,m.properties),n.isLayoutValueFeatureConstant(\"icon-image\")&&(v=C(m.properties,v))),(g||v)&&(i.features.push({text:g,icon:v,index:_,sourceLayerIndex:y,geometry:N(m),properties:m.properties,type:U[m.type]}),v&&(l[v]=!0),g))for(var x=\"map\"===r[\"text-rotation-alignment\"]&&\"line\"===r[\"symbol-placement\"],b=O.allowsVerticalWritingMode(g),w=0;w<g.length;w++)if(c[g.charCodeAt(w)]=!0,x&&b){var E=G.lookup[g.charAt(w)];E&&(c[E.charCodeAt(0)]=!0)}}}\"line\"===r[\"symbol-placement\"]&&(this.features=R(this.features))}},Y.prototype.isEmpty=function(){return 0===this.icon.layoutVertexArray.length&&0===this.text.layoutVertexArray.length&&0===this.collisionBox.layoutVertexArray.length},Y.prototype.serialize=function(t){return{zoom:this.zoom,layerIds:this.layers.map((function(t){return t.id})),sdfIcons:this.sdfIcons,iconsNeedLinear:this.iconsNeedLinear,textSizeData:this.textSizeData,iconSizeData:this.iconSizeData,placedGlyphArray:this.placedGlyphArray.serialize(t),placedIconArray:this.placedIconArray.serialize(t),glyphOffsetArray:this.glyphOffsetArray.serialize(t),lineVertexArray:this.lineVertexArray.serialize(t),text:this.text.serialize(t),icon:this.icon.serialize(t),collisionBox:this.collisionBox.serialize(t)}},Y.prototype.upload=function(t){this.text.upload(t),this.icon.upload(t),this.collisionBox.upload(t)},Y.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy()},Y.prototype.prepare=function(t,e,i,n){var r=this;this.symbolInstances=[];var o=512*this.overscaling;this.tilePixelRatio=v/o,this.compareText={},this.iconsNeedLinear=!1;for(var a=this.layers[0].layout,s=24*a[\"text-line-height\"],l=a[\"text-font\"].join(\",\"),u=\"map\"===a[\"text-rotation-alignment\"]&&\"line\"===a[\"symbol-placement\"],c=t[l]||{},h=e[l]||{},p=0,d=r.features;p<d.length;p+=1){var f=d[p],m={},_=f.text;if(_){var y=r.layers[0].getLayoutValue(\"text-offset\",{zoom:r.zoom},f.properties).map((function(t){return 24*t})),g=24*r.layers[0].getLayoutValue(\"text-letter-spacing\",{zoom:r.zoom},f.properties),x=O.allowsLetterSpacing(_)?g:0,b=r.layers[0].getLayoutValue(\"text-anchor\",{zoom:r.zoom},f.properties),w=r.layers[0].getLayoutValue(\"text-justify\",{zoom:r.zoom},f.properties),E=\"line\"!==a[\"symbol-placement\"]?24*r.layers[0].getLayoutValue(\"text-max-width\",{zoom:r.zoom},f.properties):0,C=function(t,e){return I(t,c,E,s,b,w,x,y,24,e)};m[z.horizontal]=C(_,z.horizontal),O.allowsVerticalWritingMode(_)&&u&&(m[z.vertical]=C(_,z.vertical))}var T=void 0;if(f.icon){var S=i[f.icon];S&&(T=M(n[f.icon],r.layers[0].getLayoutValue(\"icon-offset\",{zoom:r.zoom},f.properties),r.layers[0].getLayoutValue(\"icon-anchor\",{zoom:r.zoom},f.properties)),void 0===r.sdfIcons?r.sdfIcons=S.sdf:r.sdfIcons!==S.sdf&&k.warnOnce(\"Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer\"),S.pixelRatio!==r.pixelRatio?r.iconsNeedLinear=!0:0===a[\"icon-rotate\"]&&r.layers[0].isLayoutValueFeatureConstant(\"icon-rotate\")||(r.iconsNeedLinear=!0))}(m[z.horizontal]||T)&&r.addFeature(f,m,T,h)}},Y.prototype.addFeature=function(t,e,i,n){var r=this,o=this.layers[0].getLayoutValue(\"text-size\",{zoom:this.zoom+1},t.properties),a=this.layers[0].getLayoutValue(\"icon-size\",{zoom:this.zoom+1},t.properties),s=this.layers[0].getLayoutValue(\"text-offset\",{zoom:this.zoom},t.properties),l=this.layers[0].getLayoutValue(\"icon-offset\",{zoom:this.zoom},t.properties),u=this.layers[0].getLayoutValue(\"text-size\",{zoom:18},t.properties);void 0===u&&(u=o);var c=this.layers[0].layout,h=o/24,p=this.tilePixelRatio*h,d=this.tilePixelRatio*u/24,f=this.tilePixelRatio*a,m=this.tilePixelRatio*c[\"symbol-spacing\"],_=c[\"symbol-avoid-edges\"],y=c[\"text-padding\"]*this.tilePixelRatio,g=c[\"icon-padding\"]*this.tilePixelRatio,x=c[\"text-max-angle\"]/180*Math.PI,b=\"map\"===c[\"text-rotation-alignment\"]&&\"line\"===c[\"symbol-placement\"],C=\"map\"===c[\"icon-rotation-alignment\"]&&\"line\"===c[\"symbol-placement\"],T=c[\"text-allow-overlap\"]||c[\"icon-allow-overlap\"]||c[\"text-ignore-placement\"]||c[\"icon-ignore-placement\"],S=c[\"symbol-placement\"],A=m/2,L=function(o,a){var u=!(a.x<0||a.x>v||a.y<0||a.y>v);if(!_||u){var c=u||T;r.addSymbolInstance(a,o,e,i,r.layers[0],c,r.collisionBoxArray,t.index,t.sourceLayerIndex,r.index,p,y,b,s,f,g,C,l,{zoom:r.zoom},t.properties,n)}};if(\"line\"===S)for(var I=0,M=D(t.geometry,0,0,v,v);I<M.length;I+=1)for(var P=M[I],R=E(P,m,x,e[z.vertical]||e[z.horizontal],i,24,d,r.overscaling,v),k=0,O=R;k<O.length;k+=1){var N=O[k],B=e[z.horizontal];B&&r.anchorIsTooClose(B.text,A,N)||L(P,N)}else if(\"Polygon\"===t.type)for(var U=0,j=V(t.geometry,0);U<j.length;U+=1){var G=j[U],q=F(G,16);L(G[0],new w(q.x,q.y,0))}else if(\"LineString\"===t.type)for(var H=0,Z=t.geometry;H<Z.length;H+=1){var W=Z[H];L(W,new w(W[0].x,W[0].y,0))}else if(\"Point\"===t.type)for(var X=0,K=t.geometry;X<K.length;X+=1)for(var J=K[X],Y=0,$=J;Y<$.length;Y+=1){var Q=$[Y];L([Q],new w(Q.x,Q.y,0))}},Y.prototype.anchorIsTooClose=function(t,e,i){var n=this.compareText;if(t in n){for(var r=n[t],o=r.length-1;o>=0;o--)if(i.dist(r[o])<e)return!0}else n[t]=[];return n[t].push(i),!1},Y.prototype.place=function(t,e){var i=this;this.text=new J(K.text,this.layers,this.zoom),this.icon=new J(K.icon,this.layers,this.zoom),this.collisionBox=new J(K.collisionBox,this.layers,this.zoom),this.placedGlyphArray=new q,this.placedIconArray=new q,this.glyphOffsetArray=new H,this.lineVertexArray=new Z;var n=this.layers[0],r=n.layout,o=t.maxScale,a=\"map\"===r[\"text-rotation-alignment\"]&&\"line\"===r[\"symbol-placement\"],l=\"map\"===r[\"icon-rotation-alignment\"]&&\"line\"===r[\"symbol-placement\"];if(r[\"text-allow-overlap\"]||r[\"icon-allow-overlap\"]||r[\"text-ignore-placement\"]||r[\"icon-ignore-placement\"]){var u=t.angle,c=Math.sin(u),h=Math.cos(u);this.symbolInstances.sort((function(t,e){return(c*t.anchor.x+h*t.anchor.y|0)-(c*e.anchor.x+h*e.anchor.y|0)||e.featureIndex-t.featureIndex}))}for(var p=0,d=i.symbolInstances;p<d.length;p+=1){var f=d[p],m={boxStartIndex:f.textBoxStartIndex,boxEndIndex:f.textBoxEndIndex},_={boxStartIndex:f.iconBoxStartIndex,boxEndIndex:f.iconBoxEndIndex},y=!(f.textBoxStartIndex===f.textBoxEndIndex),g=!(f.iconBoxStartIndex===f.iconBoxEndIndex),v=r[\"text-optional\"]||!y,x=r[\"icon-optional\"]||!g,b=y?t.placeCollisionFeature(m,r[\"text-allow-overlap\"],r[\"symbol-avoid-edges\"]):t.minScale,w=g?t.placeCollisionFeature(_,r[\"icon-allow-overlap\"],r[\"symbol-avoid-edges\"]):t.minScale;if(v||x?!x&&b?b=Math.max(w,b):!v&&w&&(w=Math.max(w,b)):w=b=Math.max(w,b),y||g){for(var E=f.line,C=i.lineVertexArray.length,T=0;T<E.length;T++)i.lineVertexArray.emplaceBack(E[T].x,E[T].y);var S=i.lineVertexArray.length-C;if(y&&(t.insertCollisionFeature(m,b,r[\"text-ignore-placement\"]),b<=o)){var A=s(n,i.zoom,i.textSizeData.coveringZoomRange,\"text-size\",f.featureProperties);i.addSymbols(i.text,f.glyphQuads,b,A,r[\"text-keep-upright\"],f.textOffset,a,t.angle,f.featureProperties,f.writingModes,f.anchor,C,S,i.placedGlyphArray)}if(g&&(t.insertCollisionFeature(_,w,r[\"icon-ignore-placement\"]),w<=o)){var L=s(n,i.zoom,i.iconSizeData.coveringZoomRange,\"icon-size\",f.featureProperties);i.addSymbols(i.icon,f.iconQuads,w,L,r[\"icon-keep-upright\"],f.iconOffset,l,t.angle,f.featureProperties,0,f.anchor,C,S,i.placedIconArray)}}}e&&this.addToDebugBuffers(t)},Y.prototype.addSymbols=function(t,e,i,o,a,s,l,u,c,h,p,d,f,m){for(var _=this,y=t.indexArray,g=t.layoutVertexArray,v=t.dynamicLayoutVertexArray,x=this.zoom,b=Math.max(Math.log(i)/Math.LN2+x,0),w=this.glyphOffsetArray.length,E=(p.angle+u+2*Math.PI)%(2*Math.PI),C=E>1*Math.PI/4&&E<=3*Math.PI/4||E>5*Math.PI/4&&E<=7*Math.PI/4,T=Boolean(h&z.vertical)&&C,S=0,A=e;S<A.length;S+=1){var L=A[S];if(!l||!a||L.writingMode===z.vertical===T){var I=L.tl,M=L.tr,P=L.bl,R=L.br,D=L.tex,k=t.segments.prepareSegment(4,t.layoutVertexArray,t.indexArray),O=k.vertexLength,N=L.glyphOffset[1];n(g,p.x,p.y,I.x,N+I.y,D.x,D.y,o),n(g,p.x,p.y,M.x,N+M.y,D.x+D.w,D.y,o),n(g,p.x,p.y,P.x,N+P.y,D.x,D.y+D.h,o),n(g,p.x,p.y,R.x,N+R.y,D.x+D.w,D.y+D.h,o),r(v,p,0,b),y.emplaceBack(O,O+1,O+2),y.emplaceBack(O+1,O+2,O+3),k.vertexLength+=4,k.primitiveLength+=2,_.glyphOffsetArray.emplaceBack(L.glyphOffset[0])}}m.emplaceBack(p.x,p.y,w,this.glyphOffsetArray.length-w,d,f,p.segment,o?o[0]:0,o?o[1]:0,s[0],s[1],b,T),t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,c)},Y.prototype.addToDebugBuffers=function(t){for(var e=this,i=this.collisionBox,n=i.layoutVertexArray,r=i.indexArray,a=-t.angle,s=t.yStretch,u=0,c=e.symbolInstances;u<c.length;u+=1){var h=c[u];h.textCollisionFeature={boxStartIndex:h.textBoxStartIndex,boxEndIndex:h.textBoxEndIndex},h.iconCollisionFeature={boxStartIndex:h.iconBoxStartIndex,boxEndIndex:h.iconBoxEndIndex};for(var p=0;p<2;p++){var d=h[0===p?\"textCollisionFeature\":\"iconCollisionFeature\"];if(d)for(var f=d.boxStartIndex;f<d.boxEndIndex;f++){var m=e.collisionBoxArray.get(f);if(!(1===t.perspectiveRatio&&m.maxScale<1)){var _=m.anchorPoint,y=new l(m.x1,m.y1*s)._rotate(a),g=new l(m.x2,m.y1*s)._rotate(a),v=new l(m.x1,m.y2*s)._rotate(a),x=new l(m.x2,m.y2*s)._rotate(a),b=Math.max(0,Math.min(25,e.zoom+Math.log(m.maxScale)/Math.LN2)),w=Math.max(0,Math.min(25,e.zoom+Math.log(m.placementScale)/Math.LN2)),E=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),C=E.vertexLength;o(n,_,h.anchor,y,b,w),o(n,_,h.anchor,g,b,w),o(n,_,h.anchor,x,b,w),o(n,_,h.anchor,v,b,w),r.emplaceBack(C,C+1),r.emplaceBack(C+1,C+2),r.emplaceBack(C+2,C+3),r.emplaceBack(C+3,C),E.vertexLength+=4,E.primitiveLength+=4}}}}},Y.prototype.addSymbolInstance=function(t,e,i,n,r,o,a,s,l,u,c,h,p,d,f,m,_,y,g,v,x){var b,w,E=[],C=[];for(var T in i){var L=parseInt(T,10);i[L]&&(C=C.concat(o?S(t,i[L],r,p,g,v,x):[]),b=new B(a,e,t,s,l,u,i[L],c,h,p,!1))}var I=b?b.boxStartIndex:this.collisionBoxArray.length,M=b?b.boxEndIndex:this.collisionBoxArray.length;n&&(E=o?A(t,n,r,_,i[z.horizontal],g,v):[],w=new B(a,e,t,s,l,u,n,f,m,_,!0));var P=w?w.boxStartIndex:this.collisionBoxArray.length,R=w?w.boxEndIndex:this.collisionBoxArray.length;M>Y.MAX_INSTANCES&&k.warnOnce(\"Too many symbols being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907\"),R>Y.MAX_INSTANCES&&k.warnOnce(\"Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907\");var D=(i[z.vertical]?z.vertical:0)|(i[z.horizontal]?z.horizontal:0);this.symbolInstances.push({textBoxStartIndex:I,textBoxEndIndex:M,iconBoxStartIndex:P,iconBoxEndIndex:R,glyphQuads:C,iconQuads:E,textOffset:d,iconOffset:y,anchor:t,line:e,featureIndex:s,featureProperties:v,writingModes:D})},Y.programInterfaces=K,Y.MAX_INSTANCES=65535,Y.addDynamicAttributes=r,e.exports=Y}),{\"../../gl/index_buffer\":61,\"../../gl/vertex_buffer\":62,\"../../shaders/encode_attribute\":85,\"../../symbol/anchor\":167,\"../../symbol/clip_line\":169,\"../../symbol/collision_feature\":171,\"../../symbol/get_anchors\":173,\"../../symbol/mergelines\":174,\"../../symbol/quads\":176,\"../../symbol/shaping\":177,\"../../symbol/transform_text\":179,\"../../util/classify_rings\":205,\"../../util/find_pole_of_inaccessibility\":211,\"../../util/script_detection\":218,\"../../util/struct_array\":220,\"../../util/token\":222,\"../../util/util\":223,\"../../util/verticalize_punctuation\":225,\"../extent\":48,\"../index_array_type\":50,\"../load_geometry\":51,\"../program_configuration\":53,\"../segment\":55,\"../vertex_array_type\":56,\"@mapbox/point-geometry\":2,\"@mapbox/vector-tile\":6}],48:[(function(t,e,i){\"use strict\";e.exports=8192}),{}],49:[(function(t,e,i){\"use strict\";function n(t,e){return e-t}var r=(t(\"@mapbox/point-geometry\"),t(\"./load_geometry\")),o=t(\"./extent\"),a=t(\"../style-spec/feature_filter\"),s=t(\"../util/struct_array\"),l=t(\"grid-index\"),u=t(\"../util/dictionary_coder\"),c=t(\"@mapbox/vector-tile\"),h=t(\"pbf\"),p=t(\"../util/vectortile_to_geojson\"),d=t(\"../util/util\").arraysIntersect,f=s({members:[{type:\"Uint32\",name:\"featureIndex\"},{type:\"Uint16\",name:\"sourceLayerIndex\"},{type:\"Uint16\",name:\"bucketIndex\"}]}),m=function(t,e,i,n){this.coord=t,this.overscaling=e,this.x=t.x,this.y=t.y,this.z=t.z-Math.log(e)/Math.LN2,this.grid=i||new l(o,16,0),this.featureIndexArray=n||new f};m.deserialize=function(t,e,i){var n=new m(t.coord,t.overscaling,new l(t.grid),new f(t.featureIndexArray));return n.rawTileData=e,n.bucketLayerIDs=t.bucketLayerIDs,n.setCollisionTile(i),n},m.prototype.insert=function(t,e,i,n,r){var o=this,a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,n,r);for(var s=0;s<e.length;s++){for(var l=e[s],u=[1/0,1/0,-1/0,-1/0],c=0;c<l.length;c++){var h=l[c];u[0]=Math.min(u[0],h.x),u[1]=Math.min(u[1],h.y),u[2]=Math.max(u[2],h.x),u[3]=Math.max(u[3],h.y)}o.grid.insert(a,u[0],u[1],u[2],u[3])}},m.prototype.setCollisionTile=function(t){this.collisionTile=t},m.prototype.serialize=function(t){var e=this.grid.toArrayBuffer();return t&&t.push(e),{coord:this.coord,overscaling:this.overscaling,grid:e,featureIndexArray:this.featureIndexArray.serialize(t),bucketLayerIDs:this.bucketLayerIDs}},m.prototype.query=function(t,e){this.vtLayers||(this.vtLayers=new c.VectorTile(new h(this.rawTileData)).layers,this.sourceLayerCoder=new u(this.vtLayers?Object.keys(this.vtLayers).sort():[\"_geojsonTileLayer\"]));for(var i={},r=t.params||{},s=o/t.tileSize/t.scale,l=a(r.filter),p=t.queryGeometry,d=t.additionalRadius*s,f=1/0,m=1/0,_=-1/0,y=-1/0,g=0;g<p.length;g++)for(var v=p[g],x=0;x<v.length;x++){var b=v[x];f=Math.min(f,b.x),m=Math.min(m,b.y),_=Math.max(_,b.x),y=Math.max(y,b.y)}var w=this.grid.query(f-d,m-d,_+d,y+d);w.sort(n),this.filterMatching(i,w,this.featureIndexArray,p,l,r.layers,e,t.bearing,s);var E=this.collisionTile.queryRenderedSymbols(p,t.scale);return E.sort(),this.filterMatching(i,E,this.collisionTile.collisionBoxArray,p,l,r.layers,e,t.bearing,s),i},m.prototype.filterMatching=function(t,e,i,n,o,a,s,l,u){for(var c,h=this,f=0;f<e.length;f++){var m=e[f];if(m!==c){c=m;var _=i.get(m),y=h.bucketLayerIDs[_.bucketIndex];if(!a||d(a,y)){var g=h.sourceLayerCoder.decode(_.sourceLayerIndex),v=h.vtLayers[g],x=v.feature(_.featureIndex);if(o(x))for(var b=null,w=0;w<y.length;w++){var E=y[w];if(!(a&&a.indexOf(E)<0)){var C=s[E];if(C&&(\"symbol\"===C.type||(b||(b=r(x)),C.queryIntersectsFeature(n,x,b,h.z,l,u)))){var T=new p(x,h.z,h.x,h.y);T.layer=C.serialize();var S=t[E];void 0===S&&(S=t[E]=[]),S.push({featureIndex:m,feature:T})}}}}}}},m.prototype.hasLayer=function(t){for(var e=this,i=0,n=e.bucketLayerIDs;i<n.length;i+=1)for(var r=n[i],o=0,a=r;o<a.length;o+=1){var s=a[o];if(t===s)return!0}return!1},e.exports=m}),{\"../style-spec/feature_filter\":110,\"../util/dictionary_coder\":207,\"../util/struct_array\":220,\"../util/util\":223,\"../util/vectortile_to_geojson\":224,\"./extent\":48,\"./load_geometry\":51,\"@mapbox/point-geometry\":2,\"@mapbox/vector-tile\":6,\"grid-index\":22,pbf:29}],50:[(function(t,e,i){\"use strict\";function n(t){return r({members:[{type:\"Uint16\",name:\"vertices\",components:t}]})}var r=t(\"../util/struct_array\");e.exports={LineIndexArray:n(2),TriangleIndexArray:n(3)}}),{\"../util/struct_array\":220}],51:[(function(t,e,i){\"use strict\";var n=t(\"../util/util\"),r=t(\"./extent\"),o=(function(t){return{min:-1*Math.pow(2,t-1),max:Math.pow(2,t-1)-1}})(16);e.exports=function(t){for(var e=r/t.extent,i=t.loadGeometry(),a=0;a<i.length;a++)for(var s=i[a],l=0;l<s.length;l++){var u=s[l];u.x=Math.round(u.x*e),u.y=Math.round(u.y*e),(u.x<o.min||u.x>o.max||u.y<o.min||u.y>o.max)&&n.warnOnce(\"Geometry exceeds allowed extent, reduce your vector tile buffer size\")}return i}}),{\"../util/util\":223,\"./extent\":48}],52:[(function(t,e,i){\"use strict\";var n=t(\"../util/struct_array\"),r=n({members:[{name:\"a_pos\",type:\"Int16\",components:2}]});e.exports=r}),{\"../util/struct_array\":220}],53:[(function(t,e,i){\"use strict\";function n(t){return[a(255*t[0],255*t[1]),a(255*t[2],255*t[3])]}var r=t(\"./vertex_array_type\"),o=t(\"../style-spec/function\").interpolationFactor,a=t(\"../shaders/encode_attribute\").packUint8ToFloat,s=t(\"../gl/vertex_buffer\"),l=function(t,e,i,n){this.name=t,this.type=e,this.property=i,this.useIntegerZoom=n};l.prototype.defines=function(){return[\"#define HAS_UNIFORM_u_\"+this.name]},l.prototype.populatePaintArray=function(){},l.prototype.setUniforms=function(t,e,i,n){var r=n.zoom,o=i.getPaintValue(this.property,{zoom:this.useIntegerZoom?Math.floor(r):r});\"color\"===this.type?t.uniform4fv(e.uniforms[\"u_\"+this.name],o):t.uniform1f(e.uniforms[\"u_\"+this.name],o)};var u=function(t,e,i){this.name=t,this.type=e,this.property=i};u.prototype.defines=function(){return[]},u.prototype.populatePaintArray=function(t,e,i,r,o,a){var s=this,l=t.getPaintValue(this.property,void 0,a);if(\"color\"===this.type)for(var u=n(l),c=r;c<o;c++){var h=e.get(c);h[\"a_\"+s.name+\"0\"]=u[0],h[\"a_\"+s.name+\"1\"]=u[1]}else{for(var p=r;p<o;p++)e.get(p)[\"a_\"+s.name]=l;var d=i[this.property];d.max=Math.max(d.max,l)}},u.prototype.setUniforms=function(t,e){t.uniform1f(e.uniforms[\"a_\"+this.name+\"_t\"],0)};var c=function(t,e,i,n,r){this.name=t,this.type=e,this.property=i,this.useIntegerZoom=n,this.zoom=r};c.prototype.defines=function(){return[]},c.prototype.populatePaintArray=function(t,e,i,r,o,a){var s=this,l=t.getPaintValue(this.property,{zoom:this.zoom},a),u=t.getPaintValue(this.property,{zoom:this.zoom+1},a);if(\"color\"===this.type)for(var c=n(l),h=n(u),p=r;p<o;p++){var d=e.get(p);d[\"a_\"+s.name+\"0\"]=c[0],d[\"a_\"+s.name+\"1\"]=c[1],d[\"a_\"+s.name+\"2\"]=h[0],d[\"a_\"+s.name+\"3\"]=h[1]}else{for(var f=r;f<o;f++){var m=e.get(f);m[\"a_\"+s.name+\"0\"]=l,m[\"a_\"+s.name+\"1\"]=u}var _=i[this.property];_.max=Math.max(_.max,l,u)}},c.prototype.setUniforms=function(t,e,i,n){var r=n.zoom,a=o(this.useIntegerZoom?Math.floor(r):r,1,this.zoom,this.zoom+1);t.uniform1f(e.uniforms[\"a_\"+this.name+\"_t\"],a)};var h=function(){this.binders={},this.cacheKey=\"\"};h.createDynamic=function(t,e,i){for(var n=new h,o=[],a=0,s=t.paintAttributes||[];a<s.length;a+=1){var p=s[a],d=p.property,f=p.useIntegerZoom||!1,m=p.name||d.replace(e.type+\"-\",\"\").replace(/-/g,\"_\"),_=e._paintSpecifications[d].type;e.isPaintValueFeatureConstant(d)?(n.binders[m]=new l(m,_,d,f),n.cacheKey+=\"/u_\"+m):e.isPaintValueZoomConstant(d)?(n.binders[m]=new u(m,_,d),n.cacheKey+=\"/a_\"+m,o.push({name:\"a_\"+m,type:\"Float32\",components:\"color\"===_?2:1})):(n.binders[m]=new c(m,_,d,f,i),n.cacheKey+=\"/z_\"+m,o.push({name:\"a_\"+m,type:\"Float32\",components:\"color\"===_?4:2}))}return n.PaintVertexArray=r(o),n.interface=t,n.layer=e,n},h.createBasicFill=function(){var t=new h;return t.binders.color=new l(\"color\",\"color\",\"fill-color\",!1),t.cacheKey+=\"/u_color\",t.binders.opacity=new l(\"opacity\",\"number\",\"fill-opacity\",!1),t.cacheKey+=\"/u_opacity\",t},h.prototype.createPaintPropertyStatistics=function(){var t=this,e={};for(var i in t.binders)e[t.binders[i].property]={max:-1/0};return e},h.prototype.populatePaintArray=function(t,e){var i=this,n=this.paintVertexArray;if(0!==n.bytesPerElement){var r=n.length;n.resize(t);for(var o in i.binders)i.binders[o].populatePaintArray(i.layer,n,i.paintPropertyStatistics,r,t,e)}},h.prototype.defines=function(){var t=this,e=[];for(var i in t.binders)e.push.apply(e,t.binders[i].defines());return e},h.prototype.setUniforms=function(t,e,i,n){var r=this;for(var o in r.binders)r.binders[o].setUniforms(t,e,i,n)},h.prototype.serialize=function(t){return 0===this.paintVertexArray.length?null:{array:this.paintVertexArray.serialize(t),type:this.paintVertexArray.constructor.serialize(),statistics:this.paintPropertyStatistics}},h.deserialize=function(t,e,i,n){var o=h.createDynamic(t,e,i);return n&&(o.PaintVertexArray=r(n.type.members),o.paintVertexArray=new o.PaintVertexArray(n.array),o.paintPropertyStatistics=n.statistics),o},h.prototype.upload=function(t){this.paintVertexArray&&(this.paintVertexBuffer=new s(t,this.paintVertexArray))},h.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var p=function(t,e,i,n){var r=this;if(this.programConfigurations={},n)for(var o=0,a=e;o<a.length;o+=1){var s=a[o];r.programConfigurations[s.id]=h.deserialize(t,s,i,n[s.id])}else for(var l=0,u=e;l<u.length;l+=1){var c=u[l],p=h.createDynamic(t,c,i);p.paintVertexArray=new p.PaintVertexArray,p.paintPropertyStatistics=p.createPaintPropertyStatistics(),r.programConfigurations[c.id]=p}};p.prototype.populatePaintArrays=function(t,e){var i=this;for(var n in i.programConfigurations)i.programConfigurations[n].populatePaintArray(t,e)},p.prototype.serialize=function(t){var e=this,i={};for(var n in e.programConfigurations){var r=e.programConfigurations[n].serialize(t);r&&(i[n]=r)}return i},p.prototype.get=function(t){return this.programConfigurations[t]},p.prototype.upload=function(t){var e=this;for(var i in e.programConfigurations)e.programConfigurations[i].upload(t)},p.prototype.destroy=function(){var t=this;for(var e in t.programConfigurations)t.programConfigurations[e].destroy()},e.exports={ProgramConfiguration:h,ProgramConfigurationSet:p}}),{\"../gl/vertex_buffer\":62,\"../shaders/encode_attribute\":85,\"../style-spec/function\":112,\"./vertex_array_type\":56}],54:[(function(t,e,i){\"use strict\";var n=t(\"../util/struct_array\"),r=n({members:[{name:\"a_pos\",type:\"Int16\",components:2},{name:\"a_texture_pos\",type:\"Int16\",components:2}]});e.exports=r}),{\"../util/struct_array\":220}],55:[(function(t,e,i){\"use strict\";var n=t(\"../util/util\"),r=n.warnOnce,o=Math.pow(2,16)-1,a=function(t){void 0===t&&(t=[]),this.segments=t};a.prototype.prepareSegment=function(t,i,n){var a=this.segments[this.segments.length-1];return t>o&&r(\"Max vertices per segment is \"+o+\": bucket requested \"+t),(!a||a.vertexLength+t>e.exports.MAX_VERTEX_ARRAY_LENGTH)&&(a={vertexOffset:i.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},this.segments.push(a)),a},a.prototype.get=function(){return this.segments},a.prototype.destroy=function(){for(var t=this,e=0,i=t.segments;e<i.length;e+=1){var n=i[e];for(var r in n.vaos)n.vaos[r].destroy()}},e.exports={SegmentVector:a,MAX_VERTEX_ARRAY_LENGTH:o}}),{\"../util/util\":223}],56:[(function(t,e,i){\"use strict\";function n(t){return r({members:t,alignment:4})}var r=t(\"../util/struct_array\");e.exports=n}),{\"../util/struct_array\":220}],57:[(function(t,e,i){\"use strict\";var n=function(t,e,i){this.column=t,this.row=e,this.zoom=i};n.prototype.clone=function(){return new n(this.column,this.row,this.zoom)},n.prototype.zoomTo=function(t){return this.clone()._zoomTo(t)},n.prototype.sub=function(t){return this.clone()._sub(t)},n.prototype._zoomTo=function(t){var e=Math.pow(2,t-this.zoom);return this.column*=e,this.row*=e,this.zoom=t,this},n.prototype._sub=function(t){return t=t.zoomTo(this.zoom),this.column-=t.column,this.row-=t.row,this},e.exports=n}),{}],58:[(function(t,e,i){\"use strict\";var n=t(\"../util/util\").wrap,r=function(t,e){if(isNaN(t)||isNaN(e))throw new Error(\"Invalid LngLat object: (\"+t+\", \"+e+\")\");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error(\"Invalid LngLat latitude value: must be between -90 and 90\")};r.prototype.wrap=function(){return new r(n(this.lng,-180,180),this.lat)},r.prototype.toArray=function(){return[this.lng,this.lat]},r.prototype.toString=function(){return\"LngLat(\"+this.lng+\", \"+this.lat+\")\"},r.prototype.toBounds=function(e){var i=360*e/40075017,n=i/Math.cos(Math.PI/180*this.lat);return new(t(\"./lng_lat_bounds\"))(new r(this.lng-n,this.lat-i),new r(this.lng+n,this.lat+i))},r.convert=function(t){if(t instanceof r)return t;if(Array.isArray(t)&&2===t.length)return new r(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&\"object\"==typeof t&&null!==t)return new r(Number(t.lng),Number(t.lat));throw new Error(\"`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]\")},e.exports=r}),{\"../util/util\":223,\"./lng_lat_bounds\":59}],59:[(function(t,e,i){\"use strict\";var n=t(\"./lng_lat\"),r=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};r.prototype.setNorthEast=function(t){return this._ne=t instanceof n?new n(t.lng,t.lat):n.convert(t),this},r.prototype.setSouthWest=function(t){return this._sw=t instanceof n?new n(t.lng,t.lat):n.convert(t),this},r.prototype.extend=function(t){var e,i,o=this._sw,a=this._ne;if(t instanceof n)e=t,i=t;else{if(!(t instanceof r))return Array.isArray(t)?t.every(Array.isArray)?this.extend(r.convert(t)):this.extend(n.convert(t)):this;if(e=t._sw,i=t._ne,!e||!i)return this}return o||a?(o.lng=Math.min(e.lng,o.lng),o.lat=Math.min(e.lat,o.lat),a.lng=Math.max(i.lng,a.lng),a.lat=Math.max(i.lat,a.lat)):(this._sw=new n(e.lng,e.lat),this._ne=new n(i.lng,i.lat)),this},r.prototype.getCenter=function(){return new n((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},r.prototype.getSouthWest=function(){return this._sw},r.prototype.getNorthEast=function(){return this._ne},r.prototype.getNorthWest=function(){return new n(this.getWest(),this.getNorth())},r.prototype.getSouthEast=function(){return new n(this.getEast(),this.getSouth())},r.prototype.getWest=function(){return this._sw.lng},r.prototype.getSouth=function(){return this._sw.lat},r.prototype.getEast=function(){return this._ne.lng},r.prototype.getNorth=function(){return this._ne.lat},r.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},r.prototype.toString=function(){return\"LngLatBounds(\"+this._sw.toString()+\", \"+this._ne.toString()+\")\"},r.convert=function(t){return!t||t instanceof r?t:new r(t)},e.exports=r}),{\"./lng_lat\":58}],60:[(function(t,e,i){\"use strict\";var n=t(\"./lng_lat\"),r=t(\"@mapbox/point-geometry\"),o=t(\"./coordinate\"),a=t(\"../util/util\"),s=t(\"../style-spec/util/interpolate\"),l=t(\"../source/tile_coord\"),u=t(\"../data/extent\"),c=t(\"@mapbox/gl-matrix\"),h=c.vec4,p=c.mat4,d=c.mat2,f=function(t,e,i){this.tileSize=512,this._renderWorldCopies=void 0===i||i,this._minZoom=t||0,this._maxZoom=e||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new n(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0},m={minZoom:{},maxZoom:{},renderWorldCopies:{},worldSize:{},centerPoint:{},size:{},bearing:{},pitch:{},fov:{},zoom:{},center:{},unmodified:{},x:{},y:{},point:{}};m.minZoom.get=function(){return this._minZoom},m.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},m.maxZoom.get=function(){return this._maxZoom},m.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},m.renderWorldCopies.get=function(){return this._renderWorldCopies},m.worldSize.get=function(){return this.tileSize*this.scale},m.centerPoint.get=function(){return this.size._div(2)},m.size.get=function(){return new r(this.width,this.height)},m.bearing.get=function(){return-this.angle/Math.PI*180},m.bearing.set=function(t){var e=-a.wrap(t,-180,180)*Math.PI/180;this.angle!==e&&(this._unmodified=!1,this.angle=e,this._calcMatrices(),this.rotationMatrix=d.create(),d.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},m.pitch.get=function(){return this._pitch/Math.PI*180},m.pitch.set=function(t){var e=a.clamp(t,0,60)/180*Math.PI;this._pitch!==e&&(this._unmodified=!1,this._pitch=e,this._calcMatrices())},m.fov.get=function(){return this._fov/Math.PI*180},m.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},m.zoom.get=function(){return this._zoom},m.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},m.center.get=function(){return this._center},m.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},f.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},f.prototype.getVisibleWrappedCoordinates=function(t){for(var e=this.pointCoordinate(new r(0,0),0),i=this.pointCoordinate(new r(this.width,0),0),n=Math.floor(e.column),o=Math.floor(i.column),a=[t],s=n;s<=o;s++)0!==s&&a.push(new l(t.z,t.x,t.y,s));return a},f.prototype.coveringTiles=function(t){var e=this.coveringZoomLevel(t),i=e;if(void 0!==t.minzoom&&e<t.minzoom)return[];void 0!==t.maxzoom&&e>t.maxzoom&&(e=t.maxzoom);var n=this.pointCoordinate(this.centerPoint,e),o=new r(n.column-.5,n.row-.5),a=[this.pointCoordinate(new r(0,0),e),this.pointCoordinate(new r(this.width,0),e),this.pointCoordinate(new r(this.width,this.height),e),this.pointCoordinate(new r(0,this.height),e)];return l.cover(e,a,t.reparseOverscaled?i:e,this._renderWorldCopies).sort((function(t,e){return o.dist(t)-o.dist(e)}))},f.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},m.unmodified.get=function(){return this._unmodified},f.prototype.zoomScale=function(t){return Math.pow(2,t)},f.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},f.prototype.project=function(t){return new r(this.lngX(t.lng),this.latY(t.lat))},f.prototype.unproject=function(t){return new n(this.xLng(t.x),this.yLat(t.y))},m.x.get=function(){return this.lngX(this.center.lng)},m.y.get=function(){return this.latY(this.center.lat)},m.point.get=function(){return new r(this.x,this.y)},f.prototype.lngX=function(t){return(180+t)*this.worldSize/360},f.prototype.latY=function(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))*this.worldSize/360},f.prototype.xLng=function(t){return 360*t/this.worldSize-180},f.prototype.yLat=function(t){var e=180-360*t/this.worldSize;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90},f.prototype.setLocationAtPoint=function(t,e){var i=this.pointCoordinate(e)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(t)._sub(i)),this._renderWorldCopies&&(this.center=this.center.wrap())},f.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},f.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},f.prototype.locationCoordinate=function(t){return new o(this.lngX(t.lng)/this.tileSize,this.latY(t.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},f.prototype.coordinateLocation=function(t){var e=t.zoomTo(this.zoom);return new n(this.xLng(e.column*this.tileSize),this.yLat(e.row*this.tileSize))},f.prototype.pointCoordinate=function(t,e){void 0===e&&(e=this.tileZoom);var i=[t.x,t.y,0,1],n=[t.x,t.y,1,1];h.transformMat4(i,i,this.pixelMatrixInverse),h.transformMat4(n,n,this.pixelMatrixInverse);var r=i[3],a=n[3],l=i[0]/r,u=n[0]/a,c=i[1]/r,p=n[1]/a,d=i[2]/r,f=n[2]/a,m=d===f?0:(0-d)/(f-d);return new o(s(l,u,m)/this.tileSize,s(c,p,m)/this.tileSize,this.zoom)._zoomTo(e)},f.prototype.coordinatePoint=function(t){var e=t.zoomTo(this.zoom),i=[e.column*this.tileSize,e.row*this.tileSize,0,1];return h.transformMat4(i,i,this.pixelMatrix),new r(i[0]/i[3],i[1]/i[3])},f.prototype.calculatePosMatrix=function(t,e){var i=t.toCoordinate(e),n=this.worldSize/this.zoomScale(i.zoom),r=p.identity(new Float64Array(16));return p.translate(r,r,[i.column*n,i.row*n,0]),p.scale(r,r,[n/u,n/u,1]),p.multiply(r,this.projMatrix,r),new Float32Array(r)},f.prototype.cameraToTileDistance=function(t){var e=this.calculatePosMatrix(t.coord,t.sourceMaxZoom),i=[t.tileSize/2,t.tileSize/2,0,1];return h.transformMat4(i,i,e),i[3]},f.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,e,i,n,o=-90,a=90,s=-180,l=180,u=this.size,c=this._unmodified;if(this.latRange){var h=this.latRange;o=this.latY(h[1]),a=this.latY(h[0]),t=a-o<u.y?u.y/(a-o):0}if(this.lngRange){var p=this.lngRange;s=this.lngX(p[0]),l=this.lngX(p[1]),e=l-s<u.x?u.x/(l-s):0}var d=Math.max(e||0,t||0);if(d)return this.center=this.unproject(new r(e?(l+s)/2:this.x,t?(a+o)/2:this.y)),this.zoom+=this.scaleZoom(d),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var f=this.y,m=u.y/2;f-m<o&&(n=o+m),f+m>a&&(n=a-m)}if(this.lngRange){var _=this.x,y=u.x/2;_-y<s&&(i=s+y),_+y>l&&(i=l-y)}void 0===i&&void 0===n||(this.center=this.unproject(new r(void 0!==i?i:this.x,void 0!==n?n:this.y))),this._unmodified=c,this._constraining=!1}},f.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var t=this._fov/2,e=Math.PI/2+this._pitch,i=Math.sin(t)*this.cameraToCenterDistance/Math.sin(Math.PI-e-t),n=Math.cos(Math.PI/2-this._pitch)*i+this.cameraToCenterDistance,r=1.01*n,o=new Float64Array(16);p.perspective(o,this._fov,this.width/this.height,1,r),p.scale(o,o,[1,-1,1]),p.translate(o,o,[0,0,-this.cameraToCenterDistance]),p.rotateX(o,o,this._pitch),p.rotateZ(o,o,this.angle),p.translate(o,o,[-this.x,-this.y,0]);var a=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));if(p.scale(o,o,[1,1,a,1]),this.projMatrix=o,o=p.create(),p.scale(o,o,[this.width/2,-this.height/2,1]),p.translate(o,o,[1,-1,0]),this.pixelMatrix=p.multiply(new Float64Array(16),o,this.projMatrix),!(o=p.invert(new Float64Array(16),this.pixelMatrix)))throw new Error(\"failed to invert matrix\");this.pixelMatrixInverse=o}},Object.defineProperties(f.prototype,m),e.exports=f}),{\"../data/extent\":48,\"../source/tile_coord\":101,\"../style-spec/util/interpolate\":127,\"../util/util\":223,\"./coordinate\":57,\"./lng_lat\":58,\"@mapbox/gl-matrix\":1,\"@mapbox/point-geometry\":2}],61:[(function(t,e,i){\"use strict\";var n=function(t,e){this.gl=t,this.buffer=t.createBuffer(),void 0===t.extVertexArrayObject&&(t.extVertexArrayObject=t.getExtension(\"OES_vertex_array_object\")),t.extVertexArrayObject&&t.extVertexArrayObject.bindVertexArrayOES(null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,t.STATIC_DRAW),delete e.arrayBuffer};n.prototype.bind=function(){this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.buffer)},n.prototype.destroy=function(){this.buffer&&(this.gl.deleteBuffer(this.buffer),delete this.buffer)},e.exports=n}),{}],62:[(function(t,e,i){\"use strict\";var n={Int8:\"BYTE\",Uint8:\"UNSIGNED_BYTE\",Int16:\"SHORT\",Uint16:\"UNSIGNED_SHORT\",Int32:\"INT\",Uint32:\"UNSIGNED_INT\",Float32:\"FLOAT\"},r=function(t,e,i){this.length=e.length,this.attributes=e.members,this.itemSize=e.bytesPerElement,this.dynamicDraw=i,this.gl=t,this.buffer=t.createBuffer(),this.gl.bindBuffer(t.ARRAY_BUFFER,this.buffer),this.gl.bufferData(t.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?t.DYNAMIC_DRAW:t.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};r.prototype.bind=function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer)},r.prototype.updateData=function(t){this.bind(),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,t.arrayBuffer)},r.prototype.enableAttributes=function(t,e){for(var i=this,n=0;n<this.attributes.length;n++){var r=i.attributes[n],o=e.attributes[r.name];void 0!==o&&t.enableVertexAttribArray(o)}},r.prototype.setVertexAttribPointers=function(t,e,i){for(var r=this,o=0;o<this.attributes.length;o++){var a=r.attributes[o],s=e.attributes[a.name];void 0!==s&&t.vertexAttribPointer(s,a.components,t[n[a.type]],!1,r.itemSize,a.offset+r.itemSize*(i||0))}},r.prototype.destroy=function(){this.buffer&&(this.gl.deleteBuffer(this.buffer),delete this.buffer)},e.exports=r}),{}],63:[(function(t,e,i){\"use strict\";var n=t(\"mapbox-gl-supported\"),r=t(\"./util/browser\"),o=t(\"../package.json\").version,a=t(\"./ui/map\"),s=t(\"./ui/control/navigation_control\"),l=t(\"./ui/control/geolocate_control\"),u=t(\"./ui/control/attribution_control\"),c=t(\"./ui/control/scale_control\"),h=t(\"./ui/control/fullscreen_control\"),p=t(\"./ui/popup\"),d=t(\"./ui/marker\"),f=t(\"./style/style\"),m=t(\"./geo/lng_lat\"),_=t(\"./geo/lng_lat_bounds\"),y=t(\"@mapbox/point-geometry\"),g=t(\"./util/evented\"),v=t(\"./util/config\"),x=t(\"./source/rtl_text_plugin\");e.exports={version:o,supported:n,workerCount:Math.max(Math.floor(r.hardwareConcurrency/2),1),setRTLTextPlugin:x.setRTLTextPlugin,Map:a,NavigationControl:s,GeolocateControl:l,AttributionControl:u,ScaleControl:c,FullscreenControl:h,Popup:p,Marker:d,Style:f,LngLat:m,LngLatBounds:_,Point:y,Evented:g,config:v,get accessToken(){return v.ACCESS_TOKEN},set accessToken(t){v.ACCESS_TOKEN=t}}}),{\"../package.json\":41,\"./geo/lng_lat\":58,\"./geo/lng_lat_bounds\":59,\"./source/rtl_text_plugin\":96,\"./style/style\":156,\"./ui/control/attribution_control\":182,\"./ui/control/fullscreen_control\":183,\"./ui/control/geolocate_control\":184,\"./ui/control/navigation_control\":186,\"./ui/control/scale_control\":187,\"./ui/map\":197,\"./ui/marker\":198,\"./ui/popup\":199,\"./util/browser\":202,\"./util/config\":206,\"./util/evented\":210,\"@mapbox/point-geometry\":2,\"mapbox-gl-supported\":28}],64:[(function(t,e,i){\"use strict\";function n(t,e,i){var n=t.gl,o=t.transform,a=o.tileSize,s=i.paint[\"background-color\"],l=i.paint[\"background-pattern\"],u=i.paint[\"background-opacity\"],c=l||1!==s[3]||1!==u?\"translucent\":\"opaque\";if(t.renderPass===c){n.disable(n.STENCIL_TEST),t.setDepthSublayer(0);var h;if(l){if(r.isPatternMissing(l,t))return;h=t.useProgram(\"fillPattern\",t.basicFillProgramConfiguration),r.prepare(l,t,h),t.tileExtentPatternVAO.bind(n,h,t.tileExtentBuffer)}else h=t.useProgram(\"fill\",t.basicFillProgramConfiguration),n.uniform4fv(h.uniforms.u_color,s),t.tileExtentVAO.bind(n,h,t.tileExtentBuffer);n.uniform1f(h.uniforms.u_opacity,u);for(var p=o.coveringTiles({tileSize:a}),d=0,f=p;d<f.length;d+=1){var m=f[d];l&&r.setTile({coord:m,tileSize:a},t,h),n.uniformMatrix4fv(h.uniforms.u_matrix,!1,t.transform.calculatePosMatrix(m)),n.drawArrays(n.TRIANGLE_STRIP,0,t.tileExtentBuffer.length)}}}var r=t(\"./pattern\");e.exports=n}),{\"./pattern\":80}],65:[(function(t,e,i){\"use strict\";function n(t,e,i,n){if(\"translucent\"===t.renderPass){var a=t.gl;t.setDepthSublayer(0),t.depthMask(!1),a.disable(a.STENCIL_TEST);for(var s=0;s<n.length;s++){var l=n[s],u=e.getTile(l),c=u.getBucket(i);if(c){var h=c.programConfigurations.get(i.id),p=t.useProgram(\"circle\",h);if(h.setUniforms(a,p,i,{zoom:t.transform.zoom}),a.uniform1f(p.uniforms.u_camera_to_center_distance,t.transform.cameraToCenterDistance),a.uniform1i(p.uniforms.u_scale_with_map,\"map\"===i.paint[\"circle-pitch-scale\"]?1:0),\"map\"===i.paint[\"circle-pitch-alignment\"]){a.uniform1i(p.uniforms.u_pitch_with_map,1);var d=o(u,1,t.transform.zoom);a.uniform2f(p.uniforms.u_extrude_scale,d,d)}else a.uniform1i(p.uniforms.u_pitch_with_map,0),a.uniform2fv(p.uniforms.u_extrude_scale,t.transform.pixelsToGLUnits);a.uniform1f(p.uniforms.u_devicepixelratio,r.devicePixelRatio),a.uniformMatrix4fv(p.uniforms.u_matrix,!1,t.translatePosMatrix(l.posMatrix,u,i.paint[\"circle-translate\"],i.paint[\"circle-translate-anchor\"])),p.draw(a,a.TRIANGLES,i.id,c.layoutVertexBuffer,c.indexBuffer,c.segments,h)}}}}var r=t(\"../util/browser\"),o=t(\"../source/pixels_to_tile_units\");e.exports=n}),{\"../source/pixels_to_tile_units\":93,\"../util/browser\":202}],66:[(function(t,e,i){\"use strict\";function n(t,e,i,n){var r=t.gl;r.enable(r.STENCIL_TEST);var o=t.useProgram(\"collisionBox\");r.activeTexture(r.TEXTURE1),t.frameHistory.bind(r),r.uniform1i(o.uniforms.u_fadetexture,1);for(var a=0;a<n.length;a++){var s=n[a],l=e.getTile(s),u=l.getBucket(i);if(u){r.uniformMatrix4fv(o.uniforms.u_matrix,!1,s.posMatrix),t.enableTileClippingMask(s),t.lineWidth(1),r.uniform1f(o.uniforms.u_scale,Math.pow(2,t.transform.zoom-l.coord.z)),r.uniform1f(o.uniforms.u_zoom,10*t.transform.zoom);var c=Math.max(0,Math.min(25,l.coord.z+Math.log(l.collisionTile.maxScale)/Math.LN2));r.uniform1f(o.uniforms.u_maxzoom,10*c),r.uniform1f(o.uniforms.u_collision_y_stretch,l.collisionTile.yStretch),r.uniform1f(o.uniforms.u_pitch,t.transform.pitch/360*2*Math.PI),r.uniform1f(o.uniforms.u_camera_to_center_distance,t.transform.cameraToCenterDistance),o.draw(r,r.LINES,i.id,u.collisionBox.layoutVertexBuffer,u.collisionBox.indexBuffer,u.collisionBox.segments)}}}e.exports=n}),{}],67:[(function(t,e,i){\"use strict\";function n(t,e,i){for(var n=0;n<i.length;n++)r(t,e,i[n])}function r(t,e,i){var n=t.gl;n.disable(n.STENCIL_TEST),t.lineWidth(1*a.devicePixelRatio);var r=i.posMatrix,p=t.useProgram(\"debug\");n.uniformMatrix4fv(p.uniforms.u_matrix,!1,r),n.uniform4f(p.uniforms.u_color,1,0,0,1),t.debugVAO.bind(n,p,t.debugBuffer),n.drawArrays(n.LINE_STRIP,0,t.debugBuffer.length);for(var d=o(i.toString(),50,200,5),f=new h,m=0;m<d.length;m+=2)f.emplaceBack(d[m],d[m+1]);var _=new u(n,f);(new c).bind(n,p,_),n.uniform4f(p.uniforms.u_color,1,1,1,1);for(var y=e.getTile(i).tileSize,g=l/(Math.pow(2,t.transform.zoom-i.z)*y),v=[[-1,-1],[-1,1],[1,-1],[1,1]],x=0;x<v.length;x++){var b=v[x];n.uniformMatrix4fv(p.uniforms.u_matrix,!1,s.translate([],r,[g*b[0],g*b[1],0])),n.drawArrays(n.LINES,0,_.length)}n.uniform4f(p.uniforms.u_color,0,0,0,1),n.uniformMatrix4fv(p.uniforms.u_matrix,!1,r),n.drawArrays(n.LINES,0,_.length)}function o(t,e,i,n){n=n||1;var r,o,a,s,l,u,c,h,d=[];for(r=0,o=t.length;r<o;r++)if(l=p[t[r]]){for(h=null,a=0,s=l[1].length;a<s;a+=2)-1===l[1][a]&&-1===l[1][a+1]?h=null:(u=e+l[1][a]*n,c=i-l[1][a+1]*n,h&&d.push(h.x,h.y,u,c),h={x:u,y:c});e+=l[0]*n}return d}var a=t(\"../util/browser\"),s=t(\"@mapbox/gl-matrix\").mat4,l=t(\"../data/extent\"),u=t(\"../gl/vertex_buffer\"),c=t(\"./vertex_array_object\"),h=t(\"../data/pos_array\");e.exports=n;var p={\" \":[16,[]],\"!\":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'\"':[16,[4,21,4,14,-1,-1,12,21,12,14]],\"#\":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],\"%\":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],\"&\":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],\"'\":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],\"(\":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],\")\":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],\"*\":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],\"+\":[26,[13,18,13,0,-1,-1,4,9,22,9]],\",\":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],\"-\":[26,[4,9,22,9]],\".\":[10,[5,2,4,1,5,0,6,1,5,2]],\"/\":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],\":\":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],\";\":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],\"<\":[24,[20,18,4,9,20,0]],\"=\":[26,[4,12,22,12,-1,-1,4,6,22,6]],\">\":[24,[4,18,20,9,4,0]],\"?\":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],\"@\":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],\"[\":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],\"\\\\\":[14,[0,21,14,-3]],\"]\":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],\"^\":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],\"`\":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],\"{\":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],\"|\":[8,[4,25,4,-7]],\"}\":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],\"~\":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]}}),{\"../data/extent\":48,\"../data/pos_array\":52,\"../gl/vertex_buffer\":62,\"../util/browser\":202,\"./vertex_array_object\":84,\"@mapbox/gl-matrix\":1}],68:[(function(t,e,i){\"use strict\";function n(t,e,i,n){var s=t.gl;s.enable(s.STENCIL_TEST);var l=!i.paint[\"fill-pattern\"]&&i.isPaintValueFeatureConstant(\"fill-color\")&&i.isPaintValueFeatureConstant(\"fill-opacity\")&&1===i.paint[\"fill-color\"][3]&&1===i.paint[\"fill-opacity\"]?\"opaque\":\"translucent\";t.renderPass===l&&(t.setDepthSublayer(1),t.depthMask(\"opaque\"===t.renderPass),r(t,e,i,n,o)),\"translucent\"===t.renderPass&&i.paint[\"fill-antialias\"]&&(t.lineWidth(2),t.depthMask(!1),t.setDepthSublayer(i.getPaintProperty(\"fill-outline-color\")?2:0),r(t,e,i,n,a))}function r(t,e,i,n,r){if(!l.isPatternMissing(i.paint[\"fill-pattern\"],t))for(var o=!0,a=0,s=n;a<s.length;a+=1){var u=s[a],c=e.getTile(u),h=c.getBucket(i);h&&(t.enableTileClippingMask(u),r(t,e,i,c,u,h,o),o=!1)}}function o(t,e,i,n,r,o,a){var l=t.gl,u=o.programConfigurations.get(i.id);s(\"fill\",i.paint[\"fill-pattern\"],t,u,i,n,r,a).draw(l,l.TRIANGLES,i.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,u)}function a(t,e,i,n,r,o,a){var l=t.gl,u=o.programConfigurations.get(i.id),c=i.paint[\"fill-pattern\"]&&!i.getPaintProperty(\"fill-outline-color\"),h=s(\"fillOutline\",c,t,u,i,n,r,a);l.uniform2f(h.uniforms.u_world,l.drawingBufferWidth,l.drawingBufferHeight),h.draw(l,l.LINES,i.id,o.layoutVertexBuffer,o.indexBuffer2,o.segments2,u)}function s(t,e,i,n,r,o,a,s){var u,c=i.currentProgram;return e?(u=i.useProgram(t+\"Pattern\",n),(s||u!==c)&&(n.setUniforms(i.gl,u,r,{zoom:i.transform.zoom}),l.prepare(r.paint[\"fill-pattern\"],i,u)),l.setTile(o,i,u)):(u=i.useProgram(t,n),(s||u!==c)&&n.setUniforms(i.gl,u,r,{zoom:i.transform.zoom})),i.gl.uniformMatrix4fv(u.uniforms.u_matrix,!1,i.translatePosMatrix(a.posMatrix,o,r.paint[\"fill-translate\"],r.paint[\"fill-translate-anchor\"])),u}var l=t(\"./pattern\");e.exports=n}),{\"./pattern\":80}],69:[(function(t,e,i){\"use strict\";function n(t,e,i,n){if(\"3d\"===t.renderPass){var a=t.gl;a.disable(a.STENCIL_TEST),a.enable(a.DEPTH_TEST),t.clearColor(),t.depthMask(!0);for(var s=0;s<n.length;s++)o(t,e,i,n[s])}else\"translucent\"===t.renderPass&&r(t,i)}function r(t,e){var i=t.prerenderedFrames[e.id];if(i){var n=t.gl,r=t.useProgram(\"extrusionTexture\");n.disable(n.STENCIL_TEST),n.disable(n.DEPTH_TEST),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,i.texture),n.uniform1f(r.uniforms.u_opacity,e.paint[\"fill-extrusion-opacity\"]),n.uniform1i(r.uniforms.u_image,0);var o=c.create();c.ortho(o,0,t.width,t.height,0,0,1),n.uniformMatrix4fv(r.uniforms.u_matrix,!1,o),n.uniform2f(r.uniforms.u_world,n.drawingBufferWidth,n.drawingBufferHeight),i.vao.bind(n,r,i.buffer),n.drawArrays(n.TRIANGLE_STRIP,0,4),t.viewportFrames.push(i),delete t.prerenderedFrames[e.id]}}function o(t,e,i,n){var r=e.getTile(n),o=r.getBucket(i);if(o){var s=t.gl,u=i.paint[\"fill-extrusion-pattern\"],c=o.programConfigurations.get(i.id),h=t.useProgram(u?\"fillExtrusionPattern\":\"fillExtrusion\",c);if(c.setUniforms(s,h,i,{zoom:t.transform.zoom}),u){if(l.isPatternMissing(u,t))return;l.prepare(u,t,h),l.setTile(r,t,h),s.uniform1f(h.uniforms.u_height_factor,-Math.pow(2,n.z)/r.tileSize/8)}t.gl.uniformMatrix4fv(h.uniforms.u_matrix,!1,t.translatePosMatrix(n.posMatrix,r,i.paint[\"fill-extrusion-translate\"],i.paint[\"fill-extrusion-translate-anchor\"])),a(h,t),h.draw(s,s.TRIANGLES,i.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,c)}}function a(t,e){var i=e.gl,n=e.style.light,r=n.calculated.position,o=[r.x,r.y,r.z],a=u.create();\"viewport\"===n.calculated.anchor&&u.fromRotation(a,-e.transform.angle),h.transformMat3(o,o,a),i.uniform3fv(t.uniforms.u_lightpos,o),i.uniform1f(t.uniforms.u_lightintensity,n.calculated.intensity),i.uniform3fv(t.uniforms.u_lightcolor,n.calculated.color.slice(0,3))}var s=t(\"@mapbox/gl-matrix\"),l=t(\"./pattern\"),u=s.mat3,c=s.mat4,h=s.vec3;e.exports=n}),{\"./pattern\":80,\"@mapbox/gl-matrix\":1}],70:[(function(t,e,i){\"use strict\";function n(t,e,i,n,a,s,l,u,c){var h,p,d,f,m=e.gl,_=a.paint[\"line-dasharray\"],y=a.paint[\"line-pattern\"];if(u||c){var g=1/o(i,1,e.transform.tileZoom);if(_){h=e.lineAtlas.getDash(_.from,\"round\"===a.layout[\"line-cap\"]),p=e.lineAtlas.getDash(_.to,\"round\"===a.layout[\"line-cap\"]);var v=h.width*_.fromScale,x=p.width*_.toScale;m.uniform2f(t.uniforms.u_patternscale_a,g/v,-h.height/2),m.uniform2f(t.uniforms.u_patternscale_b,g/x,-p.height/2),m.uniform1f(t.uniforms.u_sdfgamma,e.lineAtlas.width/(256*Math.min(v,x)*r.devicePixelRatio)/2)}else if(y){if(d=e.imageManager.getPattern(y.from),f=e.imageManager.getPattern(y.to),!d||!f)return;m.uniform2f(t.uniforms.u_pattern_size_a,d.displaySize[0]*y.fromScale/g,f.displaySize[1]),m.uniform2f(t.uniforms.u_pattern_size_b,f.displaySize[0]*y.toScale/g,f.displaySize[1]);var b=e.imageManager.getPixelSize(),w=b.width,E=b.height;m.uniform2fv(t.uniforms.u_texsize,[w,E])}m.uniform2f(t.uniforms.u_gl_units_to_pixels,1/e.transform.pixelsToGLUnits[0],1/e.transform.pixelsToGLUnits[1])}u&&(_?(m.uniform1i(t.uniforms.u_image,0),m.activeTexture(m.TEXTURE0),e.lineAtlas.bind(m),m.uniform1f(t.uniforms.u_tex_y_a,h.y),m.uniform1f(t.uniforms.u_tex_y_b,p.y),m.uniform1f(t.uniforms.u_mix,_.t)):y&&(m.uniform1i(t.uniforms.u_image,0),m.activeTexture(m.TEXTURE0),e.imageManager.bind(m),m.uniform2fv(t.uniforms.u_pattern_tl_a,d.tl),m.uniform2fv(t.uniforms.u_pattern_br_a,d.br),m.uniform2fv(t.uniforms.u_pattern_tl_b,f.tl),m.uniform2fv(t.uniforms.u_pattern_br_b,f.br),m.uniform1f(t.uniforms.u_fade,y.t))),e.enableTileClippingMask(s);var C=e.translatePosMatrix(s.posMatrix,i,a.paint[\"line-translate\"],a.paint[\"line-translate-anchor\"]);m.uniformMatrix4fv(t.uniforms.u_matrix,!1,C),m.uniform1f(t.uniforms.u_ratio,1/o(i,1,e.transform.zoom)),t.draw(m,m.TRIANGLES,a.id,n.layoutVertexBuffer,n.indexBuffer,n.segments,l)}var r=t(\"../util/browser\"),o=t(\"../source/pixels_to_tile_units\");e.exports=function(t,e,i,r){if(\"translucent\"===t.renderPass){t.setDepthSublayer(0),t.depthMask(!1);var o=t.gl;if(o.enable(o.STENCIL_TEST),!(i.paint[\"line-width\"]<=0))for(var a,s=i.paint[\"line-dasharray\"]?\"lineSDF\":i.paint[\"line-pattern\"]?\"linePattern\":\"line\",l=!0,u=0,c=r;u<c.length;u+=1){var h=c[u],p=e.getTile(h),d=p.getBucket(i);if(d){var f=d.programConfigurations.get(i.id),m=t.currentProgram,_=t.useProgram(s,f),y=l||_!==m,g=a!==p.coord.z;y&&f.setUniforms(t.gl,_,i,{zoom:t.transform.zoom}),n(_,t,p,d,i,h,f,y,g),a=p.coord.z,l=!1}}}}}),{\"../source/pixels_to_tile_units\":93,\"../util/browser\":202}],71:[(function(t,e,i){\"use strict\";function n(t,e,i,n){if(\"translucent\"===t.renderPass){var l=t.gl,c=e.getSource(),h=t.useProgram(\"raster\");l.enable(l.DEPTH_TEST),t.depthMask(!0),l.depthFunc(l.LESS),l.disable(l.STENCIL_TEST),l.uniform1f(h.uniforms.u_brightness_low,i.paint[\"raster-brightness-min\"]),l.uniform1f(h.uniforms.u_brightness_high,i.paint[\"raster-brightness-max\"]),l.uniform1f(h.uniforms.u_saturation_factor,a(i.paint[\"raster-saturation\"])),l.uniform1f(h.uniforms.u_contrast_factor,o(i.paint[\"raster-contrast\"])),l.uniform3fv(h.uniforms.u_spin_weights,r(i.paint[\"raster-hue-rotate\"])),l.uniform1f(h.uniforms.u_buffer_scale,1),l.uniform1i(h.uniforms.u_image0,0),l.uniform1i(h.uniforms.u_image1,1);for(var p=n.length&&n[0].z,d=0,f=n;d<f.length;d+=1){var m=f[d];t.setDepthSublayer(m.z-p);var _=e.getTile(m),y=t.transform.calculatePosMatrix(m,e.getSource().maxzoom);_.registerFadeDuration(t.style.animationLoop,i.paint[\"raster-fade-duration\"]),l.uniformMatrix4fv(h.uniforms.u_matrix,!1,y);var g=e.findLoadedParent(m,0,{}),v=s(_,g,e,i,t.transform),x=void 0,b=void 0;if(l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,_.texture),l.activeTexture(l.TEXTURE1),g?(l.bindTexture(l.TEXTURE_2D,g.texture),x=Math.pow(2,g.coord.z-_.coord.z),b=[_.coord.x*x%1,_.coord.y*x%1]):l.bindTexture(l.TEXTURE_2D,_.texture),l.uniform2fv(h.uniforms.u_tl_parent,b||[0,0]),l.uniform1f(h.uniforms.u_scale_parent,x||1),l.uniform1f(h.uniforms.u_fade_t,v.mix),l.uniform1f(h.uniforms.u_opacity,v.opacity*i.paint[\"raster-opacity\"]),c instanceof u){var w=c.boundsBuffer;c.boundsVAO.bind(l,h,w),l.drawArrays(l.TRIANGLE_STRIP,0,w.length)}else{var E=t.rasterBoundsBuffer;t.rasterBoundsVAO.bind(l,h,E),l.drawArrays(l.TRIANGLE_STRIP,0,E.length)}}l.depthFunc(l.LEQUAL)}}function r(t){t*=Math.PI/180;var e=Math.sin(t),i=Math.cos(t);return[(2*i+1)/3,(-Math.sqrt(3)*e-i+1)/3,(Math.sqrt(3)*e-i+1)/3]}function o(t){return t>0?1/(1-t):1+t}function a(t){return t>0?1-1/(1.001-t):-t}function s(t,e,i,n,r){var o=n.paint[\"raster-fade-duration\"];if(o>0){var a=Date.now(),s=(a-t.timeAdded)/o,u=e?(a-e.timeAdded)/o:-1,c=i.getSource(),h=r.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),p=!e||Math.abs(e.coord.z-h)>Math.abs(t.coord.z-h),d=p&&t.refreshedUponExpiration?1:l.clamp(p?s:1-u,0,1);return t.refreshedUponExpiration&&s>=1&&(t.refreshedUponExpiration=!1),e?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}var l=t(\"../util/util\"),u=t(\"../source/image_source\");e.exports=n}),{\"../source/image_source\":91,\"../util/util\":223}],72:[(function(t,e,i){\"use strict\";function n(t,e,i,n){if(\"translucent\"===t.renderPass){var o=!(i.layout[\"text-allow-overlap\"]||i.layout[\"icon-allow-overlap\"]||i.layout[\"text-ignore-placement\"]||i.layout[\"icon-ignore-placement\"]),a=t.gl;o?a.disable(a.STENCIL_TEST):a.enable(a.STENCIL_TEST),t.setDepthSublayer(0),t.depthMask(!1),r(t,e,i,n,!1,i.paint[\"icon-translate\"],i.paint[\"icon-translate-anchor\"],i.layout[\"icon-rotation-alignment\"],i.layout[\"icon-pitch-alignment\"],i.layout[\"icon-keep-upright\"]),r(t,e,i,n,!0,i.paint[\"text-translate\"],i.paint[\"text-translate-anchor\"],i.layout[\"text-rotation-alignment\"],i.layout[\"text-pitch-alignment\"],i.layout[\"text-keep-upright\"]),e.map.showCollisionBoxes&&l(t,e,i,n)}}function r(t,e,i,n,r,s,l,h,p,f){var m=t.gl,_=t.transform,y=\"map\"===h,g=\"map\"===p,v=y&&\"line\"===i.layout[\"symbol-placement\"],x=y&&!g&&!v,b=g;b?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST);for(var w,E=0,C=n;E<C.length;E+=1){var T=C[E],S=e.getTile(T),A=S.getBucket(i);if(A){var L=r?A.text:A.icon;if(L&&L.segments.get().length){var I=L.programConfigurations.get(i.id),M=r||A.sdfIcons,z=r?A.textSizeData:A.iconSizeData;if(w||(w=t.useProgram(M?\"symbolSDF\":\"symbolIcon\",I),I.setUniforms(m,w,i,{zoom:t.transform.zoom}),o(w,t,i,r,x,g,z)),m.activeTexture(m.TEXTURE0),m.uniform1i(w.uniforms.u_texture,0),r)S.glyphAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),m.uniform2fv(w.uniforms.u_texsize,S.glyphAtlasTexture.size);else{var P=!i.isLayoutValueFeatureConstant(\"icon-size\")||!i.isLayoutValueZoomConstant(\"icon-size\")||1!==i.getLayoutValue(\"icon-size\",{zoom:_.zoom})||A.iconsNeedLinear,R=g||0!==_.pitch;S.iconAtlasTexture.bind(M||t.options.rotating||t.options.zooming||P||R?m.LINEAR:m.NEAREST,m.CLAMP_TO_EDGE),m.uniform2fv(w.uniforms.u_texsize,S.iconAtlasTexture.size)}t.enableTileClippingMask(T),m.uniformMatrix4fv(w.uniforms.u_matrix,!1,t.translatePosMatrix(T.posMatrix,S,s,l));var D=u(S,1,t.transform.zoom),k=c.getLabelPlaneMatrix(T.posMatrix,g,y,t.transform,D),O=c.getGlCoordMatrix(T.posMatrix,g,y,t.transform,D);m.uniformMatrix4fv(w.uniforms.u_gl_coord_matrix,!1,t.translatePosMatrix(O,S,s,l,!0)),v?(m.uniformMatrix4fv(w.uniforms.u_label_plane_matrix,!1,d),c.updateLineLabels(A,T.posMatrix,t,r,k,O,g,f,D,i)):m.uniformMatrix4fv(w.uniforms.u_label_plane_matrix,!1,k),m.uniform1f(w.uniforms.u_collision_y_stretch,S.collisionTile.yStretch),a(w,I,t,i,S,L,r,M,g)}}}b||m.enable(m.DEPTH_TEST)}function o(t,e,i,n,r,o,a){var s=e.gl,l=e.transform;s.uniform1i(t.uniforms.u_pitch_with_map,o?1:0),s.uniform1f(t.uniforms.u_is_text,n?1:0),s.activeTexture(s.TEXTURE1),e.frameHistory.bind(s),s.uniform1i(t.uniforms.u_fadetexture,1),s.uniform1f(t.uniforms.u_pitch,l.pitch/360*2*Math.PI),s.uniform1i(t.uniforms.u_is_size_zoom_constant,a.isZoomConstant?1:0),s.uniform1i(t.uniforms.u_is_size_feature_constant,a.isFeatureConstant?1:0),s.uniform1f(t.uniforms.u_camera_to_center_distance,l.cameraToCenterDistance);var u=h.evaluateSizeForZoom(a,l,i,n);void 0!==u.uSizeT&&s.uniform1f(t.uniforms.u_size_t,u.uSizeT),void 0!==u.uSize&&s.uniform1f(t.uniforms.u_size,u.uSize),s.uniform1f(t.uniforms.u_aspect_ratio,l.width/l.height),s.uniform1i(t.uniforms.u_rotate_symbol,r?1:0)}function a(t,e,i,n,r,o,a,l,u){var c=i.gl,h=i.transform;if(l){var p=(a?\"text\":\"icon\")+\"-halo-width\",d=!n.isPaintValueFeatureConstant(p)||n.paint[p],f=u?Math.cos(h._pitch)*h.cameraToCenterDistance:1;c.uniform1f(t.uniforms.u_gamma_scale,f),d&&(c.uniform1f(t.uniforms.u_is_halo,1),s(o,n,c,t)),c.uniform1f(t.uniforms.u_is_halo,0)}s(o,n,c,t)}function s(t,e,i,n){n.draw(i,i.TRIANGLES,e.id,t.layoutVertexBuffer,t.indexBuffer,t.segments,t.programConfigurations.get(e.id),t.dynamicLayoutVertexBuffer)}var l=t(\"./draw_collision_debug\"),u=t(\"../source/pixels_to_tile_units\"),c=t(\"../symbol/projection\"),h=t(\"../symbol/symbol_size\"),p=t(\"@mapbox/gl-matrix\").mat4,d=p.identity(new Float32Array(16));e.exports=n}),{\"../source/pixels_to_tile_units\":93,\"../symbol/projection\":175,\"../symbol/symbol_size\":178,\"./draw_collision_debug\":66,\"@mapbox/gl-matrix\":1}],73:[(function(t,e,i){\"use strict\";var n=function(){this.changeTimes=new Float64Array(256),this.changeOpacities=new Uint8Array(256),this.opacities=new Uint8ClampedArray(256),this.array=new Uint8Array(this.opacities.buffer),this.previousZoom=0,this.firstFrame=!0};n.prototype.record=function(t,e,i){var n=this;this.firstFrame&&(t=0,this.firstFrame=!1),e=Math.floor(10*e);var r;if(e<this.previousZoom)for(r=e+1;r<=this.previousZoom;r++)n.changeTimes[r]=t,n.changeOpacities[r]=n.opacities[r];else for(r=e;r>this.previousZoom;r--)n.changeTimes[r]=t,n.changeOpacities[r]=n.opacities[r];for(r=0;r<256;r++){var o=t-n.changeTimes[r],a=255*(i?o/i:1);n.opacities[r]=r<=e?n.changeOpacities[r]+a:n.changeOpacities[r]-a}this.changed=!0,this.previousZoom=e},n.prototype.isVisible=function(t){return 0!==this.opacities[Math.floor(10*t)]},n.prototype.bind=function(t){this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.changed&&(t.texSubImage2D(t.TEXTURE_2D,0,0,0,256,1,t.ALPHA,t.UNSIGNED_BYTE,this.array),this.changed=!1)):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,256,1,0,t.ALPHA,t.UNSIGNED_BYTE,this.array))},e.exports=n}),{}],74:[(function(t,e,i){\"use strict\";function n(t){var e=a.create({width:0,height:0}),i={},n=new r(0,0,{autoResize:!0});for(var o in t){var l=t[o],u=i[o]={};for(var c in l){var h=l[+c];if(h&&0!==h.bitmap.width&&0!==h.bitmap.height){var p=n.packOne(h.bitmap.width+2*s,h.bitmap.height+2*s);a.resize(e,{width:n.w,height:n.h}),a.copy(h.bitmap,e,{x:0,y:0},{x:p.x+s,y:p.y+s},h.bitmap),u[c]={rect:p,metrics:h.metrics}}}}return n.shrink(),a.resize(e,{width:n.w,height:n.h}),{image:e,positions:i}}var r=t(\"@mapbox/shelf-pack\"),o=t(\"../util/image\"),a=o.AlphaImage,s=1;e.exports={makeGlyphAtlas:n}}),{\"../util/image\":213,\"@mapbox/shelf-pack\":3}],75:[(function(t,e,i){\"use strict\";var n=t(\"../style/load_glyph_range\"),r=t(\"@mapbox/tiny-sdf\"),o=t(\"../util/is_char_in_unicode_block\"),a=t(\"../util/util\"),s=a.asyncAll,l=t(\"../util/image\"),u=l.AlphaImage,c=function(t,e){this.requestTransform=t,this.localIdeographFontFamily=e,this.entries={}};c.prototype.setURL=function(t){this.url=t},c.prototype.getGlyphs=function(t,e){var i=this,r=[];for(var o in t)for(var a=0,l=t[o];a<l.length;a+=1){var u=l[a];r.push({stack:o,id:u})}s(r,(function(t,e){var r=t.stack,o=t.id,a=i.entries[r];a||(a=i.entries[r]={glyphs:{},requests:{}});var s=a.glyphs[o];if(void 0!==s)return void e(null,{stack:r,id:o,glyph:s});if(s=i._tinySDF(a,r,o))return void e(null,{stack:r,id:o,glyph:s});var l=Math.floor(o/256);if(256*l>65535)return void e(new Error(\"glyphs > 65535 not supported\"));var u=a.requests[l];u||(u=a.requests[l]=[],n(r,l,i.url,i.requestTransform,(function(t,e){if(e)for(var i in e)a.glyphs[+i]=e[+i];for(var n=0,r=u;n<r.length;n+=1)(0,r[n])(t,e);delete a.requests[l]}))),u.push((function(t,i){t?e(t):i&&e(null,{stack:r,id:o,glyph:i[o]||null})}))}),(function(t,i){if(t)e(t);else if(i){for(var n={},r=0,o=i;r<o.length;r+=1){var a=o[r],s=a.stack,l=a.id,u=a.glyph;(n[s]||(n[s]={}))[l]=u}e(null,n)}}))},c.prototype._tinySDF=function(t,e,i){var n=this.localIdeographFontFamily;if(n&&(o[\"CJK Unified Ideographs\"](i)||o[\"Hangul Syllables\"](i))){var a=t.tinySDF;if(!a){var s=\"400\";/bold/i.test(e)?s=\"900\":/medium/i.test(e)?s=\"500\":/light/i.test(e)&&(s=\"200\"),a=t.tinySDF=new r(24,3,8,.25,n,s)}return{id:i,bitmap:u.create({width:30,height:30},a.draw(String.fromCharCode(i))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},e.exports=c}),{\"../style/load_glyph_range\":152,\"../util/image\":213,\"../util/is_char_in_unicode_block\":215,\"../util/util\":223,\"@mapbox/tiny-sdf\":4}],76:[(function(t,e,i){\"use strict\";function n(t,e){var i=e.pixelRatio,n={x:t.x+l,y:t.y+l,w:t.w-2*l,h:t.h-2*l};return{pixelRatio:i,textureRect:n,tl:[n.x,n.y],br:[n.x+n.w,n.y+n.h],displaySize:[n.w/i,n.h/i]}}function r(t){var e=s.create({width:0,height:0}),i={},r=new o(0,0,{autoResize:!0});for(var a in t){var u=t[a],c=r.packOne(u.data.width+2*l,u.data.height+2*l);s.resize(e,{width:r.w,height:r.h}),s.copy(u.data,e,{x:0,y:0},{x:c.x+l,y:c.y+l},u.data),i[a]=n(c,u)}return r.shrink(),s.resize(e,{width:r.w,height:r.h}),{image:e,positions:i}}var o=t(\"@mapbox/shelf-pack\"),a=t(\"../util/image\"),s=a.RGBAImage,l=1;e.exports={imagePosition:n,makeImageAtlas:r}}),{\"../util/image\":213,\"@mapbox/shelf-pack\":3}],77:[(function(t,e,i){\"use strict\";var n=t(\"@mapbox/shelf-pack\"),r=t(\"../util/image\"),o=r.RGBAImage,a=t(\"./image_atlas\"),s=a.imagePosition,l=t(\"./texture\"),u=function(){this.images={},this.loaded=!1,this.requestors=[],this.shelfPack=new n(64,64,{autoResize:!0}),this.patterns={},this.atlasImage=o.create({width:64,height:64}),this.dirty=!0};u.prototype.isLoaded=function(){return this.loaded},u.prototype.setLoaded=function(t){var e=this;if(this.loaded!==t&&(this.loaded=t,t)){for(var i=0,n=e.requestors;i<n.length;i+=1){var r=n[i],o=r.ids,a=r.callback;e._notify(o,a)}this.requestors=[]}},u.prototype.getImage=function(t){return this.images[t]},u.prototype.addImage=function(t,e){this.images[t]=e},u.prototype.removeImage=function(t){delete this.images[t];var e=this.patterns[t];e&&(this.shelfPack.unref(e.bin),delete this.patterns[t])},u.prototype.getImages=function(t,e){var i=this,n=!0;if(!this.isLoaded())for(var r=0,o=t;r<o.length;r+=1){var a=o[r];i.images[a]||(n=!1)}this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})},u.prototype._notify=function(t,e){for(var i=this,n={},r=0,o=t;r<o.length;r+=1){var a=o[r],s=i.images[a];s&&(n[a]=s)}e(null,n)},u.prototype.getPixelSize=function(){return{width:this.shelfPack.w,height:this.shelfPack.h}},u.prototype.getPattern=function(t){var e=this.patterns[t];if(e)return e.position;var i=this.getImage(t);if(!i)return null;var n=i.data.width+2,r=i.data.height+2,a=this.shelfPack.packOne(n,r);if(!a)return null;o.resize(this.atlasImage,this.getPixelSize());var l=i.data,u=this.atlasImage,c=a.x+1,h=a.y+1,p=l.width,d=l.height;o.copy(l,u,{x:0,y:0},{x:c,y:h},{width:p,height:d}),o.copy(l,u,{x:0,y:d-1},{x:c,y:h-1},{width:p,height:1}),o.copy(l,u,{x:0,y:0},{x:c,y:h+d},{width:p,height:1}),o.copy(l,u,{x:p-1,y:0},{x:c-1,y:h},{width:1,height:d}),o.copy(l,u,{x:0,y:0},{x:c+p,y:h},{width:1,height:d}),this.dirty=!0;var f=s(a,i);return this.patterns[t]={bin:a,position:f},f},u.prototype.bind=function(t){this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l(t,this.atlasImage,t.RGBA),this.atlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE)},e.exports=u}),{\"../util/image\":213,\"./image_atlas\":76,\"./texture\":83,\"@mapbox/shelf-pack\":3}],78:[(function(t,e,i){\"use strict\";var n=t(\"../util/util\"),r=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};r.prototype.getDash=function(t,e){var i=t.join(\",\")+String(e);return this.positions[i]||(this.positions[i]=this.addDash(t,e)),this.positions[i]},r.prototype.addDash=function(t,e){var i=this,r=e?7:0,o=2*r+1;if(this.nextRow+o>this.height)return n.warnOnce(\"LineAtlas out of space\"),null;for(var a=0,s=0;s<t.length;s++)a+=t[s];for(var l=this.width/a,u=l/2,c=t.length%2==1,h=-r;h<=r;h++)for(var p=i.nextRow+r+h,d=i.width*p,f=c?-t[t.length-1]:0,m=t[0],_=1,y=0;y<this.width;y++){for(;m<y/l;)f=m,m+=t[_],c&&_===t.length-1&&(m+=t[0]),_++;var g=Math.abs(y-f*l),v=Math.abs(y-m*l),x=Math.min(g,v),b=_%2==1,w=void 0;if(e){var E=r?h/r*(u+1):0;if(b){var C=u-Math.abs(E);w=Math.sqrt(x*x+C*C)}else w=u-Math.sqrt(x*x+E*E)}else w=(b?1:-1)*x;i.data[3+4*(d+y)]=Math.max(0,Math.min(255,w+128))}var T={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:a};return this.nextRow+=o,this.dirty=!0,T},r.prototype.bind=function(t){this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.RGBA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,this.data))},e.exports=r}),{\"../util/util\":223}],79:[(function(t,e,i){\"use strict\";var n=t(\"../util/browser\"),r=t(\"@mapbox/gl-matrix\").mat4,o=t(\"./frame_history\"),a=t(\"../source/source_cache\"),s=t(\"../data/extent\"),l=t(\"../source/pixels_to_tile_units\"),u=t(\"../util/util\"),c=t(\"../gl/vertex_buffer\"),h=t(\"./vertex_array_object\"),p=t(\"../data/raster_bounds_array\"),d=t(\"../data/pos_array\"),f=t(\"../data/program_configuration\"),m=f.ProgramConfiguration,_=t(\"../shaders\"),y=t(\"./program\"),g=t(\"./render_texture\"),v={symbol:t(\"./draw_symbol\"),circle:t(\"./draw_circle\"),line:t(\"./draw_line\"),fill:t(\"./draw_fill\"),\"fill-extrusion\":t(\"./draw_fill_extrusion\"),raster:t(\"./draw_raster\"),background:t(\"./draw_background\"),debug:t(\"./draw_debug\")},x=function(t,e){this.gl=t,this.transform=e,this._tileTextures={},this.prerenderedFrames={},this.viewportFrames=[],this.frameHistory=new o,this.setup(),this.numSublayers=a.maxUnderzooming+a.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.lineWidthRange=t.getParameter(t.ALIASED_LINE_WIDTH_RANGE),this.basicFillProgramConfiguration=m.createBasicFill(),this.emptyProgramConfiguration=new m};x.prototype.resize=function(t,e){var i=this,r=this.gl;this.width=t*n.devicePixelRatio,this.height=e*n.devicePixelRatio,r.viewport(0,0,this.width,this.height);for(var o=0,a=i.viewportFrames;o<a.length;o+=1){var s=a[o];i.gl.deleteTexture(s.texture),i.gl.deleteFramebuffer(s.fbo)}this.viewportFrames=[],this.depthRbo&&(this.gl.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},x.prototype.setup=function(){var t=this.gl;t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.enable(t.STENCIL_TEST),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),this._depthMask=!1,t.depthMask(!1);var e=new d;e.emplaceBack(0,0),e.emplaceBack(s,0),e.emplaceBack(0,s),e.emplaceBack(s,s),this.tileExtentBuffer=new c(t,e),this.tileExtentVAO=new h,this.tileExtentPatternVAO=new h;var i=new d;i.emplaceBack(0,0),i.emplaceBack(s,0),i.emplaceBack(s,s),i.emplaceBack(0,s),i.emplaceBack(0,0),this.debugBuffer=new c(t,i),this.debugVAO=new h;var n=new p;n.emplaceBack(0,0,0,0),n.emplaceBack(s,0,s,0),n.emplaceBack(0,s,0,s),n.emplaceBack(s,s,s,s),this.rasterBoundsBuffer=new c(t,n),this.rasterBoundsVAO=new h,this.extTextureFilterAnisotropic=t.getExtension(\"EXT_texture_filter_anisotropic\")||t.getExtension(\"MOZ_EXT_texture_filter_anisotropic\")||t.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))},x.prototype.clearColor=function(){var t=this.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},x.prototype.clearStencil=function(){var t=this.gl;t.clearStencil(0),t.stencilMask(255),t.clear(t.STENCIL_BUFFER_BIT)},x.prototype.clearDepth=function(){var t=this.gl;t.clearDepth(1),this.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT)},x.prototype._renderTileClippingMasks=function(t){var e=this,i=this.gl;i.colorMask(!1,!1,!1,!1),this.depthMask(!1),i.disable(i.DEPTH_TEST),i.enable(i.STENCIL_TEST),i.stencilMask(255),i.stencilOp(i.KEEP,i.KEEP,i.REPLACE);var n=1;this._tileClippingMaskIDs={};for(var r=0,o=t;r<o.length;r+=1){var a=o[r],s=e._tileClippingMaskIDs[a.id]=n++;i.stencilFunc(i.ALWAYS,s,255);var l=e.useProgram(\"fill\",e.basicFillProgramConfiguration);i.uniformMatrix4fv(l.uniforms.u_matrix,!1,a.posMatrix),e.tileExtentVAO.bind(i,l,e.tileExtentBuffer),i.drawArrays(i.TRIANGLE_STRIP,0,e.tileExtentBuffer.length)}i.stencilMask(0),i.colorMask(!0,!0,!0,!0),this.depthMask(!0),i.enable(i.DEPTH_TEST)},x.prototype.enableTileClippingMask=function(t){var e=this.gl;e.stencilFunc(e.EQUAL,this._tileClippingMaskIDs[t.id],255)},x.prototype.render=function(t,e){var i=this;this.style=t,this.options=e,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.frameHistory.record(Date.now(),this.transform.zoom,t.getTransition().duration);for(var n in i.style.sourceCaches){var r=i.style.sourceCaches[n];r.used&&r.prepare(i.gl)}var o=this.style._order;this.renderPass=\"3d\";for(var a,s=!0,l=[],u=0;u<o.length;u++){var c=i.style._layers[o[u]];if(c.has3DPass()&&!c.isHidden(i.transform.zoom)&&(c.source!==(a&&a.id)&&(a=i.style.sourceCaches[c.source],l=[],a&&(i.clearStencil(),l=a.getVisibleCoordinates()),l.reverse()),l.length)){i._setup3DRenderbuffer();var h=i.viewportFrames.pop()||new g(i);h.bindWithDepth(i.depthRbo),s&&(i.clearDepth(),s=!1),i.renderLayer(i,a,c,l),h.unbind(),i.prerenderedFrames[c.id]=h}}this.clearColor(),this.clearDepth(),this.showOverdrawInspector(e.showOverdrawInspector),this.depthRange=(t._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass=\"opaque\";var p,d=[];for(this.currentLayer=o.length-1,this._showOverdrawInspector||this.gl.disable(this.gl.BLEND),this.currentLayer;this.currentLayer>=0;this.currentLayer--){var f=i.style._layers[o[i.currentLayer]];f.source!==(p&&p.id)&&(p=i.style.sourceCaches[f.source],d=[],p&&(i.clearStencil(),d=p.getVisibleCoordinates(),p.getSource().isTileClipped&&i._renderTileClippingMasks(d))),i.renderLayer(i,p,f,d)}this.renderPass=\"translucent\";var m,_=[];for(this.gl.enable(this.gl.BLEND),this.currentLayer=0,this.currentLayer;this.currentLayer<o.length;this.currentLayer++){var y=i.style._layers[o[i.currentLayer]];y.source!==(m&&m.id)&&(m=i.style.sourceCaches[y.source],_=[],m&&(i.clearStencil(),_=m.getVisibleCoordinates(),m.getSource().isTileClipped&&i._renderTileClippingMasks(_)),_.reverse()),i.renderLayer(i,m,y,_)}if(this.options.showTileBoundaries){var x=this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]];x&&v.debug(this,x,x.getVisibleCoordinates())}},x.prototype._setup3DRenderbuffer=function(){if(!this.depthRbo){var t=this.gl;this.depthRbo=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.depthRbo),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,this.width,this.height),t.bindRenderbuffer(t.RENDERBUFFER,null)}this.depthRboAttached=!0},x.prototype.depthMask=function(t){t!==this._depthMask&&(this._depthMask=t,this.gl.depthMask(t))},x.prototype.renderLayer=function(t,e,i,n){i.isHidden(this.transform.zoom)||(\"background\"===i.type||n.length)&&(this.id=i.id,v[i.type](t,e,i,n))},x.prototype.setDepthSublayer=function(t){var e=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon,i=e-1+this.depthRange;this.gl.depthRange(i,e)},x.prototype.translatePosMatrix=function(t,e,i,n,o){if(!i[0]&&!i[1])return t;var a=o?\"map\"===n?this.transform.angle:0:\"viewport\"===n?-this.transform.angle:0;if(a){var s=Math.sin(a),u=Math.cos(a);i=[i[0]*u-i[1]*s,i[0]*s+i[1]*u]}var c=[o?i[0]:l(e,i[0],this.transform.zoom),o?i[1]:l(e,i[1],this.transform.zoom),0],h=new Float32Array(16);return r.translate(h,t,c),h},x.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size];e?e.push(t):this._tileTextures[t.size]=[t]},x.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},x.prototype.lineWidth=function(t){this.gl.lineWidth(u.clamp(t,this.lineWidthRange[0],this.lineWidthRange[1]))},x.prototype.showOverdrawInspector=function(t){if(t||this._showOverdrawInspector){this._showOverdrawInspector=t;var e=this.gl;t?(e.blendFunc(e.CONSTANT_COLOR,e.ONE),e.blendColor(1/8,1/8,1/8,0),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)):e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA)}},x.prototype._createProgramCached=function(t,e){this.cache=this.cache||{};var i=\"\"+t+(e.cacheKey||\"\")+(this._showOverdrawInspector?\"/overdraw\":\"\");return this.cache[i]||(this.cache[i]=new y(this.gl,_[t],e,this._showOverdrawInspector)),this.cache[i]},x.prototype.useProgram=function(t,e){var i=this.gl,n=this._createProgramCached(t,e||this.emptyProgramConfiguration);return this.currentProgram!==n&&(i.useProgram(n.program),this.currentProgram=n),n},e.exports=x}),{\"../data/extent\":48,\"../data/pos_array\":52,\"../data/program_configuration\":53,\"../data/raster_bounds_array\":54,\"../gl/vertex_buffer\":62,\"../shaders\":86,\"../source/pixels_to_tile_units\":93,\"../source/source_cache\":98,\"../util/browser\":202,\"../util/util\":223,\"./draw_background\":64,\"./draw_circle\":65,\"./draw_debug\":67,\"./draw_fill\":68,\"./draw_fill_extrusion\":69,\"./draw_line\":70,\"./draw_raster\":71,\"./draw_symbol\":72,\"./frame_history\":73,\"./program\":81,\"./render_texture\":82,\"./vertex_array_object\":84,\"@mapbox/gl-matrix\":1}],80:[(function(t,e,i){\"use strict\";var n=t(\"../source/pixels_to_tile_units\");i.isPatternMissing=function(t,e){if(!t)return!1;var i=e.imageManager.getPattern(t.from),n=e.imageManager.getPattern(t.to);return!i||!n},i.prepare=function(t,e,i){var n=e.gl,r=e.imageManager.getPattern(t.from),o=e.imageManager.getPattern(t.to);n.uniform1i(i.uniforms.u_image,0),n.uniform2fv(i.uniforms.u_pattern_tl_a,r.tl),n.uniform2fv(i.uniforms.u_pattern_br_a,r.br),n.uniform2fv(i.uniforms.u_pattern_tl_b,o.tl),n.uniform2fv(i.uniforms.u_pattern_br_b,o.br);var a=e.imageManager.getPixelSize(),s=a.width,l=a.height;n.uniform2fv(i.uniforms.u_texsize,[s,l]),n.uniform1f(i.uniforms.u_mix,t.t),n.uniform2fv(i.uniforms.u_pattern_size_a,r.displaySize),n.uniform2fv(i.uniforms.u_pattern_size_b,o.displaySize),n.uniform1f(i.uniforms.u_scale_a,t.fromScale),n.uniform1f(i.uniforms.u_scale_b,t.toScale),n.activeTexture(n.TEXTURE0),e.imageManager.bind(n)},i.setTile=function(t,e,i){var r=e.gl;r.uniform1f(i.uniforms.u_tile_units_to_pixels,1/n(t,1,e.transform.tileZoom));var o=Math.pow(2,t.coord.z),a=t.tileSize*Math.pow(2,e.transform.tileZoom)/o,s=a*(t.coord.x+t.coord.w*o),l=a*t.coord.y;r.uniform2f(i.uniforms.u_pixel_coord_upper,s>>16,l>>16),r.uniform2f(i.uniforms.u_pixel_coord_lower,65535&s,65535&l)}}),{\"../source/pixels_to_tile_units\":93}],81:[(function(t,e,i){\"use strict\";var n=t(\"../util/browser\"),r=t(\"../shaders\"),o=t(\"../data/program_configuration\"),a=(o.ProgramConfiguration,t(\"./vertex_array_object\")),s=function(t,e,i,o){var a=this;this.gl=t,this.program=t.createProgram();var s=i.defines().concat(\"#define DEVICE_PIXEL_RATIO \"+n.devicePixelRatio.toFixed(1));o&&s.push(\"#define OVERDRAW_INSPECTOR;\");var l=s.concat(r.prelude.fragmentSource,e.fragmentSource).join(\"\\n\"),u=s.concat(r.prelude.vertexSource,e.vertexSource).join(\"\\n\"),c=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(c,l),t.compileShader(c),t.attachShader(this.program,c);var h=t.createShader(t.VERTEX_SHADER);t.shaderSource(h,u),t.compileShader(h),t.attachShader(this.program,h);for(var p=i.interface?i.interface.layoutAttributes:[],d=0;d<p.length;d++)t.bindAttribLocation(a.program,d,p[d].name);t.linkProgram(this.program),this.numAttributes=t.getProgramParameter(this.program,t.ACTIVE_ATTRIBUTES),this.attributes={},this.uniforms={};for(var f=0;f<this.numAttributes;f++){var m=t.getActiveAttrib(a.program,f);m&&(a.attributes[m.name]=t.getAttribLocation(a.program,m.name))}for(var _=t.getProgramParameter(this.program,t.ACTIVE_UNIFORMS),y=0;y<_;y++){var g=t.getActiveUniform(a.program,y);g&&(a.uniforms[g.name]=t.getUniformLocation(a.program,g.name))}};s.prototype.draw=function(t,e,i,n,r,o,s,l){for(var u,c=this,h=(u={},u[t.LINES]=2,u[t.TRIANGLES]=3,u)[e],p=0,d=o.get();p<d.length;p+=1){var f=d[p],m=f.vaos||(f.vaos={});(m[i]||(m[i]=new a)).bind(t,c,n,r,s&&s.paintVertexBuffer,f.vertexOffset,l),t.drawElements(e,f.primitiveLength*h,t.UNSIGNED_SHORT,f.primitiveOffset*h*2)}},e.exports=s}),{\"../data/program_configuration\":53,\"../shaders\":86,\"../util/browser\":202,\"./vertex_array_object\":84}],82:[(function(t,e,i){\"use strict\";var n=t(\"../gl/vertex_buffer\"),r=t(\"./vertex_array_object\"),o=t(\"../data/pos_array\"),a=function(t){var e=this.gl=t.gl,i=this.texture=e.createTexture();e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.width,t.height,0,e.RGBA,e.UNSIGNED_BYTE,null),e.bindTexture(e.TEXTURE_2D,null);var a=this.fbo=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0);var s=new o;s.emplaceBack(0,0),s.emplaceBack(1,0),s.emplaceBack(0,1),s.emplaceBack(1,1),this.buffer=new n(e,s),this.vao=new r};a.prototype.bindWithDepth=function(t){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.fbo),this.attachedRbo!==t&&(e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.attachedRbo=t)},a.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},e.exports=a}),{\"../data/pos_array\":52,\"../gl/vertex_buffer\":62,\"./vertex_array_object\":84}],83:[(function(t,e,i){\"use strict\";var n=function(t,e,i){this.gl=t;var n=e.width,r=e.height;this.size=[n,r],this.format=i,this.texture=t.createTexture(),this.update(e)};n.prototype.update=function(t){var e=t.width,i=t.height,n=t.data;this.size=[e,i];var r=this,o=r.gl;o.bindTexture(o.TEXTURE_2D,this.texture),o.pixelStorei(o.UNPACK_ALIGNMENT,1),this.format===o.RGBA&&o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),o.texImage2D(o.TEXTURE_2D,0,this.format,e,i,0,this.format,o.UNSIGNED_BYTE,n)},n.prototype.bind=function(t,e){var i=this,n=i.gl;n.bindTexture(n.TEXTURE_2D,this.texture),t!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,t),this.filter=t),e!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e),this.wrap=e)},n.prototype.destroy=function(){this.gl.deleteTexture(this.texture),this.texture=null},e.exports=n}),{}],84:[(function(t,e,i){\"use strict\";var n=function(){this.boundProgram=null,this.boundVertexBuffer=null,this.boundVertexBuffer2=null,this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};n.prototype.bind=function(t,e,i,n,r,o,a){void 0===t.extVertexArrayObject&&(t.extVertexArrayObject=t.getExtension(\"OES_vertex_array_object\"));var s=!this.vao||this.boundProgram!==e||this.boundVertexBuffer!==i||this.boundVertexBuffer2!==r||this.boundIndexBuffer!==n||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a;!t.extVertexArrayObject||s?(this.freshBind(t,e,i,n,r,o,a),this.gl=t):(t.extVertexArrayObject.bindVertexArrayOES(this.vao),a&&a.bind())},n.prototype.freshBind=function(t,e,i,n,r,o,a){var s,l=e.numAttributes;if(t.extVertexArrayObject)this.vao&&this.destroy(),this.vao=t.extVertexArrayObject.createVertexArrayOES(),t.extVertexArrayObject.bindVertexArrayOES(this.vao),s=0,this.boundProgram=e,this.boundVertexBuffer=i,this.boundVertexBuffer2=r,this.boundIndexBuffer=n,this.boundVertexOffset=o,this.boundDynamicVertexBuffer=a;else{s=t.currentNumAttributes||0;for(var u=l;u<s;u++)t.disableVertexAttribArray(u)}i.enableAttributes(t,e),r&&r.enableAttributes(t,e),a&&a.enableAttributes(t,e),i.bind(),i.setVertexAttribPointers(t,e,o),r&&(r.bind(),r.setVertexAttribPointers(t,e,o)),a&&(a.bind(),a.setVertexAttribPointers(t,e,o)),n&&n.bind(),t.currentNumAttributes=l},n.prototype.destroy=function(){this.vao&&(this.gl.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)},e.exports=n}),{}],85:[(function(t,e,i){\"use strict\";var n=t(\"../util/util\");i.packUint8ToFloat=function(t,e){return t=n.clamp(Math.floor(t),0,255),e=n.clamp(Math.floor(e),0,255),256*t+e}}),{\"../util/util\":223}],86:[(function(t,e,i){\"use strict\";var n={prelude:{fragmentSource:\"#ifdef GL_ES\\nprecision mediump float;\\n#else\\n\\n#if !defined(lowp)\\n#define lowp\\n#endif\\n\\n#if !defined(mediump)\\n#define mediump\\n#endif\\n\\n#if !defined(highp)\\n#define highp\\n#endif\\n\\n#endif\\n\",vertexSource:\"#ifdef GL_ES\\nprecision highp float;\\n#else\\n\\n#if !defined(lowp)\\n#define lowp\\n#endif\\n\\n#if !defined(mediump)\\n#define mediump\\n#endif\\n\\n#if !defined(highp)\\n#define highp\\n#endif\\n\\n#endif\\n\\n// Unpack a pair of values that have been packed into a single float.\\n// The packed values are assumed to be 8-bit unsigned integers, and are\\n// packed like so:\\n// packedValue = floor(input[0]) * 256 + input[1],\\nvec2 unpack_float(const float packedValue) {\\n    int packedIntValue = int(packedValue);\\n    int v0 = packedIntValue / 256;\\n    return vec2(v0, packedIntValue - v0 * 256);\\n}\\n\\n\\n// To minimize the number of attributes needed, we encode a 4-component\\n// color into a pair of floats (i.e. a vec2) as follows:\\n// [ floor(color.r * 255) * 256 + color.g * 255,\\n//   floor(color.b * 255) * 256 + color.g * 255 ]\\nvec4 decode_color(const vec2 encodedColor) {\\n    return vec4(\\n        unpack_float(encodedColor[0]) / 255.0,\\n        unpack_float(encodedColor[1]) / 255.0\\n    );\\n}\\n\\n// Unpack a pair of paint values and interpolate between them.\\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\\n    return mix(packedValue[0], packedValue[1], t);\\n}\\n\\n// Unpack a pair of paint values and interpolate between them.\\nvec4 unpack_mix_vec4(const vec4 packedColors, const float t) {\\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\\n    return mix(minColor, maxColor, t);\\n}\\n\\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\\n// vec2 offset = mod(pixel_coord, size)\\n//\\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\\n//\\n// The pixel_coord is passed in as two 16 bit values:\\n// pixel_coord_upper = floor(pixel_coord / 2^16)\\n// pixel_coord_lower = mod(pixel_coord, 2^16)\\n//\\n// The offset is calculated in a series of steps that should preserve this precision:\\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\\n\\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\\n}\\n\"},circle:{fragmentSource:\"#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define mediump float radius\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define highp vec4 stroke_color\\n#pragma mapbox: define mediump float stroke_width\\n#pragma mapbox: define lowp float stroke_opacity\\n\\nvarying vec3 v_data;\\n\\nvoid main() {\\n    #pragma mapbox: initialize highp vec4 color\\n    #pragma mapbox: initialize mediump float radius\\n    #pragma mapbox: initialize lowp float blur\\n    #pragma mapbox: initialize lowp float opacity\\n    #pragma mapbox: initialize highp vec4 stroke_color\\n    #pragma mapbox: initialize mediump float stroke_width\\n    #pragma mapbox: initialize lowp float stroke_opacity\\n\\n    vec2 extrude = v_data.xy;\\n    float extrude_length = length(extrude);\\n\\n    lowp float antialiasblur = v_data.z;\\n    float antialiased_blur = -max(blur, antialiasblur);\\n\\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\\n\\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\\n        antialiased_blur,\\n        0.0,\\n        extrude_length - radius / (radius + stroke_width)\\n    );\\n\\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(1.0);\\n#endif\\n}\\n\",vertexSource:\"uniform mat4 u_matrix;\\nuniform bool u_scale_with_map;\\nuniform bool u_pitch_with_map;\\nuniform vec2 u_extrude_scale;\\nuniform highp float u_camera_to_center_distance;\\n\\nattribute vec2 a_pos;\\n\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define mediump float radius\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define highp vec4 stroke_color\\n#pragma mapbox: define mediump float stroke_width\\n#pragma mapbox: define lowp float stroke_opacity\\n\\nvarying vec3 v_data;\\n\\nvoid main(void) {\\n    #pragma mapbox: initialize highp vec4 color\\n    #pragma mapbox: initialize mediump float radius\\n    #pragma mapbox: initialize lowp float blur\\n    #pragma mapbox: initialize lowp float opacity\\n    #pragma mapbox: initialize highp vec4 stroke_color\\n    #pragma mapbox: initialize mediump float stroke_width\\n    #pragma mapbox: initialize lowp float stroke_opacity\\n\\n    // unencode the extrusion vector that we snuck into the a_pos vector\\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\\n\\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\\n    // in extrusion data\\n    vec2 circle_center = floor(a_pos * 0.5);\\n    if (u_pitch_with_map) {\\n        vec2 corner_position = circle_center;\\n        if (u_scale_with_map) {\\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale;\\n        } else {\\n            // Pitching the circle with the map effectively scales it with the map\\n            // To counteract the effect for pitch-scale: viewport, we rescale the\\n            // whole circle based on the pitch scaling effect at its central point\\n            vec4 projected_center = u_matrix * vec4(circle_center, 0, 1);\\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\\n        }\\n\\n        gl_Position = u_matrix * vec4(corner_position, 0, 1);\\n    } else {\\n        gl_Position = u_matrix * vec4(circle_center, 0, 1);\\n\\n        if (u_scale_with_map) {\\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\\n        } else {\\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\\n        }\\n    }\\n\\n    // This is a minimum blur distance that serves as a faux-antialiasing for\\n    // the circle. since blur is a ratio of the circle's size and the intent is\\n    // to keep the blur at roughly 1px, the two are inversely related.\\n    lowp float antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\\n\\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\\n}\\n\"},collisionBox:{fragmentSource:\"uniform float u_zoom;\\n// u_maxzoom is derived from the maximum scale considered by the CollisionTile\\n// Labels with placement zoom greater than this value will not be placed,\\n// regardless of perspective effects.\\nuniform float u_maxzoom;\\nuniform sampler2D u_fadetexture;\\n\\n// v_max_zoom is a collision-box-specific value that controls when line-following\\n// collision boxes are used.\\nvarying float v_max_zoom;\\nvarying float v_placement_zoom;\\nvarying float v_perspective_zoom_adjust;\\nvarying vec2 v_fade_tex;\\n\\nvoid main() {\\n\\n    float alpha = 0.5;\\n\\n    // Green = no collisions, label is showing\\n    gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0) * alpha;\\n\\n    // Red = collision, label hidden\\n    if (texture2D(u_fadetexture, v_fade_tex).a < 1.0) {\\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\\n    }\\n\\n    // Faded black = this collision box is not used at this zoom (for curved labels)\\n    if (u_zoom >= v_max_zoom + v_perspective_zoom_adjust) {\\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0) * alpha * 0.25;\\n    }\\n\\n    // Faded blue = the placement scale for this label is beyond the CollisionTile\\n    // max scale, so it's impossible for this label to show without collision detection\\n    // being run again (the label's glyphs haven't even been added to the symbol bucket)\\n    if (v_placement_zoom >= u_maxzoom) {\\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 1.0) * alpha * 0.2;\\n    }\\n}\\n\",vertexSource:\"attribute vec2 a_pos;\\nattribute vec2 a_anchor_pos;\\nattribute vec2 a_extrude;\\nattribute vec2 a_data;\\n\\nuniform mat4 u_matrix;\\nuniform float u_scale;\\nuniform float u_pitch;\\nuniform float u_collision_y_stretch;\\nuniform float u_camera_to_center_distance;\\n\\nvarying float v_max_zoom;\\nvarying float v_placement_zoom;\\nvarying float v_perspective_zoom_adjust;\\nvarying vec2 v_fade_tex;\\n\\nvoid main() {\\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\\n    highp float camera_to_anchor_distance = projectedPoint.w;\\n    highp float collision_perspective_ratio = 1.0 + 0.5 * ((camera_to_anchor_distance / u_camera_to_center_distance) - 1.0);\\n\\n    highp float incidence_stretch  = camera_to_anchor_distance / (u_camera_to_center_distance * cos(u_pitch));\\n    highp float collision_adjustment = max(1.0, incidence_stretch / u_collision_y_stretch);\\n\\n    gl_Position = u_matrix * vec4(a_pos + a_extrude * collision_perspective_ratio * collision_adjustment / u_scale, 0.0, 1.0);\\n\\n    v_max_zoom = a_data.x;\\n    v_placement_zoom = a_data.y;\\n\\n    v_perspective_zoom_adjust = floor(log2(collision_perspective_ratio * collision_adjustment) * 10.0);\\n    v_fade_tex = vec2((v_placement_zoom + v_perspective_zoom_adjust) / 255.0, 0.0);\\n}\\n\"},debug:{fragmentSource:\"uniform highp vec4 u_color;\\n\\nvoid main() {\\n    gl_FragColor = u_color;\\n}\\n\",vertexSource:\"attribute vec2 a_pos;\\n\\nuniform mat4 u_matrix;\\n\\nvoid main() {\\n    // We are using Int16 for texture position coordinates to give us enough precision for\\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\\n    // as an arbitrarily high number to preserve adequate precision when rendering.\\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\\n    // so math for modifying either is consistent.\\n    gl_Position = u_matrix * vec4(a_pos, step(8192.0, a_pos.x), 1);\\n}\\n\"},fill:{fragmentSource:\"#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float opacity\\n\\nvoid main() {\\n    #pragma mapbox: initialize highp vec4 color\\n    #pragma mapbox: initialize lowp float opacity\\n\\n    gl_FragColor = color * opacity;\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(1.0);\\n#endif\\n}\\n\",vertexSource:\"attribute vec2 a_pos;\\n\\nuniform mat4 u_matrix;\\n\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float opacity\\n\\nvoid main() {\\n    #pragma mapbox: initialize highp vec4 color\\n    #pragma mapbox: initialize lowp float opacity\\n\\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\\n}\\n\"},fillOutline:{fragmentSource:\"#pragma mapbox: define highp vec4 outline_color\\n#pragma mapbox: define lowp float opacity\\n\\nvarying vec2 v_pos;\\n\\nvoid main() {\\n    #pragma mapbox: initialize highp vec4 outline_color\\n    #pragma mapbox: initialize lowp float opacity\\n\\n    float dist = length(v_pos - gl_FragCoord.xy);\\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\\n    gl_FragColor = outline_color * (alpha * opacity);\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(1.0);\\n#endif\\n}\\n\",vertexSource:\"attribute vec2 a_pos;\\n\\nuniform mat4 u_matrix;\\nuniform vec2 u_world;\\n\\nvarying vec2 v_pos;\\n\\n#pragma mapbox: define highp vec4 outline_color\\n#pragma mapbox: define lowp float opacity\\n\\nvoid main() {\\n    #pragma mapbox: initialize highp vec4 outline_color\\n    #pragma mapbox: initialize lowp float opacity\\n\\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\\n}\\n\"},fillOutlinePattern:{fragmentSource:\"uniform vec2 u_pattern_tl_a;\\nuniform vec2 u_pattern_br_a;\\nuniform vec2 u_pattern_tl_b;\\nuniform vec2 u_pattern_br_b;\\nuniform vec2 u_texsize;\\nuniform float u_mix;\\n\\nuniform sampler2D u_image;\\n\\nvarying vec2 v_pos_a;\\nvarying vec2 v_pos_b;\\nvarying vec2 v_pos;\\n\\n#pragma mapbox: define lowp float opacity\\n\\nvoid main() {\\n    #pragma mapbox: initialize lowp float opacity\\n\\n    vec2 imagecoord = mod(v_pos_a, 1.0);\\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\\n    vec4 color1 = texture2D(u_image, pos);\\n\\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\\n    vec4 color2 = texture2D(u_image, pos2);\\n\\n    // find distance to outline for alpha interpolation\\n\\n    float dist = length(v_pos - gl_FragCoord.xy);\\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\\n\\n\\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(1.0);\\n#endif\\n}\\n\",vertexSource:\"uniform mat4 u_matrix;\\nuniform vec2 u_world;\\nuniform vec2 u_pattern_size_a;\\nuniform vec2 u_pattern_size_b;\\nuniform vec2 u_pixel_coord_upper;\\nuniform vec2 u_pixel_coord_lower;\\nuniform float u_scale_a;\\nuniform float u_scale_b;\\nuniform float u_tile_units_to_pixels;\\n\\nattribute vec2 a_pos;\\n\\nvarying vec2 v_pos_a;\\nvarying vec2 v_pos_b;\\nvarying vec2 v_pos;\\n\\n#pragma mapbox: define lowp float opacity\\n\\nvoid main() {\\n    #pragma mapbox: initialize lowp float opacity\\n\\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\\n\\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\\n\\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\\n}\\n\"},fillPattern:{fragmentSource:\"uniform vec2 u_pattern_tl_a;\\nuniform vec2 u_pattern_br_a;\\nuniform vec2 u_pattern_tl_b;\\nuniform vec2 u_pattern_br_b;\\nuniform vec2 u_texsize;\\nuniform float u_mix;\\n\\nuniform sampler2D u_image;\\n\\nvarying vec2 v_pos_a;\\nvarying vec2 v_pos_b;\\n\\n#pragma mapbox: define lowp float opacity\\n\\nvoid main() {\\n    #pragma mapbox: initialize lowp float opacity\\n\\n    vec2 imagecoord = mod(v_pos_a, 1.0);\\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\\n    vec4 color1 = texture2D(u_image, pos);\\n\\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\\n    vec4 color2 = texture2D(u_image, pos2);\\n\\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(1.0);\\n#endif\\n}\\n\",vertexSource:\"uniform mat4 u_matrix;\\nuniform vec2 u_pattern_size_a;\\nuniform vec2 u_pattern_size_b;\\nuniform vec2 u_pixel_coord_upper;\\nuniform vec2 u_pixel_coord_lower;\\nuniform float u_scale_a;\\nuniform float u_scale_b;\\nuniform float u_tile_units_to_pixels;\\n\\nattribute vec2 a_pos;\\n\\nvarying vec2 v_pos_a;\\nvarying vec2 v_pos_b;\\n\\n#pragma mapbox: define lowp float opacity\\n\\nvoid main() {\\n    #pragma mapbox: initialize lowp float opacity\\n\\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\\n\\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\\n}\\n\"},fillExtrusion:{fragmentSource:\"varying vec4 v_color;\\n#pragma mapbox: define lowp float base\\n#pragma mapbox: define lowp float height\\n#pragma mapbox: define highp vec4 color\\n\\nvoid main() {\\n    #pragma mapbox: initialize lowp float base\\n    #pragma mapbox: initialize lowp float height\\n    #pragma mapbox: initialize highp vec4 color\\n\\n    gl_FragColor = v_color;\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(1.0);\\n#endif\\n}\\n\",vertexSource:\"uniform mat4 u_matrix;\\nuniform vec3 u_lightcolor;\\nuniform lowp vec3 u_lightpos;\\nuniform lowp float u_lightintensity;\\n\\nattribute vec2 a_pos;\\nattribute vec3 a_normal;\\nattribute float a_edgedistance;\\n\\nvarying vec4 v_color;\\n\\n#pragma mapbox: define lowp float base\\n#pragma mapbox: define lowp float height\\n\\n#pragma mapbox: define highp vec4 color\\n\\nvoid main() {\\n    #pragma mapbox: initialize lowp float base\\n    #pragma mapbox: initialize lowp float height\\n    #pragma mapbox: initialize highp vec4 color\\n\\n    base = max(0.0, base);\\n    height = max(0.0, height);\\n\\n    float ed = a_edgedistance; // use each attrib in order to not trip a VAO assert\\n    float t = mod(a_normal.x, 2.0);\\n\\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\\n\\n    // Relative luminance (how dark/bright is the surface color?)\\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\\n\\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\\n\\n    // Add slight ambient lighting so no extrusions are totally black\\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\\n    color += ambientlight;\\n\\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\\n    float directional = clamp(dot(a_normal / 16384.0, u_lightpos), 0.0, 1.0);\\n\\n    // Adjust directional so that\\n    // the range of values for highlight/shading is narrower\\n    // with lower light intensity\\n    // and with lighter/brighter surface colors\\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\\n\\n    // Add gradient along z axis of side surfaces\\n    if (a_normal.y != 0.0) {\\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\\n    }\\n\\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\\n    // with lower bounds adjusted to hue of light\\n    // so that shading is tinted with the complementary (opposite) color to the light color\\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\\n}\\n\"},fillExtrusionPattern:{fragmentSource:\"uniform vec2 u_pattern_tl_a;\\nuniform vec2 u_pattern_br_a;\\nuniform vec2 u_pattern_tl_b;\\nuniform vec2 u_pattern_br_b;\\nuniform vec2 u_texsize;\\nuniform float u_mix;\\n\\nuniform sampler2D u_image;\\n\\nvarying vec2 v_pos_a;\\nvarying vec2 v_pos_b;\\nvarying vec4 v_lighting;\\n\\n#pragma mapbox: define lowp float base\\n#pragma mapbox: define lowp float height\\n\\nvoid main() {\\n    #pragma mapbox: initialize lowp float base\\n    #pragma mapbox: initialize lowp float height\\n\\n    vec2 imagecoord = mod(v_pos_a, 1.0);\\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\\n    vec4 color1 = texture2D(u_image, pos);\\n\\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\\n    vec4 color2 = texture2D(u_image, pos2);\\n\\n    vec4 mixedColor = mix(color1, color2, u_mix);\\n\\n    gl_FragColor = mixedColor * v_lighting;\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(1.0);\\n#endif\\n}\\n\",vertexSource:\"uniform mat4 u_matrix;\\nuniform vec2 u_pattern_size_a;\\nuniform vec2 u_pattern_size_b;\\nuniform vec2 u_pixel_coord_upper;\\nuniform vec2 u_pixel_coord_lower;\\nuniform float u_scale_a;\\nuniform float u_scale_b;\\nuniform float u_tile_units_to_pixels;\\nuniform float u_height_factor;\\n\\nuniform vec3 u_lightcolor;\\nuniform lowp vec3 u_lightpos;\\nuniform lowp float u_lightintensity;\\n\\nattribute vec2 a_pos;\\nattribute vec3 a_normal;\\nattribute float a_edgedistance;\\n\\nvarying vec2 v_pos_a;\\nvarying vec2 v_pos_b;\\nvarying vec4 v_lighting;\\nvarying float v_directional;\\n\\n#pragma mapbox: define lowp float base\\n#pragma mapbox: define lowp float height\\n\\nvoid main() {\\n    #pragma mapbox: initialize lowp float base\\n    #pragma mapbox: initialize lowp float height\\n\\n    base = max(0.0, base);\\n    height = max(0.0, height);\\n\\n    float t = mod(a_normal.x, 2.0);\\n    float z = t > 0.0 ? height : base;\\n\\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\\n\\n    vec2 pos = a_normal.x == 1.0 && a_normal.y == 0.0 && a_normal.z == 16384.0\\n        ? a_pos // extrusion top\\n        : vec2(a_edgedistance, z * u_height_factor); // extrusion side\\n\\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\\n\\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\\n    float directional = clamp(dot(a_normal / 16383.0, u_lightpos), 0.0, 1.0);\\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\\n\\n    if (a_normal.y != 0.0) {\\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\\n    }\\n\\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\\n}\\n\"},extrusionTexture:{fragmentSource:\"uniform sampler2D u_image;\\nuniform float u_opacity;\\nvarying vec2 v_pos;\\n\\nvoid main() {\\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(0.0);\\n#endif\\n}\\n\",vertexSource:\"uniform mat4 u_matrix;\\nuniform vec2 u_world;\\nattribute vec2 a_pos;\\nvarying vec2 v_pos;\\n\\nvoid main() {\\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\\n\\n    v_pos.x = a_pos.x;\\n    v_pos.y = 1.0 - a_pos.y;\\n}\\n\"},line:{fragmentSource:\"#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n\\nvarying vec2 v_width2;\\nvarying vec2 v_normal;\\nvarying float v_gamma_scale;\\n\\nvoid main() {\\n    #pragma mapbox: initialize highp vec4 color\\n    #pragma mapbox: initialize lowp float blur\\n    #pragma mapbox: initialize lowp float opacity\\n\\n    // Calculate the distance of the pixel from the line in pixels.\\n    float dist = length(v_normal) * v_width2.s;\\n\\n    // Calculate the antialiasing fade factor. This is either when fading in\\n    // the line in case of an offset line (v_width2.t) or when fading out\\n    // (v_width2.s)\\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\\n\\n    gl_FragColor = color * (alpha * opacity);\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(1.0);\\n#endif\\n}\\n\",vertexSource:\"\\n\\n// the distance over which the line edge fades out.\\n// Retina devices need a smaller distance to avoid aliasing.\\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\\n\\n// floor(127 / 2) == 63.0\\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\\n// there are also \\\"special\\\" normals that have a bigger length (of up to 126 in\\n// this case).\\n// #define scale 63.0\\n#define scale 0.015873016\\n\\nattribute vec4 a_pos_normal;\\nattribute vec4 a_data;\\n\\nuniform mat4 u_matrix;\\nuniform mediump float u_ratio;\\nuniform vec2 u_gl_units_to_pixels;\\n\\nvarying vec2 v_normal;\\nvarying vec2 v_width2;\\nvarying float v_gamma_scale;\\n\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define mediump float gapwidth\\n#pragma mapbox: define lowp float offset\\n#pragma mapbox: define mediump float width\\n\\nvoid main() {\\n    #pragma mapbox: initialize highp vec4 color\\n    #pragma mapbox: initialize lowp float blur\\n    #pragma mapbox: initialize lowp float opacity\\n    #pragma mapbox: initialize mediump float gapwidth\\n    #pragma mapbox: initialize lowp float offset\\n    #pragma mapbox: initialize mediump float width\\n\\n    vec2 a_extrude = a_data.xy - 128.0;\\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\\n\\n    vec2 pos = a_pos_normal.xy;\\n\\n    // x is 1 if it's a round cap, 0 otherwise\\n    // y is 1 if the normal points up, and -1 if it points down\\n    mediump vec2 normal = a_pos_normal.zw;\\n    v_normal = normal;\\n\\n    // these transformations used to be applied in the JS and native code bases.\\n    // moved them into the shader for clarity and simplicity.\\n    gapwidth = gapwidth / 2.0;\\n    float halfwidth = width / 2.0;\\n    offset = -1.0 * offset;\\n\\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\\n\\n    // Scale the extrusion vector down to a normal and then up by the line width\\n    // of this vertex.\\n    mediump vec2 dist = outset * a_extrude * scale;\\n\\n    // Calculate the offset when drawing a line that is to the side of the actual line.\\n    // We do this by creating a vector that points towards the extrude, but rotate\\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\\n    // extrude vector points in another direction.\\n    mediump float u = 0.5 * a_direction;\\n    mediump float t = 1.0 - abs(u);\\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\\n\\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\\n\\n    // calculate how much the perspective view squishes or stretches the extrude\\n    float extrude_length_without_perspective = length(dist);\\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\\n\\n    v_width2 = vec2(outset, inset);\\n}\\n\"},linePattern:{fragmentSource:\"uniform vec2 u_pattern_size_a;\\nuniform vec2 u_pattern_size_b;\\nuniform vec2 u_pattern_tl_a;\\nuniform vec2 u_pattern_br_a;\\nuniform vec2 u_pattern_tl_b;\\nuniform vec2 u_pattern_br_b;\\nuniform vec2 u_texsize;\\nuniform float u_fade;\\n\\nuniform sampler2D u_image;\\n\\nvarying vec2 v_normal;\\nvarying vec2 v_width2;\\nvarying float v_linesofar;\\nvarying float v_gamma_scale;\\n\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n\\nvoid main() {\\n    #pragma mapbox: initialize lowp float blur\\n    #pragma mapbox: initialize lowp float opacity\\n\\n    // Calculate the distance of the pixel from the line in pixels.\\n    float dist = length(v_normal) * v_width2.s;\\n\\n    // Calculate the antialiasing fade factor. This is either when fading in\\n    // the line in case of an offset line (v_width2.t) or when fading out\\n    // (v_width2.s)\\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\\n\\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\\n    float y_a = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_a.y);\\n    float y_b = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_b.y);\\n    vec2 pos_a = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, vec2(x_a, y_a));\\n    vec2 pos_b = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, vec2(x_b, y_b));\\n\\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\\n\\n    gl_FragColor = color * alpha * opacity;\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(1.0);\\n#endif\\n}\\n\",vertexSource:\"// floor(127 / 2) == 63.0\\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\\n// there are also \\\"special\\\" normals that have a bigger length (of up to 126 in\\n// this case).\\n// #define scale 63.0\\n#define scale 0.015873016\\n\\n// We scale the distance before adding it to the buffers so that we can store\\n// long distances for long segments. Use this value to unscale the distance.\\n#define LINE_DISTANCE_SCALE 2.0\\n\\n// the distance over which the line edge fades out.\\n// Retina devices need a smaller distance to avoid aliasing.\\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\\n\\nattribute vec4 a_pos_normal;\\nattribute vec4 a_data;\\n\\nuniform mat4 u_matrix;\\nuniform mediump float u_ratio;\\nuniform vec2 u_gl_units_to_pixels;\\n\\nvarying vec2 v_normal;\\nvarying vec2 v_width2;\\nvarying float v_linesofar;\\nvarying float v_gamma_scale;\\n\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp float offset\\n#pragma mapbox: define mediump float gapwidth\\n#pragma mapbox: define mediump float width\\n\\nvoid main() {\\n    #pragma mapbox: initialize lowp float blur\\n    #pragma mapbox: initialize lowp float opacity\\n    #pragma mapbox: initialize lowp float offset\\n    #pragma mapbox: initialize mediump float gapwidth\\n    #pragma mapbox: initialize mediump float width\\n\\n    vec2 a_extrude = a_data.xy - 128.0;\\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\\n\\n    vec2 pos = a_pos_normal.xy;\\n\\n    // x is 1 if it's a round cap, 0 otherwise\\n    // y is 1 if the normal points up, and -1 if it points down\\n    mediump vec2 normal = a_pos_normal.zw;\\n    v_normal = normal;\\n\\n    // these transformations used to be applied in the JS and native code bases.\\n    // moved them into the shader for clarity and simplicity.\\n    gapwidth = gapwidth / 2.0;\\n    float halfwidth = width / 2.0;\\n    offset = -1.0 * offset;\\n\\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\\n\\n    // Scale the extrusion vector down to a normal and then up by the line width\\n    // of this vertex.\\n    mediump vec2 dist = outset * a_extrude * scale;\\n\\n    // Calculate the offset when drawing a line that is to the side of the actual line.\\n    // We do this by creating a vector that points towards the extrude, but rotate\\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\\n    // extrude vector points in another direction.\\n    mediump float u = 0.5 * a_direction;\\n    mediump float t = 1.0 - abs(u);\\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\\n\\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\\n\\n    // calculate how much the perspective view squishes or stretches the extrude\\n    float extrude_length_without_perspective = length(dist);\\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\\n\\n    v_linesofar = a_linesofar;\\n    v_width2 = vec2(outset, inset);\\n}\\n\"},lineSDF:{fragmentSource:\"\\nuniform sampler2D u_image;\\nuniform float u_sdfgamma;\\nuniform float u_mix;\\n\\nvarying vec2 v_normal;\\nvarying vec2 v_width2;\\nvarying vec2 v_tex_a;\\nvarying vec2 v_tex_b;\\nvarying float v_gamma_scale;\\n\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define mediump float width\\n#pragma mapbox: define lowp float floorwidth\\n\\nvoid main() {\\n    #pragma mapbox: initialize highp vec4 color\\n    #pragma mapbox: initialize lowp float blur\\n    #pragma mapbox: initialize lowp float opacity\\n    #pragma mapbox: initialize mediump float width\\n    #pragma mapbox: initialize lowp float floorwidth\\n\\n    // Calculate the distance of the pixel from the line in pixels.\\n    float dist = length(v_normal) * v_width2.s;\\n\\n    // Calculate the antialiasing fade factor. This is either when fading in\\n    // the line in case of an offset line (v_width2.t) or when fading out\\n    // (v_width2.s)\\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\\n\\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\\n    alpha *= smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\\n\\n    gl_FragColor = color * (alpha * opacity);\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(1.0);\\n#endif\\n}\\n\",vertexSource:\"// floor(127 / 2) == 63.0\\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\\n// there are also \\\"special\\\" normals that have a bigger length (of up to 126 in\\n// this case).\\n// #define scale 63.0\\n#define scale 0.015873016\\n\\n// We scale the distance before adding it to the buffers so that we can store\\n// long distances for long segments. Use this value to unscale the distance.\\n#define LINE_DISTANCE_SCALE 2.0\\n\\n// the distance over which the line edge fades out.\\n// Retina devices need a smaller distance to avoid aliasing.\\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\\n\\nattribute vec4 a_pos_normal;\\nattribute vec4 a_data;\\n\\nuniform mat4 u_matrix;\\nuniform mediump float u_ratio;\\nuniform vec2 u_patternscale_a;\\nuniform float u_tex_y_a;\\nuniform vec2 u_patternscale_b;\\nuniform float u_tex_y_b;\\nuniform vec2 u_gl_units_to_pixels;\\n\\nvarying vec2 v_normal;\\nvarying vec2 v_width2;\\nvarying vec2 v_tex_a;\\nvarying vec2 v_tex_b;\\nvarying float v_gamma_scale;\\n\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define mediump float gapwidth\\n#pragma mapbox: define lowp float offset\\n#pragma mapbox: define mediump float width\\n#pragma mapbox: define lowp float floorwidth\\n\\nvoid main() {\\n    #pragma mapbox: initialize highp vec4 color\\n    #pragma mapbox: initialize lowp float blur\\n    #pragma mapbox: initialize lowp float opacity\\n    #pragma mapbox: initialize mediump float gapwidth\\n    #pragma mapbox: initialize lowp float offset\\n    #pragma mapbox: initialize mediump float width\\n    #pragma mapbox: initialize lowp float floorwidth\\n\\n    vec2 a_extrude = a_data.xy - 128.0;\\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\\n\\n    vec2 pos = a_pos_normal.xy;\\n\\n    // x is 1 if it's a round cap, 0 otherwise\\n    // y is 1 if the normal points up, and -1 if it points down\\n    mediump vec2 normal = a_pos_normal.zw;\\n    v_normal = normal;\\n\\n    // these transformations used to be applied in the JS and native code bases.\\n    // moved them into the shader for clarity and simplicity.\\n    gapwidth = gapwidth / 2.0;\\n    float halfwidth = width / 2.0;\\n    offset = -1.0 * offset;\\n\\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\\n\\n    // Scale the extrusion vector down to a normal and then up by the line width\\n    // of this vertex.\\n    mediump vec2 dist =outset * a_extrude * scale;\\n\\n    // Calculate the offset when drawing a line that is to the side of the actual line.\\n    // We do this by creating a vector that points towards the extrude, but rotate\\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\\n    // extrude vector points in another direction.\\n    mediump float u = 0.5 * a_direction;\\n    mediump float t = 1.0 - abs(u);\\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\\n\\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\\n\\n    // calculate how much the perspective view squishes or stretches the extrude\\n    float extrude_length_without_perspective = length(dist);\\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\\n\\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\\n\\n    v_width2 = vec2(outset, inset);\\n}\\n\"},raster:{fragmentSource:\"uniform float u_fade_t;\\nuniform float u_opacity;\\nuniform sampler2D u_image0;\\nuniform sampler2D u_image1;\\nvarying vec2 v_pos0;\\nvarying vec2 v_pos1;\\n\\nuniform float u_brightness_low;\\nuniform float u_brightness_high;\\n\\nuniform float u_saturation_factor;\\nuniform float u_contrast_factor;\\nuniform vec3 u_spin_weights;\\n\\nvoid main() {\\n\\n    // read and cross-fade colors from the main and parent tiles\\n    vec4 color0 = texture2D(u_image0, v_pos0);\\n    vec4 color1 = texture2D(u_image1, v_pos1);\\n    if (color0.a > 0.0) {\\n        color0.rgb = color0.rgb / color0.a;\\n    }\\n    if (color1.a > 0.0) {\\n        color1.rgb = color1.rgb / color1.a;\\n    }\\n    vec4 color = mix(color0, color1, u_fade_t);\\n    color.a *= u_opacity;\\n    vec3 rgb = color.rgb;\\n\\n    // spin\\n    rgb = vec3(\\n        dot(rgb, u_spin_weights.xyz),\\n        dot(rgb, u_spin_weights.zxy),\\n        dot(rgb, u_spin_weights.yzx));\\n\\n    // saturation\\n    float average = (color.r + color.g + color.b) / 3.0;\\n    rgb += (average - rgb) * u_saturation_factor;\\n\\n    // contrast\\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\\n\\n    // brightness\\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\\n\\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(1.0);\\n#endif\\n}\\n\",vertexSource:\"uniform mat4 u_matrix;\\nuniform vec2 u_tl_parent;\\nuniform float u_scale_parent;\\nuniform float u_buffer_scale;\\n\\nattribute vec2 a_pos;\\nattribute vec2 a_texture_pos;\\n\\nvarying vec2 v_pos0;\\nvarying vec2 v_pos1;\\n\\nvoid main() {\\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\\n    // We are using Int16 for texture position coordinates to give us enough precision for\\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\\n    // as an arbitrarily high number to preserve adequate precision when rendering.\\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\\n    // so math for modifying either is consistent.\\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\\n}\\n\"},symbolIcon:{fragmentSource:\"uniform sampler2D u_texture;\\nuniform sampler2D u_fadetexture;\\n\\n#pragma mapbox: define lowp float opacity\\n\\nvarying vec2 v_tex;\\nvarying vec2 v_fade_tex;\\n\\nvoid main() {\\n    #pragma mapbox: initialize lowp float opacity\\n\\n    lowp float alpha = texture2D(u_fadetexture, v_fade_tex).a * opacity;\\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(1.0);\\n#endif\\n}\\n\",vertexSource:\"const float PI = 3.141592653589793;\\n\\nattribute vec4 a_pos_offset;\\nattribute vec4 a_data;\\nattribute vec3 a_projected_pos;\\n\\nuniform bool u_is_size_zoom_constant;\\nuniform bool u_is_size_feature_constant;\\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\\nuniform highp float u_size; // used when size is both zoom and feature constant\\nuniform highp float u_camera_to_center_distance;\\nuniform highp float u_pitch;\\nuniform bool u_rotate_symbol;\\nuniform highp float u_aspect_ratio;\\nuniform highp float u_collision_y_stretch;\\n\\n#pragma mapbox: define lowp float opacity\\n\\nuniform mat4 u_matrix;\\nuniform mat4 u_label_plane_matrix;\\nuniform mat4 u_gl_coord_matrix;\\n\\nuniform bool u_is_text;\\nuniform bool u_pitch_with_map;\\n\\nuniform vec2 u_texsize;\\n\\nvarying vec2 v_tex;\\nvarying vec2 v_fade_tex;\\n\\nvoid main() {\\n    #pragma mapbox: initialize lowp float opacity\\n\\n    vec2 a_pos = a_pos_offset.xy;\\n    vec2 a_offset = a_pos_offset.zw;\\n\\n    vec2 a_tex = a_data.xy;\\n    vec2 a_size = a_data.zw;\\n\\n    highp vec2 angle_labelminzoom = unpack_float(a_projected_pos[2]);\\n    highp float segment_angle = -angle_labelminzoom[0] / 255.0 * 2.0 * PI;\\n    mediump float a_labelminzoom = angle_labelminzoom[1];\\n\\n    float size;\\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\\n        size = a_size[0] / 10.0;\\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\\n        size = u_size;\\n    } else {\\n        size = u_size;\\n    }\\n\\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\\n    highp float camera_to_anchor_distance = projectedPoint.w;\\n    // See comments in symbol_sdf.vertex\\n    highp float distance_ratio = u_pitch_with_map ?\\n        camera_to_anchor_distance / u_camera_to_center_distance :\\n        u_camera_to_center_distance / camera_to_anchor_distance;\\n    highp float perspective_ratio = 0.5 + 0.5 * distance_ratio;\\n\\n    size *= perspective_ratio;\\n\\n    float fontScale = u_is_text ? size / 24.0 : size;\\n\\n    highp float symbol_rotation = 0.0;\\n    if (u_rotate_symbol) {\\n        // See comments in symbol_sdf.vertex\\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\\n\\n        vec2 a = projectedPoint.xy / projectedPoint.w;\\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\\n\\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\\n    }\\n\\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\\n\\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 64.0 * fontScale), 0.0, 1.0);\\n\\n    v_tex = a_tex / u_texsize;\\n    // See comments in symbol_sdf.vertex\\n    highp float incidence_stretch  = camera_to_anchor_distance / (u_camera_to_center_distance * cos(u_pitch));\\n    highp float collision_adjustment = max(1.0, incidence_stretch / u_collision_y_stretch);\\n\\n    highp float collision_perspective_ratio = 1.0 + 0.5*((camera_to_anchor_distance / u_camera_to_center_distance) - 1.0);\\n    highp float perspective_zoom_adjust = floor(log2(collision_perspective_ratio * collision_adjustment) * 10.0);\\n    v_fade_tex = vec2((a_labelminzoom + perspective_zoom_adjust) / 255.0, 0.0);\\n}\\n\"},symbolSDF:{fragmentSource:\"#define SDF_PX 8.0\\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\\n\\nuniform bool u_is_halo;\\n#pragma mapbox: define highp vec4 fill_color\\n#pragma mapbox: define highp vec4 halo_color\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp float halo_width\\n#pragma mapbox: define lowp float halo_blur\\n\\nuniform sampler2D u_texture;\\nuniform sampler2D u_fadetexture;\\nuniform highp float u_gamma_scale;\\nuniform bool u_is_text;\\n\\nvarying vec4 v_data0;\\nvarying vec2 v_data1;\\n\\nvoid main() {\\n    #pragma mapbox: initialize highp vec4 fill_color\\n    #pragma mapbox: initialize highp vec4 halo_color\\n    #pragma mapbox: initialize lowp float opacity\\n    #pragma mapbox: initialize lowp float halo_width\\n    #pragma mapbox: initialize lowp float halo_blur\\n\\n    vec2 tex = v_data0.xy;\\n    vec2 fade_tex = v_data0.zw;\\n    float gamma_scale = v_data1.x;\\n    float size = v_data1.y;\\n\\n    float fontScale = u_is_text ? size / 24.0 : size;\\n\\n    lowp vec4 color = fill_color;\\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\\n    lowp float buff = (256.0 - 64.0) / 256.0;\\n    if (u_is_halo) {\\n        color = halo_color;\\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\\n    }\\n\\n    lowp float dist = texture2D(u_texture, tex).a;\\n    lowp float fade_alpha = texture2D(u_fadetexture, fade_tex).a;\\n    highp float gamma_scaled = gamma * gamma_scale;\\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist) * fade_alpha;\\n\\n    gl_FragColor = color * (alpha * opacity);\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(1.0);\\n#endif\\n}\\n\",vertexSource:\"const float PI = 3.141592653589793;\\n\\nattribute vec4 a_pos_offset;\\nattribute vec4 a_data;\\nattribute vec3 a_projected_pos;\\n\\n// contents of a_size vary based on the type of property value\\n// used for {text,icon}-size.\\n// For constants, a_size is disabled.\\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\\n// For composite functions:\\n// [ text-size(lowerZoomStop, feature),\\n//   text-size(upperZoomStop, feature) ]\\nuniform bool u_is_size_zoom_constant;\\nuniform bool u_is_size_feature_constant;\\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\\nuniform highp float u_size; // used when size is both zoom and feature constant\\n\\n#pragma mapbox: define highp vec4 fill_color\\n#pragma mapbox: define highp vec4 halo_color\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp float halo_width\\n#pragma mapbox: define lowp float halo_blur\\n\\nuniform mat4 u_matrix;\\nuniform mat4 u_label_plane_matrix;\\nuniform mat4 u_gl_coord_matrix;\\n\\nuniform bool u_is_text;\\nuniform bool u_pitch_with_map;\\nuniform highp float u_pitch;\\nuniform bool u_rotate_symbol;\\nuniform highp float u_aspect_ratio;\\nuniform highp float u_camera_to_center_distance;\\nuniform highp float u_collision_y_stretch;\\n\\nuniform vec2 u_texsize;\\n\\nvarying vec4 v_data0;\\nvarying vec2 v_data1;\\n\\nvoid main() {\\n    #pragma mapbox: initialize highp vec4 fill_color\\n    #pragma mapbox: initialize highp vec4 halo_color\\n    #pragma mapbox: initialize lowp float opacity\\n    #pragma mapbox: initialize lowp float halo_width\\n    #pragma mapbox: initialize lowp float halo_blur\\n\\n    vec2 a_pos = a_pos_offset.xy;\\n    vec2 a_offset = a_pos_offset.zw;\\n\\n    vec2 a_tex = a_data.xy;\\n    vec2 a_size = a_data.zw;\\n\\n    highp vec2 angle_labelminzoom = unpack_float(a_projected_pos[2]);\\n    highp float segment_angle = -angle_labelminzoom[0] / 255.0 * 2.0 * PI;\\n    mediump float a_labelminzoom = angle_labelminzoom[1];\\n    float size;\\n\\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\\n        size = a_size[0] / 10.0;\\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\\n        size = u_size;\\n    } else {\\n        size = u_size;\\n    }\\n\\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\\n    highp float camera_to_anchor_distance = projectedPoint.w;\\n    // If the label is pitched with the map, layout is done in pitched space,\\n    // which makes labels in the distance smaller relative to viewport space.\\n    // We counteract part of that effect by multiplying by the perspective ratio.\\n    // If the label isn't pitched with the map, we do layout in viewport space,\\n    // which makes labels in the distance larger relative to the features around\\n    // them. We counteract part of that effect by dividing by the perspective ratio.\\n    highp float distance_ratio = u_pitch_with_map ?\\n        camera_to_anchor_distance / u_camera_to_center_distance :\\n        u_camera_to_center_distance / camera_to_anchor_distance;\\n    highp float perspective_ratio = 0.5 + 0.5 * distance_ratio;\\n\\n    size *= perspective_ratio;\\n\\n    float fontScale = u_is_text ? size / 24.0 : size;\\n\\n    highp float symbol_rotation = 0.0;\\n    if (u_rotate_symbol) {\\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\\n        // space, project it, and measure its angle in projected space.\\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\\n\\n        vec2 a = projectedPoint.xy / projectedPoint.w;\\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\\n\\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\\n    }\\n\\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\\n\\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 64.0 * fontScale), 0.0, 1.0);\\n    float gamma_scale = gl_Position.w;\\n\\n    vec2 tex = a_tex / u_texsize;\\n    // incidence_stretch is the ratio of how much y space a label takes up on a tile while drawn perpendicular to the viewport vs\\n    //  how much space it would take up if it were drawn flat on the tile\\n    // Using law of sines, camera_to_anchor/sin(ground_angle) = camera_to_center/sin(incidence_angle)\\n    // sin(incidence_angle) = 1/incidence_stretch\\n    // Incidence angle 90 -> head on, sin(incidence_angle) = 1, no incidence stretch\\n    // Incidence angle 1 -> very oblique, sin(incidence_angle) =~ 0, lots of incidence stretch\\n    // ground_angle = u_pitch + PI/2 -> sin(ground_angle) = cos(u_pitch)\\n    // This 2D calculation is only exactly correct when gl_Position.x is in the center of the viewport,\\n    //  but it's a close enough approximation for our purposes\\n    highp float incidence_stretch  = camera_to_anchor_distance / (u_camera_to_center_distance * cos(u_pitch));\\n    // incidence_stretch only applies to the y-axis, but without re-calculating the collision tile, we can't\\n    // adjust the size of only one axis. So, we do a crude approximation at placement time to get the aspect ratio\\n    // about right, and then do the rest of the adjustment here: there will be some extra padding on the x-axis,\\n    // but hopefully not too much.\\n    // Never make the adjustment less than 1.0: instead of allowing collisions on the x-axis, be conservative on\\n    // the y-axis.\\n    highp float collision_adjustment = max(1.0, incidence_stretch / u_collision_y_stretch);\\n\\n    // Floor to 1/10th zoom to dodge precision issues that can cause partially hidden labels\\n    highp float collision_perspective_ratio = 1.0 + 0.5*((camera_to_anchor_distance / u_camera_to_center_distance) - 1.0);\\n    highp float perspective_zoom_adjust = floor(log2(collision_perspective_ratio * collision_adjustment) * 10.0);\\n    vec2 fade_tex = vec2((a_labelminzoom + perspective_zoom_adjust) / 255.0, 0.0);\\n\\n    v_data0 = vec4(tex.x, tex.y, fade_tex.x, fade_tex.y);\\n    v_data1 = vec2(gamma_scale, size);\\n}\\n\"}},r=/#pragma mapbox: ([\\w]+) ([\\w]+) ([\\w]+) ([\\w]+)/g;for(var o in n)!(function(t){var e=n[t],i={};e.fragmentSource=e.fragmentSource.replace(r,(function(t,e,n,r,o){return i[o]=!0,\"define\"===e?\"\\n#ifndef HAS_UNIFORM_u_\"+o+\"\\nvarying \"+n+\" \"+r+\" \"+o+\";\\n#else\\nuniform \"+n+\" \"+r+\" u_\"+o+\";\\n#endif\\n\":\"\\n#ifdef HAS_UNIFORM_u_\"+o+\"\\n    \"+n+\" \"+r+\" \"+o+\" = u_\"+o+\";\\n#endif\\n\"})),e.vertexSource=e.vertexSource.replace(r,(function(t,e,n,r,o){var a=\"float\"===r?\"vec2\":\"vec4\";return i[o]?\"define\"===e?\"\\n#ifndef HAS_UNIFORM_u_\"+o+\"\\nuniform lowp float a_\"+o+\"_t;\\nattribute \"+n+\" \"+a+\" a_\"+o+\";\\nvarying \"+n+\" \"+r+\" \"+o+\";\\n#else\\nuniform \"+n+\" \"+r+\" u_\"+o+\";\\n#endif\\n\":\"\\n#ifndef HAS_UNIFORM_u_\"+o+\"\\n    \"+o+\" = unpack_mix_\"+a+\"(a_\"+o+\", a_\"+o+\"_t);\\n#else\\n    \"+n+\" \"+r+\" \"+o+\" = u_\"+o+\";\\n#endif\\n\":\"define\"===e?\"\\n#ifndef HAS_UNIFORM_u_\"+o+\"\\nuniform lowp float a_\"+o+\"_t;\\nattribute \"+n+\" \"+a+\" a_\"+o+\";\\n#else\\nuniform \"+n+\" \"+r+\" u_\"+o+\";\\n#endif\\n\":\"\\n#ifndef HAS_UNIFORM_u_\"+o+\"\\n    \"+n+\" \"+r+\" \"+o+\" = unpack_mix_\"+a+\"(a_\"+o+\", a_\"+o+\"_t);\\n#else\\n    \"+n+\" \"+r+\" \"+o+\" = u_\"+o+\";\\n#endif\\n\"}))})(o);e.exports=n}),{}],87:[(function(t,e,i){\"use strict\";var n=t(\"./image_source\"),r=t(\"../util/window\"),o=(function(t){function e(e,i,n,r){t.call(this,e,i,n,r),this.options=i,this.animate=void 0===i.animate||i.animate}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){this.canvas=this.canvas||r.document.getElementById(this.options.canvas);var t=this.canvas.getContext(this.options.contextType);if(!t)return this.fire(\"error\",new Error(\"Canvas context not found.\"));if(this.context=t,this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions())return this.fire(\"error\",new Error(\"Canvas dimensions cannot be less than or equal to zero.\"));var e;this.play=function(){void 0===e&&(e=this.map.style.animationLoop.set(1/0),this.map._rerender())},this.pause=function(){void 0!==e&&(e=this.map.style.animationLoop.cancel(e))},this._finishLoading()},e.prototype.getCanvas=function(){return this.canvas},e.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},e.prototype.onRemove=function(){this.pause()},e.prototype.readCanvas=function(t){var e=this;if(this.context instanceof CanvasRenderingContext2D)this.canvasData=this.context.getImageData(0,0,this.width,this.height);else if(this.context instanceof WebGLRenderingContext){var i=this.context,n=new Uint8Array(this.width*this.height*4);i.readPixels(0,0,this.width,this.height,i.RGBA,i.UNSIGNED_BYTE,n),this.secondaryContext||(this.secondaryContext=r.document.createElement(\"canvas\").getContext(\"2d\")),this.canvasData&&!t||(this.canvasData=this.secondaryContext.createImageData(this.width,this.height));for(var o=this.height-1,a=0;o>=0;o--,a++)e.canvasData.data.set(n.subarray(o*e.width*4,(o+1)*e.width*4),a*e.width*4)}},e.prototype.prepare=function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){if((this.animate||!this.canvasData||t)&&this.readCanvas(t),!this.canvasData)return void this.fire(\"error\",new Error(\"Could not read canvas data.\"));this._prepareImage(this.map.painter.gl,this.canvasData,t)}},e.prototype.serialize=function(){return{type:\"canvas\",canvas:this.canvas,coordinates:this.coordinates}},e.prototype._hasInvalidDimensions=function(){for(var t=this,e=0,i=[t.canvas.width,t.canvas.height];e<i.length;e+=1){var n=i[e];if(isNaN(n)||n<=0)return!0}return!1},e})(n);e.exports=o}),{\"../util/window\":204,\"./image_source\":91}],88:[(function(t,e,i){\"use strict\";function n(t){var e=a.document.createElement(\"a\");return e.href=t,e.href}var r=t(\"../util/evented\"),o=t(\"../util/util\"),a=t(\"../util/window\"),s=t(\"../data/extent\"),l=t(\"../util/ajax\").ResourceType,u=t(\"../util/browser\"),c=(function(t){function e(e,i,n,r){t.call(this),this.id=e,this.type=\"geojson\",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this.dispatcher=n,this.setEventedParent(r),this._data=i.data,this._options=o.extend({},i),void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type);var a=s/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*a,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*a,extent:s,maxZoom:this.maxzoom},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?Math.min(i.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:s,radius:(i.clusterRadius||50)*a,log:!1}},i.workerOptions)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;this.fire(\"dataloading\",{dataType:\"source\"}),this._updateWorkerData((function(e){if(e)return void t.fire(\"error\",{error:e});t.fire(\"data\",{dataType:\"source\",sourceDataType:\"metadata\"})}))},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.setData=function(t){var e=this;return this._data=t,this.fire(\"dataloading\",{dataType:\"source\"}),this._updateWorkerData((function(t){if(t)return e.fire(\"error\",{error:t});e.fire(\"data\",{dataType:\"source\",sourceDataType:\"content\"})})),this},e.prototype._updateWorkerData=function(t){var e=this,i=o.extend({},this.workerOptions),r=this._data;\"string\"==typeof r?i.request=this.map._transformRequest(n(r),l.Source):i.data=JSON.stringify(r),this.workerID=this.dispatcher.send(this.type+\".loadData\",i,(function(i){e._loaded=!0,t(i)}),this.workerID)},e.prototype.loadTile=function(t,e){var i=this,n=t.workerID&&\"expired\"!==t.state?\"reloadTile\":\"loadTile\",r={type:this.type,uid:t.uid,coord:t.coord,zoom:t.coord.z,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:u.devicePixelRatio,overscaling:t.coord.z>this.maxzoom?Math.pow(2,t.coord.z-this.maxzoom):1,angle:this.map.transform.angle,pitch:this.map.transform.pitch,cameraToCenterDistance:this.map.transform.cameraToCenterDistance,cameraToTileDistance:this.map.transform.cameraToTileDistance(t),showCollisionBoxes:this.map.showCollisionBoxes};t.workerID=this.dispatcher.send(n,r,(function(n,r){if(t.unloadVectorData(),!t.aborted)return n?e(n):(t.loadVectorData(r,i.map.painter),t.redoWhenDone&&(t.redoWhenDone=!1,t.redoPlacement(i)),e(null))}),this.workerID)},e.prototype.abortTile=function(t){t.aborted=!0},e.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send(\"removeTile\",{uid:t.uid,type:this.type,source:this.id},(function(){}),t.workerID)},e.prototype.onRemove=function(){this.dispatcher.broadcast(\"removeSource\",{type:this.type,source:this.id},(function(){}))},e.prototype.serialize=function(){return o.extend({},this._options,{type:this.type,data:this._data})},e})(r);e.exports=c}),{\"../data/extent\":48,\"../util/ajax\":201,\"../util/browser\":202,\"../util/evented\":210,\"../util/util\":223,\"../util/window\":204}],89:[(function(t,e,i){\"use strict\";function n(t,e){var i=t.source,n=t.coord;if(!this._geoJSONIndexes[i])return e(null,null);var r=this._geoJSONIndexes[i].getTile(Math.min(n.z,t.maxZoom),n.x,n.y);if(!r)return e(null,null);var o=new a(r.features),l=s(o);0===l.byteOffset&&l.byteLength===l.buffer.byteLength||(l=new Uint8Array(l)),e(null,{vectorTile:o,rawData:l.buffer})}var r=t(\"../util/ajax\"),o=t(\"geojson-rewind\"),a=t(\"./geojson_wrapper\"),s=t(\"vt-pbf\"),l=t(\"supercluster\"),u=t(\"geojson-vt\"),c=t(\"./vector_tile_worker_source\"),h=(function(t){function e(e,i,r){t.call(this,e,i,n),r&&(this.loadGeoJSON=r),this._geoJSONIndexes={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.loadData=function(t,e){var i=this;this.loadGeoJSON(t,(function(n,r){if(n||!r)return e(n);if(\"object\"!=typeof r)return e(new Error(\"Input data is not a valid GeoJSON object.\"));o(r,!0);try{i._geoJSONIndexes[t.source]=t.cluster?l(t.superclusterOptions).load(r.features):u(r,t.geojsonVtOptions)}catch(n){return e(n)}i.loaded[t.source]={},e(null)}))},e.prototype.reloadTile=function(e,i){var n=this.loaded[e.source],r=e.uid;return n&&n[r]?t.prototype.reloadTile.call(this,e,i):this.loadTile(e,i)},e.prototype.loadGeoJSON=function(t,e){if(t.request)r.getJSON(t.request,e);else{if(\"string\"!=typeof t.data)return e(new Error(\"Input data is not a valid GeoJSON object.\"));try{return e(null,JSON.parse(t.data))}catch(t){return e(new Error(\"Input data is not a valid GeoJSON object.\"))}}},e.prototype.removeSource=function(t){this._geoJSONIndexes[t.source]&&delete this._geoJSONIndexes[t.source]},e})(c);e.exports=h}),{\"../util/ajax\":201,\"./geojson_wrapper\":90,\"./vector_tile_worker_source\":103,\"geojson-rewind\":13,\"geojson-vt\":17,supercluster:32,\"vt-pbf\":37}],90:[(function(t,e,i){\"use strict\";var n=t(\"@mapbox/point-geometry\"),r=t(\"@mapbox/vector-tile\").VectorTileFeature.prototype.toGeoJSON,o=t(\"../data/extent\"),a=function(t){this._feature=t,this.extent=o,this.type=t.type,this.properties=t.tags,\"id\"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))};a.prototype.loadGeometry=function(){var t=this;if(1===this._feature.type){for(var e=[],i=0,r=t._feature.geometry;i<r.length;i+=1){var o=r[i];e.push([new n(o[0],o[1])])}return e}for(var a=[],s=0,l=t._feature.geometry;s<l.length;s+=1){for(var u=l[s],c=[],h=0,p=u;h<p.length;h+=1){var d=p[h];c.push(new n(d[0],d[1]))}a.push(c)}return a},a.prototype.toGeoJSON=function(t,e,i){return r.call(this,t,e,i)};var s=function(t){this.layers={_geojsonTileLayer:this},this.name=\"_geojsonTileLayer\",this.extent=o,this.length=t.length,this._features=t};s.prototype.feature=function(t){return new a(this._features[t])},e.exports=s}),{\"../data/extent\":48,\"@mapbox/point-geometry\":2,\"@mapbox/vector-tile\":6}],91:[(function(t,e,i){\"use strict\";var n=t(\"../util/util\"),r=t(\"../util/window\"),o=t(\"./tile_coord\"),a=t(\"../geo/lng_lat\"),s=t(\"@mapbox/point-geometry\"),l=t(\"../util/evented\"),u=t(\"../util/ajax\"),c=t(\"../util/browser\"),h=t(\"../data/extent\"),p=t(\"../data/raster_bounds_array\"),d=t(\"../gl/vertex_buffer\"),f=t(\"../render/vertex_array_object\"),m=(function(t){function e(e,i,n,r){t.call(this),this.id=e,this.dispatcher=n,this.coordinates=i.coordinates,this.type=\"image\",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(r),this.options=i,this.textureLoaded=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;this.fire(\"dataloading\",{dataType:\"source\"}),this.url=this.options.url,u.getImage(this.map._transformRequest(this.url,u.ResourceType.Image),(function(e,i){e?t.fire(\"error\",{error:e}):i&&(t.image=c.getImageData(i),t._finishLoading())}))},e.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(\"data\",{dataType:\"source\",sourceDataType:\"metadata\"}))},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.setCoordinates=function(t){this.coordinates=t;var e=this.map,i=t.map((function(t){return e.transform.locationCoordinate(a.convert(t)).zoomTo(0)})),r=this.centerCoord=n.getCoordinatesCenter(i);r.column=Math.floor(r.column),r.row=Math.floor(r.row),this.coord=new o(r.zoom,r.column,r.row),this.minzoom=this.maxzoom=r.zoom;var l=i.map((function(t){var e=t.zoomTo(r.zoom);return new s(Math.round((e.column-r.column)*h),Math.round((e.row-r.row)*h))}));return this._boundsArray=new p,this._boundsArray.emplaceBack(l[0].x,l[0].y,0,0),this._boundsArray.emplaceBack(l[1].x,l[1].y,h,0),this._boundsArray.emplaceBack(l[3].x,l[3].y,0,h),this._boundsArray.emplaceBack(l[2].x,l[2].y,h,h),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(\"data\",{dataType:\"source\",sourceDataType:\"content\"}),this},e.prototype.prepare=function(){0!==Object.keys(this.tiles).length&&this.image&&this._prepareImage(this.map.painter.gl,this.image)},e.prototype._prepareImage=function(t,e,i){var n=this;this.boundsBuffer||(this.boundsBuffer=new d(t,this._boundsArray)),this.boundsVAO||(this.boundsVAO=new f),this.textureLoaded?i?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e):(e instanceof r.HTMLVideoElement||e instanceof r.ImageData)&&(t.bindTexture(t.TEXTURE_2D,this.texture),t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,e)):(this.textureLoaded=!0,this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e));for(var o in n.tiles){var a=n.tiles[o];\"loaded\"!==a.state&&(a.state=\"loaded\",a.texture=n.texture)}},e.prototype.loadTile=function(t,e){this.coord&&this.coord.toString()===t.coord.toString()?(this.tiles[String(t.coord.w)]=t,t.buckets={},e(null)):(t.state=\"errored\",e(null))},e.prototype.serialize=function(){return{type:\"image\",url:this.options.url,coordinates:this.coordinates}},e})(l);e.exports=m}),{\"../data/extent\":48,\"../data/raster_bounds_array\":54,\"../geo/lng_lat\":58,\"../gl/vertex_buffer\":62,\"../render/vertex_array_object\":84,\"../util/ajax\":201,\"../util/browser\":202,\"../util/evented\":210,\"../util/util\":223,\"../util/window\":204,\"./tile_coord\":101,\"@mapbox/point-geometry\":2}],92:[(function(t,e,i){\"use strict\";var n=t(\"../util/util\"),r=t(\"../util/ajax\"),o=t(\"../util/browser\"),a=t(\"../util/mapbox\").normalizeSourceURL;e.exports=function(t,e,i){var s=function(t,e){if(t)return i(t);if(e){var r=n.pick(e,[\"tiles\",\"minzoom\",\"maxzoom\",\"attribution\",\"mapbox_logo\",\"bounds\"]);e.vector_layers&&(r.vectorLayers=e.vector_layers,r.vectorLayerIds=r.vectorLayers.map((function(t){return t.id}))),i(null,r)}};t.url?r.getJSON(e(a(t.url),r.ResourceType.Source),s):o.frame((function(){return s(null,t)}))}}),{\"../util/ajax\":201,\"../util/browser\":202,\"../util/mapbox\":217,\"../util/util\":223}],93:[(function(t,e,i){\"use strict\";var n=t(\"../data/extent\");e.exports=function(t,e,i){return e*(n/(t.tileSize*Math.pow(2,i-t.coord.z)))}}),{\"../data/extent\":48}],94:[(function(t,e,i){\"use strict\";function n(t,e){var i=t.coord,n=e.coord;return i.z-n.z||i.y-n.y||i.w-n.w||i.x-n.x}function r(t){for(var e={},i={},n=0,r=t;n<r.length;n+=1){var o=r[n],a=o.queryResults,s=o.wrappedTileID,l=i[s]=i[s]||{};for(var u in a)for(var c=a[u],h=l[u]=l[u]||{},p=e[u]=e[u]||[],d=0,f=c;d<f.length;d+=1){var m=f[d];h[m.featureIndex]||(h[m.featureIndex]=!0,p.push(m.feature))}}return e}var o=t(\"./tile_coord\");i.rendered=function(t,e,i,o,a,s){var l=t.tilesIn(i);l.sort(n);for(var u=[],c=0,h=l;c<h.length;c+=1){var p=h[c];u.push({wrappedTileID:p.coord.wrapped().id,queryResults:p.tile.queryRenderedFeatures(e,p.queryGeometry,p.scale,o,s)})}return r(u)},i.source=function(t,e){for(var i=t.getRenderableIds().map((function(e){return t.getTileByID(e)})),n=[],r={},a=0;a<i.length;a++){var s=i[a],l=new o(Math.min(s.sourceMaxZoom,s.coord.z),s.coord.x,s.coord.y,0).id;r[l]||(r[l]=!0,s.querySourceFeatures(n,e))}return n}}),{\"./tile_coord\":101}],95:[(function(t,e,i){\"use strict\";var n=t(\"../util/util\"),r=t(\"../util/ajax\"),o=t(\"../util/evented\"),a=t(\"./load_tilejson\"),s=t(\"../util/mapbox\").normalizeTileURL,l=t(\"./tile_bounds\"),u=(function(t){function e(e,i,r,o){t.call(this),this.id=e,this.dispatcher=r,this.setEventedParent(o),this.type=\"raster\",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme=\"xyz\",this.tileSize=512,this._loaded=!1,this._options=n.extend({},i),n.extend(this,n.pick(i,[\"url\",\"scheme\",\"tileSize\"]))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;this.fire(\"dataloading\",{dataType:\"source\"}),a(this._options,this.map._transformRequest,(function(e,i){e?t.fire(\"error\",e):i&&(n.extend(t,i),i.bounds&&(t.tileBounds=new l(i.bounds,t.minzoom,t.maxzoom)),t.fire(\"data\",{dataType:\"source\",sourceDataType:\"metadata\"}),t.fire(\"data\",{dataType:\"source\",sourceDataType:\"content\"}))}))},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.serialize=function(){return n.extend({},this._options)},e.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t,this.maxzoom)},e.prototype.loadTile=function(t,e){var i=this,n=s(t.coord.url(this.tiles,null,this.scheme),this.url,this.tileSize);t.request=r.getImage(this.map._transformRequest(n,r.ResourceType.Tile),(function(n,r){if(delete t.request,t.aborted)i.state=\"unloaded\",e(null);else if(n)i.state=\"errored\",e(n);else if(r){i.map._refreshExpiredTiles&&t.setExpiryData(r),delete r.cacheControl,delete r.expires;var o=i.map.painter.gl;t.texture=i.map.painter.getTileTexture(r.width),t.texture?(o.bindTexture(o.TEXTURE_2D,t.texture),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,r)):(t.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,t.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR_MIPMAP_NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),i.map.painter.extTextureFilterAnisotropic&&o.texParameterf(o.TEXTURE_2D,i.map.painter.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,i.map.painter.extTextureFilterAnisotropicMax),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,r),t.texture.size=r.width),o.generateMipmap(o.TEXTURE_2D),t.state=\"loaded\",e(null)}}))},e.prototype.abortTile=function(t){t.request&&(t.request.abort(),delete t.request)},e.prototype.unloadTile=function(t){t.texture&&this.map.painter.saveTileTexture(t.texture)},e})(o);e.exports=u}),{\"../util/ajax\":201,\"../util/evented\":210,\"../util/mapbox\":217,\"../util/util\":223,\"./load_tilejson\":92,\"./tile_bounds\":100}],96:[(function(t,e,i){\"use strict\";var n=t(\"../util/ajax\"),r=t(\"../util/evented\"),o=t(\"../util/window\"),a=!1,s=null;e.exports.evented=new r,e.exports.registerForPluginAvailability=function(t){return s?t({pluginBlobURL:s,errorCallback:e.exports.errorCallback}):e.exports.evented.once(\"pluginAvailable\",t),t},e.exports.createBlobURL=function(t){return o.URL.createObjectURL(new o.Blob([t.data],{type:\"text/javascript\"}))},e.exports.clearRTLTextPlugin=function(){a=!1,s=null},e.exports.setRTLTextPlugin=function(t,i){if(a)throw new Error(\"setRTLTextPlugin cannot be called multiple times.\");a=!0,e.exports.errorCallback=i,n.getArrayBuffer({url:t},(function(t,n){t?i(t):n&&(s=e.exports.createBlobURL(n),e.exports.evented.fire(\"pluginAvailable\",{pluginBlobURL:s,errorCallback:i}))}))},e.exports.applyArabicShaping=null,e.exports.processBidirectionalText=null}),{\"../util/ajax\":201,\"../util/evented\":210,\"../util/window\":204}],97:[(function(t,e,i){\"use strict\";var n=t(\"../util/util\"),r={vector:t(\"../source/vector_tile_source\"),raster:t(\"../source/raster_tile_source\"),geojson:t(\"../source/geojson_source\"),video:t(\"../source/video_source\"),image:t(\"../source/image_source\"),canvas:t(\"../source/canvas_source\")};i.create=function(t,e,i,o){var a=new r[e.type](t,e,i,o);if(a.id!==t)throw new Error(\"Expected Source id to be \"+t+\" instead of \"+a.id);return n.bindAll([\"load\",\"abort\",\"unload\",\"serialize\",\"prepare\"],a),a},i.getType=function(t){return r[t]},i.setType=function(t,e){r[t]=e}}),{\"../source/canvas_source\":87,\"../source/geojson_source\":88,\"../source/image_source\":91,\"../source/raster_tile_source\":95,\"../source/vector_tile_source\":102,\"../source/video_source\":104,\"../util/util\":223}],98:[(function(t,e,i){\"use strict\";function n(t,e,i){var n=i.zoomTo(Math.min(t.z,e));return new f((n.column-(t.x+t.w*Math.pow(2,t.z)))*d,(n.row-t.y)*d)}function r(t,e){return t%32-e%32}function o(t){return\"raster\"===t||\"image\"===t||\"video\"===t}var a=t(\"./source\").create,s=t(\"./tile\"),l=t(\"../util/evented\"),u=t(\"./tile_coord\"),c=t(\"../util/lru_cache\"),h=t(\"../geo/coordinate\"),p=t(\"../util/util\"),d=t(\"../data/extent\"),f=t(\"@mapbox/point-geometry\"),m=(function(t){function e(e,i,n){var r=this;t.call(this),this.id=e,this.dispatcher=n,this.on(\"data\",(function(t){\"source\"===t.dataType&&\"metadata\"===t.sourceDataType&&(r._sourceLoaded=!0),r._sourceLoaded&&!r._paused&&\"source\"===t.dataType&&\"content\"===t.sourceDataType&&(r.reload(),r.transform&&r.update(r.transform))})),this.on(\"error\",(function(){r._sourceErrored=!0})),this._source=a(e,i,n,this),this._tiles={},this._cache=new c(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._isIdRenderable=this._isIdRenderable.bind(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},e.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},e.prototype.loaded=function(){var t=this;if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var e in t._tiles){var i=t._tiles[e];if(\"loaded\"!==i.state&&\"errored\"!==i.state)return!1}return!0},e.prototype.getSource=function(){return this._source},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},e.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},e.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t)},e.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t)},e.prototype.serialize=function(){return this._source.serialize()},e.prototype.prepare=function(t){var e=this;this._source.prepare&&this._source.prepare();for(var i in e._tiles)e._tiles[i].upload(t)},e.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(r)},e.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},e.prototype._isIdRenderable=function(t){return this._tiles[t].hasData()&&!this._coveredTiles[t]},e.prototype.reload=function(){var t=this;if(this._paused)return void(this._shouldReloadOnResume=!0);this._cache.reset();for(var e in t._tiles)t._reloadTile(e,\"reloading\")},e.prototype._reloadTile=function(t,e){var i=this._tiles[t];i&&(\"loading\"!==i.state&&(i.state=e),this._loadTile(i,this._tileLoaded.bind(this,i,t,e)))},e.prototype._tileLoaded=function(t,e,i,n){if(n)return t.state=\"errored\",void(404!==n.status?this._source.fire(\"error\",{tile:t,error:n}):this.update(this.transform));t.timeAdded=(new Date).getTime(),\"expired\"===i&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),this._source.fire(\"data\",{dataType:\"source\",tile:t,coord:t.coord}),this.map&&(this.map.painter.tileExtentVAO.vao=null)},e.prototype.getTile=function(t){return this.getTileByID(t.id)},e.prototype.getTileByID=function(t){return this._tiles[t]},e.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},e.prototype._findLoadedChildren=function(t,e,i){var n=this,r=!1;for(var o in n._tiles){var a=n._tiles[o];if(!(i[o]||!a.hasData()||a.coord.z<=t.z||a.coord.z>e)){var s=Math.pow(2,Math.min(a.coord.z,n._source.maxzoom)-Math.min(t.z,n._source.maxzoom));if(Math.floor(a.coord.x/s)===t.x&&Math.floor(a.coord.y/s)===t.y)for(i[o]=!0,r=!0;a&&a.coord.z-1>t.z;){var l=a.coord.parent(n._source.maxzoom);if(!l)break;(a=n._tiles[l.id])&&a.hasData()&&(delete i[o],i[l.id]=!0)}}}return r},e.prototype.findLoadedParent=function(t,e,i){for(var n=this,r=t.z-1;r>=e;r--){var o=t.parent(n._source.maxzoom);if(!o)return;t=o;var a=String(t.id),s=n._tiles[a];if(s&&s.hasData())return i[a]=!0,s;if(n._cache.has(a))return i[a]=!0,n._cache.getWithoutRemoving(a)}},e.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/t.tileSize)+1,i=Math.ceil(t.height/t.tileSize)+1,n=e*i,r=Math.floor(5*n),o=\"number\"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(o)},e.prototype.update=function(t){var i=this;if(this.transform=t,this._sourceLoaded&&!this._paused){this.updateCacheSize(t),this._coveredTiles={};var n;this.used?this._source.coord?n=t.getVisibleWrappedCoordinates(this._source.coord):(n=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(n=n.filter((function(t){return i._source.hasTile(t)})))):n=[];var r=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(t)),a=Math.max(r-e.maxOverzooming,this._source.minzoom),s=Math.max(r+e.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(n,r),c={};if(o(this._source.type))for(var h=Object.keys(l),d=0;d<h.length;d++){var f=h[d],m=u.fromID(+f),_=i._tiles[f];if(_&&(void 0===_.fadeEndTime||_.fadeEndTime>=Date.now())){i._findLoadedChildren(m,s,l)&&(l[f]=!0);var y=i.findLoadedParent(m,a,c);y&&i._addTile(y.coord)}}var g;for(g in c)l[g]||(i._coveredTiles[g]=!0);for(g in c)l[g]=!0;for(var v=p.keysDifference(this._tiles,l),x=0;x<v.length;x++)i._removeTile(v[x])}},e.prototype._updateRetainedTiles=function(t,i){var n,r,o,a,s=this,l={},u={},c=Math.max(i-e.maxOverzooming,this._source.minzoom);for(n=0;n<t.length;n++){r=t[n],o=s._addTile(r);var h=!1;if(o.hasData())l[r.id]=!0;else{if(h=o.wasRequested(),l[r.id]=!0,a=!0,i+1>s._source.maxzoom){var p=r.children(s._source.maxzoom)[0],d=s.getTile(p);d&&d.hasData()?l[p.id]=!0:a=!1}else for(var f=r.children(s._source.maxzoom),m=0;m<f.length;m++){var _=f[m],y=_?s.getTile(_):null;y&&y.hasData()?l[_.id]=!0:a=!1}if(!a)for(var g=i-1;g>=c;--g){var v=r.scaledTo(g,s._source.maxzoom);if(u[v.id])break;if(u[v.id]=!0,o=s.getTile(v),!o&&h&&(o=s._addTile(v)),o&&(l[v.id]=!0,h=o.wasRequested(),o.hasData()))break}}}return l},e.prototype._addTile=function(t){var e=this._tiles[t.id];if(e)return e;(e=this._cache.get(t.id))&&(e.redoPlacement(this._source),this._cacheTimers[t.id]&&(clearTimeout(this._cacheTimers[t.id]),delete this._cacheTimers[t.id],this._setTileReloadTimer(t.id,e)));var i=Boolean(e);if(!i){var n=t.z,r=n>this._source.maxzoom?Math.pow(2,n-this._source.maxzoom):1;e=new s(t,this._source.tileSize*r,this._source.maxzoom),this._loadTile(e,this._tileLoaded.bind(this,e,t.id,e.state))}return e?(e.uses++,this._tiles[t.id]=e,i||this._source.fire(\"dataloading\",{tile:e,coord:e.coord,dataType:\"source\"}),e):null},e.prototype._setTileReloadTimer=function(t,e){var i=this,n=e.getExpiryTimeout();n&&(this._timers[t]=setTimeout((function(){i._reloadTile(t,\"expired\"),delete i._timers[t]}),n))},e.prototype._setCacheInvalidationTimer=function(t,e){var i=this,n=e.getExpiryTimeout();n&&(this._cacheTimers[t]=setTimeout((function(){i._cache.remove(t),delete i._cacheTimers[t]}),n))},e.prototype._removeTile=function(t){var e=this._tiles[t];if(e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),!(e.uses>0)))if(e.stopPlacementThrottler(),e.hasData()){var i=e.coord.wrapped().id;this._cache.add(i,e),this._setCacheInvalidationTimer(i,e)}else e.aborted=!0,this._abortTile(e),this._unloadTile(e)},e.prototype.clearTiles=function(){var t=this;this._shouldReloadOnResume=!1,this._paused=!1;for(var e in t._tiles)t._removeTile(e);this._cache.reset()},e.prototype.tilesIn=function(t){for(var e=this,i=[],r=this.getIds(),o=1/0,a=1/0,s=-1/0,l=-1/0,c=t[0].zoom,p=0;p<t.length;p++){var f=t[p];o=Math.min(o,f.column),a=Math.min(a,f.row),s=Math.max(s,f.column),l=Math.max(l,f.row)}for(var m=0;m<r.length;m++){var _=e._tiles[r[m]],y=u.fromID(r[m]),g=[n(y,_.sourceMaxZoom,new h(o,a,c)),n(y,_.sourceMaxZoom,new h(s,l,c))];if(g[0].x<d&&g[0].y<d&&g[1].x>=0&&g[1].y>=0){for(var v=[],x=0;x<t.length;x++)v.push(n(y,_.sourceMaxZoom,t[x]));i.push({tile:_,coord:y,queryGeometry:[v],scale:Math.pow(2,e.transform.zoom-_.coord.z)})}}return i},e.prototype.redoPlacement=function(){for(var t=this,e=this.getIds(),i=0;i<e.length;i++)t.getTileByID(e[i]).redoPlacement(t._source)},e.prototype.getVisibleCoordinates=function(){for(var t=this,e=this.getRenderableIds().map(u.fromID),i=0,n=e;i<n.length;i+=1){var r=n[i];r.posMatrix=t.transform.calculatePosMatrix(r,t._source.maxzoom)}return e},e})(l);m.maxOverzooming=10,m.maxUnderzooming=3,e.exports=m}),{\"../data/extent\":48,\"../geo/coordinate\":57,\"../util/evented\":210,\"../util/lru_cache\":216,\"../util/util\":223,\"./source\":97,\"./tile\":99,\"./tile_coord\":101,\"@mapbox/point-geometry\":2}],99:[(function(t,e,i){\"use strict\";var n=t(\"../util/util\"),r=t(\"../data/bucket\").deserialize,o=t(\"../data/bucket/symbol_bucket\"),a=t(\"../data/feature_index\"),s=t(\"@mapbox/vector-tile\"),l=t(\"pbf\"),u=t(\"../util/vectortile_to_geojson\"),c=t(\"../style-spec/feature_filter\"),h=t(\"../symbol/collision_tile\"),p=t(\"../symbol/collision_box\"),d=t(\"../util/throttler\"),f=t(\"../render/texture\"),m=function(t,e,i){this.coord=t,this.uid=n.uniqueId(),this.uses=0,this.tileSize=e,this.sourceMaxZoom=i,this.buckets={},this.expirationTime=null,this.expiredRequestCount=0,this.state=\"loading\",this.placementThrottler=new d(300,this._immediateRedoPlacement.bind(this))};m.prototype.registerFadeDuration=function(t,e){var i=e+this.timeAdded;i<Date.now()||this.fadeEndTime&&i<this.fadeEndTime||(this.fadeEndTime=i,t.set(this.fadeEndTime-Date.now()))},m.prototype.wasRequested=function(){return\"errored\"===this.state||\"loaded\"===this.state||\"reloading\"===this.state},m.prototype.loadVectorData=function(t,e){this.hasData()&&this.unloadVectorData(),this.state=\"loaded\",t&&(t.rawTileData&&(this.rawTileData=t.rawTileData),this.collisionBoxArray=new p(t.collisionBoxArray),this.collisionTile=h.deserialize(t.collisionTile,this.collisionBoxArray),this.featureIndex=a.deserialize(t.featureIndex,this.rawTileData,this.collisionTile),this.buckets=r(t.buckets,e.style),t.iconAtlasImage&&(this.iconAtlasImage=t.iconAtlasImage),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage))},m.prototype.reloadSymbolData=function(t,e){var i=this;if(\"unloaded\"!==this.state){this.collisionTile=h.deserialize(t.collisionTile,this.collisionBoxArray),this.featureIndex&&this.featureIndex.setCollisionTile(this.collisionTile);for(var a in i.buckets){var s=i.buckets[a];s instanceof o&&(s.destroy(),delete i.buckets[a])}n.extend(this.buckets,r(t.buckets,e)),t.iconAtlasImage&&(this.iconAtlasImage=t.iconAtlasImage),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}},m.prototype.unloadVectorData=function(){var t=this;for(var e in t.buckets)t.buckets[e].destroy();this.buckets={},this.iconAtlasTexture&&this.iconAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.collisionBoxArray=null,this.collisionTile=null,this.featureIndex=null,this.state=\"unloaded\"},m.prototype.redoPlacement=function(t){if(\"vector\"===t.type||\"geojson\"===t.type){if(\"loaded\"!==this.state)return void(this.redoWhenDone=!0);if(this.collisionTile){var e=t.map.transform.cameraToTileDistance(this);if(this.angle===t.map.transform.angle&&this.pitch===t.map.transform.pitch&&this.showCollisionBoxes===t.map.showCollisionBoxes){if(this.cameraToTileDistance===e&&this.cameraToCenterDistance===t.map.transform.cameraToCenterDistance)return;if(this.pitch<25)return this.cameraToTileDistance=e,void(this.cameraToCenterDistance=t.map.transform.cameraToCenterDistance)}this.angle=t.map.transform.angle,this.pitch=t.map.transform.pitch,this.cameraToCenterDistance=t.map.transform.cameraToCenterDistance,this.cameraToTileDistance=e,this.showCollisionBoxes=t.map.showCollisionBoxes,this.placementSource=t,this.state=\"reloading\",this.placementThrottler.invoke()}}},m.prototype._immediateRedoPlacement=function(){var t=this;this.placementSource.dispatcher.send(\"redoPlacement\",{type:this.placementSource.type,uid:this.uid,source:this.placementSource.id,angle:this.angle,pitch:this.pitch,cameraToCenterDistance:this.cameraToCenterDistance,cameraToTileDistance:this.cameraToTileDistance,showCollisionBoxes:this.showCollisionBoxes},(function(e,i){\"reloading\"===t.state&&(t.state=\"loaded\",t.reloadSymbolData(i,t.placementSource.map.style),t.placementSource.fire(\"data\",{tile:t,coord:t.coord,dataType:\"source\"}),t.placementSource.map&&(t.placementSource.map.painter.tileExtentVAO.vao=null),t.redoWhenDone&&(t.state=\"reloading\",t.redoWhenDone=!1,t._immediateRedoPlacement()))}),this.workerID)},m.prototype.getBucket=function(t){return this.buckets[t.id]},m.prototype.upload=function(t){var e=this;for(var i in e.buckets){var n=e.buckets[i];n.uploaded||(n.upload(t),n.uploaded=!0)}this.iconAtlasImage&&(this.iconAtlasTexture=new f(t,this.iconAtlasImage,t.RGBA),this.iconAtlasImage=null),this.glyphAtlasImage&&(this.glyphAtlasTexture=new f(t,this.glyphAtlasImage,t.ALPHA),this.glyphAtlasImage=null)},m.prototype.queryRenderedFeatures=function(t,e,i,n,r){var o=this;if(!this.featureIndex)return{};var a=0;for(var s in t){var l=o.getBucket(t[s]);l&&(a=Math.max(a,t[s].queryRadius(l)))}return this.featureIndex.query({queryGeometry:e,bearing:r,params:n,scale:i,additionalRadius:a,tileSize:this.tileSize},t)},m.prototype.querySourceFeatures=function(t,e){var i=this;if(this.rawTileData){this.vtLayers||(this.vtLayers=new s.VectorTile(new l(this.rawTileData)).layers);var n=e?e.sourceLayer:\"\",r=this.vtLayers._geojsonTileLayer||this.vtLayers[n];if(r)for(var o=c(e&&e.filter),a={z:this.coord.z,x:this.coord.x,y:this.coord.y},h=0;h<r.length;h++){var p=r.feature(h);if(o(p)){var d=new u(p,i.coord.z,i.coord.x,i.coord.y);d.tile=a,t.push(d)}}}},m.prototype.hasData=function(){return\"loaded\"===this.state||\"reloading\"===this.state||\"expired\"===this.state},m.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var i=n.parseCacheControl(t.cacheControl);i[\"max-age\"]&&(this.expirationTime=Date.now()+1e3*i[\"max-age\"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var r=Date.now(),o=!1;if(this.expirationTime>r)o=!1;else if(e)if(this.expirationTime<e)o=!0;else{var a=this.expirationTime-e;a?this.expirationTime=r+Math.max(a,3e4):o=!0}else o=!0;o?(this.expiredRequestCount++,this.state=\"expired\"):this.expiredRequestCount=0}},m.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},m.prototype.stopPlacementThrottler=function(){this.placementThrottler.stop(),\"reloading\"===this.state&&(this.state=\"loaded\")},e.exports=m}),{\"../data/bucket\":42,\"../data/bucket/symbol_bucket\":47,\"../data/feature_index\":49,\"../render/texture\":83,\"../style-spec/feature_filter\":110,\"../symbol/collision_box\":170,\"../symbol/collision_tile\":172,\"../util/throttler\":221,\"../util/util\":223,\"../util/vectortile_to_geojson\":224,\"@mapbox/vector-tile\":6,pbf:29}],100:[(function(t,e,i){\"use strict\";var n=t(\"../geo/lng_lat_bounds\"),r=t(\"../util/util\").clamp,o=function(t,e,i){this.bounds=n.convert(this.validateBounds(t)),this.minzoom=e||0,this.maxzoom=i||24};o.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},o.prototype.contains=function(t,e){var i=e?Math.min(t.z,e):t.z,n={minX:Math.floor(this.lngX(this.bounds.getWest(),i)),minY:Math.floor(this.latY(this.bounds.getNorth(),i)),maxX:Math.ceil(this.lngX(this.bounds.getEast(),i)),maxY:Math.ceil(this.latY(this.bounds.getSouth(),i))};return t.x>=n.minX&&t.x<n.maxX&&t.y>=n.minY&&t.y<n.maxY},o.prototype.lngX=function(t,e){return(t+180)*(Math.pow(2,e)/360)},o.prototype.latY=function(t,e){var i=r(Math.sin(Math.PI/180*t),-.9999,.9999),n=Math.pow(2,e)/(2*Math.PI);return Math.pow(2,e-1)+.5*Math.log((1+i)/(1-i))*-n},e.exports=o}),{\"../geo/lng_lat_bounds\":59,\"../util/util\":223}],101:[(function(t,e,i){\"use strict\";function n(t,e){if(t.row>e.row){var i=t;t=e,e=i}return{x0:t.column,y0:t.row,x1:e.column,y1:e.row,dx:e.column-t.column,dy:e.row-t.row}}function r(t,e,i,n,r){var o=Math.max(i,Math.floor(e.y0)),a=Math.min(n,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s}for(var l=t.dx/t.dy,u=e.dx/e.dy,c=t.dx>0,h=e.dx<0,p=o;p<a;p++){var d=l*Math.max(0,Math.min(t.dy,p+c-t.y0))+t.x0,f=u*Math.max(0,Math.min(e.dy,p+h-e.y0))+e.x0;r(Math.floor(f),Math.ceil(d),p)}}function o(t,e,i,o,a,s){var l,u=n(t,e),c=n(e,i),h=n(i,t);u.dy>c.dy&&(l=u,u=c,c=l),u.dy>h.dy&&(l=u,u=h,h=l),c.dy>h.dy&&(l=c,c=h,h=l),u.dy&&r(h,u,o,a,s),c.dy&&r(h,c,o,a,s)}function a(t,e,i){for(var n,r=\"\",o=t;o>0;o--)n=1<<o-1,r+=(e&n?1:0)+(i&n?2:0);return r}var s=t(\"@mapbox/whoots-js\"),l=t(\"../geo/coordinate\"),u=function(t,e,i,n){(void 0===n||isNaN(n))&&(n=0),this.z=+t,this.x=+e,this.y=+i,this.w=+n,(n*=2)<0&&(n=-1*n-1);var r=1<<this.z;this.id=32*(r*r*n+r*this.y+this.x)+this.z,this.posMatrix=null};u.prototype.toString=function(){return this.z+\"/\"+this.x+\"/\"+this.y},u.prototype.toCoordinate=function(t){var e=Math.min(this.z,void 0===t?this.z:t),i=Math.pow(2,e),n=this.y,r=this.x+i*this.w;return new l(r,n,e)},u.prototype.url=function(t,e,i){var n=s.getTileBBox(this.x,this.y,this.z),r=a(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(\"{prefix}\",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(\"{z}\",String(Math.min(this.z,e||this.z))).replace(\"{x}\",String(this.x)).replace(\"{y}\",String(\"tms\"===i?Math.pow(2,this.z)-this.y-1:this.y)).replace(\"{quadkey}\",r).replace(\"{bbox-epsg-3857}\",n)},u.prototype.parent=function(t){return 0===this.z?null:this.z>t?new u(this.z-1,this.x,this.y,this.w):new u(this.z-1,Math.floor(this.x/2),Math.floor(this.y/2),this.w)},u.prototype.wrapped=function(){return new u(this.z,this.x,this.y,0)},u.prototype.children=function(t){if(this.z>=t)return[new u(this.z+1,this.x,this.y,this.w)];var e=this.z+1,i=2*this.x,n=2*this.y;return[new u(e,i,n,this.w),new u(e,i+1,n,this.w),new u(e,i,n+1,this.w),new u(e,i+1,n+1,this.w)]},u.prototype.scaledTo=function(t,e){return this.z>e?new u(t,this.x,this.y,this.w):t<=this.z?new u(t,this.x>>this.z-t,this.y>>this.z-t,this.w):new u(t,this.x<<t-this.z,this.y<<t-this.z,this.w)},u.cover=function(t,e,i,n){function r(t,e,r){var o,l,c,h;if(r>=0&&r<=a)for(o=t;o<e;o++)l=Math.floor(o/a),c=(o%a+a)%a,0!==l&&!0!==n||(h=new u(i,c,r,l),s[h.id]=h)}void 0===n&&(n=!0);var a=1<<t,s={};return o(e[0],e[1],e[2],0,a,r),o(e[2],e[3],e[0],0,a,r),Object.keys(s).map((function(t){return s[t]}))},u.fromID=function(t){var e=t%32,i=1<<e,n=(t-e)/32,r=n%i,o=(n-r)/i%i,a=Math.floor(n/(i*i));return a%2!=0&&(a=-1*a-1),a/=2,new u(e,r,o,a)},e.exports=u}),{\"../geo/coordinate\":57,\"@mapbox/whoots-js\":10}],102:[(function(t,e,i){\"use strict\";var n=t(\"../util/evented\"),r=t(\"../util/util\"),o=t(\"./load_tilejson\"),a=t(\"../util/mapbox\").normalizeTileURL,s=t(\"./tile_bounds\"),l=t(\"../util/ajax\").ResourceType,u=t(\"../util/browser\"),c=(function(t){function e(e,i,n,o){if(t.call(this),this.id=e,this.dispatcher=n,this.type=\"vector\",this.minzoom=0,this.maxzoom=22,this.scheme=\"xyz\",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,r.extend(this,r.pick(i,[\"url\",\"scheme\",\"tileSize\"])),this._options=r.extend({type:\"vector\"},i),512!==this.tileSize)throw new Error(\"vector tile sources must have a tileSize of 512\");this.setEventedParent(o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;this.fire(\"dataloading\",{dataType:\"source\"}),o(this._options,this.map._transformRequest,(function(e,i){e?t.fire(\"error\",e):i&&(r.extend(t,i),i.bounds&&(t.tileBounds=new s(i.bounds,t.minzoom,t.maxzoom)),t.fire(\"data\",{dataType:\"source\",sourceDataType:\"metadata\"}),t.fire(\"data\",{dataType:\"source\",sourceDataType:\"content\"}))}))},e.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t,this.maxzoom)},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.serialize=function(){return r.extend({},this._options)},e.prototype.loadTile=function(t,e){function i(i,n){if(!t.aborted){if(i)return e(i);this.map._refreshExpiredTiles&&t.setExpiryData(n),t.loadVectorData(n,this.map.painter),t.redoWhenDone&&(t.redoWhenDone=!1,t.redoPlacement(this)),e(null),t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)}}var n=t.coord.z>this.maxzoom?Math.pow(2,t.coord.z-this.maxzoom):1,r=a(t.coord.url(this.tiles,this.maxzoom,this.scheme),this.url),o={request:this.map._transformRequest(r,l.Tile),uid:t.uid,coord:t.coord,zoom:t.coord.z,tileSize:this.tileSize*n,type:this.type,source:this.id,pixelRatio:u.devicePixelRatio,overscaling:n,angle:this.map.transform.angle,pitch:this.map.transform.pitch,cameraToCenterDistance:this.map.transform.cameraToCenterDistance,cameraToTileDistance:this.map.transform.cameraToTileDistance(t),showCollisionBoxes:this.map.showCollisionBoxes};t.workerID&&\"expired\"!==t.state?\"loading\"===t.state?t.reloadCallback=e:this.dispatcher.send(\"reloadTile\",o,i.bind(this),t.workerID):t.workerID=this.dispatcher.send(\"loadTile\",o,i.bind(this))},e.prototype.abortTile=function(t){this.dispatcher.send(\"abortTile\",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},e.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send(\"removeTile\",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},e})(n);e.exports=c}),{\"../util/ajax\":201,\"../util/browser\":202,\"../util/evented\":210,\"../util/mapbox\":217,\"../util/util\":223,\"./load_tilejson\":92,\"./tile_bounds\":100}],103:[(function(t,e,i){\"use strict\";function n(t,e){var i=r.getArrayBuffer(t.request,(function(t,i){t?e(t):i&&e(null,{vectorTile:new o.VectorTile(new a(i.data)),rawData:i.data,cacheControl:i.cacheControl,expires:i.expires})}));return function(){i.abort()}}var r=t(\"../util/ajax\"),o=t(\"@mapbox/vector-tile\"),a=t(\"pbf\"),s=t(\"./worker_tile\"),l=t(\"../util/util\"),u=function(t,e,i){this.actor=t,this.layerIndex=e,this.loadVectorData=i||n,this.loading={},this.loaded={}};u.prototype.loadTile=function(t,e){var i=this,n=t.source,r=t.uid;this.loading[n]||(this.loading[n]={});var o=this.loading[n][r]=new s(t);o.abort=this.loadVectorData(t,(function(t,a){if(delete i.loading[n][r],t||!a)return e(t);var s=a.rawData,u={};a.expires&&(u.expires=a.expires),a.cacheControl&&(u.cacheControl=a.cacheControl),o.vectorTile=a.vectorTile,o.parse(a.vectorTile,i.layerIndex,i.actor,(function(t,i,n){if(t||!i)return e(t);e(null,l.extend({rawTileData:s},i,u),n)})),i.loaded[n]=i.loaded[n]||{},i.loaded[n][r]=o}))},u.prototype.reloadTile=function(t,e){function i(t,i){if(this.reloadCallback){var n=this.reloadCallback;delete this.reloadCallback,this.parse(this.vectorTile,o.layerIndex,o.actor,n)}e(t,i)}var n=this.loaded[t.source],r=t.uid,o=this;if(n&&n[r]){var a=n[r];\"parsing\"===a.status?a.reloadCallback=e:\"done\"===a.status&&a.parse(a.vectorTile,this.layerIndex,this.actor,i.bind(a))}},u.prototype.abortTile=function(t){var e=this.loading[t.source],i=t.uid;e&&e[i]&&e[i].abort&&(e[i].abort(),delete e[i])},u.prototype.removeTile=function(t){var e=this.loaded[t.source],i=t.uid;e&&e[i]&&delete e[i]},u.prototype.redoPlacement=function(t,e){var i=this.loaded[t.source],n=this.loading[t.source],r=t.uid;if(i&&i[r]){var o=i[r],a=o.redoPlacement(t.angle,t.pitch,t.cameraToCenterDistance,t.cameraToTileDistance,t.showCollisionBoxes);a.result&&e(null,a.result,a.transferables)}else n&&n[r]&&(n[r].angle=t.angle)},e.exports=u}),{\"../util/ajax\":201,\"../util/util\":223,\"./worker_tile\":106,\"@mapbox/vector-tile\":6,pbf:29}],104:[(function(t,e,i){\"use strict\";var n=t(\"../util/ajax\"),r=t(\"./image_source\"),o=(function(t){function e(e,i,n,r){t.call(this,e,i,n,r),this.roundZoom=!0,this.type=\"video\",this.options=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this,e=this.options;this.urls=e.urls,n.getVideo(e.urls,(function(e,i){if(e)t.fire(\"error\",{error:e});else if(i){t.video=i,t.video.loop=!0;var n;t.video.addEventListener(\"playing\",(function(){n=t.map.style.animationLoop.set(1/0),t.map._rerender()})),t.video.addEventListener(\"pause\",(function(){t.map.style.animationLoop.cancel(n)})),t.map&&t.video.play(),t._finishLoading()}}))},e.prototype.getVideo=function(){return this.video},e.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},e.prototype.prepare=function(){0===Object.keys(this.tiles).length||this.video.readyState<2||this._prepareImage(this.map.painter.gl,this.video)},e.prototype.serialize=function(){return{type:\"video\",urls:this.urls,coordinates:this.coordinates}},e})(r);e.exports=o}),{\"../util/ajax\":201,\"./image_source\":91}],105:[(function(t,e,i){\"use strict\";var n=t(\"../util/actor\"),r=t(\"../style/style_layer_index\"),o=t(\"./vector_tile_worker_source\"),a=t(\"./geojson_worker_source\"),s=t(\"./rtl_text_plugin\"),l=function(t){var e=this;this.self=t,this.actor=new n(t,this),this.layerIndexes={},this.workerSourceTypes={vector:o,geojson:a},this.workerSources={},this.self.registerWorkerSource=function(t,i){if(e.workerSourceTypes[t])throw new Error('Worker source with name \"'+t+'\" already registered.');e.workerSourceTypes[t]=i},this.self.registerRTLTextPlugin=function(t){if(s.applyArabicShaping||s.processBidirectionalText)throw new Error(\"RTL text plugin already registered.\");s.applyArabicShaping=t.applyArabicShaping,s.processBidirectionalText=t.processBidirectionalText}};l.prototype.setLayers=function(t,e){this.getLayerIndex(t).replace(e)},l.prototype.updateLayers=function(t,e){this.getLayerIndex(t).update(e.layers,e.removedIds,e.symbolOrder)},l.prototype.loadTile=function(t,e,i){this.getWorkerSource(t,e.type).loadTile(e,i)},l.prototype.reloadTile=function(t,e,i){this.getWorkerSource(t,e.type).reloadTile(e,i)},l.prototype.abortTile=function(t,e){this.getWorkerSource(t,e.type).abortTile(e)},l.prototype.removeTile=function(t,e){this.getWorkerSource(t,e.type).removeTile(e)},l.prototype.removeSource=function(t,e){var i=this.getWorkerSource(t,e.type);void 0!==i.removeSource&&i.removeSource(e)},l.prototype.redoPlacement=function(t,e,i){this.getWorkerSource(t,e.type).redoPlacement(e,i)},l.prototype.loadWorkerSource=function(t,e,i){try{this.self.importScripts(e.url),i()}catch(t){i(t)}},l.prototype.loadRTLTextPlugin=function(t,e,i){try{s.applyArabicShaping||s.processBidirectionalText||(this.self.importScripts(e),s.applyArabicShaping&&s.processBidirectionalText||i(new Error(\"RTL Text Plugin failed to import scripts from \"+e)))}catch(t){i(t)}},l.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new r),e},l.prototype.getWorkerSource=function(t,e){var i=this;if(this.workerSources[t]||(this.workerSources[t]={}),!this.workerSources[t][e]){var n={send:function(e,n,r,o){i.actor.send(e,n,r,o,t)}};this.workerSources[t][e]=new this.workerSourceTypes[e](n,this.getLayerIndex(t))}return this.workerSources[t][e]},e.exports=function(t){return new l(t)}}),{\"../style/style_layer_index\":164,\"../util/actor\":200,\"./geojson_worker_source\":89,\"./rtl_text_plugin\":96,\"./vector_tile_worker_source\":103}],106:[(function(t,e,i){\"use strict\";function n(t,e){for(var i=0,n=t.layers;i<n.length;i+=1)n[i].recalculate(e)}function r(t,e){return t.filter((function(t){return!t.isEmpty()})).map((function(t){return t.serialize(e)}))}var o=t(\"../data/feature_index\"),a=t(\"../symbol/collision_tile\"),s=t(\"../symbol/collision_box\"),l=t(\"../util/dictionary_coder\"),u=(t(\"../data/bucket/symbol_bucket\"),t(\"../util/util\")),c=t(\"../render/image_atlas\"),h=c.makeImageAtlas,p=t(\"../render/glyph_atlas\"),d=p.makeGlyphAtlas,f=function(t){this.coord=t.coord,this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=t.overscaling,this.angle=t.angle,this.pitch=t.pitch,this.cameraToCenterDistance=t.cameraToCenterDistance,this.cameraToTileDistance=t.cameraToTileDistance,this.showCollisionBoxes=t.showCollisionBoxes};f.prototype.parse=function(t,e,i,c){function p(){var t=this;if(D)return c(D);if(k&&O){for(var e=new a(this.angle,this.pitch,this.cameraToCenterDistance,this.cameraToTileDistance,this.collisionBoxArray),i=d(k),o=h(O),s=0,l=t.symbolBuckets;s<l.length;s+=1){var p=l[s];n(p,t.zoom),p.prepare(k,i.positions,O,o.positions),p.place(e,t.showCollisionBoxes)}this.status=\"done\";var f=[i.image.data.buffer,o.image.data.buffer];c(null,{buckets:r(u.values(y),f),featureIndex:_.serialize(f),collisionTile:e.serialize(f),collisionBoxArray:this.collisionBoxArray.serialize(),glyphAtlasImage:i.image,iconAtlasImage:o.image},f)}}var f=this;this.status=\"parsing\",this.data=t,this.collisionBoxArray=new s;var m=new l(Object.keys(t.layers).sort()),_=new o(this.coord,this.overscaling);_.bucketLayerIDs=[];var y={},g={featureIndex:_,iconDependencies:{},glyphDependencies:{}},v=e.familiesBySource[this.source];for(var x in v){var b=t.layers[x];if(b){1===b.version&&u.warnOnce('Vector tile source \"'+f.source+'\" layer \"'+x+'\" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var w=m.encode(x),E=[],C=0;C<b.length;C++){var T=b.feature(C);E.push({feature:T,index:C,sourceLayerIndex:w})}for(var S=0,A=v[x];S<A.length;S+=1){var L=A[S],I=L[0];if(!(I.minzoom&&f.zoom<Math.floor(I.minzoom))&&!(I.maxzoom&&f.zoom>=I.maxzoom||I.layout&&\"none\"===I.layout.visibility)){for(var M=0,z=L;M<z.length;M+=1)z[M].recalculate(f.zoom);(y[I.id]=I.createBucket({index:_.bucketLayerIDs.length,layers:L,zoom:f.zoom,pixelRatio:f.pixelRatio,overscaling:f.overscaling,collisionBoxArray:f.collisionBoxArray})).populate(E,g),_.bucketLayerIDs.push(L.map((function(t){return t.id})))}}}}this.symbolBuckets=[];for(var P=e.symbolOrder.length-1;P>=0;P--){var R=y[e.symbolOrder[P]];R&&f.symbolBuckets.push(R)}var D,k,O,N=u.mapObject(g.glyphDependencies,(function(t){return Object.keys(t).map(Number)}));Object.keys(N).length?i.send(\"getGlyphs\",{uid:this.uid,stacks:N},(function(t,e){D||(D=t,k=e,p.call(f))})):k={};var B=Object.keys(g.iconDependencies);B.length?i.send(\"getImages\",{icons:B},(function(t,e){D||(D=t,O=e,p.call(f))})):O={},p.call(this)},f.prototype.redoPlacement=function(t,e,i,o,s){var l=this;if(this.angle=t,this.pitch=e,this.cameraToCenterDistance=i,this.cameraToTileDistance=o,\"done\"!==this.status)return{};for(var u=new a(this.angle,this.pitch,this.cameraToCenterDistance,this.cameraToTileDistance,this.collisionBoxArray),c=0,h=l.symbolBuckets;c<h.length;c+=1){var p=h[c];n(p,l.zoom),p.place(u,s)}var d=[];return{result:{buckets:r(this.symbolBuckets,d),collisionTile:u.serialize(d)},transferables:d}},e.exports=f}),{\"../data/bucket/symbol_bucket\":47,\"../data/feature_index\":49,\"../render/glyph_atlas\":74,\"../render/image_atlas\":76,\"../symbol/collision_box\":170,\"../symbol/collision_tile\":172,\"../util/dictionary_coder\":207,\"../util/util\":223}],107:[(function(t,e,i){\"use strict\";function n(t,e){var i={};for(var n in t)\"ref\"!==n&&(i[n]=t[n]);return o.forEach((function(t){t in e&&(i[t]=e[t])})),i}function r(t){t=t.slice();for(var e=Object.create(null),i=0;i<t.length;i++)e[t[i].id]=t[i];for(var r=0;r<t.length;r++)\"ref\"in t[r]&&(t[r]=n(t[r],e[t[r].ref]));return t}var o=t(\"./util/ref_properties\");e.exports=r}),{\"./util/ref_properties\":129}],108:[(function(t,e,i){\"use strict\";function n(t,e,i,n){t=t||{},e=e||{};var r;for(r in t)t.hasOwnProperty(r)&&(e.hasOwnProperty(r)||(i.push({command:c.removeSource,args:[r]}),n[r]=!0));for(r in e)e.hasOwnProperty(r)&&(t.hasOwnProperty(r)?u(t[r],e[r])||(i.push({command:c.removeSource,args:[r]}),i.push({command:c.addSource,args:[r,e[r]]}),n[r]=!0):i.push({command:c.addSource,args:[r,e[r]]}))}function r(t,e,i,n,r,o){t=t||{},e=e||{};var a;for(a in t)t.hasOwnProperty(a)&&(u(t[a],e[a])||i.push({command:o,args:[n,a,e[a],r]}));for(a in e)e.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(u(t[a],e[a])||i.push({command:o,args:[n,a,e[a],r]}))}function o(t){return t.id}function a(t,e){return t[e.id]=e,t}function s(t,e,i){t=t||[],e=e||[];var n,s,l,h,p,d,f,m=t.map(o),_=e.map(o),y=t.reduce(a,{}),g=e.reduce(a,{}),v=m.slice(),x=Object.create(null);for(n=0,s=0;n<m.length;n++)l=m[n],g.hasOwnProperty(l)?s++:(i.push({command:c.removeLayer,args:[l]}),v.splice(v.indexOf(l,s),1));for(n=0,s=0;n<_.length;n++)l=_[_.length-1-n],v[v.length-1-n]!==l&&(y.hasOwnProperty(l)?(i.push({command:c.removeLayer,args:[l]}),v.splice(v.lastIndexOf(l,v.length-s),1)):s++,d=v[v.length-n],i.push({command:c.addLayer,args:[g[l],d]}),v.splice(v.length-n,0,l),x[l]=!0);for(n=0;n<_.length;n++)if(l=_[n],h=y[l],p=g[l],!x[l]&&!u(h,p))if(u(h.source,p.source)&&u(h[\"source-layer\"],p[\"source-layer\"])&&u(h.type,p.type)){r(h.layout,p.layout,i,l,null,c.setLayoutProperty),r(h.paint,p.paint,i,l,null,c.setPaintProperty),u(h.filter,p.filter)||i.push({command:c.setFilter,args:[l,p.filter]}),u(h.minzoom,p.minzoom)&&u(h.maxzoom,p.maxzoom)||i.push({command:c.setLayerZoomRange,args:[l,p.minzoom,p.maxzoom]});for(f in h)h.hasOwnProperty(f)&&\"layout\"!==f&&\"paint\"!==f&&\"filter\"!==f&&\"metadata\"!==f&&\"minzoom\"!==f&&\"maxzoom\"!==f&&(0===f.indexOf(\"paint.\")?r(h[f],p[f],i,l,f.slice(6),c.setPaintProperty):u(h[f],p[f])||i.push({command:c.setLayerProperty,args:[l,f,p[f]]}));for(f in p)p.hasOwnProperty(f)&&!h.hasOwnProperty(f)&&\"layout\"!==f&&\"paint\"!==f&&\"filter\"!==f&&\"metadata\"!==f&&\"minzoom\"!==f&&\"maxzoom\"!==f&&(0===f.indexOf(\"paint.\")?r(h[f],p[f],i,l,f.slice(6),c.setPaintProperty):u(h[f],p[f])||i.push({command:c.setLayerProperty,args:[l,f,p[f]]}))}else i.push({command:c.removeLayer,args:[l]}),d=v[v.lastIndexOf(l)+1],i.push({command:c.addLayer,args:[p,d]})}function l(t,e){if(!t)return[{command:c.setStyle,args:[e]}];var i=[];try{if(!u(t.version,e.version))return[{command:c.setStyle,args:[e]}];u(t.center,e.center)||i.push({command:c.setCenter,args:[e.center]}),u(t.zoom,e.zoom)||i.push({command:c.setZoom,args:[e.zoom]}),u(t.bearing,e.bearing)||i.push({command:c.setBearing,args:[e.bearing]}),u(t.pitch,e.pitch)||i.push({command:c.setPitch,args:[e.pitch]}),u(t.sprite,e.sprite)||i.push({command:c.setSprite,args:[e.sprite]}),u(t.glyphs,e.glyphs)||i.push({command:c.setGlyphs,args:[e.glyphs]}),u(t.transition,e.transition)||i.push({command:c.setTransition,args:[e.transition]}),u(t.light,e.light)||i.push({command:c.setLight,args:[e.light]});var r={},o=[];n(t.sources,e.sources,o,r);var a=[];t.layers&&t.layers.forEach((function(t){r[t.source]?i.push({command:c.removeLayer,args:[t.id]}):a.push(t)})),i=i.concat(o),s(a,e.layers,i)}catch(t){console.warn(\"Unable to compute style diff:\",t),i=[{command:c.setStyle,args:[e]}]}return i}var u=t(\"lodash.isequal\"),c={setStyle:\"setStyle\",addLayer:\"addLayer\",removeLayer:\"removeLayer\",setPaintProperty:\"setPaintProperty\",setLayoutProperty:\"setLayoutProperty\",setFilter:\"setFilter\",addSource:\"addSource\",removeSource:\"removeSource\",setLayerZoomRange:\"setLayerZoomRange\",setLayerProperty:\"setLayerProperty\",setCenter:\"setCenter\",setZoom:\"setZoom\",setBearing:\"setBearing\",setPitch:\"setPitch\",setSprite:\"setSprite\",setGlyphs:\"setGlyphs\",setTransition:\"setTransition\",setLight:\"setLight\"};e.exports=l,e.exports.operations=c}),{\"lodash.isequal\":120}],109:[(function(t,e,i){\"use strict\";function n(t,e){for(var i=[],n=arguments.length-2;n-- >0;)i[n]=arguments[n+2];this.message=(t?t+\": \":\"\")+r.apply(r,i),null!==e&&void 0!==e&&e.__line__&&(this.line=e.__line__)}var r=t(\"util\").format;e.exports=n}),{util:36}],110:[(function(t,e,i){\"use strict\";function n(t){return new Function(\"f\",\"var p = (f && f.properties || {}); return \"+r(t))}function r(t){if(!t)return\"true\";var e=t[0];return t.length<=1?\"any\"===e?\"false\":\"true\":\"(\"+(\"==\"===e?a(t[1],t[2],\"===\",!1):\"!=\"===e?a(t[1],t[2],\"!==\",!1):\"<\"===e||\">\"===e||\"<=\"===e||\">=\"===e?a(t[1],t[2],e,!0):\"any\"===e?s(t.slice(1),\"||\"):\"all\"===e?s(t.slice(1),\"&&\"):\"none\"===e?c(s(t.slice(1),\"||\")):\"in\"===e?l(t[1],t.slice(2)):\"!in\"===e?c(l(t[1],t.slice(2))):\"has\"===e?u(t[1]):\"!has\"===e?c(u(t[1])):\"true\")+\")\"}function o(t){return\"$type\"===t?\"f.type\":\"$id\"===t?\"f.id\":\"p[\"+JSON.stringify(t)+\"]\"}function a(t,e,i,n){var r=o(t),a=\"$type\"===t?p.indexOf(e):JSON.stringify(e);return(n?\"typeof \"+r+\"=== typeof \"+a+\"&&\":\"\")+r+i+a}function s(t,e){return t.map(r).join(e)}function l(t,e){\"$type\"===t&&(e=e.map((function(t){return p.indexOf(t)})));var i=JSON.stringify(e.sort(h)),n=o(t);return e.length<=200?i+\".indexOf(\"+n+\") !== -1\":\"function(v, a, i, j) {while (i <= j) { var m = (i + j) >> 1;    if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;}return false; }(\"+n+\", \"+i+\",0,\"+(e.length-1)+\")\"}function u(t){return\"$id\"===t?'\"id\" in f':JSON.stringify(t)+\" in p\"}function c(t){return\"!(\"+t+\")\"}function h(t,e){return t<e?-1:t>e?1:0}e.exports=n;var p=[\"Unknown\",\"Point\",\"LineString\",\"Polygon\"]}),{}],111:[(function(t,e,i){\"use strict\";function n(t){return t>y?Math.pow(t,1/3):t/_+f}function r(t){return t>m?t*t*t:_*(t-f)}function o(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function a(t){return t/=255,t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function s(t){var e=a(t[0]),i=a(t[1]),r=a(t[2]),o=n((.4124564*e+.3575761*i+.1804375*r)/h),s=n((.2126729*e+.7151522*i+.072175*r)/p);return[116*s-16,500*(o-s),200*(s-n((.0193339*e+.119192*i+.9503041*r)/d)),t[3]]}function l(t){var e=(t[0]+16)/116,i=isNaN(t[1])?e:e+t[1]/500,n=isNaN(t[2])?e:e-t[2]/200;return e=p*r(e),i=h*r(i),n=d*r(n),[o(3.2404542*i-1.5371385*e-.4985314*n),o(-.969266*i+1.8760108*e+.041556*n),o(.0556434*i-.2040259*e+1.0572252*n),t[3]]}function u(t){var e=s(t),i=e[0],n=e[1],r=e[2],o=Math.atan2(r,n)*v;return[o<0?o+360:o,Math.sqrt(n*n+r*r),i,t[3]]}function c(t){var e=t[0]*g,i=t[1];return l([t[2],Math.cos(e)*i,Math.sin(e)*i,t[3]])}var h=.95047,p=1,d=1.08883,f=4/29,m=6/29,_=3*m*m,y=m*m*m,g=Math.PI/180,v=180/Math.PI;e.exports={lab:{forward:s,reverse:l},hcl:{forward:u,reverse:c}}}),{}],112:[(function(t,e,i){\"use strict\";function n(t){return t}function r(t,e){var i,c=\"color\"===e.type;if(h(t)){var p=t.stops&&\"object\"==typeof t.stops[0][0],_=p||void 0!==t.property,y=p||!_,g=t.type||(\"interpolated\"===e.function?\"exponential\":\"interval\");c&&(t=m({},t),t.stops&&(t.stops=t.stops.map((function(t){return[t[0],f(t[1])]}))),t.default?t.default=f(t.default):t.default=f(e.default));var v,x,b;if(\"exponential\"===g)v=l;else if(\"interval\"===g)v=s;else if(\"categorical\"===g){v=a,x=Object.create(null);for(var w=0,E=t.stops;w<E.length;w+=1){var C=E[w];x[C[0]]=C[1]}b=typeof t.stops[0][0]}else{if(\"identity\"!==g)throw new Error('Unknown function type \"'+g+'\"');v=u}var T;if(t.colorSpace&&\"rgb\"!==t.colorSpace){if(!d[t.colorSpace])throw new Error(\"Unknown color space: \"+t.colorSpace);var S=d[t.colorSpace];t=JSON.parse(JSON.stringify(t));for(var A=0;A<t.stops.length;A++)t.stops[A]=[t.stops[A][0],S.forward(t.stops[A][1])];T=S.reverse}else T=n;if(p){for(var L={},I=[],M=0;M<t.stops.length;M++){var z=t.stops[M],P=z[0].zoom;void 0===L[P]&&(L[P]={zoom:P,type:t.type,property:t.property,default:t.default,stops:[]},I.push(P)),L[P].stops.push([z[0].value,z[1]])}for(var R=[],D=0,k=I;D<k.length;D+=1){var O=k[D];R.push([L[O].zoom,r(L[O],e)])}i=function(i,n){return T(l({stops:R,base:t.base},e,i)(i,n))},i.isFeatureConstant=!1,i.isZoomConstant=!1}else y?(i=function(i){return T(v(t,e,i,x,b))},i.isFeatureConstant=!0,i.isZoomConstant=!1):(i=function(i,n){var r=n[t.property];return void 0===r?o(t.default,e.default):T(v(t,e,r,x,b))},i.isFeatureConstant=!1,i.isZoomConstant=!0)}else c&&t&&(t=f(t)),i=function(){return t},i.isFeatureConstant=!0,i.isZoomConstant=!0;return i}function o(t,e,i){return void 0!==t?t:void 0!==e?e:void 0!==i?i:void 0}function a(t,e,i,n,r){return o(typeof i===r?n[i]:void 0,t.default,e.default)}function s(t,e,i){if(\"number\"!==_(i))return o(t.default,e.default);var n=t.stops.length;if(1===n)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[n-1][0])return t.stops[n-1][1];var r=c(t.stops,i);return t.stops[r][1]}function l(t,e,i){var r=void 0!==t.base?t.base:1;if(\"number\"!==_(i))return o(t.default,e.default);var a=t.stops.length;if(1===a)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[a-1][0])return t.stops[a-1][1];var s=c(t.stops,i),l=p(i,r,t.stops[s][0],t.stops[s+1][0]),u=t.stops[s][1],h=t.stops[s+1][1],d=y[e.type]||n;return\"function\"==typeof u?function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=u.apply(void 0,t),n=h.apply(void 0,t);if(void 0!==i&&void 0!==n)return d(i,n,l)}:d(u,h,l)}function u(t,e,i){return\"color\"===e.type?i=f(i):_(i)===e.type||\"enum\"===e.type&&e.values[i]||(i=void 0),o(i,t.default,e.default)}function c(t,e){for(var i,n,r=t.length,o=0,a=r-1,s=0;o<=a;){if(s=Math.floor((o+a)/2),i=t[s][0],n=t[s+1][0],e===i||e>i&&e<n)return s;i<e?o=s+1:i>e&&(a=s-1)}return Math.max(s-1,0)}function h(t){return\"object\"==typeof t&&(t.stops||\"identity\"===t.type)}function p(t,e,i,n){var r=n-i,o=t-i;return 0===r?0:1===e?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}var d=t(\"./color_spaces\"),f=t(\"../util/parse_color\"),m=t(\"../util/extend\"),_=t(\"../util/get_type\"),y=t(\"../util/interpolate\");e.exports=r,e.exports.isFunctionDefinition=h,e.exports.interpolationFactor=p,e.exports.findStopLessThanOrEqualTo=c}),{\"../util/extend\":125,\"../util/get_type\":126,\"../util/interpolate\":127,\"../util/parse_color\":128,\"./color_spaces\":111}],113:[(function(t,e,i){\"use strict\";function n(t){var e=typeof t;if(\"number\"===e||\"boolean\"===e||\"string\"===e||void 0===t||null===t)return JSON.stringify(t);if(Array.isArray(t)){for(var i=\"[\",r=0,o=t;r<o.length;r+=1)i+=n(o[r])+\",\";return i+\"]\"}for(var a=Object.keys(t).sort(),s=\"{\",l=0;l<a.length;l++)s+=JSON.stringify(a[l])+\":\"+n(t[a[l]])+\",\";return s+\"}\"}function r(t){for(var e=\"\",i=0,r=a;i<r.length;i+=1)e+=\"/\"+n(t[r[i]]);return e}function o(t){for(var e={},i=0;i<t.length;i++){var n=r(t[i]),o=e[n];o||(o=e[n]=[]),o.push(t[i])}var a=[];for(var s in e)a.push(e[s]);return a}var a=t(\"./util/ref_properties\");e.exports=o}),{\"./util/ref_properties\":129}],114:[(function(t,e,i){function n(t){return t=Math.round(t),t<0?0:t>255?255:t}function r(t){return t<0?0:t>1?1:t}function o(t){return n(\"%\"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function a(t){return r(\"%\"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))}function s(t,e,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function l(t){var e=t.replace(/ /g,\"\").toLowerCase();if(e in u)return u[e].slice();if(\"#\"===e[0]){if(4===e.length){var i=parseInt(e.substr(1),16);return i>=0&&i<=4095?[(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1]:null}if(7===e.length){var i=parseInt(e.substr(1),16);return i>=0&&i<=16777215?[(16711680&i)>>16,(65280&i)>>8,255&i,1]:null}return null}var r=e.indexOf(\"(\"),l=e.indexOf(\")\");if(-1!==r&&l+1===e.length){var c=e.substr(0,r),h=e.substr(r+1,l-(r+1)).split(\",\"),p=1;switch(c){case\"rgba\":if(4!==h.length)return null;p=a(h.pop());case\"rgb\":return 3!==h.length?null:[o(h[0]),o(h[1]),o(h[2]),p];case\"hsla\":if(4!==h.length)return null;p=a(h.pop());case\"hsl\":if(3!==h.length)return null;var d=(parseFloat(h[0])%360+360)%360/360,f=a(h[1]),m=a(h[2]),_=m<=.5?m*(f+1):m+f-m*f,y=2*m-_;return[n(255*s(y,_,d+1/3)),n(255*s(y,_,d)),n(255*s(y,_,d-1/3)),p];default:return null}}return null}var u={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{i.parseCSSColor=l}catch(t){}}),{}],115:[(function(t,e,i){function n(t){return!!t&&\"object\"==typeof t}function r(t,e){for(var i=-1,n=t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}function o(t,e,i,r,s,l){return t===e||(null==t||null==e||!c(t)&&!n(e)?t!==t&&e!==e:a(t,e,o,i,r,s,l))}function a(t,e,i,n,r,o,a){var c=h(t),d=h(e),_=m,y=m;c||(_=T.call(t),_==f?_=x:_!=x&&(c=p(t))),d||(y=T.call(e),y==f?y=x:y!=x&&(d=p(e)));var g=_==x,v=y==x,b=_==y;if(b&&!c&&!g)return l(t,e,_);if(!r){var w=g&&C.call(t,\"__wrapped__\"),E=v&&C.call(e,\"__wrapped__\");if(w||E)return i(w?t.value():t,E?e.value():e,n,r,o,a)}if(!b)return!1;o||(o=[]),a||(a=[]);for(var S=o.length;S--;)if(o[S]==t)return a[S]==e;o.push(t),a.push(e);var A=(c?s:u)(t,e,i,n,r,o,a);return o.pop(),a.pop(),A}function s(t,e,i,n,o,a,s){var l=-1,u=t.length,c=e.length;if(u!=c&&!(o&&c>u))return!1;for(;++l<u;){var h=t[l],p=e[l],d=n?n(o?p:h,o?h:p,l):void 0;if(void 0!==d){if(d)continue;return!1}if(o){if(!r(e,(function(t){return h===t||i(h,t,n,o,a,s)})))return!1}else if(h!==p&&!i(h,p,n,o,a,s))return!1}return!0}function l(t,e,i){switch(i){case _:case y:return+t==+e;case g:return t.name==e.name&&t.message==e.message;case v:return t!=+t?e!=+e:t==+e;case b:case w:return t==e+\"\"}return!1}function u(t,e,i,n,r,o,a){var s=d(t),l=s.length;if(l!=d(e).length&&!r)return!1;for(var u=l;u--;){var c=s[u];if(!(r?c in e:C.call(e,c)))return!1}for(var h=r;++u<l;){c=s[u];var p=t[c],f=e[c],m=n?n(r?f:p,r?p:f,c):void 0;if(!(void 0===m?i(p,f,n,r,o,a):m))return!1;h||(h=\"constructor\"==c)}if(!h){var _=t.constructor,y=e.constructor;if(_!=y&&\"constructor\"in t&&\"constructor\"in e&&!(\"function\"==typeof _&&_ instanceof _&&\"function\"==typeof y&&y instanceof y))return!1}return!0}function c(t){var e=typeof t;return!!t&&(\"object\"==e||\"function\"==e)}var h=t(\"lodash.isarray\"),p=t(\"lodash.istypedarray\"),d=t(\"lodash.keys\"),f=\"[object Arguments]\",m=\"[object Array]\",_=\"[object Boolean]\",y=\"[object Date]\",g=\"[object Error]\",v=\"[object Number]\",x=\"[object Object]\",b=\"[object RegExp]\",w=\"[object String]\",E=Object.prototype,C=E.hasOwnProperty,T=E.toString;e.exports=o}),{\"lodash.isarray\":119,\"lodash.istypedarray\":121,\"lodash.keys\":122}],116:[(function(t,e,i){function n(t,e,i){if(\"function\"!=typeof t)return r;if(void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 3:return function(i,n,r){return t.call(e,i,n,r)};case 4:return function(i,n,r,o){return t.call(e,i,n,r,o)};case 5:return function(i,n,r,o,a){return t.call(e,i,n,r,o,a)}}return function(){return t.apply(e,arguments)}}function r(t){return t}e.exports=n}),{}],117:[(function(t,e,i){function n(t){return!!t&&\"object\"==typeof t}function r(t,e){var i=null==t?void 0:t[e];return s(i)?i:void 0}function o(t){return a(t)&&d.call(t)==l}function a(t){var e=typeof t;return!!t&&(\"object\"==e||\"function\"==e)}function s(t){return null!=t&&(o(t)?f.test(h.call(t)):n(t)&&u.test(t))}var l=\"[object Function]\",u=/^\\[object .+?Constructor\\]$/,c=Object.prototype,h=Function.prototype.toString,p=c.hasOwnProperty,d=c.toString,f=RegExp(\"^\"+h.call(p).replace(/[\\\\^$.*+?()[\\]{}|]/g,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\");e.exports=r}),{}],118:[(function(t,e,i){function n(t){return o(t)&&m.call(t,\"callee\")&&(!y.call(t,\"callee\")||_.call(t)==h)}function r(t){return null!=t&&s(t.length)&&!a(t)}function o(t){return u(t)&&r(t)}function a(t){var e=l(t)?_.call(t):\"\";return e==p||e==d}function s(t){return\"number\"==typeof t&&t>-1&&t%1==0&&t<=c}function l(t){var e=typeof t;return!!t&&(\"object\"==e||\"function\"==e)}function u(t){return!!t&&\"object\"==typeof t}var c=9007199254740991,h=\"[object Arguments]\",p=\"[object Function]\",d=\"[object GeneratorFunction]\",f=Object.prototype,m=f.hasOwnProperty,_=f.toString,y=f.propertyIsEnumerable;e.exports=n}),{}],119:[(function(t,e,i){function n(t){return!!t&&\"object\"==typeof t}function r(t){return\"number\"==typeof t&&t>-1&&t%1==0&&t<=_}function o(t){return a(t)&&d.call(t)==l}function a(t){var e=typeof t;return!!t&&(\"object\"==e||\"function\"==e)}function s(t){return null!=t&&(o(t)?f.test(h.call(t)):n(t)&&u.test(t))}var l=\"[object Function]\",u=/^\\[object .+?Constructor\\]$/,c=Object.prototype,h=Function.prototype.toString,p=c.hasOwnProperty,d=c.toString,f=RegExp(\"^\"+h.call(p).replace(/[\\\\^$.*+?()[\\]{}|]/g,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\"),m=(function(t,e){var i=null==t?void 0:t[e];return s(i)?i:void 0})(Array,\"isArray\"),_=9007199254740991,y=m||function(t){return n(t)&&r(t.length)&&\"[object Array]\"==d.call(t)};e.exports=y}),{}],120:[(function(t,e,i){function n(t,e,i,n){i=\"function\"==typeof i?o(i,n,3):void 0;var a=i?i(t,e):void 0;return void 0===a?r(t,e,i):!!a}var r=t(\"lodash._baseisequal\"),o=t(\"lodash._bindcallback\");e.exports=n}),{\"lodash._baseisequal\":115,\"lodash._bindcallback\":116}],121:[(function(t,e,i){function n(t){return\"number\"==typeof t&&t>-1&&t%1==0&&t<=a}function r(t){return!!t&&\"object\"==typeof t}function o(t){return r(t)&&n(t.length)&&!!s[u.call(t)]}var a=9007199254740991,s={};s[\"[object Float32Array]\"]=s[\"[object Float64Array]\"]=s[\"[object Int8Array]\"]=s[\"[object Int16Array]\"]=s[\"[object Int32Array]\"]=s[\"[object Uint8Array]\"]=s[\"[object Uint8ClampedArray]\"]=s[\"[object Uint16Array]\"]=s[\"[object Uint32Array]\"]=!0,s[\"[object Arguments]\"]=s[\"[object Array]\"]=s[\"[object ArrayBuffer]\"]=s[\"[object Boolean]\"]=s[\"[object DataView]\"]=s[\"[object Date]\"]=s[\"[object Error]\"]=s[\"[object Function]\"]=s[\"[object Map]\"]=s[\"[object Number]\"]=s[\"[object Object]\"]=s[\"[object RegExp]\"]=s[\"[object Set]\"]=s[\"[object String]\"]=s[\"[object WeakMap]\"]=!1;var l=Object.prototype,u=l.toString;e.exports=o}),{}],122:[(function(t,e,i){function n(t){return null!=t&&o(y(t))}function r(t,e){return t=\"number\"==typeof t||p.test(t)?+t:-1,e=null==e?_:e,t>-1&&t%1==0&&t<e}function o(t){return\"number\"==typeof t&&t>-1&&t%1==0&&t<=_}function a(t){for(var e=l(t),i=e.length,n=i&&t.length,a=!!n&&o(n)&&(h(t)||c(t)),s=-1,u=[];++s<i;){var p=e[s];(a&&r(p,n)||f.call(t,p))&&u.push(p)}return u}function s(t){var e=typeof t;return!!t&&(\"object\"==e||\"function\"==e)}function l(t){if(null==t)return[];s(t)||(t=Object(t));var e=t.length;e=e&&o(e)&&(h(t)||c(t))&&e||0;for(var i=t.constructor,n=-1,a=\"function\"==typeof i&&i.prototype===t,l=Array(e),u=e>0;++n<e;)l[n]=n+\"\";for(var p in t)u&&r(p,e)||\"constructor\"==p&&(a||!f.call(t,p))||l.push(p);return l}var u=t(\"lodash._getnative\"),c=t(\"lodash.isarguments\"),h=t(\"lodash.isarray\"),p=/^\\d+$/,d=Object.prototype,f=d.hasOwnProperty,m=u(Object,\"keys\"),_=9007199254740991,y=(function(t){return function(e){return null==e?void 0:e[t]}})(\"length\"),g=m?function(t){var e=null==t?void 0:t.constructor;return\"function\"==typeof e&&e.prototype===t||\"function\"!=typeof t&&n(t)?a(t):s(t)?m(t):[]}:a;e.exports=g}),{\"lodash._getnative\":117,\"lodash.isarguments\":118,\"lodash.isarray\":119}],123:[(function(t,e,i){\"use strict\";e.exports=t(\"./v8.json\")}),{\"./v8.json\":124}],124:[(function(t,e,i){e.exports={$version:8,$root:{version:{required:!0,type:\"enum\",values:[8]},name:{type:\"string\"},metadata:{type:\"*\"},center:{type:\"array\",value:\"number\"},zoom:{type:\"number\"},bearing:{type:\"number\",default:0,period:360,units:\"degrees\"},pitch:{type:\"number\",default:0,units:\"degrees\"},light:{type:\"light\"},sources:{required:!0,type:\"sources\"},sprite:{type:\"string\"},glyphs:{type:\"string\"},transition:{type:\"transition\"},layers:{required:!0,type:\"array\",value:\"layer\"}},sources:{\"*\":{type:\"source\"}},source:[\"source_tile\",\"source_geojson\",\"source_video\",\"source_image\",\"source_canvas\"],source_tile:{type:{required:!0,type:\"enum\",values:{vector:{},raster:{}}},url:{type:\"string\"},tiles:{type:\"array\",value:\"string\"},bounds:{type:\"array\",value:\"number\",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:\"number\",default:0},maxzoom:{type:\"number\",default:22},tileSize:{type:\"number\",default:512,units:\"pixels\"},\"*\":{type:\"*\"}},source_geojson:{type:{required:!0,type:\"enum\",values:{geojson:{}}},data:{type:\"*\"},maxzoom:{type:\"number\",default:18},buffer:{type:\"number\",default:128,maximum:512,minimum:0},tolerance:{type:\"number\",default:.375},cluster:{type:\"boolean\",default:!1},clusterRadius:{type:\"number\",default:50,minimum:0},clusterMaxZoom:{type:\"number\"}},source_video:{type:{required:!0,type:\"enum\",values:{video:{}}},urls:{required:!0,type:\"array\",value:\"string\"},coordinates:{required:!0,type:\"array\",length:4,value:{type:\"array\",length:2,value:\"number\"}}},source_image:{type:{required:!0,type:\"enum\",values:{image:{}}},url:{required:!0,type:\"string\"},coordinates:{required:!0,type:\"array\",length:4,value:{type:\"array\",length:2,value:\"number\"}}},source_canvas:{type:{required:!0,type:\"enum\",values:{canvas:{}}},coordinates:{required:!0,type:\"array\",length:4,value:{type:\"array\",length:2,value:\"number\"}},animate:{type:\"boolean\",default:\"true\"},canvas:{type:\"string\",required:!0},contextType:{required:!0,type:\"enum\",values:{\"2d\":{},webgl:{},\"experimental-webgl\":{},webgl2:{}}}},layer:{id:{type:\"string\",required:!0},type:{type:\"enum\",values:{fill:{},line:{},symbol:{},circle:{},\"fill-extrusion\":{},raster:{},background:{}}},metadata:{type:\"*\"},ref:{type:\"string\"},source:{type:\"string\"},\"source-layer\":{type:\"string\"},minzoom:{type:\"number\",minimum:0,maximum:24},maxzoom:{type:\"number\",minimum:0,maximum:24},filter:{type:\"filter\"},layout:{type:\"layout\"},paint:{type:\"paint\"},\"paint.*\":{type:\"paint\"}},layout:[\"layout_fill\",\"layout_line\",\"layout_circle\",\"layout_fill-extrusion\",\"layout_symbol\",\"layout_raster\",\"layout_background\"],layout_background:{visibility:{type:\"enum\",values:{visible:{},none:{}},default:\"visible\"}},layout_fill:{visibility:{type:\"enum\",values:{visible:{},none:{}},default:\"visible\"}},layout_circle:{visibility:{type:\"enum\",values:{visible:{},none:{}},default:\"visible\"}},\"layout_fill-extrusion\":{visibility:{type:\"enum\",values:{visible:{},none:{}},default:\"visible\"}},layout_line:{\"line-cap\":{type:\"enum\",function:\"piecewise-constant\",\"zoom-function\":!0,values:{butt:{},round:{},square:{}},default:\"butt\"},\"line-join\":{type:\"enum\",function:\"piecewise-constant\",\"zoom-function\":!0,\"property-function\":!0,values:{bevel:{},round:{},miter:{}},default:\"miter\"},\"line-miter-limit\":{type:\"number\",default:2,function:\"interpolated\",\"zoom-function\":!0,requires:[{\"line-join\":\"miter\"}]},\"line-round-limit\":{type:\"number\",default:1.05,function:\"interpolated\",\"zoom-function\":!0,requires:[{\"line-join\":\"round\"}]},visibility:{type:\"enum\",values:{visible:{},none:{}},default:\"visible\"}},layout_symbol:{\"symbol-placement\":{type:\"enum\",function:\"piecewise-constant\",\"zoom-function\":!0,values:{point:{},line:{}},default:\"point\"},\"symbol-spacing\":{type:\"number\",default:250,minimum:1,function:\"interpolated\",\"zoom-function\":!0,units:\"pixels\",requires:[{\"symbol-placement\":\"line\"}]},\"symbol-avoid-edges\":{type:\"boolean\",function:\"piecewise-constant\",\"zoom-function\":!0,default:!1},\"icon-allow-overlap\":{type:\"boolean\",function:\"piecewise-constant\",\"zoom-function\":!0,default:!1,requires:[\"icon-image\"]},\"icon-ignore-placement\":{type:\"boolean\",function:\"piecewise-constant\",\"zoom-function\":!0,default:!1,requires:[\"icon-image\"]},\"icon-optional\":{type:\"boolean\",function:\"piecewise-constant\",\"zoom-function\":!0,default:!1,requires:[\"icon-image\",\"text-field\"]},\"icon-rotation-alignment\":{type:\"enum\",function:\"piecewise-constant\",\"zoom-function\":!0,values:{map:{},viewport:{},auto:{}},default:\"auto\",requires:[\"icon-image\"]},\"icon-size\":{type:\"number\",default:1,minimum:0,function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,units:\"factor of the original icon size\",requires:[\"icon-image\"]},\"icon-text-fit\":{type:\"enum\",function:\"piecewise-constant\",\"zoom-function\":!0,values:{none:{},width:{},height:{},both:{}},default:\"none\",requires:[\"icon-image\",\"text-field\"]},\"icon-text-fit-padding\":{type:\"array\",value:\"number\",length:4,default:[0,0,0,0],units:\"pixels\",function:\"interpolated\",\"zoom-function\":!0,requires:[\"icon-image\",\"text-field\",{\"icon-text-fit\":[\"both\",\"width\",\"height\"]}]},\"icon-image\":{type:\"string\",function:\"piecewise-constant\",\"zoom-function\":!0,\"property-function\":!0,tokens:!0},\"icon-rotate\":{type:\"number\",default:0,period:360,function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,units:\"degrees\",requires:[\"icon-image\"]},\"icon-padding\":{type:\"number\",default:2,minimum:0,function:\"interpolated\",\"zoom-function\":!0,units:\"pixels\",requires:[\"icon-image\"]},\"icon-keep-upright\":{type:\"boolean\",function:\"piecewise-constant\",\"zoom-function\":!0,default:!1,requires:[\"icon-image\",{\"icon-rotation-alignment\":\"map\"},{\"symbol-placement\":\"line\"}]},\"icon-offset\":{type:\"array\",value:\"number\",length:2,default:[0,0],function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,requires:[\"icon-image\"]},\"icon-anchor\":{type:\"enum\",function:\"piecewise-constant\",\"zoom-function\":!0,\"property-function\":!0,values:{center:{},left:{},right:{},top:{},bottom:{},\"top-left\":{},\"top-right\":{},\"bottom-left\":{},\"bottom-right\":{}},default:\"center\",requires:[\"icon-image\"]},\"icon-pitch-alignment\":{type:\"enum\",function:\"piecewise-constant\",\"zoom-function\":!0,values:{map:{},viewport:{},auto:{}},default:\"auto\",requires:[\"icon-image\"]},\"text-pitch-alignment\":{type:\"enum\",function:\"piecewise-constant\",\"zoom-function\":!0,values:{map:{},viewport:{},auto:{}},default:\"auto\",requires:[\"text-field\"]},\"text-rotation-alignment\":{type:\"enum\",function:\"piecewise-constant\",\"zoom-function\":!0,values:{map:{},viewport:{},auto:{}},default:\"auto\",requires:[\"text-field\"]},\"text-field\":{type:\"string\",function:\"piecewise-constant\",\"zoom-function\":!0,\"property-function\":!0,default:\"\",tokens:!0},\"text-font\":{type:\"array\",value:\"string\",function:\"piecewise-constant\",\"zoom-function\":!0,default:[\"Open Sans Regular\",\"Arial Unicode MS Regular\"],requires:[\"text-field\"]},\"text-size\":{type:\"number\",default:16,minimum:0,units:\"pixels\",function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,requires:[\"text-field\"]},\"text-max-width\":{type:\"number\",default:10,minimum:0,units:\"ems\",function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,requires:[\"text-field\"]},\"text-line-height\":{type:\"number\",default:1.2,units:\"ems\",function:\"interpolated\",\"zoom-function\":!0,requires:[\"text-field\"]},\"text-letter-spacing\":{type:\"number\",default:0,units:\"ems\",function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,requires:[\"text-field\"]},\"text-justify\":{type:\"enum\",function:\"piecewise-constant\",\"zoom-function\":!0,\"property-function\":!0,values:{left:{},center:{},right:{}},default:\"center\",requires:[\"text-field\"]},\"text-anchor\":{type:\"enum\",function:\"piecewise-constant\",\"zoom-function\":!0,\"property-function\":!0,values:{center:{},left:{},right:{},top:{},bottom:{},\"top-left\":{},\"top-right\":{},\"bottom-left\":{},\"bottom-right\":{}},default:\"center\",requires:[\"text-field\"]},\"text-max-angle\":{type:\"number\",default:45,units:\"degrees\",function:\"interpolated\",\"zoom-function\":!0,requires:[\"text-field\",{\"symbol-placement\":\"line\"}]},\"text-rotate\":{type:\"number\",default:0,period:360,units:\"degrees\",function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,requires:[\"text-field\"]},\"text-padding\":{type:\"number\",default:2,minimum:0,units:\"pixels\",function:\"interpolated\",\"zoom-function\":!0,requires:[\"text-field\"]},\"text-keep-upright\":{type:\"boolean\",function:\"piecewise-constant\",\"zoom-function\":!0,default:!0,requires:[\"text-field\",{\"text-rotation-alignment\":\"map\"},{\"symbol-placement\":\"line\"}]},\"text-transform\":{type:\"enum\",function:\"piecewise-constant\",\"zoom-function\":!0,\"property-function\":!0,values:{none:{},uppercase:{},lowercase:{}},default:\"none\",requires:[\"text-field\"]},\"text-offset\":{type:\"array\",value:\"number\",units:\"ems\",function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,length:2,default:[0,0],requires:[\"text-field\"]},\"text-allow-overlap\":{type:\"boolean\",function:\"piecewise-constant\",\"zoom-function\":!0,default:!1,requires:[\"text-field\"]},\"text-ignore-placement\":{type:\"boolean\",function:\"piecewise-constant\",\"zoom-function\":!0,default:!1,requires:[\"text-field\"]},\"text-optional\":{type:\"boolean\",function:\"piecewise-constant\",\"zoom-function\":!0,default:!1,requires:[\"text-field\",\"icon-image\"]},visibility:{type:\"enum\",values:{visible:{},none:{}},default:\"visible\"}},layout_raster:{visibility:{type:\"enum\",values:{visible:{},none:{}},default:\"visible\"}},filter:{type:\"array\",value:\"*\"},filter_operator:{type:\"enum\",values:{\"==\":{},\"!=\":{},\">\":{},\">=\":{},\"<\":{},\"<=\":{},in:{},\"!in\":{},all:{},any:{},none:{},has:{},\"!has\":{}}},geometry_type:{type:\"enum\",values:{Point:{},LineString:{},Polygon:{}}},function:{stops:{type:\"array\",value:\"function_stop\"},base:{type:\"number\",default:1,minimum:0},property:{type:\"string\",default:\"$zoom\"},type:{type:\"enum\",values:{identity:{},exponential:{},interval:{},categorical:{}},default:\"exponential\"},colorSpace:{type:\"enum\",values:{rgb:{},lab:{},hcl:{}},default:\"rgb\"},default:{type:\"*\",required:!1}},function_stop:{type:\"array\",minimum:0,maximum:22,value:[\"number\",\"color\"],length:2},light:{anchor:{type:\"enum\",default:\"viewport\",values:{map:{},viewport:{}},transition:!1,\"zoom-function\":!0,\"property-function\":!1,function:\"piecewise-constant\"},position:{type:\"array\",default:[1.15,210,30],length:3,value:\"number\",transition:!0,function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!1},color:{type:\"color\",default:\"#ffffff\",function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!1,transition:!0},intensity:{type:\"number\",default:.5,minimum:0,maximum:1,function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!1,transition:!0}},paint:[\"paint_fill\",\"paint_line\",\"paint_circle\",\"paint_fill-extrusion\",\"paint_symbol\",\"paint_raster\",\"paint_background\"],paint_fill:{\"fill-antialias\":{type:\"boolean\",function:\"piecewise-constant\",\"zoom-function\":!0,default:!0},\"fill-opacity\":{type:\"number\",function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,default:1,minimum:0,maximum:1,transition:!0},\"fill-color\":{type:\"color\",default:\"#000000\",function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,transition:!0,requires:[{\"!\":\"fill-pattern\"}]},\"fill-outline-color\":{type:\"color\",function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,transition:!0,requires:[{\"!\":\"fill-pattern\"},{\"fill-antialias\":!0}]},\"fill-translate\":{type:\"array\",value:\"number\",length:2,default:[0,0],function:\"interpolated\",\"zoom-function\":!0,transition:!0,units:\"pixels\"},\"fill-translate-anchor\":{type:\"enum\",function:\"piecewise-constant\",\"zoom-function\":!0,values:{map:{},viewport:{}},default:\"map\",requires:[\"fill-translate\"]},\"fill-pattern\":{type:\"string\",function:\"piecewise-constant\",\"zoom-function\":!0,transition:!0}},\"paint_fill-extrusion\":{\"fill-extrusion-opacity\":{type:\"number\",function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!1,default:1,minimum:0,maximum:1,transition:!0},\"fill-extrusion-color\":{type:\"color\",default:\"#000000\",function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,transition:!0,requires:[{\"!\":\"fill-extrusion-pattern\"}]},\"fill-extrusion-translate\":{type:\"array\",value:\"number\",length:2,default:[0,0],function:\"interpolated\",\"zoom-function\":!0,transition:!0,units:\"pixels\"},\"fill-extrusion-translate-anchor\":{type:\"enum\",function:\"piecewise-constant\",\"zoom-function\":!0,values:{map:{},viewport:{}},default:\"map\",requires:[\"fill-extrusion-translate\"]},\"fill-extrusion-pattern\":{type:\"string\",function:\"piecewise-constant\",\"zoom-function\":!0,transition:!0},\"fill-extrusion-height\":{type:\"number\",function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,default:0,minimum:0,units:\"meters\",transition:!0},\"fill-extrusion-base\":{type:\"number\",function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,default:0,minimum:0,maximum:65535,units:\"meters\",transition:!0,requires:[\"fill-extrusion-height\"]}},paint_line:{\"line-opacity\":{type:\"number\",function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,default:1,minimum:0,maximum:1,transition:!0},\"line-color\":{type:\"color\",default:\"#000000\",function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,transition:!0,requires:[{\"!\":\"line-pattern\"}]},\"line-translate\":{type:\"array\",value:\"number\",length:2,default:[0,0],function:\"interpolated\",\"zoom-function\":!0,transition:!0,units:\"pixels\"},\"line-translate-anchor\":{type:\"enum\",function:\"piecewise-constant\",\"zoom-function\":!0,values:{map:{},viewport:{}},default:\"map\",requires:[\"line-translate\"]},\"line-width\":{type:\"number\",default:1,minimum:0,function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,transition:!0,units:\"pixels\"},\"line-gap-width\":{type:\"number\",default:0,minimum:0,function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,transition:!0,units:\"pixels\"},\"line-offset\":{type:\"number\",default:0,function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,transition:!0,units:\"pixels\"},\"line-blur\":{type:\"number\",default:0,minimum:0,function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,transition:!0,units:\"pixels\"},\"line-dasharray\":{type:\"array\",value:\"number\",function:\"piecewise-constant\",\"zoom-function\":!0,minimum:0,transition:!0,units:\"line widths\",requires:[{\"!\":\"line-pattern\"}]},\"line-pattern\":{type:\"string\",function:\"piecewise-constant\",\"zoom-function\":!0,transition:!0}},paint_circle:{\"circle-radius\":{type:\"number\",default:5,minimum:0,function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,transition:!0,units:\"pixels\"},\"circle-color\":{type:\"color\",default:\"#000000\",function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,transition:!0},\"circle-blur\":{type:\"number\",default:0,function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,transition:!0},\"circle-opacity\":{type:\"number\",default:1,minimum:0,maximum:1,function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,transition:!0},\"circle-translate\":{type:\"array\",value:\"number\",length:2,default:[0,0],function:\"interpolated\",\"zoom-function\":!0,transition:!0,units:\"pixels\"},\"circle-translate-anchor\":{type:\"enum\",function:\"piecewise-constant\",\"zoom-function\":!0,values:{map:{},viewport:{}},default:\"map\",requires:[\"circle-translate\"]},\"circle-pitch-scale\":{type:\"enum\",function:\"piecewise-constant\",\"zoom-function\":!0,values:{map:{},viewport:{}},default:\"map\"},\"circle-pitch-alignment\":{type:\"enum\",function:\"piecewise-constant\",\"zoom-function\":!0,values:{map:{},viewport:{}},default:\"viewport\"},\"circle-stroke-width\":{type:\"number\",default:0,minimum:0,function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,transition:!0,units:\"pixels\"},\"circle-stroke-color\":{type:\"color\",default:\"#000000\",function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,transition:!0},\"circle-stroke-opacity\":{type:\"number\",default:1,minimum:0,maximum:1,function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,transition:!0}},paint_symbol:{\"icon-opacity\":{type:\"number\",default:1,minimum:0,maximum:1,function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,transition:!0,requires:[\"icon-image\"]},\"icon-color\":{type:\"color\",default:\"#000000\",function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,transition:!0,requires:[\"icon-image\"]},\"icon-halo-color\":{type:\"color\",default:\"rgba(0, 0, 0, 0)\",function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,transition:!0,requires:[\"icon-image\"]},\"icon-halo-width\":{type:\"number\",default:0,minimum:0,function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,transition:!0,units:\"pixels\",requires:[\"icon-image\"]},\"icon-halo-blur\":{type:\"number\",default:0,minimum:0,function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,transition:!0,units:\"pixels\",requires:[\"icon-image\"]},\"icon-translate\":{type:\"array\",value:\"number\",length:2,default:[0,0],function:\"interpolated\",\"zoom-function\":!0,transition:!0,units:\"pixels\",requires:[\"icon-image\"]},\"icon-translate-anchor\":{type:\"enum\",function:\"piecewise-constant\",\"zoom-function\":!0,values:{map:{},viewport:{}},default:\"map\",requires:[\"icon-image\",\"icon-translate\"]},\"text-opacity\":{type:\"number\",default:1,minimum:0,maximum:1,function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,transition:!0,requires:[\"text-field\"]},\"text-color\":{type:\"color\",default:\"#000000\",function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,transition:!0,requires:[\"text-field\"]},\"text-halo-color\":{type:\"color\",default:\"rgba(0, 0, 0, 0)\",function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,transition:!0,requires:[\"text-field\"]},\"text-halo-width\":{type:\"number\",default:0,minimum:0,function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,transition:!0,units:\"pixels\",requires:[\"text-field\"]},\"text-halo-blur\":{type:\"number\",default:0,minimum:0,function:\"interpolated\",\"zoom-function\":!0,\"property-function\":!0,transition:!0,units:\"pixels\",requires:[\"text-field\"]},\"text-translate\":{type:\"array\",value:\"number\",length:2,default:[0,0],function:\"interpolated\",\"zoom-function\":!0,transition:!0,units:\"pixels\",requires:[\"text-field\"]},\"text-translate-anchor\":{type:\"enum\",function:\"piecewise-constant\",\"zoom-function\":!0,values:{map:{},viewport:{}},default:\"map\",requires:[\"text-field\",\"text-translate\"]}},paint_raster:{\"raster-opacity\":{type:\"number\",default:1,minimum:0,maximum:1,function:\"interpolated\",\"zoom-function\":!0,transition:!0},\"raster-hue-rotate\":{type:\"number\",default:0,period:360,function:\"interpolated\",\"zoom-function\":!0,transition:!0,units:\"degrees\"},\"raster-brightness-min\":{type:\"number\",function:\"interpolated\",\"zoom-function\":!0,default:0,minimum:0,maximum:1,transition:!0},\"raster-brightness-max\":{type:\"number\",function:\"interpolated\",\"zoom-function\":!0,default:1,minimum:0,maximum:1,transition:!0},\"raster-saturation\":{type:\"number\",default:0,minimum:-1,maximum:1,function:\"interpolated\",\"zoom-function\":!0,transition:!0},\"raster-contrast\":{type:\"number\",default:0,minimum:-1,maximum:1,function:\"interpolated\",\"zoom-function\":!0,transition:!0},\"raster-fade-duration\":{type:\"number\",default:300,minimum:0,function:\"interpolated\",\"zoom-function\":!0,transition:!0,units:\"milliseconds\"}},paint_background:{\"background-color\":{type:\"color\",default:\"#000000\",function:\"interpolated\",\"zoom-function\":!0,transition:!0,requires:[{\"!\":\"background-pattern\"}]},\"background-pattern\":{type:\"string\",function:\"piecewise-constant\",\"zoom-function\":!0,transition:!0},\"background-opacity\":{type:\"number\",default:1,minimum:0,maximum:1,function:\"interpolated\",\"zoom-function\":!0,transition:!0}},transition:{duration:{type:\"number\",default:300,minimum:0,units:\"milliseconds\"},delay:{type:\"number\",default:0,minimum:0,units:\"milliseconds\"}}}}),{}],125:[(function(t,e,i){\"use strict\";e.exports=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];for(var n=0,r=e;n<r.length;n+=1){var o=r[n];for(var a in o)t[a]=o[a]}return t}}),{}],126:[(function(t,e,i){\"use strict\";e.exports=function(t){return t instanceof Number?\"number\":t instanceof String?\"string\":t instanceof Boolean?\"boolean\":Array.isArray(t)?\"array\":null===t?\"null\":typeof t}}),{}],127:[(function(t,e,i){\"use strict\";function n(t,e,i){return t*(1-i)+e*i}e.exports=n,n.number=n,n.vec2=function(t,e,i){return[n(t[0],e[0],i),n(t[1],e[1],i)]},n.color=function(t,e,i){return[n(t[0],e[0],i),n(t[1],e[1],i),n(t[2],e[2],i),n(t[3],e[3],i)]},n.array=function(t,e,i){return t.map((function(t,r){return n(t,e[r],i)}))}}),{}],128:[(function(t,e,i){\"use strict\";var n=t(\"csscolorparser\").parseCSSColor;e.exports=function(t){if(\"string\"==typeof t){var e=n(t);if(!e)return;return[e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]]}return Array.isArray(t)?t:void 0}}),{csscolorparser:114}],129:[(function(t,e,i){\"use strict\";e.exports=[\"type\",\"source\",\"source-layer\",\"minzoom\",\"maxzoom\",\"filter\",\"layout\"]}),{}],130:[(function(t,e,i){\"use strict\";e.exports=function(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}}),{}],131:[(function(t,e,i){\"use strict\";var n=t(\"../error/validation_error\"),r=t(\"../util/get_type\"),o=t(\"../util/extend\");e.exports=function(e){var i=t(\"./validate_function\"),a=t(\"./validate_object\"),s={\"*\":function(){return[]},array:t(\"./validate_array\"),boolean:t(\"./validate_boolean\"),number:t(\"./validate_number\"),color:t(\"./validate_color\"),constants:t(\"./validate_constants\"),enum:t(\"./validate_enum\"),filter:t(\"./validate_filter\"),function:t(\"./validate_function\"),layer:t(\"./validate_layer\"),object:t(\"./validate_object\"),source:t(\"./validate_source\"),light:t(\"./validate_light\"),string:t(\"./validate_string\")},l=e.value,u=e.valueSpec,c=e.key,h=e.styleSpec,p=e.style;if(\"string\"===r(l)&&\"@\"===l[0]){if(h.$version>7)return[new n(c,l,\"constants have been deprecated as of v8\")];if(!(l in p.constants))return[new n(c,l,'constant \"%s\" not found',l)];e=o({},e,{value:p.constants[l]})}return u.function&&\"object\"===r(l)?i(e):u.type&&s[u.type]?s[u.type](e):a(o({},e,{valueSpec:u.type?h[u.type]:u}))}}),{\"../error/validation_error\":109,\"../util/extend\":125,\"../util/get_type\":126,\"./validate_array\":132,\"./validate_boolean\":133,\"./validate_color\":134,\"./validate_constants\":135,\"./validate_enum\":136,\"./validate_filter\":137,\"./validate_function\":138,\"./validate_layer\":140,\"./validate_light\":142,\"./validate_number\":143,\"./validate_object\":144,\"./validate_source\":147,\"./validate_string\":148}],132:[(function(t,e,i){\"use strict\";var n=t(\"../util/get_type\"),r=t(\"./validate\"),o=t(\"../error/validation_error\");e.exports=function(t){var e=t.value,i=t.valueSpec,a=t.style,s=t.styleSpec,l=t.key,u=t.arrayElementValidator||r;if(\"array\"!==n(e))return[new o(l,e,\"array expected, %s found\",n(e))];if(i.length&&e.length!==i.length)return[new o(l,e,\"array length %d expected, length %d found\",i.length,e.length)];if(i[\"min-length\"]&&e.length<i[\"min-length\"])return[new o(l,e,\"array length at least %d expected, length %d found\",i[\"min-length\"],e.length)];var c={type:i.value};s.$version<7&&(c.function=i.function),\"object\"===n(i.value)&&(c=i.value);for(var h=[],p=0;p<e.length;p++)h=h.concat(u({array:e,arrayIndex:p,value:e[p],valueSpec:c,style:a,styleSpec:s,key:l+\"[\"+p+\"]\"}));return h}}),{\"../error/validation_error\":109,\"../util/get_type\":126,\"./validate\":131}],133:[(function(t,e,i){\"use strict\";var n=t(\"../util/get_type\"),r=t(\"../error/validation_error\");e.exports=function(t){var e=t.value,i=t.key,o=n(e);return\"boolean\"!==o?[new r(i,e,\"boolean expected, %s found\",o)]:[]}}),{\"../error/validation_error\":109,\"../util/get_type\":126}],134:[(function(t,e,i){\"use strict\";var n=t(\"../error/validation_error\"),r=t(\"../util/get_type\"),o=t(\"csscolorparser\").parseCSSColor;e.exports=function(t){var e=t.key,i=t.value,a=r(i);return\"string\"!==a?[new n(e,i,\"color expected, %s found\",a)]:null===o(i)?[new n(e,i,'color expected, \"%s\" found',i)]:[]}}),{\"../error/validation_error\":109,\"../util/get_type\":126,csscolorparser:114}],135:[(function(t,e,i){\"use strict\";var n=t(\"../error/validation_error\"),r=t(\"../util/get_type\");e.exports=function(t){var e=t.key,i=t.value;if(t.styleSpec.$version>7)return i?[new n(e,i,\"constants have been deprecated as of v8\")]:[];var o=r(i);if(\"object\"!==o)return[new n(e,i,\"object expected, %s found\",o)];var a=[];for(var s in i)\"@\"!==s[0]&&a.push(new n(e+\".\"+s,i[s],'constants must start with \"@\"'));return a}}),{\"../error/validation_error\":109,\"../util/get_type\":126}],136:[(function(t,e,i){\"use strict\";var n=t(\"../error/validation_error\"),r=t(\"../util/unbundle_jsonlint\");e.exports=function(t){var e=t.key,i=t.value,o=t.valueSpec,a=[];return Array.isArray(o.values)?-1===o.values.indexOf(r(i))&&a.push(new n(e,i,\"expected one of [%s], %s found\",o.values.join(\", \"),i)):-1===Object.keys(o.values).indexOf(r(i))&&a.push(new n(e,i,\"expected one of [%s], %s found\",Object.keys(o.values).join(\", \"),i)),a}}),{\"../error/validation_error\":109,\"../util/unbundle_jsonlint\":130}],137:[(function(t,e,i){\"use strict\";var n=t(\"../error/validation_error\"),r=t(\"./validate_enum\"),o=t(\"../util/get_type\"),a=t(\"../util/unbundle_jsonlint\");e.exports=function t(e){var i,s=e.value,l=e.key,u=e.styleSpec,c=[];if(\"array\"!==o(s))return[new n(l,s,\"array expected, %s found\",o(s))];if(s.length<1)return[new n(l,s,\"filter array must have at least 1 element\")];switch(c=c.concat(r({key:l+\"[0]\",value:s[0],valueSpec:u.filter_operator,style:e.style,styleSpec:e.styleSpec})),a(s[0])){case\"<\":case\"<=\":case\">\":case\">=\":s.length>=2&&\"$type\"===a(s[1])&&c.push(new n(l,s,'\"$type\" cannot be use with operator \"%s\"',s[0]));case\"==\":case\"!=\":3!==s.length&&c.push(new n(l,s,'filter array for operator \"%s\" must have 3 elements',s[0]));case\"in\":case\"!in\":s.length>=2&&\"string\"!==(i=o(s[1]))&&c.push(new n(l+\"[1]\",s[1],\"string expected, %s found\",i));for(var h=2;h<s.length;h++)i=o(s[h]),\"$type\"===a(s[1])?c=c.concat(r({key:l+\"[\"+h+\"]\",value:s[h],valueSpec:u.geometry_type,style:e.style,styleSpec:e.styleSpec})):\"string\"!==i&&\"number\"!==i&&\"boolean\"!==i&&c.push(new n(l+\"[\"+h+\"]\",s[h],\"string, number, or boolean expected, %s found\",i));break;case\"any\":case\"all\":case\"none\":for(var p=1;p<s.length;p++)c=c.concat(t({key:l+\"[\"+p+\"]\",value:s[p],style:e.style,styleSpec:e.styleSpec}));break;case\"has\":case\"!has\":i=o(s[1]),2!==s.length?c.push(new n(l,s,'filter array for \"%s\" operator must have 2 elements',s[0])):\"string\"!==i&&c.push(new n(l+\"[1]\",s[1],\"string expected, %s found\",i))}return c}}),{\"../error/validation_error\":109,\"../util/get_type\":126,\"../util/unbundle_jsonlint\":130,\"./validate_enum\":136}],138:[(function(t,e,i){\"use strict\";var n=t(\"../error/validation_error\"),r=t(\"../util/get_type\"),o=t(\"./validate\"),a=t(\"./validate_object\"),s=t(\"./validate_array\"),l=t(\"./validate_number\"),u=t(\"../util/unbundle_jsonlint\");e.exports=function(t){function e(t){if(\"identity\"===_)return[new n(t.key,t.value,'identity function may not have a \"stops\" property')];var e=[],o=t.value;return e=e.concat(s({key:t.key,value:o,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:i})),\"array\"===r(o)&&0===o.length&&e.push(new n(t.key,o,\"array must have at least one stop\")),e}function i(t){var e=[],i=t.value,s=t.key;if(\"array\"!==r(i))return[new n(s,i,\"array expected, %s found\",r(i))];if(2!==i.length)return[new n(s,i,\"array length %d expected, length %d found\",2,i.length)];if(x){if(\"object\"!==r(i[0]))return[new n(s,i,\"object expected, %s found\",r(i[0]))];if(void 0===i[0].zoom)return[new n(s,i,\"object stop key must have zoom\")];if(void 0===i[0].value)return[new n(s,i,\"object stop key must have value\")];if(f&&f>u(i[0].zoom))return[new n(s,i[0].zoom,\"stop zoom values must appear in ascending order\")];u(i[0].zoom)!==f&&(f=u(i[0].zoom),d=void 0,y={}),e=e.concat(a({key:s+\"[0]\",value:i[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:l,value:c}}))}else e=e.concat(c({key:s+\"[0]\",value:i[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec}));return e.concat(o({key:s+\"[1]\",value:i[1],valueSpec:m,style:t.style,styleSpec:t.styleSpec}))}function c(t){var e=r(t.value),i=u(t.value);if(p){if(e!==p)return[new n(t.key,t.value,\"%s stop domain type must match previous stop domain type %s\",e,p)]}else p=e;if(\"number\"!==e&&\"string\"!==e&&\"boolean\"!==e)return[new n(t.key,t.value,\"stop domain value must be a number, string, or boolean\")];if(\"number\"!==e&&\"categorical\"!==_){var o=\"number expected, %s found\";return m[\"property-function\"]&&void 0===_&&(o+='\\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`.'),[new n(t.key,t.value,o,e)]}return\"categorical\"!==_||\"number\"!==e||isFinite(i)&&Math.floor(i)===i?\"categorical\"!==_&&\"number\"===e&&void 0!==d&&i<d?[new n(t.key,t.value,\"stop domain values must appear in ascending order\")]:(d=i,\"categorical\"===_&&i in y?[new n(t.key,t.value,\"stop domain values must be unique\")]:(y[i]=!0,[])):[new n(t.key,t.value,\"integer expected, found %s\",i)]}function h(t){return o({key:t.key,value:t.value,valueSpec:m,style:t.style,styleSpec:t.styleSpec})}var p,d,f,m=t.valueSpec,_=u(t.value.type),y={},g=\"categorical\"!==_&&void 0===t.value.property,v=!g,x=\"array\"===r(t.value.stops)&&\"array\"===r(t.value.stops[0])&&\"object\"===r(t.value.stops[0][0]),b=a({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:e,default:h}});return\"identity\"===_&&g&&b.push(new n(t.key,t.value,'missing required property \"property\"')),\"identity\"===_||t.value.stops||b.push(new n(t.key,t.value,'missing required property \"stops\"')),\"exponential\"===_&&\"piecewise-constant\"===t.valueSpec.function&&b.push(new n(t.key,t.value,\"exponential functions not supported\")),t.styleSpec.$version>=8&&(v&&!t.valueSpec[\"property-function\"]?b.push(new n(t.key,t.value,\"property functions not supported\")):g&&!t.valueSpec[\"zoom-function\"]&&b.push(new n(t.key,t.value,\"zoom functions not supported\"))),\"categorical\"!==_&&!x||void 0!==t.value.property||b.push(new n(t.key,t.value,'\"property\" property is required')),b}}),{\"../error/validation_error\":109,\"../util/get_type\":126,\"../util/unbundle_jsonlint\":130,\"./validate\":131,\"./validate_array\":132,\"./validate_number\":143,\"./validate_object\":144}],139:[(function(t,e,i){\"use strict\";var n=t(\"../error/validation_error\"),r=t(\"./validate_string\");e.exports=function(t){var e=t.value,i=t.key,o=r(t);return o.length?o:(-1===e.indexOf(\"{fontstack}\")&&o.push(new n(i,e,'\"glyphs\" url must include a \"{fontstack}\" token')),-1===e.indexOf(\"{range}\")&&o.push(new n(i,e,'\"glyphs\" url must include a \"{range}\" token')),o)}}),{\"../error/validation_error\":109,\"./validate_string\":148}],140:[(function(t,e,i){\"use strict\";var n=t(\"../error/validation_error\"),r=t(\"../util/unbundle_jsonlint\"),o=t(\"./validate_object\"),a=t(\"./validate_filter\"),s=t(\"./validate_paint_property\"),l=t(\"./validate_layout_property\"),u=t(\"../util/extend\");e.exports=function(t){var e=[],i=t.value,c=t.key,h=t.style,p=t.styleSpec;i.type||i.ref||e.push(new n(c,i,'either \"type\" or \"ref\" is required'));var d=r(i.type),f=r(i.ref);if(i.id)for(var m=r(i.id),_=0;_<t.arrayIndex;_++){var y=h.layers[_];r(y.id)===m&&e.push(new n(c,i.id,'duplicate layer id \"%s\", previously used at line %d',i.id,y.id.__line__))}if(\"ref\"in i){[\"type\",\"source\",\"source-layer\",\"filter\",\"layout\"].forEach((function(t){t in i&&e.push(new n(c,i[t],'\"%s\" is prohibited for ref layers',t))}));var g;h.layers.forEach((function(t){r(t.id)===f&&(g=t)})),g?g.ref?e.push(new n(c,i.ref,\"ref cannot reference another ref layer\")):d=r(g.type):e.push(new n(c,i.ref,'ref layer \"%s\" not found',f))}else if(\"background\"!==d)if(i.source){var v=h.sources&&h.sources[i.source],x=v&&r(v.type);v?\"vector\"===x&&\"raster\"===d?e.push(new n(c,i.source,'layer \"%s\" requires a raster source',i.id)):\"raster\"===x&&\"raster\"!==d?e.push(new n(c,i.source,'layer \"%s\" requires a vector source',i.id)):\"vector\"!==x||i[\"source-layer\"]||e.push(new n(c,i,'layer \"%s\" must specify a \"source-layer\"',i.id)):e.push(new n(c,i.source,'source \"%s\" not found',i.source))}else e.push(new n(c,i,'missing required property \"source\"'));return e=e.concat(o({key:c,value:i,valueSpec:p.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{\"*\":function(){return[]},filter:a,layout:function(t){return o({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{\"*\":function(t){return l(u({layerType:d},t))}}})},paint:function(t){return o({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{\"*\":function(t){return s(u({layerType:d},t))}}})}}}))}}),{\"../error/validation_error\":109,\"../util/extend\":125,\"../util/unbundle_jsonlint\":130,\"./validate_filter\":137,\"./validate_layout_property\":141,\"./validate_object\":144,\"./validate_paint_property\":145}],141:[(function(t,e,i){\"use strict\";var n=t(\"./validate_property\");e.exports=function(t){return n(t,\"layout\")}}),{\"./validate_property\":146}],142:[(function(t,e,i){\"use strict\";var n=t(\"../error/validation_error\"),r=t(\"../util/get_type\"),o=t(\"./validate\");e.exports=function(t){var e=t.value,i=t.styleSpec,a=i.light,s=t.style,l=[],u=r(e);if(void 0===e)return l;if(\"object\"!==u)return l=l.concat([new n(\"light\",e,\"object expected, %s found\",u)]);for(var c in e){var h=c.match(/^(.*)-transition$/);l=h&&a[h[1]]&&a[h[1]].transition?l.concat(o({key:c,value:e[c],valueSpec:i.transition,style:s,styleSpec:i})):a[c]?l.concat(o({key:c,value:e[c],valueSpec:a[c],style:s,styleSpec:i})):l.concat([new n(c,e[c],'unknown property \"%s\"',c)])}return l}}),{\"../error/validation_error\":109,\"../util/get_type\":126,\"./validate\":131}],143:[(function(t,e,i){\"use strict\";var n=t(\"../util/get_type\"),r=t(\"../error/validation_error\");e.exports=function(t){var e=t.key,i=t.value,o=t.valueSpec,a=n(i);return\"number\"!==a?[new r(e,i,\"number expected, %s found\",a)]:\"minimum\"in o&&i<o.minimum?[new r(e,i,\"%s is less than the minimum value %s\",i,o.minimum)]:\"maximum\"in o&&i>o.maximum?[new r(e,i,\"%s is greater than the maximum value %s\",i,o.maximum)]:[]}}),{\"../error/validation_error\":109,\"../util/get_type\":126}],144:[(function(t,e,i){\"use strict\";var n=t(\"../error/validation_error\"),r=t(\"../util/get_type\"),o=t(\"./validate\");e.exports=function(t){var e=t.key,i=t.value,a=t.valueSpec||{},s=t.objectElementValidators||{},l=t.style,u=t.styleSpec,c=[],h=r(i);if(\"object\"!==h)return[new n(e,i,\"object expected, %s found\",h)];for(var p in i){var d=p.split(\".\")[0],f=a[d]||a[\"*\"],m=void 0;if(s[d])m=s[d];else if(a[d])m=o;else if(s[\"*\"])m=s[\"*\"];else{if(!a[\"*\"]){c.push(new n(e,i[p],'unknown property \"%s\"',p));continue}m=o}c=c.concat(m({key:(e?e+\".\":e)+p,value:i[p],valueSpec:f,style:l,styleSpec:u,object:i,objectKey:p}))}for(var _ in a)a[_].required&&void 0===a[_].default&&void 0===i[_]&&c.push(new n(e,i,'missing required property \"%s\"',_));return c}}),{\"../error/validation_error\":109,\"../util/get_type\":126,\"./validate\":131}],145:[(function(t,e,i){\"use strict\";var n=t(\"./validate_property\");e.exports=function(t){return n(t,\"paint\")}}),{\"./validate_property\":146}],146:[(function(t,e,i){\"use strict\";var n=t(\"./validate\"),r=t(\"../error/validation_error\"),o=t(\"../util/get_type\");e.exports=function(t,e){var i=t.key,a=t.style,s=t.styleSpec,l=t.value,u=t.objectKey,c=s[e+\"_\"+t.layerType];if(!c)return[];var h=u.match(/^(.*)-transition$/);if(\"paint\"===e&&h&&c[h[1]]&&c[h[1]].transition)return n({key:i,value:l,valueSpec:s.transition,style:a,styleSpec:s});var p=t.valueSpec||c[u];if(!p)return[new r(i,l,'unknown property \"%s\"',u)];var d;if(\"string\"===o(l)&&p[\"property-function\"]&&!p.tokens&&(d=/^{([^}]+)}$/.exec(l)))return[new r(i,l,'\"%s\" does not support interpolation syntax\\nUse an identity property function instead: `{ \"type\": \"identity\", \"property\": %s` }`.',u,JSON.stringify(d[1]))];var f=[];return\"symbol\"===t.layerType&&\"text-field\"===u&&a&&!a.glyphs&&f.push(new r(i,l,'use of \"text-field\" requires a style \"glyphs\" property')),f.concat(n({key:t.key,value:l,valueSpec:p,style:a,styleSpec:s}))}}),{\"../error/validation_error\":109,\"../util/get_type\":126,\"./validate\":131}],147:[(function(t,e,i){\"use strict\";var n=t(\"../error/validation_error\"),r=t(\"../util/unbundle_jsonlint\"),o=t(\"./validate_object\"),a=t(\"./validate_enum\");e.exports=function(t){var e=t.value,i=t.key,s=t.styleSpec,l=t.style;if(!e.type)return[new n(i,e,'\"type\" is required')];var u=r(e.type),c=[];switch(u){case\"vector\":case\"raster\":if(c=c.concat(o({key:i,value:e,valueSpec:s.source_tile,style:t.style,styleSpec:s})),\"url\"in e)for(var h in e)[\"type\",\"url\",\"tileSize\"].indexOf(h)<0&&c.push(new n(i+\".\"+h,e[h],'a source with a \"url\" property may not include a \"%s\" property',h));return c;case\"geojson\":return o({key:i,value:e,valueSpec:s.source_geojson,style:l,styleSpec:s});case\"video\":return o({key:i,value:e,valueSpec:s.source_video,style:l,styleSpec:s});case\"image\":return o({key:i,value:e,valueSpec:s.source_image,style:l,styleSpec:s});case\"canvas\":return o({key:i,value:e,valueSpec:s.source_canvas,style:l,styleSpec:s});default:return a({key:i+\".type\",value:e.type,valueSpec:{values:[\"vector\",\"raster\",\"geojson\",\"video\",\"image\",\"canvas\"]},style:l,styleSpec:s})}}}),{\"../error/validation_error\":109,\"../util/unbundle_jsonlint\":130,\"./validate_enum\":136,\"./validate_object\":144}],148:[(function(t,e,i){\"use strict\";var n=t(\"../util/get_type\"),r=t(\"../error/validation_error\");e.exports=function(t){var e=t.value,i=t.key,o=n(e);return\"string\"!==o?[new r(i,e,\"string expected, %s found\",o)]:[]}}),{\"../error/validation_error\":109,\"../util/get_type\":126}],149:[(function(t,e,i){\"use strict\";function n(t,e){e=e||l;var i=[];return i=i.concat(s({key:\"\",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:u,\"*\":function(){return[]}}})),e.$version>7&&t.constants&&(i=i.concat(a({key:\"constants\",value:t.constants,style:t,styleSpec:e}))),r(i)}function r(t){return[].concat(t).sort((function(t,e){return t.line-e.line}))}function o(t){return function(){return r(t.apply(this,arguments))}}var a=t(\"./validate/validate_constants\"),s=t(\"./validate/validate\"),l=t(\"./reference/latest\"),u=t(\"./validate/validate_glyphs_url\");n.source=o(t(\"./validate/validate_source\")),n.light=o(t(\"./validate/validate_light\")),n.layer=o(t(\"./validate/validate_layer\")),n.filter=o(t(\"./validate/validate_filter\")),n.paintProperty=o(t(\"./validate/validate_paint_property\")),n.layoutProperty=o(t(\"./validate/validate_layout_property\")),e.exports=n}),{\"./reference/latest\":123,\"./validate/validate\":131,\"./validate/validate_constants\":135,\"./validate/validate_filter\":137,\"./validate/validate_glyphs_url\":139,\"./validate/validate_layer\":140,\"./validate/validate_layout_property\":141,\"./validate/validate_light\":142,\"./validate/validate_paint_property\":145,\"./validate/validate_source\":147}],150:[(function(t,e,i){\"use strict\";var n=function(){this.n=0,this.times=[]};n.prototype.stopped=function(){return this.times=this.times.filter((function(t){return t.time>=(new Date).getTime()})),!this.times.length},n.prototype.set=function(t){return this.times.push({id:this.n,time:t+(new Date).getTime()}),this.n++},n.prototype.cancel=function(t){this.times=this.times.filter((function(e){return e.id!==t}))},e.exports=n}),{}],151:[(function(t,e,i){\"use strict\";var n=t(\"../style-spec/reference/latest\"),r=t(\"../util/util\"),o=t(\"../util/evented\"),a=t(\"./validate_style\"),s=t(\"./style_declaration\"),l=t(\"./style_transition\"),u=[\"anchor\",\"color\",\"position\",\"intensity\"],c=n.light,h=(function(t){function e(e){t.call(this),this.set(e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){var e=this;if(!this._validate(a.light,t)){this._declarations={},this._transitions={},this._transitionOptions={},this.calculated={},t=r.extend({anchor:c.anchor.default,color:c.color.default,position:c.position.default,intensity:c.intensity.default},t);for(var i=0,n=u;i<n.length;i+=1){var o=n[i];e._declarations[o]=new s(c[o],t[o])}return this}},e.prototype.getLight=function(){return{anchor:this.getLightProperty(\"anchor\"),color:this.getLightProperty(\"color\"),position:this.getLightProperty(\"position\"),intensity:this.getLightProperty(\"intensity\")}},e.prototype.getLightProperty=function(t){return r.endsWith(t,\"-transition\")?this._transitionOptions[t]:this._declarations[t]&&this._declarations[t].value},e.prototype.getLightValue=function(t,e){if(\"position\"===t){var i=this._transitions[t].calculate(e),n=r.sphericalToCartesian(i);return{x:n[0],y:n[1],z:n[2]}}return this._transitions[t].calculate(e)},e.prototype.setLight=function(t){var e=this;if(!this._validate(a.light,t))for(var i in t){var n=t[i];r.endsWith(i,\"-transition\")?e._transitionOptions[i]=n:null===n||void 0===n?delete e._declarations[i]:e._declarations[i]=new s(c[i],n)}},e.prototype.recalculate=function(t){var e=this;for(var i in e._declarations)e.calculated[i]=e.getLightValue(i,{zoom:t})},e.prototype._applyLightDeclaration=function(t,e,i,n,o){var a=i.transition?this._transitions[t]:void 0,u=c[t];if(null!==e&&void 0!==e||(e=new s(u,u.default)),!a||a.declaration.json!==e.json){var h=r.extend({duration:300,delay:0},n,this.getLightProperty(t+\"-transition\")),p=this._transitions[t]=new l(u,e,a,h);p.instant()||(p.loopID=o.set(p.endTime-Date.now())),a&&o.cancel(a.loopID)}},e.prototype.updateLightTransitions=function(t,e,i){var n,r=this;for(n in r._declarations)r._applyLightDeclaration(n,r._declarations[n],t,e,i)},e.prototype._validate=function(t,e){return a.emitErrors(this,t.call(a,r.extend({value:e,style:{glyphs:!0,sprite:!0},styleSpec:n})))},e})(o);e.exports=h}),{\"../style-spec/reference/latest\":123,\"../util/evented\":210,\"../util/util\":223,\"./style_declaration\":157,\"./style_transition\":165,\"./validate_style\":166}],152:[(function(t,e,i){\"use strict\";var n=t(\"../util/mapbox\"),r=n.normalizeGlyphsURL,o=t(\"../util/ajax\"),a=t(\"./parse_glyph_pbf\");e.exports=function(t,e,i,n,s){var l=256*e,u=l+255,c=n(r(i).replace(\"{fontstack}\",t).replace(\"{range}\",l+\"-\"+u),o.ResourceType.Glyphs);o.getArrayBuffer(c,(function(t,e){if(t)s(t);else if(e){for(var i={},n=0,r=a(e.data);n<r.length;n+=1){var o=r[n];i[o.id]=o}s(null,i)}}))}}),{\"../util/ajax\":201,\"../util/mapbox\":217,\"./parse_glyph_pbf\":154}],153:[(function(t,e,i){\"use strict\";var n=t(\"../util/ajax\"),r=t(\"../util/browser\"),o=t(\"../util/mapbox\"),a=o.normalizeSpriteURL,s=t(\"../util/image\"),l=s.RGBAImage;e.exports=function(t,e,i){function o(){if(c)i(c);else if(s&&u){var t=r.getImageData(u),e={};for(var n in s){var o=s[n],a=o.width,h=o.height,p=o.x,d=o.y,f=o.sdf,m=o.pixelRatio,_=l.create({width:a,height:h});l.copy(t,_,{x:p,y:d},{x:0,y:0},{width:a,height:h}),e[n]={data:_,pixelRatio:m,sdf:f}}i(null,e)}}if(!t)return void i(null,{});var s,u,c,h=r.devicePixelRatio>1?\"@2x\":\"\";n.getJSON(e(a(t,h,\".json\"),n.ResourceType.SpriteJSON),(function(t,e){c||(c=t,s=e,o())})),n.getImage(e(a(t,h,\".png\"),n.ResourceType.SpriteImage),(function(t,e){c||(c=t,u=e,o())}))}}),{\"../util/ajax\":201,\"../util/browser\":202,\"../util/image\":213,\"../util/mapbox\":217}],154:[(function(t,e,i){\"use strict\";function n(t,e,i){1===t&&i.readMessage(r,e)}function r(t,e,i){if(3===t){var n=i.readMessage(o,{}),r=n.id,a=n.bitmap,l=n.width,c=n.height,h=n.left,p=n.top,d=n.advance;e.push({id:r,bitmap:s.create({width:l+2*u,height:c+2*u},a),metrics:{width:l,height:c,left:h,top:p,advance:d}})}}function o(t,e,i){1===t?e.id=i.readVarint():2===t?e.bitmap=i.readBytes():3===t?e.width=i.readVarint():4===t?e.height=i.readVarint():5===t?e.left=i.readSVarint():6===t?e.top=i.readSVarint():7===t&&(e.advance=i.readVarint())}var a=t(\"../util/image\"),s=a.AlphaImage,l=t(\"pbf\"),u=3;e.exports=function(t){return new l(t).readFields(n,[])},e.exports.GLYPH_PBF_BORDER=u}),{\"../util/image\":213,pbf:29}],155:[(function(t,e,i){\"use strict\";function n(t,e,i){return e.isPaintValueFeatureConstant(t)?e.paint[t]:i.programConfigurations.get(e.id).paintPropertyStatistics[t].max}function r(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function o(t,e,i,n,r){if(!e[0]&&!e[1])return t;var o=a.convert(e);\"viewport\"===i&&o._rotate(-n);for(var s=[],l=0;l<t.length;l++){for(var u=t[l],c=[],h=0;h<u.length;h++)c.push(u[h].sub(o._mult(r)));s.push(c)}return s}var a=t(\"@mapbox/point-geometry\");e.exports={getMaximumPaintValue:n,translateDistance:r,translate:o}}),{\"@mapbox/point-geometry\":2}],156:[(function(t,e,i){\"use strict\";var n=t(\"../util/evented\"),r=t(\"./style_layer\"),o=t(\"./load_sprite\"),a=t(\"../render/image_manager\"),s=t(\"../render/glyph_manager\"),l=t(\"./light\"),u=t(\"../render/line_atlas\"),c=t(\"../util/util\"),h=t(\"../util/ajax\"),p=t(\"../util/mapbox\"),d=t(\"../util/browser\"),f=t(\"../util/dispatcher\"),m=t(\"./animation_loop\"),_=t(\"./validate_style\"),y=t(\"../source/source\").getType,g=t(\"../source/source\").setType,v=t(\"../source/query_features\"),x=t(\"../source/source_cache\"),b=t(\"../style-spec/reference/latest\"),w=t(\"../style-spec/function\"),E=t(\"../util/global_worker_pool\"),C=t(\"../style-spec/deref\"),T=t(\"../style-spec/diff\"),S=t(\"../source/rtl_text_plugin\"),A=c.pick(T.operations,[\"addLayer\",\"removeLayer\",\"setPaintProperty\",\"setLayoutProperty\",\"setFilter\",\"addSource\",\"removeSource\",\"setLayerZoomRange\",\"setLight\",\"setTransition\"]),L=c.pick(T.operations,[\"setCenter\",\"setZoom\",\"setBearing\",\"setPitch\"]),I=(function(t){function e(e,i,n){var r=this;t.call(this),n=c.extend({validate:\"string\"!=typeof e||!p.isMapboxURL(e)},n);var l=function(t,e){return r.map?r.map._transformRequest(t,e):{url:t}};this.map=i,this.animationLoop=i&&i.animationLoop||new m,this.dispatcher=new f(E(),this),this.imageManager=new a,this.glyphManager=new s(l,n.localIdeographFontFamily),this.lineAtlas=new u(256,512),this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory={},this._loaded=!1,c.bindAll([\"_redoPlacement\"],this),this._resetUpdates(),this.setEventedParent(i),this.fire(\"dataloading\",{dataType:\"style\"});var y=this;this._rtlTextPluginCallback=S.registerForPluginAvailability((function(t){y.dispatcher.broadcast(\"loadRTLTextPlugin\",t.pluginBlobURL,t.errorCallback);for(var e in y.sourceCaches)y.sourceCaches[e].reload()}));var g=function(t,e){if(t)r.fire(\"error\",{error:t});else if(e){if(n.validate&&_.emitErrors(r,_(e)))return;r._loaded=!0,r.stylesheet=e,r.updateClasses();for(var i in e.sources)r.addSource(i,e.sources[i],n);o(e.sprite,l,(function(t,e){if(t)r.fire(\"error\",t);else if(e)for(var i in e)r.imageManager.addImage(i,e[i]);r.imageManager.setLoaded(!0)})),r.glyphManager.setURL(e.glyphs),r._resolve(),r.fire(\"data\",{dataType:\"style\"}),r.fire(\"style.load\")}};\"string\"==typeof e?h.getJSON(l(p.normalizeStyleURL(e),h.ResourceType.Style),g):d.frame((function(){return g(null,e)})),this.on(\"data\",(function(t){if(\"source\"===t.dataType&&\"metadata\"===t.sourceDataType){var e=r.sourceCaches[t.sourceId];if(e){var i=e.getSource();if(i&&i.vectorLayerIds)for(var n in r._layers){var o=r._layers[n];o.source===i.id&&r._validateLayer(o)}}}}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._validateLayer=function(t){var e=this.sourceCaches[t.source];if(e){var i=t.sourceLayer;if(i){var n=e.getSource();(\"geojson\"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(i))&&this.fire(\"error\",{error:new Error('Source layer \"'+i+'\" does not exist on source \"'+n.id+'\" as specified by style layer \"'+t.id+'\"')})}}},e.prototype.loaded=function(){var t=this;if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in t.sourceCaches)if(!t.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()},e.prototype._resolve=function(){var t=this,e=C(this.stylesheet.layers);this._order=e.map((function(t){return t.id})),this._layers={};for(var i=0,n=e;i<n.length;i+=1){var o=n[i];o=r.create(o),o.setEventedParent(t,{layer:{id:o.id}}),t._layers[o.id]=o}this.dispatcher.broadcast(\"setLayers\",this._serializeLayers(this._order)),this.light=new l(this.stylesheet.light)},e.prototype._serializeLayers=function(t){var e=this;return t.map((function(t){return e._layers[t].serialize()}))},e.prototype._applyClasses=function(t,e){var i=this;if(this._loaded){t=t||[],e=e||{transition:!0};var n=this.stylesheet.transition||{},r=this._updatedAllPaintProps?this._layers:this._updatedPaintProps;for(var o in r){var a=i._layers[o],s=i._updatedPaintProps[o];if(i._updatedAllPaintProps||s.all)a.updatePaintTransitions(t,e,n,i.animationLoop,i.zoomHistory);else for(var l in s)i._layers[o].updatePaintTransition(l,t,e,n,i.animationLoop,i.zoomHistory)}this.light.updateLightTransitions(e,n,this.animationLoop)}},e.prototype._recalculate=function(t){var e=this;if(this._loaded){for(var i in e.sourceCaches)e.sourceCaches[i].used=!1;this._updateZoomHistory(t);for(var n=0,r=e._order;n<r.length;n+=1){var o=r[n],a=e._layers[o];a.recalculate(t),!a.isHidden(t)&&a.source&&(e.sourceCaches[a.source].used=!0)}this.light.recalculate(t),Math.floor(this.z)!==Math.floor(t)&&this.animationLoop.set(300),this.z=t}},e.prototype._updateZoomHistory=function(t){var e=this.zoomHistory;void 0===e.lastIntegerZoom&&(e.lastIntegerZoom=Math.floor(t),e.lastIntegerZoomTime=0,e.lastZoom=t),Math.floor(e.lastZoom)<Math.floor(t)?(e.lastIntegerZoom=Math.floor(t),e.lastIntegerZoomTime=Date.now()):Math.floor(e.lastZoom)>Math.floor(t)&&(e.lastIntegerZoom=Math.floor(t+1),e.lastIntegerZoomTime=Date.now()),e.lastZoom=t},e.prototype._checkLoaded=function(){if(!this._loaded)throw new Error(\"Style is not done loading\")},e.prototype.update=function(t,e){var i=this;if(this._changed){var n=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);(n.length||r.length||this._updatedSymbolOrder)&&this._updateWorkerLayers(n,r);for(var o in i._updatedSources){var a=i._updatedSources[o];\"reload\"===a?i._reloadSource(o):\"clear\"===a&&i._clearSource(o)}this._applyClasses(t,e),this._resetUpdates(),this.fire(\"data\",{dataType:\"style\"})}},e.prototype._updateWorkerLayers=function(t,e){var i=this,n=this._updatedSymbolOrder?this._order.filter((function(t){return\"symbol\"===i._layers[t].type})):null;this.dispatcher.broadcast(\"updateLayers\",{layers:this._serializeLayers(t),removedIds:e,symbolOrder:n})},e.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSymbolOrder=!1,this._updatedSources={},this._updatedPaintProps={},this._updatedAllPaintProps=!1},e.prototype.setState=function(t){var e=this;if(this._checkLoaded(),_.emitErrors(this,_(t)))return!1;t=c.clone(t),t.layers=C(t.layers);var i=T(this.serialize(),t).filter((function(t){return!(t.command in L)}));if(0===i.length)return!1;var n=i.filter((function(t){return!(t.command in A)}));if(n.length>0)throw new Error(\"Unimplemented: \"+n.map((function(t){return t.command})).join(\", \")+\".\");return i.forEach((function(t){\"setTransition\"!==t.command&&e[t.command].apply(e,t.args)})),this.stylesheet=t,!0},e.prototype.addImage=function(t,e){if(this.imageManager.getImage(t))return this.fire(\"error\",{error:new Error(\"An image with this name already exists.\")});this.imageManager.addImage(t,e),this.fire(\"data\",{dataType:\"style\"})},e.prototype.removeImage=function(t){if(!this.imageManager.getImage(t))return this.fire(\"error\",{error:new Error(\"No image with this name exists.\")});this.imageManager.removeImage(t),this.fire(\"data\",{dataType:\"style\"})},e.prototype.addSource=function(t,e,i){var n=this;if(this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error(\"There is already a source with this ID\");if(!e.type)throw new Error(\"The type property must be defined, but the only the following properties were given: \"+Object.keys(e).join(\", \")+\".\");if(!([\"vector\",\"raster\",\"geojson\",\"video\",\"image\",\"canvas\"].indexOf(e.type)>=0&&this._validate(_.source,\"sources.\"+t,e,null,i))){var r=this.sourceCaches[t]=new x(t,e,this.dispatcher);r.style=this,r.setEventedParent(this,(function(){return{isSourceLoaded:n.loaded(),source:r.serialize(),sourceId:t}})),r.onAdd(this.map),this._changed=!0}},e.prototype.removeSource=function(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error(\"There is no source with this ID\");var e=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],e.fire(\"data\",{sourceDataType:\"metadata\",dataType:\"source\",sourceId:t}),e.setEventedParent(null),e.clearTiles(),e.onRemove&&e.onRemove(this.map),this._changed=!0},e.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},e.prototype.addLayer=function(t,e,i){this._checkLoaded();var n=t.id;if(\"object\"==typeof t.source&&(this.addSource(n,t.source),t=c.clone(t),t=c.extend(t,{source:n})),!this._validate(_.layer,\"layers.\"+n,t,{arrayIndex:-1},i)){var o=r.create(t);this._validateLayer(o),o.setEventedParent(this,{layer:{id:n}});var a=e?this._order.indexOf(e):this._order.length;if(this._order.splice(a,0,n),this._layers[n]=o,this._removedLayers[n]&&o.source){var s=this._removedLayers[n];delete this._removedLayers[n],s.type!==o.type?this._updatedSources[o.source]=\"clear\":(this._updatedSources[o.source]=\"reload\",this.sourceCaches[o.source].pause())}this._updateLayer(o),\"symbol\"===o.type&&(this._updatedSymbolOrder=!0),this.updateClasses(n)}},e.prototype.moveLayer=function(t,e){this._checkLoaded(),this._changed=!0;var i=this._layers[t];if(!i)return void this.fire(\"error\",{error:new Error(\"The layer '\"+t+\"' does not exist in the map's style and cannot be moved.\")});var n=this._order.indexOf(t);this._order.splice(n,1);var r=e?this._order.indexOf(e):this._order.length;this._order.splice(r,0,t),\"symbol\"===i.type&&(this._updatedSymbolOrder=!0,i.source&&!this._updatedSources[i.source]&&(this._updatedSources[i.source]=\"reload\",this.sourceCaches[i.source].pause()))},e.prototype.removeLayer=function(t){this._checkLoaded();var e=this._layers[t];if(!e)return void this.fire(\"error\",{error:new Error(\"The layer '\"+t+\"' does not exist in the map's style and cannot be removed.\")});e.setEventedParent(null);var i=this._order.indexOf(t);this._order.splice(i,1),\"symbol\"===e.type&&(this._updatedSymbolOrder=!0),this._changed=!0,this._removedLayers[t]=e,delete this._layers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t]},e.prototype.getLayer=function(t){return this._layers[t]},e.prototype.setLayerZoomRange=function(t,e,i){this._checkLoaded();var n=this.getLayer(t);if(!n)return void this.fire(\"error\",{error:new Error(\"The layer '\"+t+\"' does not exist in the map's style and cannot have zoom extent.\")});n.minzoom===e&&n.maxzoom===i||(null!=e&&(n.minzoom=e),null!=i&&(n.maxzoom=i),this._updateLayer(n))},e.prototype.setFilter=function(t,e){this._checkLoaded();var i=this.getLayer(t);if(!i)return void this.fire(\"error\",{error:new Error(\"The layer '\"+t+\"' does not exist in the map's style and cannot be filtered.\")});null!==e&&void 0!==e&&this._validate(_.filter,\"layers.\"+i.id+\".filter\",e)||c.deepEqual(i.filter,e)||(i.filter=c.clone(e),this._updateLayer(i))},e.prototype.getFilter=function(t){return c.clone(this.getLayer(t).filter)},e.prototype.setLayoutProperty=function(t,e,i){this._checkLoaded();var n=this.getLayer(t);if(!n)return void this.fire(\"error\",{error:new Error(\"The layer '\"+t+\"' does not exist in the map's style and cannot be styled.\")});c.deepEqual(n.getLayoutProperty(e),i)||(n.setLayoutProperty(e,i),this._updateLayer(n))},e.prototype.getLayoutProperty=function(t,e){return this.getLayer(t).getLayoutProperty(e)},e.prototype.setPaintProperty=function(t,e,i,n){this._checkLoaded();var r=this.getLayer(t);if(!r)return void this.fire(\"error\",{error:new Error(\"The layer '\"+t+\"' does not exist in the map's style and cannot be styled.\")});if(!c.deepEqual(r.getPaintProperty(e,n),i)){var o=r.isPaintValueFeatureConstant(e);r.setPaintProperty(e,i,n),!(i&&w.isFunctionDefinition(i)&&\"$zoom\"!==i.property&&void 0!==i.property)&&o||this._updateLayer(r),this.updateClasses(t,e)}},e.prototype.getPaintProperty=function(t,e,i){return this.getLayer(t).getPaintProperty(e,i)},e.prototype.getTransition=function(){return c.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},e.prototype.updateClasses=function(t,e){if(this._changed=!0,t){var i=this._updatedPaintProps;i[t]||(i[t]={}),i[t][e||\"all\"]=!0}else this._updatedAllPaintProps=!0},e.prototype.serialize=function(){var t=this;return c.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:c.mapObject(this.sourceCaches,(function(t){return t.serialize()})),layers:this._order.map((function(e){return t._layers[e].serialize()}))},(function(t){return void 0!==t}))},e.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]=\"reload\",this.sourceCaches[t.source].pause()),this._changed=!0},e.prototype._flattenRenderedFeatures=function(t){for(var e=this,i=[],n=this._order.length-1;n>=0;n--)for(var r=e._order[n],o=0,a=t;o<a.length;o+=1){var s=a[o],l=s[r];if(l)for(var u=0,c=l;u<c.length;u+=1){var h=c[u];i.push(h)}}return i},e.prototype.queryRenderedFeatures=function(t,e,i,n){var r=this;e&&e.filter&&this._validate(_.filter,\"queryRenderedFeatures.filter\",e.filter);var o={};if(e&&e.layers){if(!Array.isArray(e.layers))return this.fire(\"error\",{error:\"parameters.layers must be an Array.\"}),[];for(var a=0,s=e.layers;a<s.length;a+=1){var l=s[a],u=r._layers[l];if(!u)return r.fire(\"error\",{error:\"The layer '\"+l+\"' does not exist in the map's style and cannot be queried for features.\"}),[];o[u.source]=!0}}var c=[];for(var h in r.sourceCaches)if(!e.layers||o[h]){var p=v.rendered(r.sourceCaches[h],r._layers,t,e,i,n);c.push(p)}return this._flattenRenderedFeatures(c)},e.prototype.querySourceFeatures=function(t,e){e&&e.filter&&this._validate(_.filter,\"querySourceFeatures.filter\",e.filter);var i=this.sourceCaches[t];return i?v.source(i,e):[]},e.prototype.addSourceType=function(t,e,i){return y(t)?i(new Error('A source type called \"'+t+'\" already exists.')):(g(t,e),e.workerSourceURL?void this.dispatcher.broadcast(\"loadWorkerSource\",{name:t,url:e.workerSourceURL},i):i(null,null))},e.prototype.getLight=function(){return this.light.getLight()},e.prototype.setLight=function(t,e){this._checkLoaded();var i=this.light.getLight(),n=!1;for(var r in t)if(!c.deepEqual(t[r],i[r])){n=!0;break}if(n){var o=this.stylesheet.transition||{};this.light.setLight(t),this.light.updateLightTransitions(e||{transition:!0},o,this.animationLoop)}},e.prototype._validate=function(t,e,i,n,r){return(!r||!1!==r.validate)&&_.emitErrors(this,t.call(_,c.extend({key:e,style:this.serialize(),value:i,styleSpec:b},n)))},e.prototype._remove=function(){var t=this;S.evented.off(\"pluginAvailable\",this._rtlTextPluginCallback);for(var e in t.sourceCaches)t.sourceCaches[e].clearTiles();this.dispatcher.remove()},e.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},e.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},e.prototype._updateSources=function(t){var e=this;for(var i in e.sourceCaches)e.sourceCaches[i].update(t)},e.prototype._redoPlacement=function(){var t=this;for(var e in t.sourceCaches)t.sourceCaches[e].redoPlacement()},e.prototype.getImages=function(t,e,i){this.imageManager.getImages(e.icons,i)},e.prototype.getGlyphs=function(t,e,i){this.glyphManager.getGlyphs(e.stacks,i)},e})(n);e.exports=I}),{\"../render/glyph_manager\":75,\"../render/image_manager\":77,\"../render/line_atlas\":78,\"../source/query_features\":94,\"../source/rtl_text_plugin\":96,\"../source/source\":97,\"../source/source_cache\":98,\"../style-spec/deref\":107,\"../style-spec/diff\":108,\"../style-spec/function\":112,\"../style-spec/reference/latest\":123,\"../util/ajax\":201,\"../util/browser\":202,\"../util/dispatcher\":208,\"../util/evented\":210,\"../util/global_worker_pool\":212,\"../util/mapbox\":217,\"../util/util\":223,\"./animation_loop\":150,\"./light\":151,\"./load_sprite\":153,\"./style_layer\":158,\"./validate_style\":166}],157:[(function(t,e,i){\"use strict\";var n=t(\"../style-spec/function\"),r=t(\"../util/util\"),o=function(t,e){var i=this;if(this.value=r.clone(e),this.isFunction=n.isFunctionDefinition(e),this.json=JSON.stringify(this.value),this.minimum=t.minimum,this.function=n(this.value,t),this.isFeatureConstant=this.function.isFeatureConstant,this.isZoomConstant=this.function.isZoomConstant,this.isFeatureConstant||this.isZoomConstant){if(!this.isZoomConstant){this.stopZoomLevels=[];for(var o=0,a=i.value.stops;o<a.length;o+=1){var s=a[o];i.stopZoomLevels.indexOf(s[0])<0&&i.stopZoomLevels.push(s[0])}}}else{this.stopZoomLevels=[];for(var l=[],u=0,c=i.value.stops;u<c.length;u+=1){var h=c[u],p=h[0].zoom;i.stopZoomLevels.indexOf(p)<0&&(i.stopZoomLevels.push(p),l.push([p,l.length]))}this._functionInterpolationT=n({type:\"exponential\",stops:l,base:e.base},{type:\"number\"})}};o.prototype.calculate=function(t,e){var i=this.function(t&&t.zoom,e||{});return void 0!==this.minimum&&i<this.minimum?this.minimum:i},o.prototype.calculateInterpolationT=function(t){return this.isFeatureConstant||this.isZoomConstant?0:this._functionInterpolationT(t&&t.zoom,{})},e.exports=o}),{\"../style-spec/function\":112,\"../util/util\":223}],158:[(function(t,e,i){\"use strict\";function n(t){return t.value}var r=t(\"../util/util\"),o=t(\"./style_transition\"),a=t(\"./style_declaration\"),s=t(\"../style-spec/reference/latest\"),l=t(\"./validate_style\"),u=t(\"./../style-spec/util/parse_color\"),c=t(\"../util/evented\"),h=(function(t){function e(e){var i=this;t.call(this),this.id=e.id,this.metadata=e.metadata,this.type=e.type,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,\"background\"!==e.type&&(this.source=e.source,this.sourceLayer=e[\"source-layer\"],this.filter=e.filter),this.paint={},this.layout={},this._paintSpecifications=s[\"paint_\"+this.type],this._layoutSpecifications=s[\"layout_\"+this.type],this._paintTransitions={},this._paintTransitionOptions={},this._paintDeclarations={},this._layoutDeclarations={},this._layoutFunctions={};var n,r,o={validate:!1};for(var a in e){var l=a.match(/^paint(?:\\.(.*))?$/);if(l){var u=l[1]||\"\";for(n in e[a])i.setPaintProperty(n,e[a][n],u,o)}}for(r in e.layout)i.setLayoutProperty(r,e.layout[r],o);for(n in i._paintSpecifications)i.paint[n]=i.getPaintValue(n);for(r in i._layoutSpecifications)i._updateLayoutValue(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setLayoutProperty=function(t,e,i){if(null==e)delete this._layoutDeclarations[t];else{var n=\"layers.\"+this.id+\".layout.\"+t;if(this._validate(l.layoutProperty,n,t,e,i))return;this._layoutDeclarations[t]=new a(this._layoutSpecifications[t],e)}this._updateLayoutValue(t)},e.prototype.getLayoutProperty=function(t){return this._layoutDeclarations[t]&&this._layoutDeclarations[t].value},e.prototype.getLayoutValue=function(t,e,i){var n=this._layoutSpecifications[t],r=this._layoutDeclarations[t];return r?r.calculate(e,i):n.default},e.prototype.setPaintProperty=function(t,e,i,n){var o=\"layers.\"+this.id+(i?'[\"paint.'+i+'\"].':\".paint.\")+t;if(r.endsWith(t,\"-transition\"))if(this._paintTransitionOptions[i||\"\"]||(this._paintTransitionOptions[i||\"\"]={}),null===e||void 0===e)delete this._paintTransitionOptions[i||\"\"][t];else{if(this._validate(l.paintProperty,o,t,e,n))return;this._paintTransitionOptions[i||\"\"][t]=e}else if(this._paintDeclarations[i||\"\"]||(this._paintDeclarations[i||\"\"]={}),null===e||void 0===e)delete this._paintDeclarations[i||\"\"][t];else{if(this._validate(l.paintProperty,o,t,e,n))return;this._paintDeclarations[i||\"\"][t]=new a(this._paintSpecifications[t],e)}},e.prototype.getPaintProperty=function(t,e){return e=e||\"\",r.endsWith(t,\"-transition\")?this._paintTransitionOptions[e]&&this._paintTransitionOptions[e][t]:this._paintDeclarations[e]&&this._paintDeclarations[e][t]&&this._paintDeclarations[e][t].value},e.prototype.getPaintValue=function(t,e,i){var n=this._paintSpecifications[t],r=this._paintTransitions[t];return r?r.calculate(e,i):\"color\"===n.type&&n.default?u(n.default):n.default},e.prototype.getPaintValueStopZoomLevels=function(t){var e=this._paintTransitions[t];return e?e.declaration.stopZoomLevels:[]},e.prototype.getLayoutValueStopZoomLevels=function(t){var e=this._layoutDeclarations[t];return e?e.stopZoomLevels:[]},e.prototype.getPaintInterpolationT=function(t,e){return this._paintTransitions[t].declaration.calculateInterpolationT(e)},e.prototype.getLayoutInterpolationT=function(t,e){return this._layoutDeclarations[t].calculateInterpolationT(e)},e.prototype.isPaintValueFeatureConstant=function(t){var e=this._paintTransitions[t];return!e||e.declaration.isFeatureConstant},e.prototype.isLayoutValueFeatureConstant=function(t){var e=this._layoutDeclarations[t];return!e||e.isFeatureConstant},e.prototype.isPaintValueZoomConstant=function(t){var e=this._paintTransitions[t];return!e||e.declaration.isZoomConstant},e.prototype.isLayoutValueZoomConstant=function(t){var e=this._layoutDeclarations[t];return!e||e.isZoomConstant},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||\"none\"===this.layout.visibility},e.prototype.updatePaintTransitions=function(t,e,i,n,o){for(var a=this,s=r.extend({},this._paintDeclarations[\"\"]),l=0;l<t.length;l++)r.extend(s,a._paintDeclarations[t[l]]);var u;for(u in s)a._applyPaintDeclaration(u,s[u],e,i,n,o);for(u in a._paintTransitions)u in s||a._applyPaintDeclaration(u,null,e,i,n,o)},e.prototype.updatePaintTransition=function(t,e,i,n,r,o){for(var a=this,s=this._paintDeclarations[\"\"][t],l=0;l<e.length;l++){var u=a._paintDeclarations[e[l]];u&&u[t]&&(s=u[t])}this._applyPaintDeclaration(t,s,i,n,r,o)},e.prototype.recalculate=function(t){var e=this;for(var i in e._paintTransitions)e.paint[i]=e.getPaintValue(i,{zoom:t});for(var n in e._layoutFunctions)e.layout[n]=e.getLayoutValue(n,{zoom:t})},e.prototype.serialize=function(){var t=this,e={id:this.id,type:this.type,source:this.source,\"source-layer\":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:r.mapObject(this._layoutDeclarations,n)};for(var i in t._paintDeclarations)e[\"\"===i?\"paint\":\"paint.\"+i]=r.mapObject(t._paintDeclarations[i],n);return r.filterObject(e,(function(t,e){return void 0!==t&&!(\"layout\"===e&&!Object.keys(t).length)}))},e.prototype._applyPaintDeclaration=function(t,e,i,n,s,l){var u=i.transition?this._paintTransitions[t]:void 0,c=this._paintSpecifications[t];if(null!==e&&void 0!==e||(e=new a(c,c.default)),!u||u.declaration.json!==e.json){var h=r.extend({duration:300,delay:0},n,this.getPaintProperty(t+\"-transition\")),p=this._paintTransitions[t]=new o(c,e,u,h,l);p.instant()||(p.loopID=s.set(p.endTime-Date.now())),u&&s.cancel(u.loopID)}},e.prototype._updateLayoutValue=function(t){var e=this._layoutDeclarations[t];e&&e.isFunction?this._layoutFunctions[t]=!0:(delete this._layoutFunctions[t],this.layout[t]=this.getLayoutValue(t))},e.prototype._validate=function(t,e,i,n,r){return(!r||!1!==r.validate)&&l.emitErrors(this,t.call(l,{key:e,layerType:this.type,objectKey:i,value:n,styleSpec:s,style:{glyphs:!0,sprite:!0}}))},e.prototype.has3DPass=function(){return!1},e})(c);e.exports=h;var p={circle:t(\"./style_layer/circle_style_layer\"),fill:t(\"./style_layer/fill_style_layer\"),\"fill-extrusion\":t(\"./style_layer/fill_extrusion_style_layer\"),line:t(\"./style_layer/line_style_layer\"),symbol:t(\"./style_layer/symbol_style_layer\"),background:h,raster:h};h.create=function(t){return new p[t.type](t)}}),{\"../style-spec/reference/latest\":123,\"../util/evented\":210,\"../util/util\":223,\"./../style-spec/util/parse_color\":128,\"./style_declaration\":157,\"./style_layer/circle_style_layer\":159,\"./style_layer/fill_extrusion_style_layer\":160,\"./style_layer/fill_style_layer\":161,\"./style_layer/line_style_layer\":162,\"./style_layer/symbol_style_layer\":163,\"./style_transition\":165,\"./validate_style\":166}],159:[(function(t,e,i){\"use strict\";var n=t(\"../style_layer\"),r=t(\"../../data/bucket/circle_bucket\"),o=t(\"../../util/intersection_tests\"),a=o.multiPolygonIntersectsBufferedMultiPoint,s=t(\"../query_utils\"),l=s.getMaximumPaintValue,u=s.translateDistance,c=s.translate,h=(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new r(t)},e.prototype.queryRadius=function(t){return l(\"circle-radius\",this,t)+u(this.paint[\"circle-translate\"])},e.prototype.queryIntersectsFeature=function(t,e,i,n,r,o){var s=c(t,this.getPaintValue(\"circle-translate\",{zoom:n},e.properties),this.getPaintValue(\"circle-translate-anchor\",{zoom:n},e.properties),r,o),l=this.getPaintValue(\"circle-radius\",{zoom:n},e.properties)*o;return a(s,i,l)},e})(n);e.exports=h}),{\"../../data/bucket/circle_bucket\":43,\"../../util/intersection_tests\":214,\"../query_utils\":155,\"../style_layer\":158}],160:[(function(t,e,i){\"use strict\";var n=t(\"../style_layer\"),r=t(\"../../data/bucket/fill_extrusion_bucket\"),o=t(\"../../util/intersection_tests\"),a=o.multiPolygonIntersectsMultiPolygon,s=t(\"../query_utils\"),l=s.translateDistance,u=s.translate,c=(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPaintValue=function(e,i,n){var r=t.prototype.getPaintValue.call(this,e,i,n);return\"fill-extrusion-color\"===e&&r&&(r[3]=1),r},e.prototype.createBucket=function(t){return new r(t)},e.prototype.queryRadius=function(){return l(this.paint[\"fill-extrusion-translate\"])},e.prototype.queryIntersectsFeature=function(t,e,i,n,r,o){var s=u(t,this.getPaintValue(\"fill-extrusion-translate\",{zoom:n},e.properties),this.getPaintValue(\"fill-extrusion-translate-anchor\",{zoom:n},e.properties),r,o);return a(s,i)},e.prototype.has3DPass=function(){return 0!==this.paint[\"fill-extrusion-opacity\"]&&\"none\"!==this.layout.visibility},e})(n);e.exports=c}),{\"../../data/bucket/fill_extrusion_bucket\":45,\"../../util/intersection_tests\":214,\"../query_utils\":155,\"../style_layer\":158}],161:[(function(t,e,i){\"use strict\";var n=t(\"../style_layer\"),r=t(\"../../data/bucket/fill_bucket\"),o=t(\"../../util/intersection_tests\"),a=o.multiPolygonIntersectsMultiPolygon,s=t(\"../query_utils\"),l=s.translateDistance,u=s.translate,c=(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPaintValue=function(e,i,n){var r=this;if(\"fill-outline-color\"===e){if(void 0===this.getPaintProperty(\"fill-outline-color\"))return t.prototype.getPaintValue.call(this,\"fill-color\",i,n);for(var o=this._paintTransitions[\"fill-outline-color\"];o;){if(!(o&&o.declaration&&o.declaration.value))return t.prototype.getPaintValue.call(r,\"fill-color\",i,n);o=o.oldTransition}}return t.prototype.getPaintValue.call(this,e,i,n)},e.prototype.getPaintValueStopZoomLevels=function(e){return\"fill-outline-color\"===e&&void 0===this.getPaintProperty(\"fill-outline-color\")?t.prototype.getPaintValueStopZoomLevels.call(this,\"fill-color\"):t.prototype.getPaintValueStopZoomLevels.call(this,e)},e.prototype.getPaintInterpolationT=function(e,i){return\"fill-outline-color\"===e&&void 0===this.getPaintProperty(\"fill-outline-color\")?t.prototype.getPaintInterpolationT.call(this,\"fill-color\",i):t.prototype.getPaintInterpolationT.call(this,e,i)},e.prototype.isPaintValueFeatureConstant=function(e){return\"fill-outline-color\"===e&&void 0===this.getPaintProperty(\"fill-outline-color\")?t.prototype.isPaintValueFeatureConstant.call(this,\"fill-color\"):t.prototype.isPaintValueFeatureConstant.call(this,e)},e.prototype.isPaintValueZoomConstant=function(e){return\"fill-outline-color\"===e&&void 0===this.getPaintProperty(\"fill-outline-color\")?t.prototype.isPaintValueZoomConstant.call(this,\"fill-color\"):t.prototype.isPaintValueZoomConstant.call(this,e)},e.prototype.createBucket=function(t){return new r(t)},e.prototype.queryRadius=function(){return l(this.paint[\"fill-translate\"])},e.prototype.queryIntersectsFeature=function(t,e,i,n,r,o){var s=u(t,this.getPaintValue(\"fill-translate\",{zoom:n},e.properties),this.getPaintValue(\"fill-translate-anchor\",{zoom:n},e.properties),r,o);return a(s,i)},e})(n);e.exports=c}),{\"../../data/bucket/fill_bucket\":44,\"../../util/intersection_tests\":214,\"../query_utils\":155,\"../style_layer\":158}],162:[(function(t,e,i){\"use strict\";function n(t,e){return e>0?e+2*t:t}function r(t,e){for(var i=[],n=new o(0,0),r=0;r<t.length;r++){for(var a=t[r],s=[],l=0;l<a.length;l++){var u=a[l-1],c=a[l],h=a[l+1],p=0===l?n:c.sub(u)._unit()._perp(),d=l===a.length-1?n:h.sub(c)._unit()._perp(),f=p._add(d)._unit(),m=f.x*d.x+f.y*d.y;f._mult(1/m),s.push(f._mult(e)._add(c))}i.push(s)}return i}var o=t(\"@mapbox/point-geometry\"),a=t(\"../style_layer\"),s=t(\"../../data/bucket/line_bucket\"),l=t(\"../../util/intersection_tests\"),u=l.multiPolygonIntersectsBufferedMultiLine,c=t(\"../query_utils\"),h=c.getMaximumPaintValue,p=c.translateDistance,d=c.translate,f=(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new s(t)},e.prototype.queryRadius=function(t){var e=t,i=n(h(\"line-width\",this,e),h(\"line-gap-width\",this,e)),r=h(\"line-offset\",this,e);return i/2+Math.abs(r)+p(this.paint[\"line-translate\"])},e.prototype.queryIntersectsFeature=function(t,e,i,o,a,s){var l=d(t,this.getPaintValue(\"line-translate\",{zoom:o},e.properties),this.getPaintValue(\"line-translate-anchor\",{zoom:o},e.properties),a,s),c=s/2*n(this.getPaintValue(\"line-width\",{zoom:o},e.properties),this.getPaintValue(\"line-gap-width\",{zoom:o},e.properties)),h=this.getPaintValue(\"line-offset\",{zoom:o},e.properties);return h&&(i=r(i,h*s)),u(l,i,c)},e})(a);e.exports=f}),{\"../../data/bucket/line_bucket\":46,\"../../util/intersection_tests\":214,\"../query_utils\":155,\"../style_layer\":158,\"@mapbox/point-geometry\":2}],163:[(function(t,e,i){\"use strict\";var n=t(\"../style_layer\"),r=t(\"../../data/bucket/symbol_bucket\"),o=(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLayoutValue=function(e,i,n){var r=t.prototype.getLayoutValue.call(this,e,i,n);if(\"auto\"!==r)return r;switch(e){case\"text-rotation-alignment\":case\"icon-rotation-alignment\":return\"line\"===this.getLayoutValue(\"symbol-placement\",i,n)?\"map\":\"viewport\";case\"text-pitch-alignment\":return this.getLayoutValue(\"text-rotation-alignment\",i,n);case\"icon-pitch-alignment\":return this.getLayoutValue(\"icon-rotation-alignment\",i,n);default:return r}},e.prototype.createBucket=function(t){return new r(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e})(n);e.exports=o}),{\"../../data/bucket/symbol_bucket\":47,\"../style_layer\":158}],164:[(function(t,e,i){\"use strict\";var n=t(\"./style_layer\"),r=t(\"../util/util\"),o=t(\"../style-spec/feature_filter\"),a=t(\"../style-spec/group_by_layout\"),s=function(t){t&&this.replace(t)};s.prototype.replace=function(t){var e=this;this.symbolOrder=[];for(var i=0,n=t;i<n.length;i+=1){var r=n[i];\"symbol\"===r.type&&e.symbolOrder.push(r.id)}this._layerConfigs={},this._layers={},this.update(t,[])},s.prototype.update=function(t,e,i){for(var s=this,l=0,u=t;l<u.length;l+=1){var c=u[l];s._layerConfigs[c.id]=c;var h=s._layers[c.id]=n.create(c);h.updatePaintTransitions({},{transition:!1}),h.filter=o(h.filter)}for(var p=0,d=e;p<d.length;p+=1){var f=d[p];delete s._layerConfigs[f],delete s._layers[f]}i&&(this.symbolOrder=i),this.familiesBySource={};for(var m=a(r.values(this._layerConfigs)),_=0,y=m;_<y.length;_+=1){var g=y[_],v=g.map((function(t){return s._layers[t.id]})),x=v[0];if(!x.layout||\"none\"!==x.layout.visibility){var b=x.source||\"\",w=s.familiesBySource[b];w||(w=s.familiesBySource[b]={});var E=x.sourceLayer||\"_geojsonTileLayer\",C=w[E];C||(C=w[E]=[]),C.push(v)}}},e.exports=s}),{\"../style-spec/feature_filter\":110,\"../style-spec/group_by_layout\":113,\"../util/util\":223,\"./style_layer\":158}],165:[(function(t,e,i){\"use strict\";function n(t,e,i){if(void 0!==t&&void 0!==e)return{from:t.to,fromScale:t.toScale,to:e.to,toScale:e.toScale,t:i}}var r=t(\"../util/util\"),o=t(\"../style-spec/util/interpolate\"),a={lastIntegerZoom:0,lastIntegerZoomTime:0,lastZoom:0},s=function(t,e,i,r,s){this.declaration=e,this.startTime=this.endTime=(new Date).getTime(),this.oldTransition=i,this.duration=r.duration||0,this.delay=r.delay||0,this.zoomTransitioned=\"piecewise-constant\"===t.function&&t.transition,this.interp=this.zoomTransitioned?n:o[t.type],this.zoomHistory=s||a,this.instant()||(this.endTime=this.startTime+this.duration+this.delay),i&&i.endTime<=this.startTime&&delete i.oldTransition};s.prototype.instant=function(){return!this.oldTransition||!this.interp||0===this.duration&&0===this.delay},s.prototype.calculate=function(t,e,i){var n=this._calculateTargetValue(t,e);if(this.instant())return n;if((i=i||Date.now())>=this.endTime)return n;var o=this.oldTransition.calculate(t,e,this.startTime),a=r.easeCubicInOut((i-this.startTime-this.delay)/this.duration);return this.interp(o,n,a)},s.prototype._calculateTargetValue=function(t,e){if(!this.zoomTransitioned)return this.declaration.calculate(t,e);var i=t.zoom,n=this.zoomHistory.lastIntegerZoom,r=i>n?2:.5,a=this.declaration.calculate({zoom:i>n?i-1:i+1},e),s=this.declaration.calculate({zoom:i},e),l=Math.min((Date.now()-this.zoomHistory.lastIntegerZoomTime)/this.duration,1),u=Math.abs(i-n),c=o(l,1,u);return void 0!==a&&void 0!==s?{from:a,fromScale:r,to:s,toScale:1,t:c}:void 0},e.exports=s}),{\"../style-spec/util/interpolate\":127,\"../util/util\":223}],166:[(function(t,e,i){\"use strict\";e.exports=t(\"../style-spec/validate_style.min\"),e.exports.emitErrors=function(t,e){if(e&&e.length){for(var i=0,n=e;i<n.length;i+=1){var r=n[i],o=r.message;t.fire(\"error\",{error:new Error(o)})}return!0}return!1}}),{\"../style-spec/validate_style.min\":149}],167:[(function(t,e,i){\"use strict\";var n=t(\"@mapbox/point-geometry\"),r=(function(t){function e(e,i,n,r){t.call(this,e,i),this.angle=n,void 0!==r&&(this.segment=r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e})(n);e.exports=r}),{\"@mapbox/point-geometry\":2}],168:[(function(t,e,i){\"use strict\";function n(t,e,i,n,r){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-i/2;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var l=[],u=0;s<i/2;){var c=t[a-1],h=t[a],p=t[a+1];if(!p)return!1;var d=c.angleTo(h)-h.angleTo(p);for(d=Math.abs((d+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:d}),u+=d;s-l[0].distance>n;)u-=l.shift().angleDelta;if(u>r)return!1;a++,s+=h.dist(p)}return!0}e.exports=n}),{}],169:[(function(t,e,i){\"use strict\";function n(t,e,i,n,o){for(var a=[],s=0;s<t.length;s++)for(var l=t[s],u=void 0,c=0;c<l.length-1;c++){var h=l[c],p=l[c+1];h.x<e&&p.x<e||(h.x<e?h=new r(e,h.y+(p.y-h.y)*((e-h.x)/(p.x-h.x)))._round():p.x<e&&(p=new r(e,h.y+(p.y-h.y)*((e-h.x)/(p.x-h.x)))._round()),h.y<i&&p.y<i||(h.y<i?h=new r(h.x+(p.x-h.x)*((i-h.y)/(p.y-h.y)),i)._round():p.y<i&&(p=new r(h.x+(p.x-h.x)*((i-h.y)/(p.y-h.y)),i)._round()),h.x>=n&&p.x>=n||(h.x>=n?h=new r(n,h.y+(p.y-h.y)*((n-h.x)/(p.x-h.x)))._round():p.x>=n&&(p=new r(n,h.y+(p.y-h.y)*((n-h.x)/(p.x-h.x)))._round()),h.y>=o&&p.y>=o||(h.y>=o?h=new r(h.x+(p.x-h.x)*((o-h.y)/(p.y-h.y)),o)._round():p.y>=o&&(p=new r(h.x+(p.x-h.x)*((o-h.y)/(p.y-h.y)),o)._round()),u&&h.equals(u[u.length-1])||(u=[h],a.push(u)),u.push(p)))))}return a}var r=t(\"@mapbox/point-geometry\");e.exports=n}),{\"@mapbox/point-geometry\":2}],170:[(function(t,e,i){\"use strict\";var n=t(\"../util/struct_array\"),r=t(\"@mapbox/point-geometry\"),o=n({members:[{type:\"Int16\",name:\"anchorPointX\"},{type:\"Int16\",name:\"anchorPointY\"},{type:\"Int16\",name:\"offsetX\"},{type:\"Int16\",name:\"offsetY\"},{type:\"Int16\",name:\"x1\"},{type:\"Int16\",name:\"y1\"},{type:\"Int16\",name:\"x2\"},{type:\"Int16\",name:\"y2\"},{type:\"Float32\",name:\"unadjustedMaxScale\"},{type:\"Float32\",name:\"maxScale\"},{type:\"Uint32\",name:\"featureIndex\"},{type:\"Uint16\",name:\"sourceLayerIndex\"},{type:\"Uint16\",name:\"bucketIndex\"},{type:\"Int16\",name:\"bbox0\"},{type:\"Int16\",name:\"bbox1\"},{type:\"Int16\",name:\"bbox2\"},{type:\"Int16\",name:\"bbox3\"},{type:\"Float32\",name:\"placementScale\"}]});Object.defineProperty(o.prototype.StructType.prototype,\"anchorPoint\",{get:function(){return new r(this.anchorPointX,this.anchorPointY)}}),e.exports=o}),{\"../util/struct_array\":220,\"@mapbox/point-geometry\":2}],171:[(function(t,e,i){\"use strict\";var n=function(t,e,i,n,r,o,a,s,l,u,c){var h=a.top*s-l,p=a.bottom*s+l,d=a.left*s-l,f=a.right*s+l;if(this.boxStartIndex=t.length,u){var m=p-h,_=f-d;if(m>0)if(m=Math.max(10*s,m),c){var y=e[i.segment+1].sub(e[i.segment])._unit()._mult(_),g=[i.sub(y),i.add(y)];this._addLineCollisionBoxes(t,g,i,0,_,m,n,r,o)}else this._addLineCollisionBoxes(t,e,i,i.segment,_,m,n,r,o)}else t.emplaceBack(i.x,i.y,0,0,d,h,f,p,1/0,1/0,n,r,o,0,0,0,0,0);this.boxEndIndex=t.length};n.prototype._addLineCollisionBoxes=function(t,e,i,n,r,o,a,s,l){var u=o/2,c=Math.floor(r/u),h=Math.floor(c/2),p=-o/2,d=i,f=n+1,m=p,_=-r/2,y=_-r/8;do{if(--f<0){if(m>_)return;f=0;break}m-=e[f].dist(d),d=e[f]}while(m>y);for(var g=e[f].dist(e[f+1]),v=-h;v<c+h;v++){var x=v*u,b=_+x;if(x<0&&(b+=x),x>r&&(b+=x-r),!(b<m)){for(;m+g<b;){if(m+=g,++f+1>=e.length)return;g=e[f].dist(e[f+1])}var w=b-m,E=e[f],C=e[f+1],T=C.sub(E)._unit()._mult(w)._add(E)._round(),S=Math.max(Math.abs(b-p)-u/2,0),A=r/2/S;(v<0||v>=c)&&(A=Math.min(A,.99)),t.emplaceBack(T.x,T.y,T.x-i.x,T.y-i.y,-o/2,-o/2,o/2,o/2,A,A,a,s,l,0,0,0,0,0)}}},e.exports=n}),{}],172:[(function(t,e,i){\"use strict\";var n=t(\"@mapbox/point-geometry\"),r=t(\"../data/extent\"),o=t(\"grid-index\"),a=t(\"../util/intersection_tests\"),s=function(t,e,i,n,a,s,l){void 0===s&&(s=new o(r,12,6)),void 0===l&&(l=new o(r,12,0)),this.angle=t,this.pitch=e,this.cameraToCenterDistance=i,this.cameraToTileDistance=n,this.grid=s,this.ignoredGrid=l,this.perspectiveRatio=1+.5*(n/i-1),this.minScale=.5/this.perspectiveRatio,this.maxScale=2/this.perspectiveRatio;var u=Math.sin(this.angle),c=Math.cos(this.angle);this.rotationMatrix=[c,-u,u,c],this.reverseRotationMatrix=[c,u,-u,c],this.yStretch=Math.max(1,n/(i*Math.cos(e/180*Math.PI))),this.collisionBoxArray=a,0===a.length&&(a.emplaceBack(),a.emplaceBack(0,0,0,0,0,-r,0,r,1/0,1/0,0,0,0,0,0,0,0,0,0),a.emplaceBack(r,0,0,0,0,-r,0,r,1/0,1/0,0,0,0,0,0,0,0,0,0),a.emplaceBack(0,0,0,0,-r,0,r,0,1/0,1/0,0,0,0,0,0,0,0,0,0),a.emplaceBack(0,r,0,0,-r,0,r,0,1/0,1/0,0,0,0,0,0,0,0,0,0)),this.tempCollisionBox=a.get(0),this.edges=[a.get(1),a.get(2),a.get(3),a.get(4)]};s.deserialize=function(t,e){return new s(t.angle,t.pitch,t.cameraToCenterDistance,t.cameraToTileDistance,e,new o(t.grid),new o(t.ignoredGrid))},s.prototype.serialize=function(t){var e=this.grid.toArrayBuffer(),i=this.ignoredGrid.toArrayBuffer();return t&&(t.push(e),t.push(i)),{angle:this.angle,pitch:this.pitch,cameraToCenterDistance:this.cameraToCenterDistance,cameraToTileDistance:this.cameraToTileDistance,grid:e,ignoredGrid:i}},s.prototype.placeCollisionFeature=function(t,e,i){for(var r=this,o=this.collisionBoxArray,a=this.minScale,s=this.rotationMatrix,l=this.yStretch,u=t.boxStartIndex;u<t.boxEndIndex;u++){var c=o.get(u),h=c.anchorPoint._matMult(s),p=h.x,d=h.y,f=p+c.x1*r.perspectiveRatio,m=d+c.y1*l*r.perspectiveRatio,_=p+c.x2*r.perspectiveRatio,y=d+c.y2*l*r.perspectiveRatio;c.bbox0=f,c.bbox1=m,c.bbox2=_,c.bbox3=y;var g=new n(c.offsetX,c.offsetY)._matMult(s),v=g.x*g.x,x=g.y*g.y,b=x*l*l,w=Math.sqrt((v+b)/(v+x))||1;if(c.maxScale=c.unadjustedMaxScale*w,!e)for(var E=r.grid.query(f,m,_,y),C=0;C<E.length;C++){var T=o.get(E[C]),S=T.anchorPoint._matMult(s);if((a=r.getPlacementScale(a,h,c,S,T))>=r.maxScale)return a}if(i){var A=void 0;if(r.angle){var L=r.reverseRotationMatrix,I=new n(c.x1,c.y1).matMult(L),M=new n(c.x2,c.y1).matMult(L),z=new n(c.x1,c.y2).matMult(L),P=new n(c.x2,c.y2).matMult(L);A=r.tempCollisionBox,A.anchorPointX=c.anchorPoint.x,A.anchorPointY=c.anchorPoint.y,A.x1=Math.min(I.x,M.x,z.x,P.x),A.y1=Math.min(I.y,M.x,z.x,P.x),A.x2=Math.max(I.x,M.x,z.x,P.x),A.y2=Math.max(I.y,M.x,z.x,P.x),A.maxScale=c.maxScale}else A=c;for(var R=0;R<this.edges.length;R++){var D=r.edges[R];if((a=r.getPlacementScale(a,c.anchorPoint,A,D.anchorPoint,D))>=r.maxScale)return a}}}return a},s.prototype.queryRenderedSymbols=function(t,e){var i={},r=[];if(0===t.length||0===this.grid.keys.length&&0===this.ignoredGrid.keys.length)return r;for(var o=this.collisionBoxArray,s=this.rotationMatrix,l=this.yStretch,u=[],c=1/0,h=1/0,p=-1/0,d=-1/0,f=0;f<t.length;f++)for(var m=t[f],_=0;_<m.length;_++){var y=m[_].matMult(s);c=Math.min(c,y.x),h=Math.min(h,y.y),p=Math.max(p,y.x),d=Math.max(d,y.y),u.push(y)}for(var g=this.grid.query(c,h,p,d),v=this.ignoredGrid.query(c,h,p,d),x=0;x<v.length;x++)g.push(v[x]);for(var b=e/this.perspectiveRatio,w=Math.pow(2,Math.ceil(Math.log(b)/Math.LN2*10)/10),E=0;E<g.length;E++){var C=o.get(g[E]),T=C.sourceLayerIndex,S=C.featureIndex;if(void 0===i[T]&&(i[T]={}),!i[T][S]&&!(w<C.placementScale||w>C.maxScale)){var A=C.anchorPoint.matMult(s),L=A.x+C.x1/b,I=A.y+C.y1/b*l,M=A.x+C.x2/b,z=A.y+C.y2/b*l,P=[new n(L,I),new n(M,I),new n(M,z),new n(L,z)];a.polygonIntersectsPolygon(u,P)&&(i[T][S]=!0,r.push(g[E]))}}return r},s.prototype.getPlacementScale=function(t,e,i,n,r){var o=e.x-n.x,a=e.y-n.y,s=(r.x1-i.x2)/o,l=(r.x2-i.x1)/o,u=(r.y1-i.y2)*this.yStretch/a,c=(r.y2-i.y1)*this.yStretch/a;(isNaN(s)||isNaN(l))&&(s=l=1),(isNaN(u)||isNaN(c))&&(u=c=1);var h=Math.min(Math.max(s,l),Math.max(u,c)),p=r.maxScale,d=i.maxScale;return h>p&&(h=p),h>d&&(h=d),h>t&&h>=r.placementScale&&(t=h),t},s.prototype.insertCollisionFeature=function(t,e,i){for(var n=this,r=i?this.ignoredGrid:this.grid,o=this.collisionBoxArray,a=t.boxStartIndex;a<t.boxEndIndex;a++){var s=o.get(a);s.placementScale=e,e<n.maxScale&&(1===n.perspectiveRatio||s.maxScale>=1)&&r.insert(a,s.bbox0,s.bbox1,s.bbox2,s.bbox3)}},e.exports=s}),{\"../data/extent\":48,\"../util/intersection_tests\":214,\"@mapbox/point-geometry\":2,\"grid-index\":22}],173:[(function(t,e,i){\"use strict\";function n(t,e,i,n,o,a,s,l,u){var c=n?.6*a*s:0,h=Math.max(n?n.right-n.left:0,o?o.right-o.left:0),p=0===t[0].x||t[0].x===u||0===t[0].y||t[0].y===u;e-h*s<e/4&&(e=h*s+e/4);var d=2*a;return r(t,p?e/2*l%e:(h/2+d)*s*l%e,e,c,i,h*s,p,!1,u)}function r(t,e,i,n,l,u,c,h,p){for(var d=u/2,f=0,m=0;m<t.length-1;m++)f+=t[m].dist(t[m+1]);for(var _=0,y=e-i,g=[],v=0;v<t.length-1;v++){for(var x=t[v],b=t[v+1],w=x.dist(b),E=b.angleTo(x);y+i<_+w;){y+=i;var C=(y-_)/w,T=o(x.x,b.x,C),S=o(x.y,b.y,C);if(T>=0&&T<p&&S>=0&&S<p&&y-d>=0&&y+d<=f){var A=new a(T,S,E,v);A._round(),n&&!s(t,A,u,n,l)||g.push(A)}}_+=w}return h||g.length||c||(g=r(t,_/2,i,n,l,u,c,!0,p)),g}var o=t(\"../style-spec/util/interpolate\"),a=t(\"../symbol/anchor\"),s=t(\"./check_max_angle\");e.exports=n}),{\"../style-spec/util/interpolate\":127,\"../symbol/anchor\":167,\"./check_max_angle\":168}],174:[(function(t,e,i){\"use strict\";e.exports=function(t){function e(e){s.push(t[e]),l++}function i(t,e,i){var n=a[t];return delete a[t],a[e]=n,s[n].geometry[0].pop(),s[n].geometry[0]=s[n].geometry[0].concat(i[0]),n}function n(t,e,i){var n=o[e];return delete o[e],o[t]=n,s[n].geometry[0].shift(),s[n].geometry[0]=i[0].concat(s[n].geometry[0]),n}function r(t,e,i){var n=i?e[0][e[0].length-1]:e[0][0];return t+\":\"+n.x+\":\"+n.y}for(var o={},a={},s=[],l=0,u=0;u<t.length;u++){var c=t[u],h=c.geometry,p=c.text;if(p){var d=r(p,h),f=r(p,h,!0);if(d in a&&f in o&&a[d]!==o[f]){var m=n(d,f,h),_=i(d,f,s[m].geometry);delete o[d],delete a[f],a[r(p,s[_].geometry,!0)]=_,s[m].geometry=null}else d in a?i(d,f,h):f in o?n(d,f,h):(e(u),o[d]=l-1,a[f]=l-1)}else e(u)}return s.filter((function(t){return t.geometry}))}}),{}],175:[(function(t,e,i){\"use strict\";function n(t,e,i,n,r){var o=f.identity(new Float32Array(16));return e?(f.identity(o),f.scale(o,o,[1/r,1/r,1]),i||f.rotateZ(o,o,n.angle)):(f.scale(o,o,[n.width/2,-n.height/2,1]),f.translate(o,o,[1,-1,0]),f.multiply(o,o,t)),o}function r(t,e,i,n,r){var o=f.identity(new Float32Array(16));return e?(f.multiply(o,o,t),f.scale(o,o,[r,r,1]),i||f.rotateZ(o,o,-n.angle)):(f.scale(o,o,[1,-1,1]),f.translate(o,o,[-1,-1,0]),f.scale(o,o,[2/n.width,2/n.height,1])),o}function o(t,e){var i=[t.x,t.y,0,1];m.transformMat4(i,i,e);var n=i[3];return{point:new p(i[0]/n,i[1]/n),signedDistanceFromCamera:n}}function a(t,e,i,n){var r=t[0]/t[3],o=t[1]/t[3];return r>=-i[0]&&r<=i[0]&&o>=-i[1]&&o<=i[1]&&n.frameHistory.isVisible(e)}function s(t,e,i,n,r,s,u,c,d,f){var y=n?t.textSizeData:t.iconSizeData,g=_.evaluateSizeForZoom(y,i.transform,f,n),v=[256/i.width*2+1,256/i.height*2+1],x=n?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;x.clear();for(var b=t.lineVertexArray,w=n?t.placedGlyphArray:t.placedIconArray,E=0;E<w.length;E++){var C=w.get(E),T=[C.anchorX,C.anchorY,0,1];if(m.transformMat4(T,T,e),a(T,C.placementZoom,v,i)){var S=T[3],A=1+.5*(S/i.transform.cameraToCenterDistance-1),L=_.evaluateSizeForFeature(y,g,C),I=u?L*A:L/A,M=new p(C.anchorX,C.anchorY),z=o(M,r).point,P={},R=l(C,I,!1,c,e,r,s,t.glyphOffsetArray,b,x,z,M,P);(R.notEnoughRoom||R.needsFlipping&&l(C,I,!0,c,e,r,s,t.glyphOffsetArray,b,x,z,M,P).notEnoughRoom)&&h(C.numGlyphs,x)}else h(C.numGlyphs,x)}n?t.text.dynamicLayoutVertexBuffer.updateData(x.serialize()):t.icon.dynamicLayoutVertexBuffer.updateData(x.serialize())}function l(t,e,i,n,r,a,s,l,h,d,f,m,_){var y,v=e/24,x=t.lineOffsetX*e,b=t.lineOffsetY*e;if(t.numGlyphs>1){var w=t.glyphStartIndex+t.numGlyphs,E=l.get(t.glyphStartIndex).offsetX,C=l.get(w-1).offsetX,T=t.lineStartIndex,S=t.lineStartIndex+t.lineLength,A=c(v*E,x,b,i,f,m,t.segment,T,S,h,a,_);if(!A)return{notEnoughRoom:!0};var L=c(v*C,x,b,i,f,m,t.segment,T,S,h,a,_);if(!L)return{notEnoughRoom:!0};var I=o(A.point,s).point,M=o(L.point,s).point;if(n&&!i&&(t.vertical?I.y<M.y:I.x>M.x))return{needsFlipping:!0};y=[A];for(var z=t.glyphStartIndex+1;z<w-1;z++){var P=l.get(z);y.push(c(v*P.offsetX,x,b,i,f,m,t.segment,T,S,h,a,_))}y.push(L)}else{if(n&&!i){var R=o(m,r).point,D=h.get(t.lineStartIndex+t.segment+1),k=o(D,r),O=k.signedDistanceFromCamera>0?k.point:u(m,new p(D.x,D.y),R,1,r);if(t.vertical?O.y>R.y:O.x<R.x)return{needsFlipping:!0}}var N=l.get(t.glyphStartIndex),B=c(v*N.offsetX,x,b,i,f,m,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,h,a,_);if(!B)return{notEnoughRoom:!0};y=[B]}for(var F=t.placementZoom,V=0,U=y;V<U.length;V+=1){var j=U[V];g(d,j.point,j.angle,F)}return{}}function u(t,e,i,n,r){var a=o(t.add(t.sub(e)._unit()),r).point,s=i.sub(a);return i.add(s._mult(n/s.mag()))}function c(t,e,i,n,r,a,s,l,c,h,d,f){var m=n?t-e:t+e,_=m>0?1:-1,y=0;n&&(_*=-1,y=Math.PI),_<0&&(y+=Math.PI);for(var g=_>0?l+s:l+s+1,v=r,x=r,b=0,w=0,E=Math.abs(m);b+w<=E;){if((g+=_)<l||g>=c)return null;if(x=v,void 0===(v=f[g])){var C=o(h.get(g),d);v=C.signedDistanceFromCamera>0?f[g]=C.point:u(0===b?a:new p(h.get(g-_).x,h.get(g-_).y),new p(h.get(g).x,h.get(g).y),x,E-b+1,d)}b+=w,w=x.dist(v)}var T=(E-b)/w,S=v.sub(x),A=S.mult(T)._add(x);return A._add(S._unit()._perp()._mult(i*_)),{point:A,angle:y+Math.atan2(v.y-x.y,v.x-x.x)}}function h(t,e){for(var i=0;i<t;i++)g(e,v,0,25)}var p=t(\"@mapbox/point-geometry\"),d=t(\"@mapbox/gl-matrix\"),f=d.mat4,m=d.vec4,_=t(\"./symbol_size\"),y=t(\"../data/bucket/symbol_bucket\"),g=y.addDynamicAttributes;e.exports={updateLineLabels:s,getLabelPlaneMatrix:n,getGlCoordMatrix:r};var v=new p(-1/0,-1/0)}),{\"../data/bucket/symbol_bucket\":47,\"./symbol_size\":178,\"@mapbox/gl-matrix\":1,\"@mapbox/point-geometry\":2}],176:[(function(t,e,i){\"use strict\";function n(t,e,i,n,r,a,s){var l,u,c,h,p=e.image,d=i.layout,f=e.top-1/p.pixelRatio,m=e.left-1/p.pixelRatio,_=e.bottom+1/p.pixelRatio,y=e.right+1/p.pixelRatio;if(\"none\"!==d[\"icon-text-fit\"]&&r){var g=y-m,v=_-f,x=d[\"text-size\"]/24,b=r.left*x,w=r.right*x,E=r.top*x,C=r.bottom*x,T=w-b,S=C-E,A=d[\"icon-text-fit-padding\"][0],L=d[\"icon-text-fit-padding\"][1],I=d[\"icon-text-fit-padding\"][2],M=d[\"icon-text-fit-padding\"][3],z=\"width\"===d[\"icon-text-fit\"]?.5*(S-v):0,P=\"height\"===d[\"icon-text-fit\"]?.5*(T-g):0,R=\"width\"===d[\"icon-text-fit\"]||\"both\"===d[\"icon-text-fit\"]?T:g,D=\"height\"===d[\"icon-text-fit\"]||\"both\"===d[\"icon-text-fit\"]?S:v;l=new o(b+P-M,E+z-A),u=new o(b+P+L+R,E+z-A),c=new o(b+P+L+R,E+z+I+D),h=new o(b+P-M,E+z+I+D)}else l=new o(m,f),u=new o(y,f),c=new o(y,_),h=new o(m,_);var k=i.getLayoutValue(\"icon-rotate\",a,s)*Math.PI/180;if(k){var O=Math.sin(k),N=Math.cos(k),B=[N,-O,O,N];l._matMult(B),u._matMult(B),h._matMult(B),c._matMult(B)}return[{tl:l,tr:u,bl:h,br:c,tex:{x:p.textureRect.x-1,y:p.textureRect.y-1,w:p.textureRect.w+2,h:p.textureRect.h+2},writingMode:void 0,glyphOffset:[0,0]}]}function r(t,e,i,n,r,a,l){for(var u=i.getLayoutValue(\"text-rotate\",r,a)*Math.PI/180,c=i.getLayoutValue(\"text-offset\",r,a).map((function(t){return 24*t})),h=e.positionedGlyphs,p=[],d=0;d<h.length;d++){var f=h[d],m=l[f.glyph];if(m){var _=m.rect;if(_){var y=s+1,g=m.metrics.advance/2,v=n?[f.x+g,f.y]:[0,0],x=n?[0,0]:[f.x+g+c[0],f.y+c[1]],b=m.metrics.left-y-g+x[0],w=-m.metrics.top-y+x[1],E=b+_.w,C=w+_.h,T=new o(b,w),S=new o(E,w),A=new o(b,C),L=new o(E,C);if(n&&f.vertical){var I=new o(-g,g),M=-Math.PI/2,z=new o(5,0);T._rotateAround(M,I)._add(z),S._rotateAround(M,I)._add(z),A._rotateAround(M,I)._add(z),L._rotateAround(M,I)._add(z)}if(u){var P=Math.sin(u),R=Math.cos(u),D=[R,-P,P,R];T._matMult(D),S._matMult(D),A._matMult(D),L._matMult(D)}p.push({tl:T,tr:S,bl:A,br:L,tex:_,writingMode:e.writingMode,glyphOffset:v})}}}return p}var o=t(\"@mapbox/point-geometry\"),a=t(\"../style/parse_glyph_pbf\"),s=a.GLYPH_PBF_BORDER;e.exports={getIconQuads:n,getGlyphQuads:r}}),{\"../style/parse_glyph_pbf\":154,\"@mapbox/point-geometry\":2}],177:[(function(t,e,i){\"use strict\";function n(t,e){for(var i=[],n=0,r=0,o=e;r<o.length;r+=1){var a=o[r];i.push(t.substring(n,a)),n=a}return n<t.length&&i.push(t.substring(n,t.length)),i}function r(t,e,i,r,o,a,s,l,u,h){var d=t.trim();h===v.vertical&&(d=y(d));var f,m=[],_={positionedGlyphs:m,text:d,top:l[1],bottom:l[1],left:l[0],right:l[0],writingMode:h},x=g.processBidirectionalText;return f=x?x(d,c(d,s,i,e)):n(d,c(d,s,i,e)),p(_,e,f,r,o,a,h,s,u),!!m.length&&_}function o(t,e,i,n){for(var r=0,o=0;o<t.length;o++){var a=n[t.charCodeAt(o)];a&&(r+=a.metrics.advance+e)}return r/Math.max(1,Math.ceil(r/i))}function a(t,e,i,n){var r=Math.pow(t-e,2);return n?t<e?r/2:2*r:r+Math.abs(i)*i}function s(t,e){var i=0;return 10===t&&(i-=1e4),40!==t&&65288!==t||(i+=50),41!==e&&65289!==e||(i+=50),i}function l(t,e,i,n,r,o){for(var s=null,l=a(e,i,r,o),u=0,c=n;u<c.length;u+=1){var h=c[u],p=e-h.x,d=a(p,i,r,o)+h.badness;d<=l&&(s=h,l=d)}return{index:t,x:e,priorBreak:s,badness:l}}function u(t){return t?u(t.priorBreak).concat(t.index):[]}function c(t,e,i,n){if(!i)return[];if(!t)return[];for(var r=[],a=o(t,e,i,n),c=0,h=0;h<t.length;h++){var p=t.charCodeAt(h),d=n[p];d&&!x[p]&&(c+=d.metrics.advance+e),h<t.length-1&&(b[p]||_.charAllowsIdeographicBreaking(p))&&r.push(l(h+1,c,a,r,s(p,t.charCodeAt(h+1)),!1))}return u(l(t.length,c,a,r,0,!0))}function h(t){var e=.5,i=.5;switch(t){case\"right\":case\"top-right\":case\"bottom-right\":e=1;break;case\"left\":case\"top-left\":case\"bottom-left\":e=0}switch(t){case\"bottom\":case\"bottom-right\":case\"bottom-left\":i=1;break;case\"top\":case\"top-right\":case\"top-left\":i=0}return{horizontalAlign:e,verticalAlign:i}}function p(t,e,i,n,r,o,a,s,l){for(var u=0,c=-17,p=0,m=t.positionedGlyphs,y=\"right\"===o?1:\"left\"===o?0:.5,g=0,x=i;g<x.length;g+=1){var b=x[g];if(b=b.trim(),b.length){for(var w=m.length,E=0;E<b.length;E++){var C=b.charCodeAt(E),T=e[C];T&&(_.charHasUprightVerticalOrientation(C)&&a!==v.horizontal?(m.push({glyph:C,x:u,y:0,vertical:!0}),u+=l+s):(m.push({glyph:C,x:u,y:c,vertical:!1}),u+=T.metrics.advance+s))}if(m.length!==w){var S=u-s;p=Math.max(S,p),d(m,e,w,m.length-1,y)}u=0,c+=n}else c+=n}var A=h(r),L=A.horizontalAlign,I=A.verticalAlign;f(m,y,L,I,p,n,i.length);var M=i.length*n;t.top+=-I*M,t.bottom=t.top+M,t.left+=-L*p,t.right=t.left+p}function d(t,e,i,n,r){if(r){var o=e[t[n].glyph];if(o)for(var a=o.metrics.advance,s=(t[n].x+a)*r,l=i;l<=n;l++)t[l].x-=s}}function f(t,e,i,n,r,o,a){for(var s=(e-i)*r,l=(-n*a+.5)*o,u=0;u<t.length;u++)t[u].x+=s,t[u].y+=l}function m(t,e,i){var n=h(i),r=n.horizontalAlign,o=n.verticalAlign,a=e[0],s=e[1],l=a-t.displaySize[0]*r,u=l+t.displaySize[0],c=s-t.displaySize[1]*o;return{image:t,top:c,bottom:c+t.displaySize[1],left:l,right:u}}var _=t(\"../util/script_detection\"),y=t(\"../util/verticalize_punctuation\"),g=t(\"../source/rtl_text_plugin\"),v={horizontal:1,vertical:2};e.exports={shapeText:r,shapeIcon:m,WritingMode:v};var x={};x[9]=!0,x[10]=!0,x[11]=!0,x[12]=!0,x[13]=!0,x[32]=!0;var b={};b[10]=!0,b[32]=!0,b[38]=!0,b[40]=!0,b[41]=!0,b[43]=!0,b[45]=!0,b[47]=!0,b[173]=!0,b[183]=!0,b[8203]=!0,b[8208]=!0,b[8211]=!0,b[8231]=!0}),{\"../source/rtl_text_plugin\":96,\"../util/script_detection\":218,\"../util/verticalize_punctuation\":225}],178:[(function(t,e,i){\"use strict\";function n(t,e,i){var n=e;return t.isFeatureConstant?n.uSize:t.isZoomConstant?i.lowerSize/10:o.number(i.lowerSize/10,i.upperSize/10,n.uSizeT)}function r(t,e,i,n){var r={};if(t.isZoomConstant||t.isFeatureConstant)if(t.isFeatureConstant&&!t.isZoomConstant){var o;if(\"interval\"===t.functionType)o=i.getLayoutValue(n?\"text-size\":\"icon-size\",{zoom:e.zoom});else{var a=\"interval\"===t.functionType?0:s(e.zoom,t.functionBase,t.coveringZoomRange[0],t.coveringZoomRange[1]),u=t.coveringStopValues[0],c=t.coveringStopValues[1];o=u+(c-u)*l.clamp(a,0,1)}r.uSize=o}else t.isFeatureConstant&&t.isZoomConstant&&(r.uSize=t.layoutSize);else{var h=s(e.zoom,t.functionBase,t.coveringZoomRange[0],t.coveringZoomRange[1]);r.uSizeT=l.clamp(h,0,1)}return r}var o=t(\"../style-spec/util/interpolate\"),a=t(\"../style-spec/function\"),s=a.interpolationFactor,l=t(\"../util/util\");e.exports={evaluateSizeForFeature:n,evaluateSizeForZoom:r}}),{\"../style-spec/function\":112,\"../style-spec/util/interpolate\":127,\"../util/util\":223}],179:[(function(t,e,i){\"use strict\";var n=t(\"../source/rtl_text_plugin\");e.exports=function(t,e,i,r){var o=e.getLayoutValue(\"text-transform\",i,r);return\"uppercase\"===o?t=t.toLocaleUpperCase():\"lowercase\"===o&&(t=t.toLocaleLowerCase()),n.applyArabicShaping&&(t=n.applyArabicShaping(t)),t}}),{\"../source/rtl_text_plugin\":96}],180:[(function(t,e,i){\"use strict\";var n=t(\"../util/dom\"),r=t(\"@mapbox/point-geometry\"),o={scrollZoom:t(\"./handler/scroll_zoom\"),boxZoom:t(\"./handler/box_zoom\"),dragRotate:t(\"./handler/drag_rotate\"),dragPan:t(\"./handler/drag_pan\"),keyboard:t(\"./handler/keyboard\"),doubleClickZoom:t(\"./handler/dblclick_zoom\"),touchZoomRotate:t(\"./handler/touch_zoom_rotate\")};e.exports=function(t,e){function i(t){y(\"mouseout\",t)}function a(e){t.stop(),w=n.mousePos(v,e),y(\"mousedown\",e),b=!0}function s(e){var i=t.dragRotate&&t.dragRotate.isActive();x&&!i&&y(\"contextmenu\",x),x=null,b=!1,y(\"mouseup\",e)}function l(e){if(!(t.dragPan&&t.dragPan.isActive()||t.dragRotate&&t.dragRotate.isActive())){for(var i=e.toElement||e.target;i&&i!==v;)i=i.parentNode;i===v&&y(\"mousemove\",e)}}function u(e){t.stop(),g(\"touchstart\",e),!e.touches||e.touches.length>1||(E?(clearTimeout(E),E=null,y(\"dblclick\",e)):E=setTimeout(d,300))}function c(t){g(\"touchmove\",t)}function h(t){g(\"touchend\",t)}function p(t){g(\"touchcancel\",t)}function d(){E=null}function f(t){n.mousePos(v,t).equals(w)&&y(\"click\",t)}function m(t){y(\"dblclick\",t),t.preventDefault()}function _(e){var i=t.dragRotate&&t.dragRotate.isActive();b||i?b&&(x=e):y(\"contextmenu\",e),e.preventDefault()}function y(e,i){var r=n.mousePos(v,i);return t.fire(e,{lngLat:t.unproject(r),point:r,originalEvent:i})}function g(e,i){var o=n.touchPos(v,i),a=o.reduce((function(t,e,i,n){return t.add(e.div(n.length))}),new r(0,0));return t.fire(e,{lngLat:t.unproject(a),point:a,lngLats:o.map((function(e){return t.unproject(e)}),this),points:o,originalEvent:i})}var v=t.getCanvasContainer(),x=null,b=!1,w=null,E=null;for(var C in o)t[C]=new o[C](t,e),e.interactive&&e[C]&&t[C].enable(e[C]);v.addEventListener(\"mouseout\",i,!1),v.addEventListener(\"mousedown\",a,!1),v.addEventListener(\"mouseup\",s,!1),v.addEventListener(\"mousemove\",l,!1),v.addEventListener(\"touchstart\",u,!1),v.addEventListener(\"touchend\",h,!1),v.addEventListener(\"touchmove\",c,!1),v.addEventListener(\"touchcancel\",p,!1),v.addEventListener(\"click\",f,!1),v.addEventListener(\"dblclick\",m,!1),v.addEventListener(\"contextmenu\",_,!1)}}),{\"../util/dom\":209,\"./handler/box_zoom\":189,\"./handler/dblclick_zoom\":190,\"./handler/drag_pan\":191,\"./handler/drag_rotate\":192,\"./handler/keyboard\":193,\"./handler/scroll_zoom\":194,\"./handler/touch_zoom_rotate\":195,\"@mapbox/point-geometry\":2}],181:[(function(t,e,i){\"use strict\";var n=t(\"../util/util\"),r=t(\"../style-spec/util/interpolate\"),o=t(\"../util/browser\"),a=t(\"../geo/lng_lat\"),s=t(\"../geo/lng_lat_bounds\"),l=t(\"@mapbox/point-geometry\"),u=t(\"../util/evented\"),c=(function(t){function e(e,i){t.call(this),this.moving=!1,this.transform=e,this._bearingSnap=i.bearingSnap}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCenter=function(){return this.transform.center},e.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},e.prototype.panBy=function(t,e,i){return t=l.convert(t).mult(-1),this.panTo(this.transform.center,n.extend({offset:t},e),i)},e.prototype.panTo=function(t,e,i){return this.easeTo(n.extend({center:t},e),i)},e.prototype.getZoom=function(){return this.transform.zoom},e.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},e.prototype.zoomTo=function(t,e,i){return this.easeTo(n.extend({zoom:t},e),i)},e.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},e.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},e.prototype.getBearing=function(){return this.transform.bearing},e.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},e.prototype.rotateTo=function(t,e,i){return this.easeTo(n.extend({bearing:t},e),i)},e.prototype.resetNorth=function(t,e){return this.rotateTo(0,n.extend({duration:1e3},t),e),this},e.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},e.prototype.getPitch=function(){return this.transform.pitch},e.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},e.prototype.fitBounds=function(t,e,i){if(e=n.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},e),\"number\"==typeof e.padding){var r=e.padding;e.padding={top:r,bottom:r,right:r,left:r}}if(!n.deepEqual(Object.keys(e.padding).sort((function(t,e){return t<e?-1:t>e?1:0})),[\"bottom\",\"left\",\"right\",\"top\"]))return n.warnOnce(\"options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'\"),this;t=s.convert(t);var o=[e.padding.left-e.padding.right,e.padding.top-e.padding.bottom],a=Math.min(e.padding.right,e.padding.left),u=Math.min(e.padding.top,e.padding.bottom);e.offset=[e.offset[0]+o[0],e.offset[1]+o[1]];var c=l.convert(e.offset),h=this.transform,p=h.project(t.getNorthWest()),d=h.project(t.getSouthEast()),f=d.sub(p),m=(h.width-2*a-2*Math.abs(c.x))/f.x,_=(h.height-2*u-2*Math.abs(c.y))/f.y;return _<0||m<0?(n.warnOnce(\"Map cannot fit within canvas with the given bounds, padding, and/or offset.\"),this):(e.center=h.unproject(p.add(d).div(2)),e.zoom=Math.min(h.scaleZoom(h.scale*Math.min(m,_)),e.maxZoom),e.bearing=0,e.linear?this.easeTo(e,i):this.flyTo(e,i))},e.prototype.jumpTo=function(t,e){this.stop();var i=this.transform,n=!1,r=!1,o=!1;return\"zoom\"in t&&i.zoom!==+t.zoom&&(n=!0,i.zoom=+t.zoom),void 0!==t.center&&(i.center=a.convert(t.center)),\"bearing\"in t&&i.bearing!==+t.bearing&&(r=!0,i.bearing=+t.bearing),\"pitch\"in t&&i.pitch!==+t.pitch&&(o=!0,i.pitch=+t.pitch),this.fire(\"movestart\",e).fire(\"move\",e),n&&this.fire(\"zoomstart\",e).fire(\"zoom\",e).fire(\"zoomend\",e),r&&this.fire(\"rotate\",e),o&&this.fire(\"pitchstart\",e).fire(\"pitch\",e).fire(\"pitchend\",e),this.fire(\"moveend\",e)},e.prototype.easeTo=function(t,e){var i=this;this.stop(),t=n.extend({offset:[0,0],duration:500,easing:n.ease},t),!1===t.animate&&(t.duration=0),t.smoothEasing&&0!==t.duration&&(t.easing=this._smoothOutEasing(t.duration));var o=this.transform,s=this.getZoom(),u=this.getBearing(),c=this.getPitch(),h=\"zoom\"in t?+t.zoom:s,p=\"bearing\"in t?this._normalizeBearing(t.bearing,u):u,d=\"pitch\"in t?+t.pitch:c,f=o.centerPoint.add(l.convert(t.offset)),m=o.pointLocation(f),_=a.convert(t.center||m);this._normalizeCenter(_);var y,g,v=o.project(m),x=o.project(_).sub(v),b=o.zoomScale(h-s);return t.around&&(y=a.convert(t.around),g=o.locationPoint(y)),this.zooming=h!==s,this.rotating=u!==p,this.pitching=d!==c,this._prepareEase(e,t.noMoveStart),clearTimeout(this._onEaseEnd),this._ease((function(t){if(this.zooming&&(o.zoom=r(s,h,t)),this.rotating&&(o.bearing=r(u,p,t)),this.pitching&&(o.pitch=r(c,d,t)),y)o.setLocationAtPoint(y,g);else{var i=o.zoomScale(o.zoom-s),n=h>s?Math.min(2,b):Math.max(.5,b),a=Math.pow(n,1-t),l=o.unproject(v.add(x.mult(t*a)).mult(i));o.setLocationAtPoint(o.renderWorldCopies?l.wrap():l,f)}this._fireMoveEvents(e)}),(function(){t.delayEndEvents?i._onEaseEnd=setTimeout((function(){return i._easeToEnd(e)}),t.delayEndEvents):i._easeToEnd(e)}),t),this},e.prototype._prepareEase=function(t,e){this.moving=!0,e||this.fire(\"movestart\",t),this.zooming&&this.fire(\"zoomstart\",t),this.pitching&&this.fire(\"pitchstart\",t)},e.prototype._fireMoveEvents=function(t){this.fire(\"move\",t),this.zooming&&this.fire(\"zoom\",t),this.rotating&&this.fire(\"rotate\",t),this.pitching&&this.fire(\"pitch\",t)},e.prototype._easeToEnd=function(t){var e=this.zooming,i=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,e&&this.fire(\"zoomend\",t),i&&this.fire(\"pitchend\",t),this.fire(\"moveend\",t)},e.prototype.flyTo=function(t,e){function i(t){var e=(S*S-T*T+(t?-1:1)*M*M*A*A)/(2*(t?S:T)*M*A);return Math.log(Math.sqrt(e*e+1)-e)}function o(t){return(Math.exp(t)-Math.exp(-t))/2}function s(t){return(Math.exp(t)+Math.exp(-t))/2}function u(t){return o(t)/s(t)}var c=this;this.stop(),t=n.extend({offset:[0,0],speed:1.2,curve:1.42,easing:n.ease},t);var h=this.transform,p=this.getZoom(),d=this.getBearing(),f=this.getPitch(),m=\"zoom\"in t?n.clamp(+t.zoom,h.minZoom,h.maxZoom):p,_=\"bearing\"in t?this._normalizeBearing(t.bearing,d):d,y=\"pitch\"in t?+t.pitch:f,g=h.zoomScale(m-p),v=h.centerPoint.add(l.convert(t.offset)),x=h.pointLocation(v),b=a.convert(t.center||x);this._normalizeCenter(b);var w=h.project(x),E=h.project(b).sub(w),C=t.curve,T=Math.max(h.width,h.height),S=T/g,A=E.mag();if(\"minZoom\"in t){var L=n.clamp(Math.min(t.minZoom,p,m),h.minZoom,h.maxZoom),I=T/h.zoomScale(L-p);C=Math.sqrt(I/A*2)}var M=C*C,z=i(0),P=function(t){return s(z)/s(z+C*t)},R=function(t){return T*((s(z)*u(z+C*t)-o(z))/M)/A},D=(i(1)-z)/C;if(Math.abs(A)<1e-6||isNaN(D)){if(Math.abs(T-S)<1e-6)return this.easeTo(t,e);var k=S<T?-1:1;D=Math.abs(Math.log(S/T))/C,R=function(){return 0},P=function(t){return Math.exp(k*C*t)}}if(\"duration\"in t)t.duration=+t.duration;else{var O=\"screenSpeed\"in t?+t.screenSpeed/C:+t.speed;t.duration=1e3*D/O}return this.zooming=!0,this.rotating=d!==_,this.pitching=y!==f,this._prepareEase(e,!1),this._ease((function(t){var i=t*D,n=1/P(i);h.zoom=p+h.scaleZoom(n),this.rotating&&(h.bearing=r(d,_,t)),this.pitching&&(h.pitch=r(f,y,t));var o=h.unproject(w.add(E.mult(R(i))).mult(n));h.setLocationAtPoint(h.renderWorldCopies?o.wrap():o,v),this._fireMoveEvents(e)}),(function(){return c._easeToEnd(e)}),t),this},e.prototype.isEasing=function(){return!!this._abortFn},e.prototype.isMoving=function(){return this.moving},e.prototype.stop=function(){return this._abortFn&&(this._abortFn(),this._finishEase()),this},e.prototype._ease=function(t,e,i){this._finishFn=e,this._abortFn=o.timed((function(e){t.call(this,i.easing(e)),1===e&&this._finishEase()}),!1===i.animate?0:i.duration,this)},e.prototype._finishEase=function(){delete this._abortFn;var t=this._finishFn;delete this._finishFn,t.call(this)},e.prototype._normalizeBearing=function(t,e){t=n.wrap(t,-180,180);var i=Math.abs(t-e);return Math.abs(t-360-e)<i&&(t-=360),Math.abs(t+360-e)<i&&(t+=360),t},e.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var i=t.lng-e.center.lng;t.lng+=i>180?-360:i<-180?360:0}},e.prototype._smoothOutEasing=function(t){var e=n.ease;if(this._prevEase){var i=this._prevEase,r=(Date.now()-i.start)/i.duration,o=i.easing(r+.01)-i.easing(r),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);e=n.bezier(a,s,.25,1)}return this._prevEase={start:(new Date).getTime(),duration:t,easing:e},e},e})(u);e.exports=c}),{\"../geo/lng_lat\":58,\"../geo/lng_lat_bounds\":59,\"../style-spec/util/interpolate\":127,\"../util/browser\":202,\"../util/evented\":210,\"../util/util\":223,\"@mapbox/point-geometry\":2}],182:[(function(t,e,i){\"use strict\";var n=t(\"../../util/dom\"),r=t(\"../../util/util\"),o=t(\"../../util/config\"),a=function(t){this.options=t,r.bindAll([\"_updateEditLink\",\"_updateData\",\"_updateCompact\"],this)};a.prototype.getDefaultPosition=function(){return\"bottom-right\"},a.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=n.create(\"div\",\"mapboxgl-ctrl mapboxgl-ctrl-attrib\"),e&&this._container.classList.add(\"mapboxgl-compact\"),this._updateAttributions(),this._updateEditLink(),this._map.on(\"sourcedata\",this._updateData),this._map.on(\"moveend\",this._updateEditLink),void 0===e&&(this._map.on(\"resize\",this._updateCompact),this._updateCompact()),this._container},a.prototype.onRemove=function(){n.remove(this._container),this._map.off(\"sourcedata\",this._updateData),this._map.off(\"moveend\",this._updateEditLink),this._map.off(\"resize\",this._updateCompact),this._map=void 0},a.prototype._updateEditLink=function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(\".mapbox-improve-map\"));var e=[{key:\"owner\",value:this.styleOwner},{key:\"id\",value:this.styleId},{key:\"access_token\",value:o.ACCESS_TOKEN}];if(t){var i=e.reduce((function(t,i,n){return i.value&&(t+=i.key+\"=\"+i.value+(n<e.length-1?\"&\":\"\")),t}),\"?\");t.href=\"https://www.mapbox.com/feedback/\"+i+(this._map._hash?this._map._hash.getHashString(!0):\"\")}},a.prototype._updateData=function(t){t&&\"metadata\"===t.sourceDataType&&(this._updateAttributions(),this._updateEditLink())},a.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var i=this._map.style.sourceCaches;for(var n in i){var r=i[n].getSource();r.attribution&&t.indexOf(r.attribution)<0&&t.push(r.attribution)}t.sort((function(t,e){return t.length-e.length})),t=t.filter((function(e,i){for(var n=i+1;n<t.length;n++)if(t[n].indexOf(e)>=0)return!1;return!0})),this._container.innerHTML=t.join(\" | \"),this._editLink=null}},a.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add(\"mapboxgl-compact\"):this._container.classList.remove(\"mapboxgl-compact\")},e.exports=a}),{\"../../util/config\":206,\"../../util/dom\":209,\"../../util/util\":223}],183:[(function(t,e,i){\"use strict\";var n=t(\"../../util/dom\"),r=t(\"../../util/util\"),o=t(\"../../util/window\"),a=function(){this._fullscreen=!1,r.bindAll([\"_onClickFullscreen\",\"_changeIcon\"],this),\"onfullscreenchange\"in o.document?this._fullscreenchange=\"fullscreenchange\":\"onmozfullscreenchange\"in o.document?this._fullscreenchange=\"mozfullscreenchange\":\"onwebkitfullscreenchange\"in o.document?this._fullscreenchange=\"webkitfullscreenchange\":\"onmsfullscreenchange\"in o.document&&(this._fullscreenchange=\"MSFullscreenChange\"),this._className=\"mapboxgl-ctrl\"};a.prototype.onAdd=function(t){return this._map=t,this._mapContainer=this._map.getContainer(),this._container=n.create(\"div\",this._className+\" mapboxgl-ctrl-group\"),this._checkFullscreenSupport()?this._setupUI():(this._container.style.display=\"none\",r.warnOnce(\"This device does not support fullscreen mode.\")),this._container},a.prototype.onRemove=function(){n.remove(this._container),this._map=null,o.document.removeEventListener(this._fullscreenchange,this._changeIcon)},a.prototype._checkFullscreenSupport=function(){return!!(o.document.fullscreenEnabled||o.document.mozFullScreenEnabled||o.document.msFullscreenEnabled||o.document.webkitFullscreenEnabled)},a.prototype._setupUI=function(){var t=this._fullscreenButton=n.create(\"button\",this._className+\"-icon \"+this._className+\"-fullscreen\",this._container);t.setAttribute(\"aria-label\",\"Toggle fullscreen\"),t.type=\"button\",this._fullscreenButton.addEventListener(\"click\",this._onClickFullscreen),o.document.addEventListener(this._fullscreenchange,this._changeIcon)},a.prototype._isFullscreen=function(){return this._fullscreen},a.prototype._changeIcon=function(){(o.document.fullscreenElement||o.document.mozFullScreenElement||o.document.webkitFullscreenElement||o.document.msFullscreenElement)===this._mapContainer!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+\"-shrink\"),this._fullscreenButton.classList.toggle(this._className+\"-fullscreen\"))},a.prototype._onClickFullscreen=function(){this._isFullscreen()?o.document.exitFullscreen?o.document.exitFullscreen():o.document.mozCancelFullScreen?o.document.mozCancelFullScreen():o.document.msExitFullscreen?o.document.msExitFullscreen():o.document.webkitCancelFullScreen&&o.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()},e.exports=a}),{\"../../util/dom\":209,\"../../util/util\":223,\"../../util/window\":204}],184:[(function(t,e,i){\"use strict\";function n(t){void 0!==r?t(r):void 0!==s.navigator.permissions?s.navigator.permissions.query({name:\"geolocation\"}).then((function(e){r=\"denied\"!==e.state,t(r)})):(r=!!s.navigator.geolocation,t(r))}var r,o=t(\"../../util/evented\"),a=t(\"../../util/dom\"),s=t(\"../../util/window\"),l=t(\"../../util/util\"),u=t(\"../../geo/lng_lat\"),c=t(\"../marker\"),h={positionOptions:{enableHighAccuracy:!1,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},p=(function(t){function e(e){t.call(this),this.options=l.extend({},h,e),l.bindAll([\"_onSuccess\",\"_onError\",\"_finish\",\"_setupUI\",\"_updateCamera\",\"_updateMarker\",\"_onClickGeolocate\"],this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onAdd=function(t){return this._map=t,this._container=a.create(\"div\",\"mapboxgl-ctrl mapboxgl-ctrl-group\"),n(this._setupUI),this._container},e.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(s.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker.remove(),a.remove(this._container),this._map=void 0},e.prototype._onSuccess=function(t){if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case\"WAITING_ACTIVE\":case\"ACTIVE_LOCK\":case\"ACTIVE_ERROR\":this._watchState=\"ACTIVE_LOCK\",this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-waiting\"),this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-active-error\"),this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-active\");break;case\"BACKGROUND\":case\"BACKGROUND_ERROR\":this._watchState=\"BACKGROUND\",this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-waiting\"),this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-background-error\"),this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-background\")}this.options.showUserLocation&&\"OFF\"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&\"ACTIVE_LOCK\"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove(\"mapboxgl-user-location-dot-stale\"),this.fire(\"geolocate\",t),this._finish()},e.prototype._updateCamera=function(t){var e=new u(t.coords.longitude,t.coords.latitude),i=t.coords.accuracy;this._map.fitBounds(e.toBounds(i),this.options.fitBoundsOptions,{geolocateSource:!0})},e.prototype._updateMarker=function(t){t?this._userLocationDotMarker.setLngLat([t.coords.longitude,t.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},e.prototype._onError=function(t){if(this.options.trackUserLocation)if(1===t.code)this._watchState=\"OFF\",this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-waiting\"),this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-active\"),this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-active-error\"),this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-background\"),this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-background-error\"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case\"WAITING_ACTIVE\":this._watchState=\"ACTIVE_ERROR\",this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-active\"),this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-active-error\");break;case\"ACTIVE_LOCK\":this._watchState=\"ACTIVE_ERROR\",this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-active\"),this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-active-error\"),this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-waiting\");break;case\"BACKGROUND\":this._watchState=\"BACKGROUND_ERROR\",this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-background\"),this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-background-error\"),this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-waiting\")}\"OFF\"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add(\"mapboxgl-user-location-dot-stale\"),this.fire(\"error\",t),this._finish()},e.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},e.prototype._setupUI=function(t){var e=this;!1!==t&&(this._container.addEventListener(\"contextmenu\",(function(t){return t.preventDefault()})),this._geolocateButton=a.create(\"button\",\"mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate\",this._container),this._geolocateButton.type=\"button\",this._geolocateButton.setAttribute(\"aria-label\",\"Geolocate\"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute(\"aria-pressed\",\"false\"),this._watchState=\"OFF\"),this.options.showUserLocation&&(this._dotElement=a.create(\"div\",\"mapboxgl-user-location-dot\"),this._userLocationDotMarker=new c(this._dotElement),this.options.trackUserLocation&&(this._watchState=\"OFF\")),this._geolocateButton.addEventListener(\"click\",this._onClickGeolocate.bind(this)),this.options.trackUserLocation&&this._map.on(\"movestart\",(function(t){t.geolocateSource||\"ACTIVE_LOCK\"!==e._watchState||(e._watchState=\"BACKGROUND\",e._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-background\"),e._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-active\"),e.fire(\"trackuserlocationend\"))})))},e.prototype._onClickGeolocate=function(){if(this.options.trackUserLocation){switch(this._watchState){case\"OFF\":this._watchState=\"WAITING_ACTIVE\",this.fire(\"trackuserlocationstart\");break;case\"WAITING_ACTIVE\":case\"ACTIVE_LOCK\":case\"ACTIVE_ERROR\":case\"BACKGROUND_ERROR\":this._watchState=\"OFF\",this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-waiting\"),this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-active\"),this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-active-error\"),this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-background\"),this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-background-error\"),this.fire(\"trackuserlocationend\");break;case\"BACKGROUND\":this._watchState=\"ACTIVE_LOCK\",this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-background\"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(\"trackuserlocationstart\")}switch(this._watchState){case\"WAITING_ACTIVE\":this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-waiting\"),this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-active\");break;case\"ACTIVE_LOCK\":this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-active\");break;case\"ACTIVE_ERROR\":this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-waiting\"),this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-active-error\");break;case\"BACKGROUND\":this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-background\");break;case\"BACKGROUND_ERROR\":this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-waiting\"),this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-background-error\")}\"OFF\"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add(\"mapboxgl-ctrl-geolocate-waiting\"),this._geolocateButton.setAttribute(\"aria-pressed\",\"true\"),this._geolocationWatchID=s.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else s.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4)},e.prototype._clearWatch=function(){s.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove(\"mapboxgl-ctrl-geolocate-waiting\"),this._geolocateButton.setAttribute(\"aria-pressed\",\"false\"),this.options.showUserLocation&&this._updateMarker(null)},e})(o);e.exports=p}),{\"../../geo/lng_lat\":58,\"../../util/dom\":209,\"../../util/evented\":210,\"../../util/util\":223,\"../../util/window\":204,\"../marker\":198}],185:[(function(t,e,i){\"use strict\";var n=t(\"../../util/dom\"),r=t(\"../../util/util\"),o=function(){r.bindAll([\"_updateLogo\"],this)};o.prototype.onAdd=function(t){this._map=t,this._container=n.create(\"div\",\"mapboxgl-ctrl\");var e=n.create(\"a\",\"mapboxgl-ctrl-logo\");return e.target=\"_blank\",e.href=\"https://www.mapbox.com/\",e.setAttribute(\"aria-label\",\"Mapbox logo\"),this._container.appendChild(e),this._container.style.display=\"none\",this._map.on(\"sourcedata\",this._updateLogo),this._updateLogo(),this._container},o.prototype.onRemove=function(){n.remove(this._container),this._map.off(\"sourcedata\",this._updateLogo)},o.prototype.getDefaultPosition=function(){return\"bottom-left\"},o.prototype._updateLogo=function(t){t&&\"metadata\"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?\"block\":\"none\")},o.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},e.exports=o}),{\"../../util/dom\":209,\"../../util/util\":223}],186:[(function(t,e,i){\"use strict\";var n=t(\"../../util/dom\"),r=t(\"../../util/util\"),o=t(\"../handler/drag_rotate\"),a=function(){var t=this;r.bindAll([\"_rotateCompassArrow\"],this),this._container=n.create(\"div\",\"mapboxgl-ctrl mapboxgl-ctrl-group\"),this._container.addEventListener(\"contextmenu\",(function(t){return t.preventDefault()})),this._zoomInButton=this._createButton(\"mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in\",\"Zoom In\",(function(){return t._map.zoomIn()})),this._zoomOutButton=this._createButton(\"mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out\",\"Zoom Out\",(function(){return t._map.zoomOut()})),this._compass=this._createButton(\"mapboxgl-ctrl-icon mapboxgl-ctrl-compass\",\"Reset North\",(function(){return t._map.resetNorth()})),this._compassArrow=n.create(\"span\",\"mapboxgl-ctrl-compass-arrow\",this._compass)};a.prototype._rotateCompassArrow=function(){var t=\"rotate(\"+this._map.transform.angle*(180/Math.PI)+\"deg)\";this._compassArrow.style.transform=t},a.prototype.onAdd=function(t){return this._map=t,this._map.on(\"rotate\",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new o(t,{button:\"left\",element:this._compass,pitchWithRotate:!1}),this._handler.enable(),this._container},a.prototype.onRemove=function(){n.remove(this._container),this._map.off(\"rotate\",this._rotateCompassArrow),delete this._map,this._handler.disable(),delete this._handler},a.prototype._createButton=function(t,e,i){var r=n.create(\"button\",t,this._container);return r.type=\"button\",r.setAttribute(\"aria-label\",e),r.addEventListener(\"click\",i),r},e.exports=a}),{\"../../util/dom\":209,\"../../util/util\":223,\"../handler/drag_rotate\":192}],187:[(function(t,e,i){\"use strict\";function n(t,e,i){var n=i&&i.maxWidth||100,a=t._container.clientHeight/2,s=o(t.unproject([0,a]),t.unproject([n,a]));if(i&&\"imperial\"===i.unit){var l=3.2808*s;l>5280?r(e,n,l/5280,\"mi\"):r(e,n,l,\"ft\")}else if(i&&\"nautical\"===i.unit){var u=s/1852;r(e,n,u,\"nm\")}else r(e,n,s,\"m\")}function r(t,e,i,n){var r=a(i),o=r/i;\"m\"===n&&r>=1e3&&(r/=1e3,n=\"km\"),t.style.width=e*o+\"px\",t.innerHTML=r+n}function o(t,e){var i=Math.PI/180,n=t.lat*i,r=e.lat*i,o=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((e.lng-t.lng)*i);return 6371e3*Math.acos(Math.min(o,1))}function a(t){var e=Math.pow(10,(\"\"+Math.floor(t)).length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}var s=t(\"../../util/dom\"),l=t(\"../../util/util\"),u=function(t){this.options=t,l.bindAll([\"_onMove\"],this)};u.prototype.getDefaultPosition=function(){return\"bottom-left\"},u.prototype._onMove=function(){n(this._map,this._container,this.options)},u.prototype.onAdd=function(t){return this._map=t,this._container=s.create(\"div\",\"mapboxgl-ctrl mapboxgl-ctrl-scale\",t.getContainer()),this._map.on(\"move\",this._onMove),this._onMove(),this._container},u.prototype.onRemove=function(){s.remove(this._container),this._map.off(\"move\",this._onMove),this._map=void 0},e.exports=u}),{\"../../util/dom\":209,\"../../util/util\":223}],188:[(function(t,e,i){\"use strict\"}),{}],189:[(function(t,e,i){\"use strict\";var n=t(\"../../util/dom\"),r=t(\"../../geo/lng_lat_bounds\"),o=t(\"../../util/util\"),a=t(\"../../util/window\"),s=function(t){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),o.bindAll([\"_onMouseDown\",\"_onMouseMove\",\"_onMouseUp\",\"_onKeyDown\"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.isActive=function(){return!!this._active},s.prototype.enable=function(){this.isEnabled()||(this._map.dragPan&&this._map.dragPan.disable(),this._el.addEventListener(\"mousedown\",this._onMouseDown,!1),this._map.dragPan&&this._map.dragPan.enable(),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener(\"mousedown\",this._onMouseDown),this._enabled=!1)},s.prototype._onMouseDown=function(t){t.shiftKey&&0===t.button&&(a.document.addEventListener(\"mousemove\",this._onMouseMove,!1),a.document.addEventListener(\"keydown\",this._onKeyDown,!1),a.document.addEventListener(\"mouseup\",this._onMouseUp,!1),n.disableDrag(),this._startPos=n.mousePos(this._el,t),this._active=!0)},s.prototype._onMouseMove=function(t){var e=this._startPos,i=n.mousePos(this._el,t);this._box||(this._box=n.create(\"div\",\"mapboxgl-boxzoom\",this._container),this._container.classList.add(\"mapboxgl-crosshair\"),this._fireEvent(\"boxzoomstart\",t));var r=Math.min(e.x,i.x),o=Math.max(e.x,i.x),a=Math.min(e.y,i.y),s=Math.max(e.y,i.y);n.setTransform(this._box,\"translate(\"+r+\"px,\"+a+\"px)\"),this._box.style.width=o-r+\"px\",this._box.style.height=s-a+\"px\"},s.prototype._onMouseUp=function(t){if(0===t.button){var e=this._startPos,i=n.mousePos(this._el,t),o=(new r).extend(this._map.unproject(e)).extend(this._map.unproject(i));this._finish(),e.x===i.x&&e.y===i.y?this._fireEvent(\"boxzoomcancel\",t):this._map.fitBounds(o,{linear:!0}).fire(\"boxzoomend\",{originalEvent:t,boxZoomBounds:o})}},s.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent(\"boxzoomcancel\",t))},s.prototype._finish=function(){this._active=!1,a.document.removeEventListener(\"mousemove\",this._onMouseMove,!1),a.document.removeEventListener(\"keydown\",this._onKeyDown,!1),a.document.removeEventListener(\"mouseup\",this._onMouseUp,!1),this._container.classList.remove(\"mapboxgl-crosshair\"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag()},s.prototype._fireEvent=function(t,e){return this._map.fire(t,{originalEvent:e})},e.exports=s}),{\"../../geo/lng_lat_bounds\":59,\"../../util/dom\":209,\"../../util/util\":223,\"../../util/window\":204}],190:[(function(t,e,i){\"use strict\";var n=t(\"../../util/util\"),r=function(t){this._map=t,n.bindAll([\"_onDblClick\"],this)};r.prototype.isEnabled=function(){return!!this._enabled},r.prototype.enable=function(){this.isEnabled()||(this._map.on(\"dblclick\",this._onDblClick),this._enabled=!0)},r.prototype.disable=function(){this.isEnabled()&&(this._map.off(\"dblclick\",this._onDblClick),this._enabled=!1)},r.prototype._onDblClick=function(t){this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},e.exports=r}),{\"../../util/util\":223}],191:[(function(t,e,i){\"use strict\";var n=t(\"../../util/dom\"),r=t(\"../../util/util\"),o=t(\"../../util/window\"),a=r.bezier(0,0,.3,1),s=function(t){this._map=t,this._el=t.getCanvasContainer(),r.bindAll([\"_onDown\",\"_onMove\",\"_onUp\",\"_onTouchEnd\",\"_onMouseUp\"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.isActive=function(){return!!this._active},s.prototype.enable=function(){this.isEnabled()||(this._el.classList.add(\"mapboxgl-touch-drag-pan\"),this._el.addEventListener(\"mousedown\",this._onDown),this._el.addEventListener(\"touchstart\",this._onDown),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove(\"mapboxgl-touch-drag-pan\"),this._el.removeEventListener(\"mousedown\",this._onDown),this._el.removeEventListener(\"touchstart\",this._onDown),this._enabled=!1)},s.prototype._onDown=function(t){this._ignoreEvent(t)||this.isActive()||(t.touches?(o.document.addEventListener(\"touchmove\",this._onMove),o.document.addEventListener(\"touchend\",this._onTouchEnd)):(o.document.addEventListener(\"mousemove\",this._onMove),o.document.addEventListener(\"mouseup\",this._onMouseUp)),o.addEventListener(\"blur\",this._onMouseUp),this._active=!1,this._startPos=this._pos=n.mousePos(this._el,t),this._inertia=[[Date.now(),this._pos]])},s.prototype._onMove=function(t){if(!this._ignoreEvent(t)){this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent(\"dragstart\",t),this._fireEvent(\"movestart\",t));var e=n.mousePos(this._el,t),i=this._map;i.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),e]),i.transform.setLocationAtPoint(i.transform.pointLocation(this._pos),e),this._fireEvent(\"drag\",t),this._fireEvent(\"move\",t),this._pos=e,t.preventDefault()}},s.prototype._onUp=function(t){var e=this;if(this.isActive()){this._active=!1,this._fireEvent(\"dragend\",t),this._drainInertiaBuffer();var i=function(){e._map.moving=!1,e._fireEvent(\"moveend\",t)},n=this._inertia;if(n.length<2)return void i();var r=n[n.length-1],o=n[0],s=r[1].sub(o[1]),l=(r[0]-o[0])/1e3;if(0===l||r[1].equals(o[1]))return void i();var u=s.mult(.3/l),c=u.mag();c>1400&&(c=1400,u._unit()._mult(c));var h=c/750,p=u.mult(-h/2);this._map.panBy(p,{duration:1e3*h,easing:a,noMoveStart:!0},{originalEvent:t})}},s.prototype._onMouseUp=function(t){this._ignoreEvent(t)||(this._onUp(t),o.document.removeEventListener(\"mousemove\",this._onMove),o.document.removeEventListener(\"mouseup\",this._onMouseUp),o.removeEventListener(\"blur\",this._onMouseUp))},s.prototype._onTouchEnd=function(t){this._ignoreEvent(t)||(this._onUp(t),o.document.removeEventListener(\"touchmove\",this._onMove),o.document.removeEventListener(\"touchend\",this._onTouchEnd))},s.prototype._fireEvent=function(t,e){return this._map.fire(t,{originalEvent:e})},s.prototype._ignoreEvent=function(t){var e=this._map;return!(!e.boxZoom||!e.boxZoom.isActive())||!(!e.dragRotate||!e.dragRotate.isActive())||(t.touches?t.touches.length>1:!!t.ctrlKey||\"mousemove\"!==t.type&&t.button&&0!==t.button)},s.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=Date.now();t.length>0&&e-t[0][0]>160;)t.shift()},e.exports=s}),{\"../../util/dom\":209,\"../../util/util\":223,\"../../util/window\":204}],192:[(function(t,e,i){\"use strict\";var n=t(\"../../util/dom\"),r=t(\"../../util/util\"),o=t(\"../../util/window\"),a=r.bezier(0,0,.25,1),s=function(t,e){this._map=t,this._el=e.element||t.getCanvasContainer(),this._button=e.button||\"right\",this._bearingSnap=e.bearingSnap||0,this._pitchWithRotate=!1!==e.pitchWithRotate,r.bindAll([\"_onDown\",\"_onMove\",\"_onUp\"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.isActive=function(){return!!this._active},s.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener(\"mousedown\",this._onDown),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener(\"mousedown\",this._onDown),this._enabled=!1)},s.prototype._onDown=function(t){if(!(this._map.boxZoom&&this._map.boxZoom.isActive()||this._map.dragPan&&this._map.dragPan.isActive()||this.isActive())){if(\"right\"===this._button){var e=t.ctrlKey?0:2,i=t.button;if(void 0!==o.InstallTrigger&&2===t.button&&t.ctrlKey&&o.navigator.platform.toUpperCase().indexOf(\"MAC\")>=0&&(i=0),i!==e)return}else if(t.ctrlKey||0!==t.button)return;n.disableDrag(),o.document.addEventListener(\"mousemove\",this._onMove,{capture:!0}),o.document.addEventListener(\"mouseup\",this._onUp),o.addEventListener(\"blur\",this._onUp),this._active=!1,this._inertia=[[Date.now(),this._map.getBearing()]],this._startPos=this._pos=n.mousePos(this._el,t),this._center=this._map.transform.centerPoint,t.preventDefault()}},s.prototype._onMove=function(t){this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent(\"rotatestart\",t),this._fireEvent(\"movestart\",t),this._pitchWithRotate&&this._fireEvent(\"pitchstart\",t));var e=this._map;e.stop();var i=this._pos,r=n.mousePos(this._el,t),o=.8*(i.x-r.x),a=-.5*(i.y-r.y),s=e.getBearing()-o,l=e.getPitch()-a,u=this._inertia,c=u[u.length-1];this._drainInertiaBuffer(),u.push([Date.now(),e._normalizeBearing(s,c[1])]),e.transform.bearing=s,this._pitchWithRotate&&(this._fireEvent(\"pitch\",t),e.transform.pitch=l),this._fireEvent(\"rotate\",t),this._fireEvent(\"move\",t),this._pos=r},s.prototype._onUp=function(t){var e=this;if(o.document.removeEventListener(\"mousemove\",this._onMove,{capture:!0}),o.document.removeEventListener(\"mouseup\",this._onUp),o.removeEventListener(\"blur\",this._onUp),n.enableDrag(),this.isActive()){this._active=!1,this._fireEvent(\"rotateend\",t),this._drainInertiaBuffer();var i=this._map,r=i.getBearing(),s=this._inertia,l=function(){Math.abs(r)<e._bearingSnap?i.resetNorth({noMoveStart:!0},{originalEvent:t}):(e._map.moving=!1,e._fireEvent(\"moveend\",t)),e._pitchWithRotate&&e._fireEvent(\"pitchend\",t)};if(s.length<2)return void l();var u=s[0],c=s[s.length-1],h=s[s.length-2],p=i._normalizeBearing(r,h[1]),d=c[1]-u[1],f=d<0?-1:1,m=(c[0]-u[0])/1e3;if(0===d||0===m)return void l();var _=Math.abs(d*(.25/m));_>180&&(_=180);var y=_/180;p+=f*_*(y/2),Math.abs(i._normalizeBearing(p,0))<this._bearingSnap&&(p=i._normalizeBearing(0,p)),i.rotateTo(p,{duration:1e3*y,easing:a,noMoveStart:!0},{originalEvent:t})}},s.prototype._fireEvent=function(t,e){return this._map.fire(t,{originalEvent:e})},s.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=Date.now();t.length>0&&e-t[0][0]>160;)t.shift()},e.exports=s}),{\"../../util/dom\":209,\"../../util/util\":223,\"../../util/window\":204}],193:[(function(t,e,i){\"use strict\";function n(t){return t*(2-t)}var r=t(\"../../util/util\"),o=function(t){this._map=t,this._el=t.getCanvasContainer(),r.bindAll([\"_onKeyDown\"],this)};o.prototype.isEnabled=function(){return!!this._enabled},o.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener(\"keydown\",this._onKeyDown,!1),this._enabled=!0)},o.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener(\"keydown\",this._onKeyDown),this._enabled=!1)},o.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,i=0,r=0,o=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?i=-1:(t.preventDefault(),o=-1);break;case 39:t.shiftKey?i=1:(t.preventDefault(),o=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?r=-1:(a=1,t.preventDefault());break;default:return}var s=this._map,l=s.getZoom(),u={duration:300,delayEndEvents:500,easing:n,zoom:e?Math.round(l)+e*(t.shiftKey?2:1):l,bearing:s.getBearing()+15*i,pitch:s.getPitch()+10*r,offset:[100*-o,100*-a],center:s.getCenter()};s.easeTo(u,{originalEvent:t})}},e.exports=o}),{\"../../util/util\":223}],194:[(function(t,e,i){\"use strict\";var n=t(\"../../util/dom\"),r=t(\"../../util/util\"),o=t(\"../../util/browser\"),a=t(\"../../util/window\"),s=a.navigator.userAgent.toLowerCase(),l=-1!==s.indexOf(\"firefox\"),u=-1!==s.indexOf(\"safari\")&&-1===s.indexOf(\"chrom\"),c=function(t){this._map=t,this._el=t.getCanvasContainer(),r.bindAll([\"_onWheel\",\"_onTimeout\"],this)};c.prototype.isEnabled=function(){return!!this._enabled},c.prototype.enable=function(t){this.isEnabled()||(this._el.addEventListener(\"wheel\",this._onWheel,!1),this._el.addEventListener(\"mousewheel\",this._onWheel,!1),this._enabled=!0,this._aroundCenter=t&&\"center\"===t.around)},c.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener(\"wheel\",this._onWheel),this._el.removeEventListener(\"mousewheel\",this._onWheel),this._enabled=!1)},c.prototype._onWheel=function(t){var e=0;\"wheel\"===t.type?(e=t.deltaY,l&&t.deltaMode===a.WheelEvent.DOM_DELTA_PIXEL&&(e/=o.devicePixelRatio),t.deltaMode===a.WheelEvent.DOM_DELTA_LINE&&(e*=40)):\"mousewheel\"===t.type&&(e=-t.wheelDeltaY,u&&(e/=3));var i=o.now(),r=i-(this._time||0);this._pos=n.mousePos(this._el,t),this._time=i,0!==e&&e%4.000244140625==0?this._type=\"wheel\":0!==e&&Math.abs(e)<4?this._type=\"trackpad\":r>400?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout,40)):this._type||(this._type=Math.abs(r*e)<200?\"trackpad\":\"wheel\",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&this._zoom(-e,t),t.preventDefault()},c.prototype._onTimeout=function(){this._type=\"wheel\",this._zoom(-this._lastValue)},c.prototype._zoom=function(t,e){if(0!==t){var i=this._map,n=2/(1+Math.exp(-Math.abs(t/100)));t<0&&0!==n&&(n=1/n);var r=i.ease?i.ease.to:i.transform.scale,o=i.transform.scaleZoom(r*n);i.zoomTo(o,{duration:\"wheel\"===this._type?200:0,around:this._aroundCenter?i.getCenter():i.unproject(this._pos),delayEndEvents:200,smoothEasing:!0},{originalEvent:e})}},e.exports=c}),{\"../../util/browser\":202,\"../../util/dom\":209,\"../../util/util\":223,\"../../util/window\":204}],195:[(function(t,e,i){\"use strict\";var n=t(\"../../util/dom\"),r=t(\"../../util/util\"),o=t(\"../../util/window\"),a=r.bezier(0,0,.15,1),s=function(t){this._map=t,this._el=t.getCanvasContainer(),r.bindAll([\"_onStart\",\"_onMove\",\"_onEnd\"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add(\"mapboxgl-touch-zoom-rotate\"),this._el.addEventListener(\"touchstart\",this._onStart,!1),this._enabled=!0,this._aroundCenter=t&&\"center\"===t.around)},s.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove(\"mapboxgl-touch-zoom-rotate\"),this._el.removeEventListener(\"touchstart\",this._onStart),this._enabled=!1)},s.prototype.disableRotation=function(){this._rotationDisabled=!0},s.prototype.enableRotation=function(){this._rotationDisabled=!1},s.prototype._onStart=function(t){if(2===t.touches.length){var e=n.mousePos(this._el,t.touches[0]),i=n.mousePos(this._el,t.touches[1]);this._startVec=e.sub(i),this._startScale=this._map.transform.scale,this._startBearing=this._map.transform.bearing,this._gestureIntent=void 0,this._inertia=[],o.document.addEventListener(\"touchmove\",this._onMove,!1),o.document.addEventListener(\"touchend\",this._onEnd,!1)}},s.prototype._onMove=function(t){if(2===t.touches.length){var e=n.mousePos(this._el,t.touches[0]),i=n.mousePos(this._el,t.touches[1]),r=e.add(i).div(2),o=e.sub(i),a=o.mag()/this._startVec.mag(),s=this._rotationDisabled?0:180*o.angleWith(this._startVec)/Math.PI,l=this._map;if(this._gestureIntent){var u={duration:0,around:l.unproject(r)};\"rotate\"===this._gestureIntent&&(u.bearing=this._startBearing+s),\"zoom\"!==this._gestureIntent&&\"rotate\"!==this._gestureIntent||(u.zoom=l.transform.scaleZoom(this._startScale*a)),l.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),a,r]),l.easeTo(u,{originalEvent:t})}else{var c=Math.abs(1-a)>.15;Math.abs(s)>10?this._gestureIntent=\"rotate\":c&&(this._gestureIntent=\"zoom\"),this._gestureIntent&&(this._startVec=o,this._startScale=l.transform.scale,this._startBearing=l.transform.bearing)}t.preventDefault()}},s.prototype._onEnd=function(t){o.document.removeEventListener(\"touchmove\",this._onMove),o.document.removeEventListener(\"touchend\",this._onEnd),this._drainInertiaBuffer();var e=this._inertia,i=this._map;if(e.length<2)return void i.snapToNorth({},{originalEvent:t});var n=e[e.length-1],r=e[0],s=i.transform.scaleZoom(this._startScale*n[1]),l=i.transform.scaleZoom(this._startScale*r[1]),u=s-l,c=(n[0]-r[0])/1e3,h=n[2];if(0===c||s===l)return void i.snapToNorth({},{originalEvent:t});var p=.15*u/c;Math.abs(p)>2.5&&(p=p>0?2.5:-2.5);var d=1e3*Math.abs(p/(12*.15)),f=s+p*d/2e3;f<0&&(f=0),i.easeTo({zoom:f,duration:d,easing:a,around:this._aroundCenter?i.getCenter():i.unproject(h)},{originalEvent:t})},s.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=Date.now();t.length>2&&e-t[0][0]>160;)t.shift()},e.exports=s}),{\"../../util/dom\":209,\"../../util/util\":223,\"../../util/window\":204}],196:[(function(t,e,i){\"use strict\";var n=t(\"../util/util\"),r=t(\"../util/window\"),o=function(){n.bindAll([\"_onHashChange\",\"_updateHash\"],this)};o.prototype.addTo=function(t){return this._map=t,r.addEventListener(\"hashchange\",this._onHashChange,!1),this._map.on(\"moveend\",this._updateHash),this},o.prototype.remove=function(){return r.removeEventListener(\"hashchange\",this._onHashChange,!1),this._map.off(\"moveend\",this._updateHash),delete this._map,this},o.prototype.getHashString=function(t){var e=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,n=Math.max(0,Math.ceil(Math.log(i)/Math.LN2)),r=Math.round(e.lng*Math.pow(10,n))/Math.pow(10,n),o=Math.round(e.lat*Math.pow(10,n))/Math.pow(10,n),a=this._map.getBearing(),s=this._map.getPitch(),l=\"\";return l+=t?\"#/\"+r+\"/\"+o+\"/\"+i:\"#\"+i+\"/\"+o+\"/\"+r,(a||s)&&(l+=\"/\"+Math.round(10*a)/10),s&&(l+=\"/\"+Math.round(s)),l},o.prototype._onHashChange=function(){var t=r.location.hash.replace(\"#\",\"\").split(\"/\");return t.length>=3&&(this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:+(t[3]||0),pitch:+(t[4]||0)}),!0)},o.prototype._updateHash=function(){var t=this.getHashString();r.history.replaceState(\"\",\"\",t)},e.exports=o}),{\"../util/util\":223,\"../util/window\":204}],197:[(function(t,e,i){\"use strict\";function n(t){t.parentNode&&t.parentNode.removeChild(t)}var r=t(\"../util/util\"),o=t(\"../util/browser\"),a=t(\"../util/window\"),s=t(\"../util/window\"),l=s.HTMLImageElement,u=t(\"../util/dom\"),c=t(\"../util/ajax\"),h=t(\"../style/style\"),p=t(\"../style/animation_loop\"),d=t(\"../render/painter\"),f=t(\"../geo/transform\"),m=t(\"./hash\"),_=t(\"./bind_handlers\"),y=t(\"./camera\"),g=t(\"../geo/lng_lat\"),v=t(\"../geo/lng_lat_bounds\"),x=t(\"@mapbox/point-geometry\"),b=t(\"./control/attribution_control\"),w=t(\"./control/logo_control\"),E=t(\"mapbox-gl-supported\");t(\"./events\");var C={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null},T=(function(t){function e(e){var i=this;if(e=r.extend({},C,e),null!=e.minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error(\"maxZoom must be greater than minZoom\");var n=new f(e.minZoom,e.maxZoom,e.renderWorldCopies);t.call(this,n,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles;var o=e.transformRequest;if(this._transformRequest=o?function(t,e){return o(t,e)||{url:t}}:function(t){return{url:t}},\"string\"==typeof e.container){var s=a.document.getElementById(e.container);if(!s)throw new Error(\"Container '\"+e.container+\"' not found.\");this._container=s}else this._container=e.container;this.animationLoop=new p,e.maxBounds&&this.setMaxBounds(e.maxBounds),r.bindAll([\"_onWindowOnline\",\"_onWindowResize\",\"_contextLost\",\"_contextRestored\",\"_update\",\"_render\",\"_onData\",\"_onDataLoading\"],this),this._setupContainer(),this._setupPainter(),this.on(\"move\",this._update.bind(this,!1)),this.on(\"zoom\",this._update.bind(this,!0)),this.on(\"moveend\",(function(){i.animationLoop.set(300),i._rerender()})),void 0!==a&&(a.addEventListener(\"online\",this._onWindowOnline,!1),a.addEventListener(\"resize\",this._onWindowResize,!1)),_(this,e),this._hash=e.hash&&(new m).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),this._classes=[],this.resize(),e.classes&&this.setClasses(e.classes),e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new b),this.addControl(new w,e.logoPosition),this.on(\"style.load\",(function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this.style.update(this._classes,{transition:!1})})),this.on(\"data\",this._onData),this.on(\"dataloading\",this._onDataLoading)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={showTileBoundaries:{},showCollisionBoxes:{},showOverdrawInspector:{},repaint:{},vertices:{}};return e.prototype.addControl=function(t,e){void 0===e&&t.getDefaultPosition&&(e=t.getDefaultPosition()),void 0===e&&(e=\"top-right\");var i=t.onAdd(this),n=this._controlPositions[e];return-1!==e.indexOf(\"bottom\")?n.insertBefore(i,n.firstChild):n.appendChild(i),this},e.prototype.removeControl=function(t){return t.onRemove(this),this},e.prototype.addClass=function(t,e){return r.warnOnce(\"Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS.\"),this._classes.indexOf(t)>=0||\"\"===t?this:(this._classes.push(t),this._classOptions=e,this.style&&this.style.updateClasses(),this._update(!0))},e.prototype.removeClass=function(t,e){r.warnOnce(\"Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS.\");var i=this._classes.indexOf(t);return i<0||\"\"===t?this:(this._classes.splice(i,1),this._classOptions=e,this.style&&this.style.updateClasses(),this._update(!0))},e.prototype.setClasses=function(t,e){r.warnOnce(\"Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS.\");for(var i={},n=0;n<t.length;n++)\"\"!==t[n]&&(i[t[n]]=!0);return this._classes=Object.keys(i),this._classOptions=e,this.style&&this.style.updateClasses(),this._update(!0)},e.prototype.hasClass=function(t){return r.warnOnce(\"Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS.\"),this._classes.indexOf(t)>=0},e.prototype.getClasses=function(){return r.warnOnce(\"Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS.\"),this._classes},e.prototype.resize=function(){var t=this._containerDimensions(),e=t[0],i=t[1];return this._resizeCanvas(e,i),this.transform.resize(e,i),this.painter.resize(e,i),this.fire(\"movestart\").fire(\"move\").fire(\"resize\").fire(\"moveend\")},e.prototype.getBounds=function(){var t=new v(this.transform.pointLocation(new x(0,this.transform.height)),this.transform.pointLocation(new x(this.transform.width,0)));return(this.transform.angle||this.transform.pitch)&&(t.extend(this.transform.pointLocation(new x(this.transform.size.x,0))),t.extend(this.transform.pointLocation(new x(0,this.transform.size.y)))),t},e.prototype.getMaxBounds=function(){return this.transform.latRange&&2===this.transform.latRange.length&&this.transform.lngRange&&2===this.transform.lngRange.length?new v([this.transform.lngRange[0],this.transform.latRange[0]],[this.transform.lngRange[1],this.transform.latRange[1]]):null},e.prototype.setMaxBounds=function(t){if(t){var e=v.convert(t);this.transform.lngRange=[e.getWest(),e.getEast()],this.transform.latRange=[e.getSouth(),e.getNorth()],this.transform._constrain(),this._update()}else null!==t&&void 0!==t||(this.transform.lngRange=null,this.transform.latRange=null,this._update());return this},e.prototype.setMinZoom=function(t){if((t=null===t||void 0===t?0:t)>=0&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error(\"minZoom must be between 0 and the current maxZoom, inclusive\")},e.prototype.getMinZoom=function(){return this.transform.minZoom},e.prototype.setMaxZoom=function(t){if((t=null===t||void 0===t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error(\"maxZoom must be greater than the current minZoom\")},e.prototype.getMaxZoom=function(){return this.transform.maxZoom},e.prototype.project=function(t){return this.transform.locationPoint(g.convert(t))},e.prototype.unproject=function(t){return this.transform.pointLocation(x.convert(t))},e.prototype.on=function(e,i,n){var o=this;if(void 0===n)return t.prototype.on.call(this,e,i);var a=(function(){if(\"mouseenter\"===e||\"mouseover\"===e){var t=!1;return{layer:i,listener:n,delegates:{mousemove:function(a){var s=o.getLayer(i)?o.queryRenderedFeatures(a.point,{layers:[i]}):[];s.length?t||(t=!0,n.call(o,r.extend({features:s},a,{type:e}))):t=!1},mouseout:function(){t=!1}}}}if(\"mouseleave\"===e||\"mouseout\"===e){var a=!1;return{layer:i,listener:n,delegates:{mousemove:function(t){(o.getLayer(i)?o.queryRenderedFeatures(t.point,{layers:[i]}):[]).length?a=!0:a&&(a=!1,n.call(o,r.extend({},t,{type:e})))},mouseout:function(t){a&&(a=!1,n.call(o,r.extend({},t,{type:e})))}}}}var s=function(t){var e=o.getLayer(i)?o.queryRenderedFeatures(t.point,{layers:[i]}):[];e.length&&n.call(o,r.extend({features:e},t))};return{layer:i,listener:n,delegates:(l={},l[e]=s,l)};var l})();this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(a);for(var s in a.delegates)o.on(s,a.delegates[s]);return this},e.prototype.off=function(e,i,n){var r=this;if(void 0===n)return t.prototype.off.call(this,e,i);if(this._delegatedListeners&&this._delegatedListeners[e])for(var o=this._delegatedListeners[e],a=0;a<o.length;a++){var s=o[a];if(s.layer===i&&s.listener===n){for(var l in s.delegates)r.off(l,s.delegates[l]);return o.splice(a,1),r}}return this},e.prototype.queryRenderedFeatures=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i,n={};return 2===t.length?(i=arguments[0],n=arguments[1]):1===t.length&&(function(t){return t instanceof x||Array.isArray(t)})(t[0])?i=t[0]:1===t.length&&(n=t[0]),this.style?this.style.queryRenderedFeatures(this._makeQueryGeometry(i),n,this.transform.zoom,this.transform.angle):[]},e.prototype._makeQueryGeometry=function(t){var e=this;void 0===t&&(t=[x.convert([0,0]),x.convert([this.transform.width,this.transform.height])]);var i;if(t instanceof x||\"number\"==typeof t[0])i=[x.convert(t)];else{var n=[x.convert(t[0]),x.convert(t[1])];i=[n[0],new x(n[1].x,n[0].y),n[1],new x(n[0].x,n[1].y),n[0]]}return i=i.map((function(t){return e.transform.pointCoordinate(t)}))},e.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},e.prototype.setStyle=function(t,e){if((!e||!1!==e.diff&&!e.localIdeographFontFamily)&&this.style&&t&&!(t instanceof h)&&\"string\"!=typeof t)try{return this.style.setState(t)&&this._update(!0),this}catch(t){r.warnOnce(\"Unable to perform style diff: \"+(t.message||t.error||t)+\".  Rebuilding the style from scratch.\")}return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.off(\"rotate\",this.style._redoPlacement),this.off(\"pitch\",this.style._redoPlacement),this.off(\"move\",this.style._redoPlacement)),t?(this.style=t instanceof h?t:new h(t,this,e||{}),this.style.setEventedParent(this,{style:this.style}),this.on(\"rotate\",this.style._redoPlacement),this.on(\"pitch\",this.style._redoPlacement),this.on(\"move\",this.style._redoPlacement),this):(this.style=null,this)},e.prototype.getStyle=function(){if(this.style)return this.style.serialize()},e.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():r.warnOnce(\"There is no style added to the map.\")},e.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0),this},e.prototype.isSourceLoaded=function(t){var e=this.style&&this.style.sourceCaches[t];return void 0===e?void this.fire(\"error\",{error:new Error(\"There is no source with ID '\"+t+\"'\")}):e.loaded()},e.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var i=t[e],n=i._tiles;for(var r in n){var o=n[r];if(\"loaded\"!==o.state&&\"errored\"!==o.state)return!1}}return!0},e.prototype.addSourceType=function(t,e,i){return this.style.addSourceType(t,e,i)},e.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0),this},e.prototype.getSource=function(t){return this.style.getSource(t)},e.prototype.addImage=function(t,e,i){void 0===i&&(i={});var n=i.pixelRatio;void 0===n&&(n=1);var r=i.sdf;if(void 0===r&&(r=!1),e instanceof l)e=o.getImageData(e);else if(void 0===e.width||void 0===e.height)return this.fire(\"error\",{error:new Error(\"Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`\")});this.style.addImage(t,{data:e,pixelRatio:n,sdf:r})},e.prototype.removeImage=function(t){this.style.removeImage(t)},e.prototype.loadImage=function(t,e){c.getImage(this._transformRequest(t,c.ResourceType.Image),e)},e.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0),this},e.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0),this},e.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0),this},e.prototype.getLayer=function(t){return this.style.getLayer(t)},e.prototype.setFilter=function(t,e){return this.style.setFilter(t,e),this._update(!0),this},e.prototype.setLayerZoomRange=function(t,e,i){return this.style.setLayerZoomRange(t,e,i),this._update(!0),this},e.prototype.getFilter=function(t){return this.style.getFilter(t)},e.prototype.setPaintProperty=function(t,e,i,n){return this.style.setPaintProperty(t,e,i,n),this._update(!0),this},e.prototype.getPaintProperty=function(t,e,i){return this.style.getPaintProperty(t,e,i)},e.prototype.setLayoutProperty=function(t,e,i){return this.style.setLayoutProperty(t,e,i),this._update(!0),this},e.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},e.prototype.setLight=function(t){return this.style.setLight(t),this._update(!0),this},e.prototype.getLight=function(){return this.style.getLight()},e.prototype.getContainer=function(){return this._container},e.prototype.getCanvasContainer=function(){return this._canvasContainer},e.prototype.getCanvas=function(){return this._canvas},e.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.offsetWidth||400,e=this._container.offsetHeight||300),[t,e]},e.prototype._setupContainer=function(){var t=this._container;t.classList.add(\"mapboxgl-map\");var e=this._canvasContainer=u.create(\"div\",\"mapboxgl-canvas-container\",t);this._interactive&&e.classList.add(\"mapboxgl-interactive\"),this._canvas=u.create(\"canvas\",\"mapboxgl-canvas\",e),this._canvas.style.position=\"absolute\",this._canvas.addEventListener(\"webglcontextlost\",this._contextLost,!1),this._canvas.addEventListener(\"webglcontextrestored\",this._contextRestored,!1),this._canvas.setAttribute(\"tabindex\",\"0\"),this._canvas.setAttribute(\"aria-label\",\"Map\");var i=this._containerDimensions();this._resizeCanvas(i[0],i[1]);var n=this._controlContainer=u.create(\"div\",\"mapboxgl-control-container\",t),r=this._controlPositions={};[\"top-left\",\"top-right\",\"bottom-left\",\"bottom-right\"].forEach((function(t){r[t]=u.create(\"div\",\"mapboxgl-ctrl-\"+t,n)}))},e.prototype._resizeCanvas=function(t,e){var i=a.devicePixelRatio||1;this._canvas.width=i*t,this._canvas.height=i*e,this._canvas.style.width=t+\"px\",this._canvas.style.height=e+\"px\"},e.prototype._setupPainter=function(){var t=r.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},E.webGLContextAttributes),e=this._canvas.getContext(\"webgl\",t)||this._canvas.getContext(\"experimental-webgl\",t);if(!e)return void this.fire(\"error\",{error:new Error(\"Failed to initialize WebGL\")});this.painter=new d(e,this.transform)},e.prototype._contextLost=function(t){t.preventDefault(),this._frameId&&(o.cancelFrame(this._frameId),this._frameId=null),this.fire(\"webglcontextlost\",{originalEvent:t})},e.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire(\"webglcontextrestored\",{originalEvent:t})},e.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},e.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this._rerender(),this):this},e.prototype._render=function(){return this.style&&this._styleDirty&&(this._styleDirty=!1,this.style.update(this._classes,this._classOptions),this._classOptions=null,this.style._recalculate(this.transform.zoom)),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.rotating,zooming:this.zooming}),this.fire(\"render\"),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(\"load\")),this._frameId=null,this.animationLoop.stopped()||(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty)&&this._rerender(),this},e.prototype.remove=function(){this._hash&&this._hash.remove(),o.cancelFrame(this._frameId),this._frameId=null,this.setStyle(null),void 0!==a&&(a.removeEventListener(\"resize\",this._onWindowResize,!1),a.removeEventListener(\"online\",this._onWindowOnline,!1));var t=this.painter.gl.getExtension(\"WEBGL_lose_context\");t&&t.loseContext(),n(this._canvasContainer),n(this._controlContainer),this._container.classList.remove(\"mapboxgl-map\"),this.fire(\"remove\")},e.prototype._rerender=function(){this.style&&!this._frameId&&(this._frameId=o.frame(this._render))},e.prototype._onWindowOnline=function(){this._update()},e.prototype._onWindowResize=function(){this._trackResize&&this.stop().resize()._update()},i.showTileBoundaries.get=function(){return!!this._showTileBoundaries},i.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},i.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},i.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,this.style._redoPlacement())},i.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},i.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},i.repaint.get=function(){return!!this._repaint},i.repaint.set=function(t){this._repaint=t,this._update()},i.vertices.get=function(){return!!this._vertices},i.vertices.set=function(t){this._vertices=t,this._update()},e.prototype._onData=function(t){this._update(\"style\"===t.dataType),this.fire(t.dataType+\"data\",t)},e.prototype._onDataLoading=function(t){this.fire(t.dataType+\"dataloading\",t)},Object.defineProperties(e.prototype,i),e})(y);e.exports=T}),{\"../geo/lng_lat\":58,\"../geo/lng_lat_bounds\":59,\"../geo/transform\":60,\"../render/painter\":79,\"../style/animation_loop\":150,\"../style/style\":156,\"../util/ajax\":201,\"../util/browser\":202,\"../util/dom\":209,\"../util/util\":223,\"../util/window\":204,\"./bind_handlers\":180,\"./camera\":181,\"./control/attribution_control\":182,\"./control/logo_control\":185,\"./events\":188,\"./hash\":196,\"@mapbox/point-geometry\":2,\"mapbox-gl-supported\":28}],198:[(function(t,e,i){\"use strict\";var n=t(\"../util/dom\"),r=t(\"../geo/lng_lat\"),o=t(\"@mapbox/point-geometry\"),a=t(\"../util/smart_wrap\"),s=t(\"../util/util\"),l=s.bindAll,u=function(t,e){this._offset=o.convert(e&&e.offset||[0,0]),l([\"_update\",\"_onMapClick\"],this),t||(t=n.create(\"div\")),t.classList.add(\"mapboxgl-marker\"),this._element=t,this._popup=null};u.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on(\"move\",this._update),t.on(\"moveend\",this._update),this._update(),this._map.on(\"click\",this._onMapClick),this},u.prototype.remove=function(){return this._map&&(this._map.off(\"click\",this._onMapClick),this._map.off(\"move\",this._update),this._map.off(\"moveend\",this._update),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this},u.prototype.getLngLat=function(){return this._lngLat},u.prototype.setLngLat=function(t){return this._lngLat=r.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},u.prototype.getElement=function(){return this._element},u.prototype.setPopup=function(t){return this._popup&&(this._popup.remove(),this._popup=null),t&&(\"offset\"in t.options||(t.options.offset=this._offset),this._popup=t,this._popup.setLngLat(this._lngLat)),this},u.prototype._onMapClick=function(t){var e=t.originalEvent.target,i=this._element;this._popup&&(e===i||i.contains(e))&&this.togglePopup()},u.prototype.getPopup=function(){return this._popup},u.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},u.prototype._update=function(t){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=a(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),t&&\"moveend\"!==t.type||(this._pos=this._pos.round()),n.setTransform(this._element,\"translate(-50%, -50%) translate(\"+this._pos.x+\"px, \"+this._pos.y+\"px)\"))},e.exports=u}),{\"../geo/lng_lat\":58,\"../util/dom\":209,\"../util/smart_wrap\":219,\"../util/util\":223,\"@mapbox/point-geometry\":2}],199:[(function(t,e,i){\"use strict\";function n(t){if(t){if(\"number\"==typeof t){var e=Math.round(Math.sqrt(.5*Math.pow(t,2)));return{top:new l(0,t),\"top-left\":new l(e,e),\"top-right\":new l(-e,e),bottom:new l(0,-t),\"bottom-left\":new l(e,-e),\"bottom-right\":new l(-e,-e),left:new l(t,0),right:new l(-t,0)}}if(t instanceof l||Array.isArray(t)){var i=l.convert(t);return{top:i,\"top-left\":i,\"top-right\":i,bottom:i,\"bottom-left\":i,\"bottom-right\":i,left:i,right:i}}return{top:l.convert(t.top||[0,0]),\"top-left\":l.convert(t[\"top-left\"]||[0,0]),\"top-right\":l.convert(t[\"top-right\"]||[0,0]),bottom:l.convert(t.bottom||[0,0]),\"bottom-left\":l.convert(t[\"bottom-left\"]||[0,0]),\"bottom-right\":l.convert(t[\"bottom-right\"]||[0,0]),left:l.convert(t.left||[0,0]),right:l.convert(t.right||[0,0])}}return n(new l(0,0))}var r=t(\"../util/util\"),o=t(\"../util/evented\"),a=t(\"../util/dom\"),s=t(\"../geo/lng_lat\"),l=t(\"@mapbox/point-geometry\"),u=t(\"../util/window\"),c=t(\"../util/smart_wrap\"),h={closeButton:!0,closeOnClick:!0},p=(function(t){function e(e){t.call(this),this.options=r.extend(Object.create(h),e),r.bindAll([\"_update\",\"_onClickClose\"],this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addTo=function(t){return this._map=t,this._map.on(\"move\",this._update),this.options.closeOnClick&&this._map.on(\"click\",this._onClickClose),this._update(),this},e.prototype.isOpen=function(){return!!this._map},e.prototype.remove=function(){return this._content&&a.remove(this._content),this._container&&(a.remove(this._container),delete this._container),this._map&&(this._map.off(\"move\",this._update),this._map.off(\"click\",this._onClickClose),delete this._map),this.fire(\"close\"),this},e.prototype.getLngLat=function(){return this._lngLat},e.prototype.setLngLat=function(t){return this._lngLat=s.convert(t),this._pos=null,this._update(),this},e.prototype.setText=function(t){return this.setDOMContent(u.document.createTextNode(t))},e.prototype.setHTML=function(t){var e,i=u.document.createDocumentFragment(),n=u.document.createElement(\"body\");for(n.innerHTML=t;e=n.firstChild;)i.appendChild(e);return this.setDOMContent(i)},e.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},e.prototype._createContent=function(){this._content&&a.remove(this._content),this._content=a.create(\"div\",\"mapboxgl-popup-content\",this._container),this.options.closeButton&&(this._closeButton=a.create(\"button\",\"mapboxgl-popup-close-button\",this._content),this._closeButton.type=\"button\",this._closeButton.setAttribute(\"aria-label\",\"Close popup\"),this._closeButton.innerHTML=\"&#215;\",this._closeButton.addEventListener(\"click\",this._onClickClose))},e.prototype._update=function(){if(this._map&&this._lngLat&&this._content){this._container||(this._container=a.create(\"div\",\"mapboxgl-popup\",this._map.getContainer()),this._tip=a.create(\"div\",\"mapboxgl-popup-tip\",this._container),this._container.appendChild(this._content)),this._map.transform.renderWorldCopies&&(this._lngLat=c(this._lngLat,this._pos,this._map.transform));var t=this._pos=this._map.project(this._lngLat),e=this.options.anchor,i=n(this.options.offset);if(!e){var r=this._container.offsetWidth,o=this._container.offsetHeight;e=t.y+i.bottom.y<o?[\"top\"]:t.y>this._map.transform.height-o?[\"bottom\"]:[],t.x<r/2?e.push(\"left\"):t.x>this._map.transform.width-r/2&&e.push(\"right\"),e=0===e.length?\"bottom\":e.join(\"-\")}var s=t.add(i[e]).round(),l={top:\"translate(-50%,0)\",\"top-left\":\"translate(0,0)\",\"top-right\":\"translate(-100%,0)\",bottom:\"translate(-50%,-100%)\",\"bottom-left\":\"translate(0,-100%)\",\"bottom-right\":\"translate(-100%,-100%)\",left:\"translate(0,-50%)\",right:\"translate(-100%,-50%)\"},u=this._container.classList;for(var h in l)u.remove(\"mapboxgl-popup-anchor-\"+h);u.add(\"mapboxgl-popup-anchor-\"+e),a.setTransform(this._container,l[e]+\" translate(\"+s.x+\"px,\"+s.y+\"px)\")}},e.prototype._onClickClose=function(){this.remove()},e})(o);e.exports=p}),{\"../geo/lng_lat\":58,\"../util/dom\":209,\"../util/evented\":210,\"../util/smart_wrap\":219,\"../util/util\":223,\"../util/window\":204,\"@mapbox/point-geometry\":2}],200:[(function(t,e,i){\"use strict\";var n=t(\"./util\"),r=function(t,e,i){this.target=t,this.parent=e,this.mapId=i,this.callbacks={},this.callbackID=0,n.bindAll([\"receive\"],this),this.target.addEventListener(\"message\",this.receive,!1)};r.prototype.send=function(t,e,i,n,r){var o=i?this.mapId+\":\"+this.callbackID++:null;i&&(this.callbacks[o]=i),this.target.postMessage({targetMapId:r,sourceMapId:this.mapId,type:t,id:String(o),data:e},n)},r.prototype.receive=function(t){var e,i=this,n=t.data,r=n.id;if(!n.targetMapId||this.mapId===n.targetMapId){var o=function(t,e,n){i.target.postMessage({sourceMapId:i.mapId,type:\"<response>\",id:String(r),error:t?String(t):null,data:e},n)};if(\"<response>\"===n.type)e=this.callbacks[n.id],delete this.callbacks[n.id],e&&n.error?e(new Error(n.error)):e&&e(null,n.data);else if(void 0!==n.id&&this.parent[n.type])this.parent[n.type](n.sourceMapId,n.data,o);else if(void 0!==n.id&&this.parent.getWorkerSource){var a=n.type.split(\".\"),s=this.parent.getWorkerSource(n.sourceMapId,a[0]);s[a[1]](n.data,o)}else this.parent[n.type](n.data)}},r.prototype.remove=function(){this.target.removeEventListener(\"message\",this.receive,!1)},e.exports=r}),{\"./util\":223}],201:[(function(t,e,i){\"use strict\";function n(t){var e=new o.XMLHttpRequest;e.open(\"GET\",t.url,!0);for(var i in t.headers)e.setRequestHeader(i,t.headers[i]);return e.withCredentials=\"include\"===t.credentials,e}function r(t){var e=o.document.createElement(\"a\");return e.href=t,e.protocol===o.document.location.protocol&&e.host===o.document.location.host}var o=t(\"./window\"),a={Unknown:\"Unknown\",Style:\"Style\",Source:\"Source\",Tile:\"Tile\",Glyphs:\"Glyphs\",SpriteImage:\"SpriteImage\",SpriteJSON:\"SpriteJSON\",Image:\"Image\"};i.ResourceType=a,\"function\"==typeof Object.freeze&&Object.freeze(a);var s=(function(t){function e(e,i){t.call(this,e),this.status=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e})(Error);i.getJSON=function(t,e){var i=n(t);return i.setRequestHeader(\"Accept\",\"application/json\"),i.onerror=function(){e(new Error(i.statusText))},i.onload=function(){if(i.status>=200&&i.status<300&&i.response){var t;try{t=JSON.parse(i.response)}catch(t){return e(t)}e(null,t)}else e(new s(i.statusText,i.status))},i.send(),i},i.getArrayBuffer=function(t,e){var i=n(t);return i.responseType=\"arraybuffer\",i.onerror=function(){e(new Error(i.statusText))},i.onload=function(){var t=i.response;if(0===t.byteLength&&200===i.status)return e(new Error(\"http status 200 returned without content.\"));i.status>=200&&i.status<300&&i.response?e(null,{data:t,cacheControl:i.getResponseHeader(\"Cache-Control\"),expires:i.getResponseHeader(\"Expires\")}):e(new s(i.statusText,i.status))},i.send(),i};i.getImage=function(t,e){return i.getArrayBuffer(t,(function(t,i){if(t)e(t);else if(i){var n=new o.Image,r=o.URL||o.webkitURL;n.onload=function(){e(null,n),r.revokeObjectURL(n.src)};var a=new o.Blob([new Uint8Array(i.data)],{type:\"image/png\"});n.cacheControl=i.cacheControl,n.expires=i.expires,n.src=i.data.byteLength?r.createObjectURL(a):\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=\"}}))},i.getVideo=function(t,e){var i=o.document.createElement(\"video\");i.onloadstart=function(){e(null,i)};for(var n=0;n<t.length;n++){var a=o.document.createElement(\"source\");r(t[n])||(i.crossOrigin=\"Anonymous\"),a.src=t[n],i.appendChild(a)}return i}}),{\"./window\":204}],202:[(function(t,e,i){\"use strict\";var n=t(\"./window\"),r=n.performance&&n.performance.now?n.performance.now.bind(n.performance):Date.now.bind(Date),o=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||n.msRequestAnimationFrame,a=n.cancelAnimationFrame||n.mozCancelAnimationFrame||n.webkitCancelAnimationFrame||n.msCancelAnimationFrame;e.exports={now:r,frame:function(t){return o(t)},cancelFrame:function(t){return a(t)},timed:function(t,e,i){function n(){if(!a){var l=r();l>=s+e?t.call(i,1):(t.call(i,(l-s)/e),o(n))}}if(!e)return t.call(i,1),null;var a=!1,s=r();return o(n),function(){a=!0}},getImageData:function(t){var e=n.document.createElement(\"canvas\"),i=e.getContext(\"2d\");if(!i)throw new Error(\"failed to create canvas 2d context\");return e.width=t.width,e.height=t.height,i.drawImage(t,0,0,t.width,t.height),i.getImageData(0,0,t.width,t.height)},hardwareConcurrency:n.navigator.hardwareConcurrency||4,get devicePixelRatio(){return n.devicePixelRatio},supportsWebp:!1};var s=n.document.createElement(\"img\");s.onload=function(){e.exports.supportsWebp=!0},s.src=\"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=\"}),{\"./window\":204}],203:[(function(t,e,i){\"use strict\";var n=t(\"webworkify\"),r=t(\"../window\"),o=r.URL.createObjectURL(new n(t(\"../../source/worker\"),{bare:!0}));e.exports=function(){return new r.Worker(o)}}),{\"../../source/worker\":105,\"../window\":204,webworkify:39}],204:[(function(t,e,i){\"use strict\";e.exports=self}),{}],205:[(function(t,e,i){\"use strict\";function n(t,e){return e.area-t.area}var r=t(\"quickselect\"),o=t(\"./util\").calculateSignedArea;e.exports=function(t,e){var i=t.length;if(i<=1)return[t];for(var a,s,l=[],u=0;u<i;u++){var c=o(t[u]);0!==c&&(t[u].area=Math.abs(c),void 0===s&&(s=c<0),s===c<0?(a&&l.push(a),a=[t[u]]):a.push(t[u]))}if(a&&l.push(a),e>1)for(var h=0;h<l.length;h++)l[h].length<=e||(r(l[h],e,1,l[h].length-1,n),l[h]=l[h].slice(0,e));return l}}),{\"./util\":223,quickselect:31}],206:[(function(t,e,i){\"use strict\";var n={API_URL:\"https://api.mapbox.com\",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null};e.exports=n}),{}],207:[(function(t,e,i){\"use strict\";var n=function(t){var e=this;this._stringToNumber={},this._numberToString=[];for(var i=0;i<t.length;i++){var n=t[i];e._stringToNumber[n]=i,e._numberToString[i]=n}};n.prototype.encode=function(t){return this._stringToNumber[t]},n.prototype.decode=function(t){return this._numberToString[t]},e.exports=n}),{}],208:[(function(t,e,i){\"use strict\";var n=t(\"./util\"),r=t(\"./actor\"),o=function(t,e){var i=this;this.workerPool=t,this.actors=[],this.currentActor=0,this.id=n.uniqueId();for(var o=this.workerPool.acquire(this.id),a=0;a<o.length;a++){var s=o[a],l=new r(s,e,i.id);l.name=\"Worker \"+a,i.actors.push(l)}};o.prototype.broadcast=function(t,e,i){i=i||function(){},n.asyncAll(this.actors,(function(i,n){i.send(t,e,n)}),i)},o.prototype.send=function(t,e,i,n,r){return(\"number\"!=typeof n||isNaN(n))&&(n=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[n].send(t,e,i,r),n},o.prototype.remove=function(){this.actors.forEach((function(t){t.remove()})),this.actors=[],this.workerPool.release(this.id)},e.exports=o}),{\"./actor\":200,\"./util\":223}],209:[(function(t,e,i){\"use strict\";function n(t){for(var e=0;e<t.length;e++)if(t[e]in s)return t[e];return t[0]}var r=t(\"@mapbox/point-geometry\"),o=t(\"./window\");i.create=function(t,e,i){var n=o.document.createElement(t);return e&&(n.className=e),i&&i.appendChild(n),n};var a,s=o.document.documentElement.style,l=n([\"userSelect\",\"MozUserSelect\",\"WebkitUserSelect\",\"msUserSelect\"]);i.disableDrag=function(){l&&(a=s[l],s[l]=\"none\")},i.enableDrag=function(){l&&(s[l]=a)};var u=n([\"transform\",\"WebkitTransform\"]);i.setTransform=function(t,e){t.style[u]=e};var c=function(t){t.preventDefault(),t.stopPropagation(),o.removeEventListener(\"click\",c,!0)};i.suppressClick=function(){o.addEventListener(\"click\",c,!0),o.setTimeout((function(){o.removeEventListener(\"click\",c,!0)}),0)},i.mousePos=function(t,e){var i=t.getBoundingClientRect();return e=e.touches?e.touches[0]:e,new r(e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop)},i.touchPos=function(t,e){for(var i=t.getBoundingClientRect(),n=[],o=\"touchend\"===e.type?e.changedTouches:e.touches,a=0;a<o.length;a++)n.push(new r(o[a].clientX-i.left-t.clientLeft,o[a].clientY-i.top-t.clientTop));return n},i.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)}}),{\"./window\":204,\"@mapbox/point-geometry\":2}],210:[(function(t,e,i){\"use strict\";function n(t,e,i){i[t]=i[t]||[],i[t].push(e)}function r(t,e,i){if(i&&i[t]){var n=i[t].indexOf(e);-1!==n&&i[t].splice(n,1)}}var o=t(\"./util\"),a=function(){};a.prototype.on=function(t,e){return this._listeners=this._listeners||{},n(t,e,this._listeners),this},a.prototype.off=function(t,e){return r(t,e,this._listeners),r(t,e,this._oneTimeListeners),this},a.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},n(t,e,this._oneTimeListeners),this},a.prototype.fire=function(t,e){var i=this;if(this.listens(t)){e=o.extend({},e,{type:t,target:this});for(var n=this._listeners&&this._listeners[t]?this._listeners[t].slice():[],a=0;a<n.length;a++)n[a].call(i,e);for(var s=this._oneTimeListeners&&this._oneTimeListeners[t]?this._oneTimeListeners[t].slice():[],l=0;l<s.length;l++)s[l].call(i,e),r(t,s[l],i._oneTimeListeners);this._eventedParent&&this._eventedParent.fire(t,o.extend({},e,\"function\"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData))}else o.endsWith(t,\"error\")&&console.error(e&&e.error||e||\"Empty error event\");return this},a.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},a.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this},e.exports=a}),{\"./util\":223}],211:[(function(t,e,i){\"use strict\";function n(t,e){return e.max-t.max}function r(t,e,i,n){this.p=new l(t,e),this.h=i,this.d=o(this.p,n),this.max=this.d+this.h*Math.SQRT2}function o(t,e){for(var i=!1,n=1/0,r=0;r<e.length;r++)for(var o=e[r],a=0,s=o.length,l=s-1;a<s;l=a++){var c=o[a],h=o[l];c.y>t.y!=h.y>t.y&&t.x<(h.x-c.x)*(t.y-c.y)/(h.y-c.y)+c.x&&(i=!i),n=Math.min(n,u(t,c,h))}return(i?1:-1)*Math.sqrt(n)}function a(t){for(var e=0,i=0,n=0,o=t[0],a=0,s=o.length,l=s-1;a<s;l=a++){var u=o[a],c=o[l],h=u.x*c.y-c.x*u.y;i+=(u.x+c.x)*h,n+=(u.y+c.y)*h,e+=3*h}return new r(i/e,n/e,0,t)}var s=t(\"tinyqueue\"),l=t(\"@mapbox/point-geometry\"),u=t(\"./intersection_tests\").distToSegmentSquared;e.exports=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=!1);for(var o=1/0,u=1/0,c=-1/0,h=-1/0,p=t[0],d=0;d<p.length;d++){var f=p[d];(!d||f.x<o)&&(o=f.x),(!d||f.y<u)&&(u=f.y),(!d||f.x>c)&&(c=f.x),(!d||f.y>h)&&(h=f.y)}var m=c-o,_=h-u,y=Math.min(m,_),g=y/2,v=new s(null,n);if(0===y)return new l(o,u);for(var x=o;x<c;x+=y)for(var b=u;b<h;b+=y)v.push(new r(x+g,b+g,g,t));for(var w=a(t),E=v.length;v.length;){var C=v.pop();(C.d>w.d||!w.d)&&(w=C,i&&console.log(\"found best %d after %d probes\",Math.round(1e4*C.d)/1e4,E)),C.max-w.d<=e||(g=C.h/2,v.push(new r(C.p.x-g,C.p.y-g,g,t)),v.push(new r(C.p.x+g,C.p.y-g,g,t)),v.push(new r(C.p.x-g,C.p.y+g,g,t)),v.push(new r(C.p.x+g,C.p.y+g,g,t)),E+=4)}return i&&(console.log(\"num probes: \"+E),console.log(\"best distance: \"+w.d)),w.p}}),{\"./intersection_tests\":214,\"@mapbox/point-geometry\":2,tinyqueue:33}],212:[(function(t,e,i){\"use strict\";var n,r=t(\"./worker_pool\");e.exports=function(){return n||(n=new r),n}}),{\"./worker_pool\":226}],213:[(function(t,e,i){\"use strict\";function n(t,e,i){var n=t.width,r=t.height;if(i){if(i.length!==n*r*e)throw new RangeError(\"mismatched image size\")}else i=new Uint8Array(n*r*e);return{width:n,height:r,data:i}}function r(t,e,i){var r=e.width,a=e.height;if(r===t.width&&a===t.height)return t;var s=n({width:r,height:a},i);o(t,s,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,a)},i),t.width=r,t.height=a,t.data=s.data}function o(t,e,i,n,r,o){if(0===r.width||0===r.height)return e;if(r.width>t.width||r.height>t.height||i.x>t.width-r.width||i.y>t.height-r.height)throw new RangeError(\"out of range source coordinates for image copy\");if(r.width>e.width||r.height>e.height||n.x>e.width-r.width||n.y>e.height-r.height)throw new RangeError(\"out of range destination coordinates for image copy\");for(var a=t.data,s=e.data,l=0;l<r.height;l++)for(var u=((i.y+l)*t.width+i.x)*o,c=((n.y+l)*e.width+n.x)*o,h=0;h<r.width*o;h++)s[c+h]=a[u+h];return e}var a=function(){};a.create=function(t,e){return n(t,1,e)},a.resize=function(t,e){r(t,e,1)},a.copy=function(t,e,i,n,r){o(t,e,i,n,r,1)};var s=function(){};s.create=function(t,e){return n(t,4,e)},s.resize=function(t,e){r(t,e,4)},s.copy=function(t,e,i,n,r){o(t,e,i,n,r,4)},e.exports={AlphaImage:a,RGBAImage:s}}),{}],214:[(function(t,e,i){\"use strict\";function n(t,e){for(var i=0;i<t.length;i++)if(d(e,t[i]))return!0;for(var n=0;n<e.length;n++)if(d(t,e[n]))return!0;return!!l(t,e)}function r(t,e,i){for(var n=0;n<t.length;n++)for(var r=t[n],o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var l=a[s];if(d(r,l))return!0;if(c(l,r,i))return!0}return!1}function o(t,e){if(1===t.length&&1===t[0].length)return p(e,t[0][0]);for(var i=0;i<e.length;i++)for(var n=e[i],r=0;r<n.length;r++)if(p(t,n[r]))return!0;for(var o=0;o<t.length;o++){for(var a=t[o],s=0;s<a.length;s++)if(p(e,a[s]))return!0;for(var u=0;u<e.length;u++)if(l(a,e[u]))return!0}return!1}function a(t,e,i){for(var n=0;n<e.length;n++)for(var r=e[n],o=0;o<t.length;o++){var a=t[o];if(a.length>=3)for(var l=0;l<r.length;l++)if(d(a,r[l]))return!0;if(s(a,r,i))return!0}return!1}function s(t,e,i){if(t.length>1){if(l(t,e))return!0;for(var n=0;n<e.length;n++)if(c(e[n],t,i))return!0}for(var r=0;r<t.length;r++)if(c(t[r],e,i))return!0;return!1}function l(t,e){if(0===t.length||0===e.length)return!1;for(var i=0;i<t.length-1;i++)for(var n=t[i],r=t[i+1],o=0;o<e.length-1;o++){var a=e[o],s=e[o+1];if(u(n,r,a,s))return!0}return!1}function u(t,e,i,n){return m(t,i,n)!==m(e,i,n)&&m(t,e,i)!==m(t,e,n)}function c(t,e,i){var n=i*i;if(1===e.length)return t.distSqr(e[0])<n;for(var r=1;r<e.length;r++)if(h(t,e[r-1],e[r])<n)return!0;return!1}function h(t,e,i){var n=e.distSqr(i);if(0===n)return t.distSqr(e);var r=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/n;return r<0?t.distSqr(e):r>1?t.distSqr(i):t.distSqr(i.sub(e)._mult(r)._add(e))}function p(t,e){for(var i,n,r,o=!1,a=0;a<t.length;a++){i=t[a];for(var s=0,l=i.length-1;s<i.length;l=s++)n=i[s],r=i[l],n.y>e.y!=r.y>e.y&&e.x<(r.x-n.x)*(e.y-n.y)/(r.y-n.y)+n.x&&(o=!o)}return o}function d(t,e){for(var i=!1,n=0,r=t.length-1;n<t.length;r=n++){var o=t[n],a=t[r];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(i=!i)}return i}var f=t(\"./util\"),m=f.isCounterClockwise;e.exports={multiPolygonIntersectsBufferedMultiPoint:r,multiPolygonIntersectsMultiPolygon:o,multiPolygonIntersectsBufferedMultiLine:a,polygonIntersectsPolygon:n,distToSegmentSquared:h}}),{\"./util\":223}],215:[(function(t,e,i){\"use strict\";var n={\"Latin-1 Supplement\":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},\"Arabic Supplement\":function(t){return t>=1872&&t<=1919},\"Arabic Extended-A\":function(t){return t>=2208&&t<=2303},\"Hangul Jamo\":function(t){return t>=4352&&t<=4607},\"Unified Canadian Aboriginal Syllabics\":function(t){return t>=5120&&t<=5759},\"Unified Canadian Aboriginal Syllabics Extended\":function(t){return t>=6320&&t<=6399},\"General Punctuation\":function(t){return t>=8192&&t<=8303},\"Letterlike Symbols\":function(t){return t>=8448&&t<=8527},\"Number Forms\":function(t){return t>=8528&&t<=8591},\"Miscellaneous Technical\":function(t){return t>=8960&&t<=9215},\"Control Pictures\":function(t){return t>=9216&&t<=9279},\"Optical Character Recognition\":function(t){return t>=9280&&t<=9311},\"Enclosed Alphanumerics\":function(t){return t>=9312&&t<=9471},\"Geometric Shapes\":function(t){return t>=9632&&t<=9727},\"Miscellaneous Symbols\":function(t){return t>=9728&&t<=9983},\"Miscellaneous Symbols and Arrows\":function(t){return t>=11008&&t<=11263},\"CJK Radicals Supplement\":function(t){return t>=11904&&t<=12031},\"Kangxi Radicals\":function(t){return t>=12032&&t<=12255},\"Ideographic Description Characters\":function(t){return t>=12272&&t<=12287},\"CJK Symbols and Punctuation\":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},\"Hangul Compatibility Jamo\":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},\"Bopomofo Extended\":function(t){return t>=12704&&t<=12735},\"CJK Strokes\":function(t){return t>=12736&&t<=12783},\"Katakana Phonetic Extensions\":function(t){return t>=12784&&t<=12799},\"Enclosed CJK Letters and Months\":function(t){return t>=12800&&t<=13055},\"CJK Compatibility\":function(t){return t>=13056&&t<=13311},\"CJK Unified Ideographs Extension A\":function(t){return t>=13312&&t<=19903},\"Yijing Hexagram Symbols\":function(t){return t>=19904&&t<=19967},\"CJK Unified Ideographs\":function(t){return t>=19968&&t<=40959},\"Yi Syllables\":function(t){return t>=40960&&t<=42127},\"Yi Radicals\":function(t){return t>=42128&&t<=42191},\"Hangul Jamo Extended-A\":function(t){return t>=43360&&t<=43391},\"Hangul Syllables\":function(t){return t>=44032&&t<=55215},\"Hangul Jamo Extended-B\":function(t){return t>=55216&&t<=55295},\"Private Use Area\":function(t){return t>=57344&&t<=63743},\"CJK Compatibility Ideographs\":function(t){return t>=63744&&t<=64255},\"Arabic Presentation Forms-A\":function(t){return t>=64336&&t<=65023},\"Vertical Forms\":function(t){return t>=65040&&t<=65055},\"CJK Compatibility Forms\":function(t){return t>=65072&&t<=65103},\"Small Form Variants\":function(t){return t>=65104&&t<=65135},\"Arabic Presentation Forms-B\":function(t){return t>=65136&&t<=65279},\"Halfwidth and Fullwidth Forms\":function(t){return t>=65280&&t<=65519}};e.exports=n}),{}],216:[(function(t,e,i){\"use strict\";var n=function(t,e){this.max=t,this.onRemove=e,this.reset()};n.prototype.reset=function(){var t=this;for(var e in t.data)t.onRemove(t.data[e]);return this.data={},this.order=[],this},n.prototype.add=function(t,e){if(this.has(t))this.order.splice(this.order.indexOf(t),1),this.data[t]=e,this.order.push(t);else if(this.data[t]=e,this.order.push(t),this.order.length>this.max){var i=this.get(this.order[0]);i&&this.onRemove(i)}return this},n.prototype.has=function(t){return t in this.data},n.prototype.keys=function(){return this.order},n.prototype.get=function(t){if(!this.has(t))return null;var e=this.data[t];return delete this.data[t],this.order.splice(this.order.indexOf(t),1),e},n.prototype.getWithoutRemoving=function(t){return this.has(t)?this.data[t]:null},n.prototype.remove=function(t){if(!this.has(t))return this;var e=this.data[t];return delete this.data[t],this.onRemove(e),this.order.splice(this.order.indexOf(t),1),this},n.prototype.setMaxSize=function(t){var e=this;for(this.max=t;this.order.length>this.max;){var i=e.get(e.order[0]);i&&e.onRemove(i)}return this},e.exports=n}),{}],217:[(function(t,e,i){\"use strict\";function n(t,e){var i=a(l.API_URL);if(t.protocol=i.protocol,t.authority=i.authority,\"/\"!==i.path&&(t.path=\"\"+i.path+t.path),!l.REQUIRE_ACCESS_TOKEN)return s(t);if(!(e=e||l.ACCESS_TOKEN))throw new Error(\"An API access token is required to use Mapbox GL. \"+c);if(\"s\"===e[0])throw new Error(\"Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). \"+c);return t.params.push(\"access_token=\"+e),s(t)}function r(t){return 0===t.indexOf(\"mapbox:\")}function o(t){for(var e=0;e<t.length;e++)0===t[e].indexOf(\"access_token=tk.\")&&(t[e]=\"access_token=\"+(l.ACCESS_TOKEN||\"\"))}function a(t){var e=t.match(p);if(!e)throw new Error(\"Unable to parse URL object\");return{protocol:e[1],authority:e[2],path:e[3]||\"/\",params:e[4]?e[4].split(\"&\"):[]}}function s(t){var e=t.params.length?\"?\"+t.params.join(\"&\"):\"\";return t.protocol+\"://\"+t.authority+t.path+e}var l=t(\"./config\"),u=t(\"./browser\"),c=\"See https://www.mapbox.com/api-documentation/#access-tokens\";i.isMapboxURL=r,i.normalizeStyleURL=function(t,e){if(!r(t))return t;var i=a(t);return i.path=\"/styles/v1\"+i.path,n(i,e)},i.normalizeGlyphsURL=function(t,e){if(!r(t))return t;var i=a(t);return i.path=\"/fonts/v1\"+i.path,n(i,e)},i.normalizeSourceURL=function(t,e){if(!r(t))return t;var i=a(t);return i.path=\"/v4/\"+i.authority+\".json\",i.params.push(\"secure\"),n(i,e)},i.normalizeSpriteURL=function(t,e,i,o){var l=a(t);return r(t)?(l.path=\"/styles/v1\"+l.path+\"/sprite\"+e+i,n(l,o)):(l.path+=\"\"+e+i,s(l))};var h=/(\\.(png|jpg)\\d*)(?=$)/;i.normalizeTileURL=function(t,e,i){if(!e||!r(e))return t;var n=a(t),l=u.devicePixelRatio>=2||512===i?\"@2x\":\"\",c=u.supportsWebp?\".webp\":\"$1\";return n.path=n.path.replace(h,\"\"+l+c),o(n.params),s(n)};var p=/^(\\w+):\\/\\/([^\\/?]*)(\\/[^?]+)?\\??(.+)?/}),{\"./browser\":202,\"./config\":206}],218:[(function(t,e,i){\"use strict\";var n=t(\"./is_char_in_unicode_block\");e.exports.allowsIdeographicBreaking=function(t){for(var e=0,n=t;e<n.length;e+=1){var r=n[e];if(!i.charAllowsIdeographicBreaking(r.charCodeAt(0)))return!1}return!0},e.exports.allowsVerticalWritingMode=function(t){for(var e=0,n=t;e<n.length;e+=1){var r=n[e];if(i.charHasUprightVerticalOrientation(r.charCodeAt(0)))return!0}return!1},e.exports.allowsLetterSpacing=function(t){for(var e=0,n=t;e<n.length;e+=1){var r=n[e];if(!i.charAllowsLetterSpacing(r.charCodeAt(0)))return!1}return!0},e.exports.charAllowsLetterSpacing=function(t){return!n.Arabic(t)&&!n[\"Arabic Supplement\"](t)&&!n[\"Arabic Extended-A\"](t)&&!n[\"Arabic Presentation Forms-A\"](t)&&!n[\"Arabic Presentation Forms-B\"](t)},e.exports.charAllowsIdeographicBreaking=function(t){return!(t<11904)&&(!!n[\"Bopomofo Extended\"](t)||!!n.Bopomofo(t)||!!n[\"CJK Compatibility Forms\"](t)||!!n[\"CJK Compatibility Ideographs\"](t)||!!n[\"CJK Compatibility\"](t)||!!n[\"CJK Radicals Supplement\"](t)||!!n[\"CJK Strokes\"](t)||!!n[\"CJK Symbols and Punctuation\"](t)||!!n[\"CJK Unified Ideographs Extension A\"](t)||!!n[\"CJK Unified Ideographs\"](t)||!!n[\"Enclosed CJK Letters and Months\"](t)||!!n[\"Halfwidth and Fullwidth Forms\"](t)||!!n.Hiragana(t)||!!n[\"Ideographic Description Characters\"](t)||!!n[\"Kangxi Radicals\"](t)||!!n[\"Katakana Phonetic Extensions\"](t)||!!n.Katakana(t)||!!n[\"Vertical Forms\"](t)||!!n[\"Yi Radicals\"](t)||!!n[\"Yi Syllables\"](t))},i.charHasUprightVerticalOrientation=function(t){return 746===t||747===t||!(t<4352)&&(!!n[\"Bopomofo Extended\"](t)||!!n.Bopomofo(t)||!(!n[\"CJK Compatibility Forms\"](t)||t>=65097&&t<=65103)||!!n[\"CJK Compatibility Ideographs\"](t)||!!n[\"CJK Compatibility\"](t)||!!n[\"CJK Radicals Supplement\"](t)||!!n[\"CJK Strokes\"](t)||!(!n[\"CJK Symbols and Punctuation\"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||!!n[\"CJK Unified Ideographs Extension A\"](t)||!!n[\"CJK Unified Ideographs\"](t)||!!n[\"Enclosed CJK Letters and Months\"](t)||!!n[\"Hangul Compatibility Jamo\"](t)||!!n[\"Hangul Jamo Extended-A\"](t)||!!n[\"Hangul Jamo Extended-B\"](t)||!!n[\"Hangul Jamo\"](t)||!!n[\"Hangul Syllables\"](t)||!!n.Hiragana(t)||!!n[\"Ideographic Description Characters\"](t)||!!n.Kanbun(t)||!!n[\"Kangxi Radicals\"](t)||!!n[\"Katakana Phonetic Extensions\"](t)||!(!n.Katakana(t)||12540===t)||!(!n[\"Halfwidth and Fullwidth Forms\"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!n[\"Small Form Variants\"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||!!n[\"Unified Canadian Aboriginal Syllabics\"](t)||!!n[\"Unified Canadian Aboriginal Syllabics Extended\"](t)||!!n[\"Vertical Forms\"](t)||!!n[\"Yijing Hexagram Symbols\"](t)||!!n[\"Yi Syllables\"](t)||!!n[\"Yi Radicals\"](t))},i.charHasNeutralVerticalOrientation=function(t){return!(!n[\"Latin-1 Supplement\"](t)||167!==t&&169!==t&&174!==t&&177!==t&&188!==t&&189!==t&&190!==t&&215!==t&&247!==t)||!(!n[\"General Punctuation\"](t)||8214!==t&&8224!==t&&8225!==t&&8240!==t&&8241!==t&&8251!==t&&8252!==t&&8258!==t&&8263!==t&&8264!==t&&8265!==t&&8273!==t)||!!n[\"Letterlike Symbols\"](t)||!!n[\"Number Forms\"](t)||!(!n[\"Miscellaneous Technical\"](t)||!(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215))||!(!n[\"Control Pictures\"](t)||9251===t)||!!n[\"Optical Character Recognition\"](t)||!!n[\"Enclosed Alphanumerics\"](t)||!!n[\"Geometric Shapes\"](t)||!(!n[\"Miscellaneous Symbols\"](t)||t>=9754&&t<=9759)||!(!n[\"Miscellaneous Symbols and Arrows\"](t)||!(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243))||!!n[\"CJK Symbols and Punctuation\"](t)||!!n.Katakana(t)||!!n[\"Private Use Area\"](t)||!!n[\"CJK Compatibility Forms\"](t)||!!n[\"Small Form Variants\"](t)||!!n[\"Halfwidth and Fullwidth Forms\"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t},i.charHasRotatedVerticalOrientation=function(t){return!(i.charHasUprightVerticalOrientation(t)||i.charHasNeutralVerticalOrientation(t))}}),{\"./is_char_in_unicode_block\":215}],219:[(function(t,e,i){\"use strict\";var n=t(\"../geo/lng_lat\");e.exports=function(t,e,i){if(t=new n(t.lng,t.lat),e){var r=new n(t.lng-360,t.lat),o=new n(t.lng+360,t.lat),a=i.locationPoint(t).distSqr(e);i.locationPoint(r).distSqr(e)<a?t=r:i.locationPoint(o).distSqr(e)<a&&(t=o)}for(;Math.abs(t.lng-i.center.lng)>180;){var s=i.locationPoint(t);if(s.x>=0&&s.y>=0&&s.x<=i.width&&s.y<=i.height)break;t.lng>i.center.lng?t.lng-=360:t.lng+=360}return t}}),{\"../geo/lng_lat\":58}],220:[(function(t,e,i){\"use strict\";function n(t){var e=JSON.stringify(t);if(d[e])return d[e];var i=void 0===t.alignment?1:t.alignment,n=0,a=0,l=[\"Uint8\"],c=t.members.map((function(t){l.indexOf(t.type)<0&&l.push(t.type);var e=o(t.type),s=n=r(n,Math.max(i,e)),u=t.components||1;return a=Math.max(a,e),n+=e*u,{name:t.name,type:t.type,components:u,offset:s}})),f=r(n,Math.max(a,i)),m=(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e})(h);m.prototype.alignment=i,m.prototype.size=f;for(var _=0,y=c;_<y.length;_+=1)for(var g=y[_],v=0;v<g.components;v++){var x=g.name;if(g.components>1&&(x+=v),x in m.prototype)throw new Error(x+\" is a reserved name and cannot be used as a member name.\");Object.defineProperty(m.prototype,x,u(g,v))}var b=(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e})(p);return b.prototype.members=c,b.prototype.StructType=m,b.prototype.bytesPerElement=f,b.prototype.emplaceBack=s(c,f),b.prototype._usedTypes=l,d[e]=b,b}function r(t,e){return Math.ceil(t/e)*e}function o(t){return c[t].BYTES_PER_ELEMENT}function a(t){return t.toLowerCase()}function s(t,e){for(var i=[],n=[],r=\"var i = this.length;\\nthis.resize(this.length + 1);\\n\",s=0,l=t;s<l.length;s+=1){var u=l[s],c=o(u.type);i.indexOf(c)<0&&(i.push(c),r+=\"var o\"+c.toFixed(0)+\" = i * \"+(e/c).toFixed(0)+\";\\n\");for(var h=0;h<u.components;h++){var p=\"v\"+n.length,d=\"o\"+c.toFixed(0)+\" + \"+(u.offset/c+h).toFixed(0);r+=\"this.\"+a(u.type)+\"[\"+d+\"] = \"+p+\";\\n\",n.push(p)}}return r+=\"return i;\",new Function(n.toString(),r)}function l(t,e){var i=\"this._pos\"+o(t.type).toFixed(0),n=(t.offset/o(t.type)+e).toFixed(0),r=i+\" + \"+n;return\"this._structArray.\"+a(t.type)+\"[\"+r+\"]\"}function u(t,e){var i=l(t,e);return{get:new Function(\"return \"+i+\";\"),set:new Function(\"x\",i+\" = x;\")}}e.exports=n;var c={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},h=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},p=function(t){this.isTransferred=!1,void 0!==t?(this.arrayBuffer=t.arrayBuffer,this.length=t.length,this.capacity=this.arrayBuffer.byteLength/this.bytesPerElement,this._refreshViews()):(this.capacity=-1,this.resize(0))};p.serialize=function(){return{members:this.prototype.members,alignment:this.prototype.StructType.prototype.alignment}},p.prototype.serialize=function(t){return this._trim(),t&&(this.isTransferred=!0,t.push(this.arrayBuffer)),{length:this.length,arrayBuffer:this.arrayBuffer}},p.prototype.get=function(t){return new this.StructType(this,t)},p.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},p.prototype.clear=function(){this.length=0},p.prototype.resize=function(t){if(this.length=t,t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},p.prototype._refreshViews=function(){for(var t=this,e=0,i=t._usedTypes;e<i.length;e+=1){var n=i[e];t[a(n)]=new c[n](t.arrayBuffer)}},p.prototype.toArray=function(t,e){for(var i=this,n=[],r=t;r<e;r++){var o=i.get(r);n.push(o)}return n};var d={}}),{}],221:[(function(t,e,i){\"use strict\";var n=t(\"./browser\"),r=function(t,e){this.frequency=t,this.throttledFunction=e,this.lastInvocation=0};r.prototype.invoke=function(){var t=this;if(!this.pendingInvocation){var e=0===this.lastInvocation?0:this.lastInvocation+this.frequency-n.now();e<=0?(this.lastInvocation=n.now(),this.throttledFunction()):this.pendingInvocation=setTimeout((function(){t.pendingInvocation=void 0,t.lastInvocation=n.now(),t.throttledFunction()}),e)}},r.prototype.stop=function(){this.pendingInvocation&&(clearTimeout(this.pendingInvocation),this.pendingInvocation=void 0)},e.exports=r}),{\"./browser\":202}],222:[(function(t,e,i){\"use strict\";function n(t,e){return e.replace(/{([^{}]+)}/g,(function(e,i){return i in t?String(t[i]):\"\"}))}e.exports=n}),{}],223:[(function(t,e,i){\"use strict\";var n=t(\"@mapbox/unitbezier\"),r=t(\"../geo/coordinate\");t(\"@mapbox/point-geometry\");i.easeCubicInOut=function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,i=e*t;return 4*(t<.5?i:3*(t-e)+i-.75)},i.bezier=function(t,e,i,r){var o=new n(t,e,i,r);return function(t){return o.solve(t)}},i.ease=i.bezier(.25,.1,.25,1),i.clamp=function(t,e,i){return Math.min(i,Math.max(e,t))},i.wrap=function(t,e,i){var n=i-e,r=((t-e)%n+n)%n+e;return r===e?i:r},i.asyncAll=function(t,e,i){if(!t.length)return i(null,[]);var n=t.length,r=new Array(t.length),o=null;t.forEach((function(t,a){e(t,(function(t,e){t&&(o=t),r[a]=e,0==--n&&i(o,r)}))}))},i.values=function(t){var e=[];for(var i in t)e.push(t[i]);return e},i.keysDifference=function(t,e){var i=[];for(var n in t)n in e||i.push(n);return i},i.extend=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];for(var n=0,r=e;n<r.length;n+=1){var o=r[n];for(var a in o)t[a]=o[a]}return t},i.pick=function(t,e){for(var i={},n=0;n<e.length;n++){var r=e[n];r in t&&(i[r]=t[r])}return i};var o=1;i.uniqueId=function(){return o++},i.bindAll=function(t,e){t.forEach((function(t){e[t]&&(e[t]=e[t].bind(e))}))},i.getCoordinatesCenter=function(t){for(var e=1/0,i=1/0,n=-1/0,o=-1/0,a=0;a<t.length;a++)e=Math.min(e,t[a].column),i=Math.min(i,t[a].row),n=Math.max(n,t[a].column),o=Math.max(o,t[a].row);var s=n-e,l=o-i,u=Math.max(s,l),c=Math.max(0,Math.floor(-Math.log(u)/Math.LN2));return new r((e+n)/2,(i+o)/2,0).zoomTo(c)},i.endsWith=function(t,e){return-1!==t.indexOf(e,t.length-e.length)},i.mapObject=function(t,e,i){var n=this,r={};for(var o in t)r[o]=e.call(i||n,t[o],o,t);return r},i.filterObject=function(t,e,i){var n=this,r={};for(var o in t)e.call(i||n,t[o],o,t)&&(r[o]=t[o]);return r},i.deepEqual=function(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!i.deepEqual(t[n],e[n]))return!1;return!0}if(\"object\"==typeof t&&null!==t&&null!==e){if(\"object\"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var r in t)if(!i.deepEqual(t[r],e[r]))return!1;return!0}return t===e},i.clone=function(t){return Array.isArray(t)?t.map(i.clone):\"object\"==typeof t&&t?i.mapObject(t,i.clone):t},i.arraysIntersect=function(t,e){for(var i=0;i<t.length;i++)if(e.indexOf(t[i])>=0)return!0;return!1};var a={};i.warnOnce=function(t){a[t]||(\"undefined\"!=typeof console&&console.warn(t),a[t]=!0)},i.isCounterClockwise=function(t,e,i){return(i.y-t.y)*(e.x-t.x)>(e.y-t.y)*(i.x-t.x)},i.calculateSignedArea=function(t){for(var e=0,i=0,n=t.length,r=n-1,o=void 0,a=void 0;i<n;r=i++)o=t[i],a=t[r],e+=(a.x-o.x)*(o.y+a.y);return e},i.isClosedPolygon=function(t){if(t.length<4)return!1;var e=t[0],n=t[t.length-1];return!(Math.abs(e.x-n.x)>0||Math.abs(e.y-n.y)>0)&&Math.abs(i.calculateSignedArea(t))>.01},i.sphericalToCartesian=function(t){var e=t[0],i=t[1],n=t[2];return i+=90,i*=Math.PI/180,n*=Math.PI/180,[e*Math.cos(i)*Math.sin(n),e*Math.sin(i)*Math.sin(n),e*Math.cos(n)]},i.parseCacheControl=function(t){var e=/(?:^|(?:\\s*\\,\\s*))([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)(?:\\=(?:([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)|(?:\\\"((?:[^\"\\\\]|\\\\.)*)\\\")))?/g,i={};if(t.replace(e,(function(t,e,n,r){var o=n||r;return i[e]=!o||o.toLowerCase(),\"\"})),i[\"max-age\"]){var n=parseInt(i[\"max-age\"],10);isNaN(n)?delete i[\"max-age\"]:i[\"max-age\"]=n}return i}}),{\"../geo/coordinate\":57,\"@mapbox/point-geometry\":2,\"@mapbox/unitbezier\":5}],224:[(function(t,e,i){\"use strict\";var n=function(t,e,i,n){this.type=\"Feature\",this._vectorTileFeature=t,t._z=e,t._x=i,t._y=n,this.properties=t.properties,null!=t.id&&(this.id=t.id)},r={geometry:{}};r.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},r.geometry.set=function(t){this._geometry=t},n.prototype.toJSON=function(){var t=this,e={geometry:this.geometry};for(var i in t)\"_geometry\"!==i&&\"_vectorTileFeature\"!==i&&(e[i]=t[i]);return e},Object.defineProperties(n.prototype,r),e.exports=n}),{}],225:[(function(t,e,i){\"use strict\";var n=t(\"./script_detection\");e.exports=function(t){for(var i=\"\",r=0;r<t.length;r++){var o=t.charCodeAt(r+1)||null,a=t.charCodeAt(r-1)||null;o&&n.charHasRotatedVerticalOrientation(o)&&!e.exports.lookup[t[r+1]]||a&&n.charHasRotatedVerticalOrientation(a)&&!e.exports.lookup[t[r-1]]||!e.exports.lookup[t[r]]?i+=t[r]:i+=e.exports.lookup[t[r]]}return i},e.exports.lookup={\"!\":\"︕\",\"#\":\"＃\",$:\"＄\",\"%\":\"％\",\"&\":\"＆\",\"(\":\"︵\",\")\":\"︶\",\"*\":\"＊\",\"+\":\"＋\",\",\":\"︐\",\"-\":\"︲\",\".\":\"・\",\"/\":\"／\",\":\":\"︓\",\";\":\"︔\",\"<\":\"︿\",\"=\":\"＝\",\">\":\"﹀\",\"?\":\"︖\",\"@\":\"＠\",\"[\":\"﹇\",\"\\\\\":\"＼\",\"]\":\"﹈\",\"^\":\"＾\",_:\"︳\",\"`\":\"｀\",\"{\":\"︷\",\"|\":\"―\",\"}\":\"︸\",\"~\":\"～\",\"¢\":\"￠\",\"£\":\"￡\",\"¥\":\"￥\",\"¦\":\"￤\",\"¬\":\"￢\",\"¯\":\"￣\",\"–\":\"︲\",\"—\":\"︱\",\"‘\":\"﹃\",\"’\":\"﹄\",\"“\":\"﹁\",\"”\":\"﹂\",\"…\":\"︙\",\"‧\":\"・\",\"₩\":\"￦\",\"、\":\"︑\",\"。\":\"︒\",\"〈\":\"︿\",\"〉\":\"﹀\",\"《\":\"︽\",\"》\":\"︾\",\"「\":\"﹁\",\"」\":\"﹂\",\"『\":\"﹃\",\"』\":\"﹄\",\"【\":\"︻\",\"】\":\"︼\",\"〔\":\"︹\",\"〕\":\"︺\",\"〖\":\"︗\",\"〗\":\"︘\",\"！\":\"︕\",\"（\":\"︵\",\"）\":\"︶\",\"，\":\"︐\",\"－\":\"︲\",\"．\":\"・\",\"：\":\"︓\",\"；\":\"︔\",\"＜\":\"︿\",\"＞\":\"﹀\",\"？\":\"︖\",\"［\":\"﹇\",\"］\":\"﹈\",\"＿\":\"︳\",\"｛\":\"︷\",\"｜\":\"―\",\"｝\":\"︸\",\"｟\":\"︵\",\"｠\":\"︶\",\"｡\":\"︒\",\"｢\":\"﹁\",\"｣\":\"﹂\"}}),{\"./script_detection\":218}],226:[(function(t,e,i){\"use strict\";var n=t(\"./web_worker\"),r=function(){this.active={}};r.prototype.acquire=function(e){var i=this;if(!this.workers){var r=t(\"../\").workerCount;for(this.workers=[];this.workers.length<r;)i.workers.push(new n)}return this.active[e]=!0,this.workers.slice()},r.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach((function(t){t.terminate()})),this.workers=null)},e.exports=r}),{\"../\":63,\"./web_worker\":203}]},{},[63])(63)}))}).call(e,i(0))}});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./public/scripts.bundle.js\n// module id = 4\n// module chunks = 1"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;A;;;;;;;;;;;;;AChEA;;;;A","sourceRoot":""}